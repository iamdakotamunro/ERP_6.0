var swfobject,JSON,Base64,X;window.undefined=window.undefined;Ext={version:"3.4.1.1",versionDetail:{major:3,minor:4,patch:1.1}};Ext.apply=function(n,t,i){if(i&&Ext.apply(n,i),n&&t&&typeof t=="object")for(var r in t)n[r]=t[r];return n},function(){function f(){}var it=0,h=Object.prototype.toString,rt=navigator.userAgent.toLowerCase(),n=function(n){return n.test(rt)},r=document,t=r.documentMode,v=r.compatMode=="CSS1Compat",w=n(/opera/),b=n(/\bchrome\b/),k=n(/webkit/),c=!b&&n(/safari/),ut=c&&n(/applewebkit\/4/),ft=c&&n(/version\/3/),et=c&&n(/version\/4/),i=!w&&n(/msie/),l=i&&(n(/msie 7/)&&t!=8&&t!=9&&t!=10||t==7),o=i&&(n(/msie 8/)&&t!=7&&t!=9&&t!=10||t==8),a=i&&(n(/msie 9/)&&t!=7&&t!=8&&t!=10||t==9),ot=i&&(n(/msie 10/)&&t!=7&&t!=8&&t!=9||t==10),s=i&&n(/msie 6/),d=i&&(s||l||o||a),y=!k&&n(/gecko/),st=y&&n(/rv:1\.8/),ht=y&&n(/rv:1\.9/),ct=d&&!v,lt=n(/windows|win32/),at=n(/macintosh|mac os x/),vt=n(/adobeair/),yt=n(/linux/),g=/^https/i.test(window.location.protocol),nt=[],u=[],e=Ext.emptyFn,p=Ext.apply({},{constructor:e,toString:e,valueOf:e}),tt=function(){var n=tt.caller.caller;return n.$owner.prototype[n.$name].apply(this,arguments)};if(p.constructor!==e&&u.push("constructor"),p.toString!==e&&u.push("toString"),p.valueOf!==e&&u.push("valueOf"),u.length||(u=null),Ext.apply(f,{$isClass:!0,callParent:function(n){var t;return(t=this.callParent.caller)&&(t.$previous||(t=t.$owner?t:t.caller)&&t.$owner.superclass.self[t.$name]).apply(this,n||nt)}}),f.prototype={constructor:function(){},callParent:function(n){var t,i=(t=this.callParent.caller)&&(t.$previous||(t=t.$owner?t:t.caller)&&t.$owner.superclass[t.$name]);return i.apply(this,n||nt)}},s)try{r.execCommand("BackgroundImageCache",!1,!0)}catch(pt){}Ext.apply(Ext,{SSL_SECURE_URL:g&&i?'javascript:""':"about:blank",isStrict:v,isSecure:g,isReady:!1,enableForcedBoxModel:!1,enableGarbageCollector:!0,enableListenerCollection:!1,enableNestedListenerRemoval:!1,USE_NATIVE_JSON:!1,applyIf:function(n,t){if(n)for(var i in t)Ext.isDefined(n[i])||(n[i]=t[i]);return n},id:function(n,t){return n=Ext.getDom(n,!0)||{},n.id||(n.id=(t||"ext-gen")+ ++it),n.id},extend:function(){var t=function(n){for(var t in n)this[t]=n[t]},n=Object.prototype.constructor;return function(i,r,u){typeof r=="object"&&(u=r,r=i,i=u.constructor!=n?u.constructor:function(){r.apply(this,arguments)});var o=function(){},f,e=r.prototype;return o.prototype=e,f=i.prototype=new o,f.constructor=i,i.superclass=e,e.constructor==n&&(e.constructor=r),i.override=function(n){Ext.override(i,n)},f.superclass=f.supr=function(){return e},f.override=t,Ext.override(i,u),i.extend=function(n){return Ext.extend(i,n)},i}}(),global:function(){return this}(),Base:f,namespaceCache:{},createNamespace:function(n,t){var s=Ext.namespaceCache,f=t?n.substring(0,n.lastIndexOf(".")):n,i=s[f],r,h,u,e,o;if(!i&&(i=Ext.global,f))for(o=[],e=f.split("."),r=0,h=e.length;r<h;++r)u=e[r],i=i[u]||(i[u]={}),o.push(u),s[o.join(".")]=i;return i},getClassByName:function(n){for(var r=n.split("."),t=Ext.global,u=r.length,i=0;t&&i<u;++i)t=t[r[i]];return t||null},addMembers:function(n,t,i,r){var o,f,e;for(f in i)i.hasOwnProperty(f)&&(e=i[f],typeof e=="function"&&(e.$owner=n,e.$name=f),t[f]=e);if(r&&u)for(o=u.length;o-->0;)f=u[o],i.hasOwnProperty(f)&&(e=i[f],typeof e=="function"&&(e.$owner=n,e.$name=f),t[f]=e)},define:function(n,t,i){var e=t.override,r,u,o,s;return e?(delete t.override,r=Ext.getClassByName(e),Ext.override(r,t)):(n&&(s=Ext.createNamespace(n,!0),o=n.substring(n.lastIndexOf(".")+1)),r=function(){this.constructor.apply(this,arguments)},n&&(r.displayName=n),r.$isClass=!0,r.callParent=Ext.Base.callParent,typeof t=="function"&&(t=t(r)),u=t.extend,u?(delete t.extend,typeof u=="string"&&(u=Ext.getClassByName(u))):u=f,Ext.extend(r,u,t),r.prototype.constructor===r&&delete r.prototype.constructor,r.prototype.$isClass||Ext.applyIf(r.prototype,f.prototype),r.prototype.self=r,t.xtype&&Ext.reg(t.xtype,r),r=t.singleton?new r:r,n&&(s[o]=r)),i&&i.call(r),r},override:function(n,t){var o,e,u,i,r;if(t)if(n.$isClass)e=t.statics,e&&delete t.statics,Ext.addMembers(n,n.prototype,t,!0),e&&Ext.addMembers(n,n,e);else if(typeof n=="function")o=n.prototype,Ext.apply(o,t),Ext.isIE&&t.hasOwnProperty("toString")&&(o.toString=t.toString);else if(u=n.self,u&&u.$isClass)for(i in t)t.hasOwnProperty(i)&&(r=t[i],typeof r=="function"&&(u.$className&&(r.displayName=u.$className+"#"+i),r.$name=i,r.$owner=u,r.$previous=n.hasOwnProperty(i)?n[i]:tt),n[i]=r);else Ext.apply(n,t),n.constructor.$isClass||(n.constructor.prototype.callParent=f.prototype.callParent,n.constructor.callParent=f.callParent)},namespace:function(){for(var e=arguments.length,i=0,f,t,o,r,u,n;i<e;++i)for(o=arguments[i],r=arguments[i].split("."),n=window[r[0]],n===undefined&&(n=window[r[0]]={}),u=r.slice(1),f=u.length,t=0;t<f;++t)n=n[u[t]]=n[u[t]]||{};return n},urlEncode:function(n,t){var i,r=[],u=encodeURIComponent;return Ext.iterate(n,function(n,t){i=Ext.isEmpty(t);Ext.each(i?n:t,function(t){r.push("&",u(n),"=",!Ext.isEmpty(t)&&(t!=n||!i)?Ext.isDate(t)?Ext.encode(t).replace(/"/g,""):u(t):"")})}),t||(r.shift(),t=""),t+r.join("")},urlDecode:function(n,t){if(Ext.isEmpty(n))return{};var i={},e=n.split("&"),f=decodeURIComponent,r,u;return Ext.each(e,function(n){n=n.split("=");r=f(n[0]);u=f(n[1]);i[r]=t||!i[r]?u:[].concat(i[r]).concat(u)}),i},urlAppend:function(n,t){return Ext.isEmpty(t)?n:n+(n.indexOf("?")===-1?"?":"&")+t},toArray:function(){return i?function(n,t,i,r){r=[];for(var u=0,f=n.length;u<f;u++)r.push(n[u]);return r.slice(t||0,i||r.length)}:function(n,t,i){return Array.prototype.slice.call(n,t||0,i||n.length)}}(),isIterable:function(n){return Ext.isArray(n)||n.callee?!0:/NodeList|HTMLCollection/.test(h.call(n))?!0:(typeof n.nextNode!="undefined"||n.item)&&Ext.isNumber(n.length)},each:function(n,t,i){if(!Ext.isEmpty(n,!0)){(!Ext.isIterable(n)||Ext.isPrimitive(n))&&(n=[n]);for(var r=0,u=n.length;r<u;r++)if(t.call(i||n[r],n[r],r,n)===!1)return r}},iterate:function(n,t,i){if(!Ext.isEmpty(n)){if(Ext.isIterable(n)){Ext.each(n,t,i);return}if(typeof n=="object")for(var r in n)if(n.hasOwnProperty(r)&&t.call(i||n,r,n[r],n)===!1)return}},getDom:function(n,t){if(!n||!r)return null;if(n.dom)return n.dom;if(typeof n=="string"){var u=r.getElementById(n);return u&&i&&t?n==u.getAttribute("id")?u:null:u}return n},getBody:function(){return Ext.get(r.body||r.documentElement)},getHead:function(){var n;return function(){return n==undefined&&(n=Ext.get(r.getElementsByTagName("head")[0])),n}}(),removeNode:i&&!o?function(){var n;return function(t){t&&t.tagName!="BODY"&&(Ext.enableNestedListenerRemoval?Ext.EventManager.purgeElement(t,!0):Ext.EventManager.removeAll(t),n=n||r.createElement("div"),n.appendChild(t),n.innerHTML="",delete Ext.elCache[t.id])}}():function(n){n&&n.parentNode&&n.tagName!="BODY"&&(Ext.enableNestedListenerRemoval?Ext.EventManager.purgeElement(n,!0):Ext.EventManager.removeAll(n),n.parentNode.removeChild(n),delete Ext.elCache[n.id])},isEmpty:function(n,t){return n===null||n===undefined||Ext.isArray(n)&&!n.length||(t?!1:n==="")},isArray:function(n){return h.apply(n)==="[object Array]"},isDate:function(n){return h.apply(n)==="[object Date]"},isObject:function(n){return!!n&&Object.prototype.toString.call(n)==="[object Object]"},isPrimitive:function(n){return Ext.isString(n)||Ext.isNumber(n)||Ext.isBoolean(n)},isFunction:function(n){return h.apply(n)==="[object Function]"},isNumber:function(n){return typeof n=="number"&&isFinite(n)},isString:function(n){return typeof n=="string"},isBoolean:function(n){return typeof n=="boolean"},isElement:function(n){return n?!!n.tagName:!1},isDefined:function(n){return typeof n!="undefined"},isOpera:w,isWebKit:k,isChrome:b,isSafari:c,isSafari3:ft,isSafari4:et,isSafari2:ut,isIE:i,isIE6:s,isIE7:l,isIE8:o,isIE9:a,isIE10:ot,isIE9m:d,isIE10p:i&&!(s||l||o||a),isIEQuirks:i&&!v&&(s||l||o||a),isGecko:y,isGecko2:st,isGecko3:ht,isBorderBox:ct,isLinux:yt,isWindows:lt,isMac:at,isAir:vt});Ext.ns=Ext.namespace}();Ext.ns("Ext.util","Ext.lib","Ext.data","Ext.supports");Ext.elCache={};Ext.apply(Function.prototype,{createInterceptor:function(n,t){var i=this;return Ext.isFunction(n)?function(){var r=this,u=arguments;return n.target=r,n.method=i,n.apply(t||r||window,u)!==!1?i.apply(r||window,u):null}:this},createCallback:function(){var n=arguments,t=this;return function(){return t.apply(window,n)}},createDelegate:function(n,t,i){var r=this;return function(){var u=t||arguments,f;return i===!0?(u=Array.prototype.slice.call(arguments,0),u=u.concat(t)):Ext.isNumber(i)&&(u=Array.prototype.slice.call(arguments,0),f=[i,0].concat(t),Array.prototype.splice.apply(u,f)),r.apply(n||window,u)}},defer:function(n,t,i,r){var u=this.createDelegate(t,i,r);return n>0?setTimeout(u,n):(u(),0)}});Ext.applyIf(String,{format:function(n){var t=Ext.toArray(arguments,1);return n.replace(/\{(\d+)\}/g,function(n,i){return t[i]})}});Ext.applyIf(Array.prototype,{indexOf:function(n,t){var i=this.length;for(t=t||0,t+=t<0?i:0;t<i;++t)if(this[t]===n)return t;return-1},remove:function(n){var t=this.indexOf(n);return t!=-1&&this.splice(t,1),this}});Ext.util.TaskRunner=function(n){n=n||10;var t=[],i=[],r=0,u=!1,e=function(){u=!1;clearInterval(r);r=0},o=function(){u||(u=!0,r=setInterval(s,n))},f=function(n){i.push(n);n.onStop&&n.onStop.apply(n.scope||n)},s=function(){var o=i.length,u=(new Date).getTime(),r,n,s,h,c;if(o>0){for(r=0;r<o;r++)t.remove(i[r]);if(i=[],t.length<1){e();return}}for(r=0,c=t.length;r<c;++r){if(n=t[r],s=u-n.taskRunTime,n.interval<=s&&(h=n.run.apply(n.scope||n,n.args||[++n.taskRunCount]),n.taskRunTime=u,h===!1||n.taskRunCount===n.repeat)){f(n);return}n.duration&&n.duration<=u-n.taskStartTime&&f(n)}};this.start=function(n){return t.push(n),n.taskStartTime=(new Date).getTime(),n.taskRunTime=0,n.taskRunCount=0,o(),n};this.stop=function(n){return f(n),n};this.stopAll=function(){e();for(var n=0,r=t.length;n<r;n++)t[n].onStop&&t[n].onStop();t=[];i=[]}};Ext.TaskMgr=new Ext.util.TaskRunner,function(){function n(n){return t||(t=new Ext.Element.Flyweight),t.dom=n,t}var t;if(function(){var t=document,r=t.compatMode=="CSS1Compat",u=Math.max,f=Math.round,i=parseInt;Ext.lib.Dom={isAncestor:function(n,t){var i=!1;if(n=Ext.getDom(n),t=Ext.getDom(t),n&&t){if(n.contains)return n.contains(t);if(n.compareDocumentPosition)return!!(n.compareDocumentPosition(t)&16);while(t=t.parentNode)i=t==n||i}return i},getViewWidth:function(n){return n?this.getDocumentWidth():this.getViewportWidth()},getViewHeight:function(n){return n?this.getDocumentHeight():this.getViewportHeight()},getDocumentHeight:function(){return u(r?t.documentElement.scrollHeight:t.body.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return u(r?t.documentElement.scrollWidth:t.body.scrollWidth,this.getViewportWidth())},getViewportHeight:function(){return Ext.isIE9m?Ext.isStrict?t.documentElement.clientHeight:t.body.clientHeight:self.innerHeight},getViewportWidth:function(){return!Ext.isStrict&&!Ext.isOpera?t.body.clientWidth:Ext.isIE9m?t.documentElement.clientWidth:self.innerWidth},getY:function(n){return this.getXY(n)[1]},getX:function(n){return this.getXY(n)[0]},getXY:function(r){var u,s,l,p,w,a,e=0,o=0,v,h,c=t.body||t.documentElement,y=[0,0];if(r=Ext.getDom(r),r!=c)if(r.getBoundingClientRect)l=r.getBoundingClientRect(),v=n(document).getScroll(),y=[f(l.left+v.left),f(l.top+v.top)];else{for(u=r,h=n(r).isStyle("position","absolute");u;)s=n(u),e+=u.offsetLeft,o+=u.offsetTop,h=h||s.isStyle("position","absolute"),Ext.isGecko&&(o+=p=i(s.getStyle("borderTopWidth"),10)||0,e+=w=i(s.getStyle("borderLeftWidth"),10)||0,u==r||s.isStyle("overflow","visible")||(e+=w,o+=p)),u=u.offsetParent;for(Ext.isSafari&&h&&(e-=c.offsetLeft,o-=c.offsetTop),Ext.isGecko&&!h&&(a=n(c),e+=i(a.getStyle("borderLeftWidth"),10)||0,o+=i(a.getStyle("borderTopWidth"),10)||0),u=r.parentNode;u&&u!=c;)Ext.isOpera&&(u.tagName=="TR"||n(u).isStyle("display","inline"))||(e-=u.scrollLeft,o-=u.scrollTop),u=u.parentNode;y=[e,o]}return y},setXY:function(n,t){(n=Ext.fly(n,"_setXY")).position();var r=n.translatePoints(t),u=n.dom.style,i;for(i in r)isNaN(r[i])||(u[i]=r[i]+"px")},setX:function(n,t){this.setXY(n,[t,!1])},setY:function(n,t){this.setXY(n,[!1,t])}}}(),Ext.lib.Event=function(){function d(n){return!ft(n.currentTarget,t.getRelatedTarget(n))}function ft(n,t){if(n&&n.firstChild)while(t){if(t===n)return!0;t=t.parentNode;t&&t.nodeType!=1&&(t=null)}return!1}function g(){var c=!1,l=[],t,i,n,o,a=!s||u>0;if(!h){for(h=!0,i=0;i<f.length;++i)n=f[i],n&&(t=r.getElementById(n.id))&&(!n.checkReady||s||t.nextSibling||r&&r.body?(o=n.override,t=o?o===!0?n.obj:o:t,n.fn.call(t,n.obj),f.remove(n),--i):l.push(n));u=l.length===0?0:u-1;a?nt():(clearInterval(e),e=null);c=!(h=!1)}return c}function nt(){if(!e){var n=function(){g()};e=setInterval(n,rt)}}function et(){var n=r.documentElement,t=r.body;return n&&(n[a]||n[l])?[n[l],n[a]]:t?[t[l],t[a]]:[0,0]}function tt(n,t){n=n.browserEvent||n;var i=n["page"+t];return i||i===0||(i=n["client"+t]||0,Ext.isIE&&(i+=et()[t=="X"?0:1])),i}var s=!1,i={},u=0,f=[],e,h=!1,n=window,r=document,it=200,rt=20,ut=0,p=1,w=2,c=3,l="scrollLeft",a="scrollTop",o="unload",b="mouseover",k="mouseout",v=function(){return n.addEventListener?function(n,t,i,r){return t=="mouseenter"?(i=i.createInterceptor(d),n.addEventListener(b,i,r)):t=="mouseleave"?(i=i.createInterceptor(d),n.addEventListener(k,i,r)):n.addEventListener(t,i,r),i}:n.attachEvent?function(n,t,i){return n.attachEvent("on"+t,i),i}:function(){}}(),y=function(){return n.removeEventListener?function(n,t,i,r){t=="mouseenter"?t=b:t=="mouseleave"&&(t=k);n.removeEventListener(t,i,r)}:n.detachEvent?function(n,t,i){n.detachEvent("on"+t,i)}:function(){}}(),t={extAdapter:!0,onAvailable:function(n,t,i,r){f.push({id:n,fn:t,obj:i,override:r,checkReady:!1});u=it;nt()},addListener:function(n,t,r){return(n=Ext.getDom(n),n&&r)?t==o?(i[n.id]===undefined&&(i[n.id]=[]),i[n.id].push([t,r]),r):v(n,t,r,!1):!1},removeListener:function(n,t,r){n=Ext.getDom(n);var u,s,f,e;if(n&&r){if(t==o){if((e=i[n.id])!==undefined)for(u=0,s=e.length;u<s;u++)(f=e[u])&&f[ut]==t&&f[p]==r&&i[n.id].splice(u,1);return}y(n,t,r,!1)}},getTarget:function(n){return n=n.browserEvent||n,this.resolveTextNode(n.target||n.srcElement)},resolveTextNode:Ext.isGecko?function(n){if(n){var t=HTMLElement.prototype.toString.call(n);if(t!="[xpconnect wrapped native prototype]"&&t!="[object XULElement]")return n.nodeType==3?n.parentNode:n}}:function(n){return n&&n.nodeType==3?n.parentNode:n},getRelatedTarget:function(n){return n=n.browserEvent||n,this.resolveTextNode(n.relatedTarget||(/(mouseout|mouseleave)/.test(n.type)?n.toElement:/(mouseover|mouseenter)/.test(n.type)?n.fromElement:null))},getPageX:function(n){return tt(n,"X")},getPageY:function(n){return tt(n,"Y")},getXY:function(n){return[this.getPageX(n),this.getPageY(n)]},stopEvent:function(n){this.stopPropagation(n);this.preventDefault(n)},stopPropagation:function(n){n=n.browserEvent||n;n.stopPropagation?n.stopPropagation():n.cancelBubble=!0},preventDefault:function(n){n=n.browserEvent||n;n.preventDefault?n.preventDefault():(n.keyCode&&(n.keyCode=0),n.returnValue=!1)},getEvent:function(t){if(t=t||n.event,!t)for(var i=this.getEvent.caller;i;){if(t=i.arguments[0],t&&Event==t.constructor)break;i=i.caller}return t},getCharCode:function(n){return n=n.browserEvent||n,n.charCode||n.keyCode||0},getListeners:function(n,t){Ext.EventManager.getListeners(n,t)},purgeElement:function(n,t,i){Ext.EventManager.purgeElement(n,t,i)},_load:function(t){s=!0;Ext.isIE9m&&t!==!0&&y(n,"load",arguments.callee)},_unload:function(t){var e=Ext.lib.Event,u,r,f,s,h,l;for(s in i)for(f=i[s],u=0,h=f.length;u<h;u++)if(r=f[u],r)try{l=r[c]?r[c]===!0?r[w]:r[c]:n;r[p].call(l,e.getEvent(t),r[w])}catch(a){}Ext.EventManager._unload();y(n,o,e._unload)}};return t.on=t.addListener,t.un=t.removeListener,r&&r.body?t._load(!0):v(n,"load",t._load),v(n,o,t._unload),g(),t}(),Ext.lib.Ajax=function(){function o(t){function f(n,t){for(i in t)t.hasOwnProperty(i)&&n.setRequestHeader(i,t[i])}var u=t.conn,i,r={};Ext.apply(r,n.headers,n.defaultHeaders);f(u,r);delete n.headers}function s(n,t,i,r){return{tId:n,status:i?-1:0,statusText:i?"transaction aborted":"communication failure",isAbort:i,isTimeout:r,argument:t}}function i(t,i){(n.headers=n.headers||{})[t]=i}function u(n,t){var f={},u,r=n.conn,i,e,o=r.status==1223;try{u=n.conn.getAllResponseHeaders();Ext.each(u.replace(/\r\n/g,"\n").split("\n"),function(n){i=n.indexOf(":");i>=0&&(e=n.substr(0,i).toLowerCase(),n.charAt(i+1)==" "&&++i,f[e]=n.substr(i+1))})}catch(s){}return{tId:n.tId,status:o?204:r.status,statusText:o?"No Content":r.statusText,getResponseHeader:function(n){return f[n.toLowerCase()]},getAllResponseHeaders:function(){return u},responseText:r.responseText,responseXML:r.responseXML,argument:t}}function f(t){t.tId&&(n.conn[t.tId]=null);t.conn=null;t=null}function e(n,t,i,r){if(!t){f(n);return}var o,e;try{o=n.conn.status!==undefined&&n.conn.status!=0?n.conn.status:13030}catch(h){o=13030}if(o>=200&&o<300||Ext.isIE&&o==1223)e=u(n,t.argument),t.success&&(t.scope?t.success.apply(t.scope,[e]):t.success(e));else switch(o){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:e=s(n.tId,t.argument,i?i:!1,r);t.failure&&(t.scope?t.failure.apply(t.scope,[e]):t.failure(e));break;default:e=u(n,t.argument);t.failure&&(t.scope?t.failure.apply(t.scope,[e]):t.failure(e))}f(n);e=null}function h(t,i,r,u,f,o){r&&r.readyState==4&&(clearInterval(f[u]),f[u]=null,o&&(clearTimeout(n.timeout[u]),n.timeout[u]=null),e(t,i))}function c(t,i){n.abort(t,i,!0)}function l(t,i){i=i||{};var f=t.conn,r=t.tId,e=n.poll,u=i.timeout||null;u&&(n.conn[r]=f,n.timeout[r]=setTimeout(c.createCallback(t,i),u));e[r]=setInterval(h.createCallback(t,i,f,r,e,u),n.pollInterval)}function a(r,u,f,e){var s=v()||null;return s&&(s.conn.open(r,u,!0),n.useDefaultXhrHeader&&i("X-Requested-With",n.defaultXhrHeader),e&&n.useDefaultHeader&&(!n.headers||!n.headers[t])&&i(t,n.defaultPostHeader),(n.defaultHeaders||n.headers)&&o(s),l(s,f),s.conn.send(e||null)),s}function v(){var t;try{(t=y(n.transactionId))&&n.transactionId++}catch(i){}finally{return t}}function y(n){var i,t;try{i=new XMLHttpRequest}catch(u){for(t=Ext.isIE6?1:0;t<r.length;++t)try{i=new ActiveXObject(r[t]);break}catch(u){}}finally{return{conn:i,tId:n}}}var r=["Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP"],t="Content-Type",n={request:function(n,r,u,f,e){if(e){var c=this,s=e.xmlData,o=e.jsonData,h;Ext.applyIf(c,e);(s||o)&&(h=c.headers,h&&h[t]||i(t,s?"text/xml":"application/json"),f=s||(Ext.isPrimitive(o)?o:Ext.encode(o)))}return a(n||e.method||"POST",r,u,f)},serializeForm:function(n){var o=n.elements||(document.forms[n]||Ext.getDom(n)).elements,f=!1,i=encodeURIComponent,r,u="",t,e;return Ext.each(o,function(n){r=n.name;t=n.type;!n.disabled&&r&&(/select-(one|multiple)/i.test(t)?Ext.each(n.options,function(n){n.selected&&(e=n.hasAttribute?n.hasAttribute("value"):n.getAttributeNode("value").specified,u+=String.format("{0}={1}&",i(r),i(e?n.value:n.text)))}):/file|undefined|reset|button/i.test(t)||/radio|checkbox/i.test(t)&&!n.checked||t=="submit"&&f||(u+=i(r)+"="+i(n.value)+"&",f=/submit/i.test(t)))}),u.substr(0,u.length-1)},useDefaultHeader:!0,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest",poll:{},timeout:{},conn:{},pollInterval:50,transactionId:0,abort:function(t,i,r){var u=this,f=t.tId,o=!1;return u.isCallInProgress(t)&&(t.conn.abort(),clearInterval(u.poll[f]),u.poll[f]=null,clearTimeout(n.timeout[f]),u.timeout[f]=null,e(t,i,o=!0,r)),o},isCallInProgress:function(n){return n.conn&&!{0:!0,4:!0}[n.conn.readyState]}};return n}(),function(){var n=Ext.lib,r=/width|height|opacity|padding/i,u=/^((width|height)|(top|left))$/,f=/width|height|top$|bottom$|left$|right$/i,e=/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i,t=function(n){return typeof n!="undefined"},i=function(){return new Date};n.Anim={motion:function(n,t,i,r,u,f){return this.run(n,t,i,r,u,f,Ext.lib.Motion)},run:function(n,t,i,r,u,f,e){e=e||Ext.lib.AnimBase;typeof r=="string"&&(r=Ext.lib.Easing[r]);var o=new e(n,t,i,r);return o.animateX(function(){Ext.isFunction(u)&&u.call(f)}),o}};n.AnimBase=function(n,t,i,r){n&&this.init(n,t,i,r)};n.AnimBase.prototype={doMethod:function(n,t,i){var r=this;return r.method(r.curFrame,t,i-t,r.totalFrames)},setAttr:function(n,t,i){r.test(n)&&t<0&&(t=0);Ext.fly(this.el,"_anim").setStyle(n,t+i)},getAttr:function(n){var i=Ext.fly(this.el),r=i.getStyle(n),t=u.exec(n)||[];return r!=="auto"&&!e.test(r)?parseFloat(r):!!t[2]||i.getStyle("position")=="absolute"&&!!t[3]?i.dom["offset"+t[0].charAt(0).toUpperCase()+t[0].substr(1)]:0},getDefaultUnit:function(n){return f.test(n)?"px":""},animateX:function(n,t){var i=this,r=function(){i.onComplete.removeListener(r);Ext.isFunction(n)&&n.call(t||i,i)};i.onComplete.addListener(r,i);i.animate()},setRunAttr:function(n){var s=this,f=this.attributes[n],o=f.to,e=f.by,h=f.from,c=f.unit,a=this.runAttrs[n]={},u,i,r,l;if(!t(o)&&!t(e))return!1;if(i=t(h)?h:s.getAttr(n),t(o))u=o;else if(t(e))if(Ext.isArray(i))for(u=[],r=0,l=i.length;r<l;r++)u[r]=i[r]+e[r];else u=i+e;Ext.apply(a,{start:i,end:u,unit:t(c)?c:s.getDefaultUnit(n)})},init:function(t,r,u,f){var e=this,o=0,s=n.AnimMgr;Ext.apply(e,{isAnimated:!1,startTime:null,el:Ext.getDom(t),attributes:r||{},duration:u||1,method:f||n.Easing.easeNone,useSec:!0,curFrame:0,totalFrames:s.fps,runAttrs:{},animate:function(){var n=this,t=n.duration;if(n.isAnimated)return!1;n.curFrame=0;n.totalFrames=n.useSec?Math.ceil(s.fps*t):t;s.registerElement(n)},stop:function(n){var t=this;n&&(t.curFrame=t.totalFrames,t._onTween.fire());s.stop(t)}});var h=function(){var n=this,t;n.onStart.fire();n.runAttrs={};for(t in this.attributes)this.setRunAttr(t);n.isAnimated=!0;n.startTime=i();o=0},c=function(){var t=this,r,n;t.onTween.fire({duration:i()-t.startTime,curFrame:t.curFrame});r=t.runAttrs;for(n in r)this.setAttr(n,t.doMethod(n,r[n].start,r[n].end),r[n].unit);++o},l=function(){var n=this,t=(i()-n.startTime)/1e3,r={duration:t,frames:o,fps:o/t};n.isAnimated=!1;o=0;n.onComplete.fire(r)};e.onStart=new Ext.util.Event(e);e.onTween=new Ext.util.Event(e);e.onComplete=new Ext.util.Event(e);(e._onStart=new Ext.util.Event(e)).addListener(h);(e._onTween=new Ext.util.Event(e)).addListener(c);(e._onComplete=new Ext.util.Event(e)).addListener(l)}};Ext.lib.AnimMgr=new function(){var t=this,r=null,n=[],u=0,f,e;Ext.apply(t,{fps:1e3,delay:1,registerElement:function(i){n.push(i);++u;i._onStart.fire();t.start()},unRegister:function(i,r){i._onComplete.fire();r=r||f(i);r!=-1&&n.splice(r,1);--u<=0&&t.stop()},start:function(){r===null&&(r=setInterval(t.run,t.delay))},stop:function(i){if(i)t.unRegister(i);else{clearInterval(r);for(var f=0,e=n.length;f<e;++f)n[0].isAnimated&&t.unRegister(n[0],0);n=[];r=null;u=0}},run:function(){for(var u,i,r=0,f=n.length;r<f;r++)i=n[r],i&&i.isAnimated&&(u=i.totalFrames,i.curFrame<u||u===null?(++i.curFrame,i.useSec&&e(i),i._onTween.fire()):t.stop(i))}});f=function(t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1};e=function(n){var r=n.totalFrames,u=n.curFrame,f=n.duration,o=u*f*1e3/r,e=i()-n.startTime,t=0;t=e<f*1e3?Math.round((e/o-1)*u):r-(u+1);t>0&&isFinite(t)&&(n.curFrame+t>=r&&(t=r-(u+1)),n.curFrame+=t)}};n.Bezier=new function(){this.getPosition=function(n,t){for(var f=n.length,r=[],e=1-t,u,i=0;i<f;++i)r[i]=[n[i][0],n[i][1]];for(u=1;u<f;++u)for(i=0;i<f-u;++i)r[i][0]=e*r[i][0]+t*r[parseInt(i+1,10)][0],r[i][1]=e*r[i][1]+t*r[parseInt(i+1,10)][1];return[r[0][0],r[0][1]]}};n.Easing={easeNone:function(n,t,i,r){return i*n/r+t},easeIn:function(n,t,i,r){return i*(n/=r)*n+t},easeOut:function(n,t,i,r){return-i*(n/=r)*(n-2)+t}},function(){var i,r,u;n.Motion=function(t,i,r,u){t&&n.Motion.superclass.constructor.call(this,t,i,r,u)};Ext.extend(n.Motion,Ext.lib.AnimBase);i=n.Motion.superclass;r=/^points$/i;Ext.apply(n.Motion.prototype,{setAttr:function(n,t,u){var f=this,e=i.setAttr;r.test(n)?(u=u||"px",e.call(f,"left",t[0],u),e.call(f,"top",t[1],u)):e.call(f,n,t,u)},getAttr:function(n){var t=this,u=i.getAttr;return r.test(n)?[u.call(t,"left"),u.call(t,"top")]:u.call(t,n)},doMethod:function(t,u,f){var e=this;return r.test(t)?n.Bezier.getPosition(e.runAttrs[t],e.method(e.curFrame,0,100,e.totalFrames)/100):i.doMethod.call(e,t,u,f)},setRunAttr:function(f){if(r.test(f)){var a=this,v=this.el,c=this.attributes.points,e=c.control||[],w=c.from,b=c.to,y=c.by,k=n.Dom,s,o,p,l,h;if(e.length>0&&!Ext.isArray(e[0])&&(e=[e]),Ext.fly(v,"_anim").position(),k.setXY(v,t(w)?w:k.getXY(v)),s=a.getAttr("points"),t(b))for(p=u.call(a,b,s),o=0,l=e.length;o<l;++o)e[o]=u.call(a,e[o],s);else if(t(y))for(p=[s[0]+y[0],s[1]+y[1]],o=0,l=e.length;o<l;++o)e[o]=[s[0]+e[o][0],s[1]+e[o][1]];h=this.runAttrs[f]=[s];e.length>0&&(h=h.concat(e));h[h.length]=p}else i.setRunAttr.call(this,f)}});u=function(t,i){var r=n.Dom.getXY(this.el);return[t[0]-r[0]+i[0],t[1]-r[1]+i[1]]}}()}(),function(){var u=Math.abs,n=Math.PI,f=Math.asin,t=Math.pow,i=Math.sin,r=Ext.lib;Ext.apply(r.Easing,{easeBoth:function(n,t,i,r){return(n/=r/2)<1?i/2*n*n+t:-i/2*(--n*(n-2)-1)+t},easeInStrong:function(n,t,i,r){return i*(n/=r)*n*n*n+t},easeOutStrong:function(n,t,i,r){return-i*((n=n/r-1)*n*n*n-1)+t},easeBothStrong:function(n,t,i,r){return(n/=r/2)<1?i/2*n*n*n*n+t:-i/2*((n-=2)*n*n*n-2)+t},elasticIn:function(r,e,o,s,h,c){if(r==0||(r/=s)==1)return r==0?e:e+o;c=c||s*.3;var l;return h>=u(o)?l=c/(2*n)*f(o/h):(h=o,l=c/4),-(h*t(2,10*(r-=1))*i((r*s-l)*2*n/c))+e},elasticOut:function(r,e,o,s,h,c){if(r==0||(r/=s)==1)return r==0?e:e+o;c=c||s*.3;var l;return h>=u(o)?l=c/(2*n)*f(o/h):(h=o,l=c/4),h*t(2,-10*r)*i((r*s-l)*2*n/c)+o+e},elasticBoth:function(r,e,o,s,h,c){if(r==0||(r/=s/2)==2)return r==0?e:e+o;c=c||s*.3*1.5;var l;return h>=u(o)?l=c/(2*n)*f(o/h):(h=o,l=c/4),r<1?-.5*h*t(2,10*(r-=1))*i((r*s-l)*2*n/c)+e:h*t(2,-10*(r-=1))*i((r*s-l)*2*n/c)*.5+o+e},backIn:function(n,t,i,r,u){return u=u||1.70158,i*(n/=r)*n*((u+1)*n-u)+t},backOut:function(n,t,i,r,u){return u||(u=1.70158),i*((n=n/r-1)*n*((u+1)*n+u)+1)+t},backBoth:function(n,t,i,r,u){return u=u||1.70158,(n/=r/2)<1?i/2*n*n*(((u*=1.525)+1)*n-u)+t:i/2*((n-=2)*n*(((u*=1.525)+1)*n+u)+2)+t},bounceIn:function(n,t,i,u){return i-r.Easing.bounceOut(u-n,0,i,u)+t},bounceOut:function(n,t,i,r){return(n/=r)<1/2.75?i*7.5625*n*n+t:n<2/2.75?i*(7.5625*(n-=1.5/2.75)*n+.75)+t:n<2.5/2.75?i*(7.5625*(n-=2.25/2.75)*n+.9375)+t:i*(7.5625*(n-=2.625/2.75)*n+.984375)+t},bounceBoth:function(n,t,i,u){return n<u/2?r.Easing.bounceIn(n*2,0,i,u)*.5+t:r.Easing.bounceOut(n*2-u,0,i,u)*.5+i*.5+t}})}(),function(){function r(n){var r=parseInt,i,u=null,t;return n.length==3?n:(Ext.each([o,e,s],function(f,e){return i=e%2==0?16:10,t=f.exec(n),t&&t.length==4?(u=[r(t[1],i),r(t[2],i),r(t[3],i)],!1):void 0}),u)}var n=Ext.lib;n.Anim.color=function(t,i,r,u,f,e){return n.Anim.run(t,i,r,u,f,e,n.ColorAnim)};n.ColorAnim=function(t,i,r,u){n.ColorAnim.superclass.constructor.call(this,t,i,r,u)};Ext.extend(n.ColorAnim,n.AnimBase);var t=n.ColorAnim.superclass,i=/color$/i,f=/^transparent|rgba\(0, 0, 0, 0\)$/,e=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,o=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,s=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,u=function(n){return typeof n!="undefined"};Ext.apply(n.ColorAnim.prototype,{getAttr:function(n){var e=this,r=e.el,u;if(i.test(n))while(r&&f.test(u=Ext.fly(r).getStyle(n)))r=r.parentNode,u="fff";else u=t.getAttr.call(e,n);return u},doMethod:function(n,r,u){var s=this,f,o=Math.floor,e,h,c;if(i.test(n)){for(f=[],u=u||[],e=0,h=r.length;e<h;e++)c=r[e],f[e]=t.doMethod.call(s,n,c,u[e]);f="rgb("+o(f[0])+","+o(f[1])+","+o(f[2])+")"}else f=t.doMethod.call(s,n,r,u);return f},setRunAttr:function(n){var h=this,c=h.attributes[n],v=c.to,l=c.by,e,s,o,f,a;if(t.setRunAttr.call(h,n),e=h.runAttrs[n],i.test(n)){if(s=r(e.start),o=r(e.end),!u(v)&&u(l))for(o=r(l),f=0,a=s.length;f<a;f++)o[f]=s[f]+o[f];e.start=s;e.end=o}}})}(),function(){var n=Ext.lib,t,i;n.Anim.scroll=function(t,i,r,u,f,e){return n.Anim.run(t,i,r,u,f,e,n.Scroll)};n.Scroll=function(t,i,r,u){t&&n.Scroll.superclass.constructor.call(this,t,i,r,u)};Ext.extend(n.Scroll,n.ColorAnim);t=n.Scroll.superclass;i="scroll";Ext.apply(n.Scroll.prototype,{doMethod:function(n,r,u){var f=this,e=f.curFrame,o=f.totalFrames;return n==i?[f.method(e,r[0],u[0]-r[0],o),f.method(e,r[1],u[1]-r[1],o)]:t.doMethod.call(f,n,r,u)},getAttr:function(n){var r=this;return n==i?[r.el.scrollLeft,r.el.scrollTop]:t.getAttr.call(r,n)},setAttr:function(n,r,u){var f=this;n==i?(f.el.scrollLeft=r[0],f.el.scrollTop=r[1]):t.setAttr.call(f,n,r,u)}})}(),Ext.isIE9m){function i(){var n=Function.prototype;delete n.createSequence;delete n.defer;delete n.createDelegate;delete n.createCallback;delete n.createInterceptor;window.detachEvent("onunload",i)}window.attachEvent("onunload",i)}}(),function(){function f(n,t,i){return function(){t.target==arguments[0]&&n.apply(i,Array.prototype.slice.call(arguments,0))}}function e(t,i,r,u){return r.task=new n.DelayedTask,function(){r.task.delay(i.buffer,t,u,Array.prototype.slice.call(arguments,0))}}function o(n,t,i,r){return function(){return t.removeListener(i,r),n.apply(r,arguments)}}function s(t,i,r,u){return function(){var f=new n.DelayedTask,e=Array.prototype.slice.call(arguments,0);r.tasks||(r.tasks=[]);r.tasks.push(f);f.delay(i.delay||10,function(){r.tasks.remove(f);t.apply(u,e)},u)}}var n=Ext.util,u=Ext.each,t=!0,i=!1,r;n.Observable=function(){var n=this,t=n.events;if(n.listeners){n.on(n.listeners);delete n.listeners}n.events=t||{}};n.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var r=Array.prototype.slice.call(arguments,0),o=r[0].toLowerCase(),f=this,s=t,u=f.events[o],e,h,n;if(f.eventsSuspended===t)(h=f.eventQueue)&&h.push(r);else if(typeof u=="object")if(u.bubble){if(u.fire.apply(u,r.slice(1))===i)return i;if(n=f.getBubbleTarget&&f.getBubbleTarget(),n&&n.enableBubble)return e=n.events[o],e&&typeof e=="object"&&e.bubble||n.enableBubble(o),n.fireEvent.apply(n,r)}else r.shift(),s=u.fire.apply(u,r);return s},addListener:function(i,r,u,f){var o=this,s,e,h;if(typeof i=="object"){f=i;for(s in f)e=f[s],o.filterOptRe.test(s)||o.addListener(s,e.fn||e,e.scope||f.scope,e.fn?e:f)}else i=i.toLowerCase(),h=o.events[i]||t,typeof h=="boolean"&&(o.events[i]=h=new n.Event(o,i)),h.addListener(r,u,typeof f=="object"?f:{})},removeListener:function(n,t,i){var r=this.events[n.toLowerCase()];typeof r=="object"&&r.removeListener(t,i)},purgeListeners:function(){var t=this.events,n,i;for(i in t)n=t[i],typeof n=="object"&&n.clearListeners()},addEvents:function(n){var i=this,r,u;if(i.events=i.events||{},typeof n=="string")for(r=arguments,u=r.length;u--;)i.events[r[u]]=i.events[r[u]]||t;else Ext.applyIf(i.events,n)},hasListener:function(n){var t=this.events[n.toLowerCase()];return typeof t=="object"&&t.listeners.length>0},suspendEvents:function(n){this.eventsSuspended=t;n&&!this.eventQueue&&(this.eventQueue=[])},resumeEvents:function(){var n=this,t=n.eventQueue||[];n.eventsSuspended=i;delete n.eventQueue;u(t,function(t){n.fireEvent.apply(n,t)})}};r=n.Observable.prototype;r.on=r.addListener;r.un=r.removeListener;n.Observable.releaseCapture=function(n){n.fireEvent=r.fireEvent};n.Event=function(n,t){this.name=t;this.obj=n;this.listeners=[]};n.Event.prototype={addListener:function(n,t,i){var r=this,u;t=t||r.obj;r.isListening(n,t)||(u=r.createListener(n,t,i),r.firing&&(r.listeners=r.listeners.slice(0)),r.listeners.push(u))},createListener:function(n,t,i){i=i||{};t=t||this.obj;var u={fn:n,scope:t,options:i},r=n;return i.target&&(r=f(r,i,t)),i.delay&&(r=s(r,i,u,t)),i.single&&(r=o(r,this,n,t)),i.buffer&&(r=e(r,i,u,t)),u.fireFn=r,u},findListener:function(n,t){var u=this.listeners,r=u.length,i;for(t=t||this.obj;r--;)if(i=u[r],i&&i.fn==n&&i.scope==t)return r;return-1},isListening:function(n,t){return this.findListener(n,t)!=-1},removeListener:function(n,r){var o,u,e,f=this,s=i;if((o=f.findListener(n,r))!=-1){if(f.firing&&(f.listeners=f.listeners.slice(0)),u=f.listeners[o],u.task&&(u.task.cancel(),delete u.task),e=u.tasks&&u.tasks.length,e){while(e--)u.tasks[e].cancel();delete u.tasks}f.listeners.splice(o,1);s=t}return s},clearListeners:function(){for(var i=this,n=i.listeners,t=n.length;t--;)i.removeListener(n[t].fn,n[t].scope)},fire:function(){var n=this,f=n.listeners,e=f.length,u=0,r,o;if(e>0)for(n.firing=t,o=Array.prototype.slice.call(arguments,0);u<e;u++)if(r=f[u],r&&r.fireFn.apply(r.scope||n.obj||window,o)===i)return n.firing=i;return n.firing=i,t}}}();Ext.DomHelper=function(){function e(n,t,i,u){var f=h.insertHtml(u,Ext.getDom(n),r(t));return i?Ext.get(f,!0):f}function r(n){var t="",i,u,e,o,f;if(typeof n=="string")t=n;else if(Ext.isArray(n))for(f=0;f<n.length;f++)n[f]&&(t+=r(n[f]));else{t+="<"+(n.tag=n.tag||"div");for(i in n)if(u=n[i],!b.test(i))if(typeof u=="object"){t+=" "+i+'="';for(e in u)t+=e+":"+u[e]+";";t+='"'}else t+=" "+({cls:"class",htmlFor:"for"}[i]||i)+'="'+u+'"';p.test(n.tag)?t+="/>":(t+=">",(o=n.children||n.cn)?t+=r(o):n.html&&(t+=n.html),t+="<\/"+n.tag+">")}return t}function o(n,t,i,r){var s,u,e,o;for(f.innerHTML=[t,i,r].join(""),s=-1,u=f;++s<n;)u=u.firstChild;if(e=u.nextSibling){for(o=document.createDocumentFragment();u;)e=u.nextSibling,o.appendChild(u),u=e;u=o}return u}function tt(r,e,s,h){var y,p;if(f=f||document.createElement("div"),(r!="td"||e!=n&&e!=u)&&(k.test(r)||e!=t&&e!=i))return p=e==t?s:e==i?s.nextSibling:e==n?s.firstChild:null,(e==t||e==i)&&(s=s.parentNode),y=r=="td"||r=="tr"&&(e==u||e==n)?o(4,g,h,nt):r=="tbody"&&(e==u||e==n)||r=="tr"&&(e==t||e==i)?o(3,a,h,v):o(2,c,h,l),s.insertBefore(y,p),y}function y(n){var r=document.createElement("div"),u=document.createDocumentFragment(),t=0,f,i;for(r.innerHTML=n,i=r.childNodes,f=i.length;t<f;t++)u.appendChild(i[t].cloneNode(!0));return u}var f=null,p=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,w=/^table|tbody|tr|td$/i,b=/tag|children|cn|html$/i,k=/td|tr|tbody/i,s=/([a-z0-9-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,d=/end/i,h,n="afterbegin",i="afterend",t="beforebegin",u="beforeend",c="<table>",l="<\/table>",a=c+"<tbody>",v="<\/tbody>"+l,g=a+"<tr>",nt="<\/tr>"+v;return h={markup:function(n){return r(n)},applyStyles:function(n,t){if(t){var i;if(n=Ext.fly(n),typeof t=="function"&&(t=t.call()),typeof t=="string")for(s.lastIndex=0;i=s.exec(t);)n.setStyle(i[1],i[2]);else typeof t=="object"&&n.setStyle(t)}},insertHtml:function(r,f,e){var s={},c,o,l,a,h,v;if(r=r.toLowerCase(),s[t]=["BeforeBegin","previousSibling"],s[i]=["AfterEnd","nextSibling"],f.insertAdjacentHTML){if(w.test(f.tagName)&&(v=tt(f.tagName.toLowerCase(),r,f,e)))return v;if(s[n]=["AfterBegin","firstChild"],s[u]=["BeforeEnd","lastChild"],c=s[r])return f.insertAdjacentHTML(c[0],e),f[c[1]]}else return o=f.ownerDocument.createRange(),a="setStart"+(d.test(r)?"After":"Before"),s[r]?(o[a](f),h=o.createContextualFragment?o.createContextualFragment(e):y(e),f.parentNode.insertBefore(h,r==t?f:f.nextSibling),f[(r==t?"previous":"next")+"Sibling"]):(l=(r==n?"first":"last")+"Child",f.firstChild?(o[a](f[l]),h=o.createContextualFragment?o.createContextualFragment(e):y(e),r==n?f.insertBefore(h,f.firstChild):f.appendChild(h)):f.innerHTML=e,f[l]);throw'Illegal insertion point -> "'+r+'"';},insertBefore:function(n,i,r){return e(n,i,r,t)},insertAfter:function(n,t,r){return e(n,t,r,i,"nextSibling")},insertFirst:function(t,i,r){return e(t,i,r,n,"firstChild")},append:function(n,t,i){return e(n,t,i,u,"",!0)},overwrite:function(n,t,i){return n=Ext.getDom(n),n.innerHTML=r(t),i?Ext.get(n.firstChild):n.firstChild},createHtml:r}}();Ext.Template=function(n){var t=this,u=arguments,f=[],i,r,e;if(Ext.isArray(n))n=n.join("");else if(u.length>1){for(r=0,e=u.length;r<e;r++)i=u[r],typeof i=="object"?Ext.apply(t,i):f.push(i);n=f.join("")}t.html=n;t.compiled&&t.compile()};Ext.Template.prototype={re:/\{([\w\-]+)\}/g,applyTemplate:function(n){var t=this;return t.compiled?t.compiled(n):t.html.replace(t.re,function(t,i){return n[i]!==undefined?n[i]:""})},set:function(n,t){var i=this;return i.html=n,i.compiled=null,t?i.compile():i},compile:function(){function fn(n,t){return t="values['"+t+"']","'"+sep+"("+t+" == undefined ? '' : "+t+")"+sep+"'"}var me=this,sep=Ext.isGecko?"+":",";return eval("this.compiled = function(values){ return "+(Ext.isGecko?"'":"['")+me.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn)+(Ext.isGecko?"';};":"'].join('');};")),me},insertFirst:function(n,t,i){return this.doInsert("afterBegin",n,t,i)},insertBefore:function(n,t,i){return this.doInsert("beforeBegin",n,t,i)},insertAfter:function(n,t,i){return this.doInsert("afterEnd",n,t,i)},append:function(n,t,i){return this.doInsert("beforeEnd",n,t,i)},doInsert:function(n,t,i,r){t=Ext.getDom(t);var u=Ext.DomHelper.insertHtml(n,t,this.applyTemplate(i));return r?Ext.get(u,!0):u},overwrite:function(n,t,i){return n=Ext.getDom(n),n.innerHTML=this.applyTemplate(t),i?Ext.get(n.firstChild,!0):n.firstChild}};Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.Template.from=function(n,t){return n=Ext.getDom(n),new Ext.Template(n.value||n.innerHTML,t||"")};Ext.DomQuery=function(){function child(n,t){for(var r=0,i=n.firstChild;i;){if(i.nodeType==1&&++r==t)return i;i=i.nextSibling}return null}function next(n){while((n=n.nextSibling)&&n.nodeType!=1);return n}function prev(n){while((n=n.previousSibling)&&n.nodeType!=1);return n}function children(n){for(var t=n.firstChild,r=-1,i;t;)i=t.nextSibling,t.nodeType!=3||nonSpace.test(t.nodeValue)?t.nodeIndex=++r:n.removeChild(t),t=i;return this}function byClassName(n,t){var i,f,r,u;if(!t)return n;for(i=[],f=-1,r=0;u=n[r];r++)(" "+u.className+" ").indexOf(t)!=-1&&(i[++f]=u);return i}function attrValue(n,t){return(n.tagName||typeof n.length=="undefined"||(n=n[0]),!n)?null:t=="for"?n.htmlFor:t=="class"||t=="className"?n.className:n.getAttribute(t)||n[t]}function getNodes(n,t,i){var o=[],s=-1,l,a,h,v,e,c,f,r,u;if(!n)return o;if(i=i||"*",typeof n.getElementsByTagName!="undefined"&&(n=[n]),t){if(t=="/"||t==">")for(f=i.toUpperCase(),r=0;h=n[r];r++)for(v=h.childNodes,e=0;c=v[e];e++)(c.nodeName==f||c.nodeName==i||i=="*")&&(o[++s]=c);else if(t=="+")for(f=i.toUpperCase(),r=0;u=n[r];r++){while((u=u.nextSibling)&&u.nodeType!=1);u&&(u.nodeName==f||u.nodeName==i||i=="*")&&(o[++s]=u)}else if(t=="~")for(f=i.toUpperCase(),r=0;u=n[r];r++)while(u=u.nextSibling)(u.nodeName==f||u.nodeName==i||i=="*")&&(o[++s]=u)}else for(r=0;h=n[r];r++)for(l=h.getElementsByTagName(i),e=0;a=l[e];e++)o[++s]=a;return o}function concat(n,t){if(t.slice)return n.concat(t);for(var i=0,r=t.length;i<r;i++)n[n.length]=t[i];return n}function byTag(n,t){var r,f,u,i;if((n.tagName||n==document)&&(n=[n]),!t)return n;for(r=[],f=-1,t=t.toLowerCase(),u=0;i=n[u];u++)i.nodeType==1&&i.tagName.toLowerCase()==t&&(r[++f]=i);return r}function byId(n,t){var i,f,u,r;if((n.tagName||n==document)&&(n=[n]),!t)return n;for(i=[],f=-1,u=0;r=n[u];u++)if(r&&r.id==t)return i[++f]=r,i;return i}function byAttribute(n,t,i,r,u){for(var h=[],a=-1,v=u=="{",e=Ext.DomQuery.operators[r],o,c,l,f,s=0;f=n[s];s++)f.nodeType==1&&(l||(c=Ext.DomQuery.isXml(f),l=!0),o=c?f.getAttribute(t):v?Ext.DomQuery.getStyle(f,t):t=="class"||t=="className"?f.className:t=="for"?f.htmlFor:t=="href"?f.getAttribute("href",2):f.getAttribute(t),(e&&e(o,i)||!e&&o)&&(h[++a]=f));return h}function byPseudo(n,t,i){return Ext.DomQuery.pseudos[t](n,i)}function nodupIEXml(n){var f=++key,r,u,t,i;for(n[0].setAttribute("_nodup",f),r=[n[0]],t=1,i=n.length;t<i;t++)u=n[t],!u.getAttribute("_nodup")!=f&&(u.setAttribute("_nodup",f),r[r.length]=u);for(t=0,i=n.length;t<i;t++)n[t].removeAttribute("_nodup");return r}function nodup(n){var i,t;if(!n)return[];var o=n.length,e,r,u=n,f,s=-1;if(!o||typeof n.nodeType!="undefined"||o==1)return n;if(isIE&&typeof n[0].selectSingleNode!="undefined")return nodupIEXml(n);for(i=++key,n[0]._nodup=i,r=1;e=n[r];r++)if(e._nodup!=i)e._nodup=i;else{for(u=[],t=0;t<r;t++)u[++s]=n[t];for(t=r+1;f=n[t];t++)f._nodup!=i&&(f._nodup=i,u[++s]=f);return u}return u}function quickDiffIEXml(n,t){for(var f=++key,u=[],i=0,r=n.length;i<r;i++)n[i].setAttribute("_qdiff",f);for(i=0,r=t.length;i<r;i++)t[i].getAttribute("_qdiff")!=f&&(u[u.length]=t[i]);for(i=0,r=n.length;i<r;i++)n[i].removeAttribute("_qdiff");return u}function quickDiff(n,t){var u=n.length,f=++key,r=[],i,e;if(!u)return t;if(isIE&&typeof n[0].selectSingleNode!="undefined")return quickDiffIEXml(n,t);for(i=0;i<u;i++)n[i]._qdiff=f;for(i=0,e=t.length;i<e;i++)t[i]._qdiff!=f&&(r[r.length]=t[i]);return r}function quickId(n,t,i,r){if(n==i){var u=i.ownerDocument||i;return u.getElementById(r)}return n=getNodes(n,t,"*"),byId(n,r)}var cache={},simpleCache={},valueCache={},nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w\-\*]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,isIE=window.ActiveXObject?!0:!1,key=30803;return eval("var batch = 30803;"),{getStyle:function(n,t){return Ext.fly(n).getStyle(t)},compile:function(path,type){var tokenMatch,matched,j,t,m;type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],mode,lastPath,matchers=Ext.DomQuery.matchers,matchersLn=matchers.length,modeMatch,lmode=path.match(modeRe);for(lmode&&lmode[1]&&(fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";',path=path.replace(lmode[1],""));path.substr(0,1)=="/";)path=path.substr(1);while(path&&lastPath!=path){for(lastPath=path,tokenMatch=path.match(tagTokenRe),type=="select"?tokenMatch?(fn[fn.length]=tokenMatch[1]=="#"?'n = quickId(n, mode, root, "'+tokenMatch[2]+'");':'n = getNodes(n, mode, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],"")):path.substr(0,1)!="@"&&(fn[fn.length]='n = getNodes(n, mode, "*");'):tokenMatch&&(fn[fn.length]=tokenMatch[1]=="#"?'n = byId(n, "'+tokenMatch[2]+'");':'n = byTag(n, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],""));!(modeMatch=path.match(modeRe));){for(matched=!1,j=0;j<matchersLn;j++)if(t=matchers[j],m=path.match(t.re),m){fn[fn.length]=t.select.replace(tplRe,function(n,t){return m[t]});path=path.replace(m[0],"");matched=!0;break}if(!matched)throw'Error parsing selector, parsing failed at "'+path+'"';}modeMatch[1]&&(fn[fn.length]='mode="'+modeMatch[1].replace(trimRe,"")+'";',path=path.replace(modeMatch[1],""))}return fn[fn.length]="return nodup(n);\n}",eval(fn.join("")),f},jsSelect:function(n,t){var u,r,f,o,i,e;for(t=t||document,typeof t=="string"&&(t=document.getElementById(t)),u=n.split(","),r=[],f=0,o=u.length;f<o;f++){if(i=u[f].replace(trimRe,""),!cache[i]&&(cache[i]=Ext.DomQuery.compile(i),!cache[i]))throw i+" is not a valid selector";e=cache[i](t);e&&e!=document&&(r=r.concat(e))}return u.length>1?nodup(r):r},isXml:function(n){var t=(n?n.ownerDocument||n:0).documentElement;return t?t.nodeName!=="HTML":!1},select:document.querySelectorAll?function(n,t,i){if(t=t||document,!Ext.DomQuery.isXml(t))try{var r=t.querySelectorAll(n);return Ext.toArray(r)}catch(u){}return Ext.DomQuery.jsSelect.call(this,n,t,i)}:function(n,t,i){return Ext.DomQuery.jsSelect.call(this,n,t,i)},selectNode:function(n,t){return Ext.DomQuery.select(n,t)[0]},selectValue:function(n,t,i){n=n.replace(trimRe,"");valueCache[n]||(valueCache[n]=Ext.DomQuery.compile(n,"select"));var r=valueCache[n](t),u;return r=r[0]?r[0]:r,typeof r.normalize=="function"&&r.normalize(),u=r&&r.firstChild?r.firstChild.nodeValue:null,u===null||u===undefined||u===""?i:u},selectNumber:function(n,t,i){var r=Ext.DomQuery.selectValue(n,t,i||0);return parseFloat(r)},is:function(n,t){typeof n=="string"&&(n=document.getElementById(n));var i=Ext.isArray(n),r=Ext.DomQuery.filter(i?n:[n],t);return i?r.length==n.length:r.length>0},filter:function(n,t,i){t=t.replace(trimRe,"");simpleCache[t]||(simpleCache[t]=Ext.DomQuery.compile(t,"simple"));var r=simpleCache[t](n);return i?quickDiff(r,n):r},matchers:[{re:/^\.([\w\-]+)/,select:'n = byClassName(n, " {1} ");'},{re:/^\:([\w\-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w\-]+)\s?(?:(=|.=)\s?(["']?)(.*?)\4)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{5}", "{3}", "{1}");'},{re:/^#([\w\-]+)/,select:'n = byId(n, "{1}");'},{re:/^@([\w\-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(n,t){return n==t},"!=":function(n,t){return n!=t},"^=":function(n,t){return n&&n.substr(0,t.length)==t},"$=":function(n,t){return n&&n.substr(n.length-t.length)==t},"*=":function(n,t){return n&&n.indexOf(t)!==-1},"%=":function(n,t){return n%t==0},"|=":function(n,t){return n&&(n==t||n.substr(0,t.length+1)==t+"-")},"~=":function(n,t){return n&&(" "+n+" ").indexOf(" "+t+" ")!=-1}},pseudos:{"first-child":function(n){for(var r=[],f=-1,t,u,i=0;u=t=n[i];i++){while((t=t.previousSibling)&&t.nodeType!=1);t||(r[++f]=u)}return r},"last-child":function(n){for(var r=[],f=-1,t,u,i=0;u=t=n[i];i++){while((t=t.nextSibling)&&t.nodeType!=1);t||(r[++f]=u)}return r},"nth-child":function(n,t){for(var f=[],s=-1,h=nthRe.exec(t=="even"&&"2n"||t=="odd"&&"2n+1"||!nthRe2.test(t)&&"n+"+t||t),c=(h[1]||1)-0,e=h[2]-0,i,u,l,r,o=0;i=n[o];o++){if(u=i.parentNode,batch!=u._batch){for(l=0,r=u.firstChild;r;r=r.nextSibling)r.nodeType==1&&(r.nodeIndex=++l);u._batch=batch}c==1?(e==0||i.nodeIndex==e)&&(f[++s]=i):(i.nodeIndex+e)%c==0&&(f[++s]=i)}return f},"only-child":function(n){for(var r=[],u=-1,t,i=0;t=n[i];i++)prev(t)||next(t)||(r[++u]=t);return r},empty:function(n){for(var u=[],o=-1,i,t=0;i=n[t];t++){for(var s=i.childNodes,f=0,r,e=!0;r=s[f];)if(++f,r.nodeType==1||r.nodeType==3){e=!1;break}e&&(u[++o]=i)}return u},contains:function(n,t){for(var u=[],f=-1,i,r=0;i=n[r];r++)(i.textContent||i.innerText||"").indexOf(t)!=-1&&(u[++f]=i);return u},nodeValue:function(n,t){for(var u=[],f=-1,i,r=0;i=n[r];r++)i.firstChild&&i.firstChild.nodeValue==t&&(u[++f]=i);return u},checked:function(n){for(var r=[],u=-1,i,t=0;i=n[t];t++)i.checked==!0&&(r[++u]=i);return r},not:function(n,t){return Ext.DomQuery.filter(n,t,!0)},any:function(n,t){for(var o=t.split("|"),f=[],s=-1,e,r,u,i=0;r=n[i];i++)for(u=0;e=o[u];u++)if(Ext.DomQuery.is(r,e)){f[++s]=r;break}return f},odd:function(n){return this["nth-child"](n,"odd")},even:function(n){return this["nth-child"](n,"even")},nth:function(n,t){return n[t-1]||[]},first:function(n){return n[0]||[]},last:function(n){return n[n.length-1]||[]},has:function(n,t){for(var f=Ext.DomQuery.select,u=[],e=-1,r,i=0;r=n[i];i++)f(t,r).length>0&&(u[++e]=r);return u},next:function(n,t){for(var e=Ext.DomQuery.is,f=[],o=-1,r,u,i=0;r=n[i];i++)u=next(r),u&&e(u,t)&&(f[++o]=r);return f},prev:function(n,t){for(var e=Ext.DomQuery.is,f=[],o=-1,r,u,i=0;r=n[i];i++)u=prev(r),u&&e(u,t)&&(f[++o]=r);return f}}}}();Ext.query=Ext.DomQuery.select;Ext.util.DelayedTask=function(n,t,i){var u=this,r,f=function(){clearInterval(r);r=null;n.apply(t,i||[])};u.delay=function(e,o,s,h){u.cancel();n=o||n;t=s||t;i=h||i;r=setInterval(f,e)};u.cancel=function(){r&&(clearInterval(r),r=null)}},function(){function h(){var i,o,u,f,e;if(Ext.enableGarbageCollector){for(i in t){if(f=t[i],f.skipGC){Ext.EventManager.removeFromSpecialCache(f.el);continue}o=f.el;u=o.dom;u&&u.parentNode&&(u.offsetParent||r.getElementById(i))||(Ext.enableListenerCollection&&Ext.EventManager.removeAll(u),delete t[i])}if(Ext.isIE){e={};for(i in t)e[i]=t[i];t=Ext.elCache=e}}else clearInterval(n.collectorThreadId)}var r=document,i,o,u,f,e;Ext.Element=function(n,t){var u=typeof n=="string"?r.getElementById(n):n,i;if(!u)return null;if(i=u.id,!t&&i&&Ext.elCache[i])return Ext.elCache[i].el;this.dom=u;this.id=i||Ext.id(u)};var s=Ext.DomHelper,n=Ext.Element,t=Ext.elCache;n.prototype={set:function(n,t){var r=this.dom,i,u,t=t!==!1&&!!r.setAttribute;for(i in n)n.hasOwnProperty(i)&&(u=n[i],i=="style"?s.applyStyles(r,u):i=="cls"?r.className=u:t?r.setAttribute(i,u):r[i]=u);return this},defaultUnit:"px",is:function(n){return Ext.DomQuery.is(this.dom,n)},focus:function(n,t){var i=this,t=t||i.dom;try{Number(n)?i.focus.defer(n,null,[null,t]):t.focus()}catch(r){}return i},blur:function(){try{this.dom.blur()}catch(n){}return this},getValue:function(n){var t=this.dom.value;return n?parseInt(t,10):t},addListener:function(n,t,i,r){Ext.EventManager.on(this.dom,n,t,i||this,r);return this},removeListener:function(n,t,i){return Ext.EventManager.removeListener(this.dom,n,t,i||this),this},removeAllListeners:function(){return Ext.EventManager.removeAll(this.dom),this},purgeAllListeners:function(){return Ext.EventManager.purgeElement(this,!0),this},addUnits:function(n){return n===""||n=="auto"||n===undefined?n=n||"":isNaN(n)&&o.test(n)||(n=n+(this.defaultUnit||"px")),n},load:function(n,t,i){return Ext.Ajax.request(Ext.apply({params:t,url:n.url||n,callback:i,el:this.dom,indicatorText:n.indicatorText||""},Ext.isObject(n)?n:{})),this},isBorderBox:function(){return Ext.isBorderBox||Ext.isForcedBorderBox||e[(this.dom.tagName||"").toLowerCase()]},remove:function(){var n=this,t=n.dom;t&&(delete n.dom,Ext.removeNode(t))},hover:function(n,t,i,r){var u=this;u.on("mouseenter",n,i||u.dom,r);u.on("mouseleave",t,i||u.dom,r);return u},contains:function(n){return n?Ext.lib.Dom.isAncestor(this.dom,n.dom?n.dom:n):!1},getAttributeNS:function(n,t){return this.getAttribute(t,n)},getAttribute:function(){var n=document.createElement("table"),t=!1,i="getAttribute"in n,r=/undefined|unknown/;if(i){try{n.getAttribute("ext:qtip")}catch(u){t=!0}return function(n,i){var r=this.dom,u;if(r.getAttributeNS&&(u=r.getAttributeNS(i,n)||null),u==null)if(i)if(t&&r.tagName.toUpperCase()=="TABLE")try{u=r.getAttribute(i+":"+n)}catch(f){u=""}else u=r.getAttribute(i+":"+n);else u=r.getAttribute(n)||r[n];return u||""}}return function(n,t){var f=this.om,i,u;return t?(u=f[t+":"+n],i=r.test(typeof u)?undefined:u):i=f[n],i||""}}(),update:function(n){return this.dom&&(this.dom.innerHTML=n),this}};i=n.prototype;n.addMethods=function(n){Ext.apply(i,n)};i.on=i.addListener;i.un=i.removeListener;i.autoBoxAdjust=!0;o=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i;n.get=function(i){var f,o,e,s;return i?typeof i=="string"?(o=r.getElementById(i))?(t[i]&&t[i].el?(f=t[i].el,f.dom=o):f=n.addToCache(new n(o)),f):null:i.tagName?((e=i.id)||(e=Ext.id(i)),t[e]&&t[e].el?(f=t[e].el,f.dom=i):f=n.addToCache(new n(i)),f):i instanceof n?(i!=u&&(i.dom=Ext.isIE&&(i.id==undefined||i.id=="")?i.dom:r.getElementById(i.id)||i.dom),i):i.isComposite?i:Ext.isArray(i)?n.select(i):i==r?(u||(s=function(){},s.prototype=n.prototype,u=new s,u.dom=r),u):null:null};n.addToCache=function(n,i){return i=i||n.id,t[i]={el:n,data:{},events:{}},n};n.data=function(i,r,u){if(i=n.get(i),!i)return null;var f=t[i.id].data;return arguments.length==2?f[r]:f[r]=u};n.collectorThreadId=setInterval(h,3e4);f=function(){};f.prototype=n.prototype;n.Flyweight=function(n){this.dom=n};n.Flyweight.prototype=new f;n.Flyweight.prototype.isFlyweight=!0;n._flyweights={};n.fly=function(t,i){var r=null;return i=i||"_global",(t=Ext.getDom(t))&&((n._flyweights[i]=n._flyweights[i]||new n.Flyweight).dom=t,r=n._flyweights[i]),r};Ext.get=n.get;Ext.fly=n.fly;e=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};(Ext.isIE||Ext.isGecko)&&(e.button=1)}();Ext.Element.addMethods(function(){var u="parentNode",i="nextSibling",r="previousSibling",n=Ext.DomQuery,t=Ext.get;return{findParent:function(i,r,u){var f=this.dom,s=document.body,e=0,o;if(Ext.isGecko&&Object.prototype.toString.call(f)=="[object XULElement]")return null;for(r=r||50,isNaN(r)&&(o=Ext.getDom(r),r=Number.MAX_VALUE);f&&f.nodeType==1&&e<r&&f!=s&&f!=o;){if(n.is(f,i))return u?t(f):f;e++;f=f.parentNode}return null},findParentNode:function(n,t,i){var r=Ext.fly(this.dom.parentNode,"_internal");return r?r.findParent(n,t,i):null},up:function(n,t){return this.findParentNode(n,t,!0)},select:function(n){return Ext.Element.select(n,this.dom)},query:function(t){return n.select(t,this.dom)},child:function(i,r){var u=n.selectNode(i,this.dom);return r?u:t(u)},down:function(i,r){var u=n.selectNode(" > "+i,this.dom);return r?u:t(u)},parent:function(n,t){return this.matchNode(u,u,n,t)},next:function(n,t){return this.matchNode(i,i,n,t)},prev:function(n,t){return this.matchNode(r,r,n,t)},first:function(n,t){return this.matchNode(i,"firstChild",n,t)},last:function(n,t){return this.matchNode(r,"lastChild",n,t)},matchNode:function(i,r,u,f){for(var e=this.dom[r];e;){if(e.nodeType==1&&(!u||n.is(e,u)))return f?e:t(e);e=e[i]}return null}}}());Ext.Element.addMethods(function(){var n=Ext.getDom,i=Ext.get,t=Ext.DomHelper;return{appendChild:function(n){return i(n).appendTo(this)},appendTo:function(t){return n(t).appendChild(this.dom),this},insertBefore:function(t){return(t=n(t)).parentNode.insertBefore(this.dom,t),this},insertAfter:function(t){return(t=n(t)).parentNode.insertBefore(this.dom,t.nextSibling),this},insertFirst:function(t,r){return t=t||{},t.nodeType||t.dom||typeof t=="string"?(t=n(t),this.dom.insertBefore(t,this.dom.firstChild),r?t:i(t)):this.createChild(t,this.dom.firstChild,r)},replace:function(n){return n=i(n),this.insertBefore(n),n.remove(),this},replaceWith:function(i){var r=this;return i.nodeType||i.dom||typeof i=="string"?(i=n(i),r.dom.parentNode.insertBefore(i,r.dom)):i=t.insertBefore(r.dom,i),delete Ext.elCache[r.id],Ext.removeNode(r.dom),r.id=Ext.id(r.dom=i),Ext.Element.addToCache(r.isFlyweight?new Ext.Element(r.dom):r),r},createChild:function(n,i,r){return n=n||{tag:"div"},i?t.insertBefore(i,n,r!==!0):t[this.dom.firstChild?"append":"overwrite"](this.dom,n,r!==!0)},wrap:function(n,i){var r=t.insertBefore(this.dom,n||{tag:"div"},!i);return r.dom?r.dom.appendChild(this.dom):r.appendChild(this.dom),r},insertHtml:function(n,i,r){var u=t.insertHtml(n,this.dom,i);return r?Ext.get(u):u}}}());Ext.Element.addMethods(function(){function ot(n,t){return t.charAt(1).toUpperCase()}function d(n){return g[n]||(g[n]=n=="float"?s.cssFloat?"cssFloat":"styleFloat":n.replace(tt,ot))}var s=Ext.supports,g={},tt=/(-[a-z])/gi,t=document.defaultView,h=/alpha\(opacity=(.*)\)/i,i=/^\s+|\s+$/g,st=Ext.Element,it=/\s+/,rt=/\w/g,r="padding",u="margin",f="border",c="-left",l="-right",a="-top",v="-bottom",e="-width",y=Math,p="hidden",o="isClipped",w="overflow",b="overflow-x",k="overflow-y",nt="originalClip",ut={l:f+c+e,r:f+l+e,t:f+a+e,b:f+v+e},ft={l:r+c,r:r+l,t:r+a,b:r+v},et={l:u+c,r:u+l,t:u+a,b:u+v},n=Ext.Element.data;return{adjustWidth:function(n){var t=this,i=typeof n=="number";return i&&t.autoBoxAdjust&&!t.isBorderBox()&&(n-=t.getBorderWidth("lr")+t.getPadding("lr")),i&&n<0?0:n},adjustHeight:function(n){var t=this,i=typeof n=="number";return i&&t.autoBoxAdjust&&!t.isBorderBox()&&(n-=t.getBorderWidth("tb")+t.getPadding("tb")),i&&n<0?0:n},addClass:function(n){var t=this,i,f,r,u=[];if(Ext.isArray(n)){for(i=0,f=n.length;i<f;i++)r=n[i],typeof r=="string"&&(" "+t.dom.className+" ").indexOf(" "+r+" ")==-1&&u.push(r);u.length&&(t.dom.className+=" "+u.join(" "))}else typeof n!="string"||this.hasClass(n)||(t.dom.className+=" "+n);return t},removeClass:function(n){var t=this,u,e,o,r,f;if(Ext.isArray(n)||(n=[n]),t.dom&&t.dom.className){for(f=t.dom.className.replace(i,"").split(it),u=0,o=n.length;u<o;u++)r=n[u],typeof r=="string"&&(r=r.replace(i,""),e=f.indexOf(r),e!=-1&&f.splice(e,1));t.dom.className=f.join(" ")}return t},radioClass:function(n){var r=this.dom.parentNode.childNodes,t,i,u;for(n=Ext.isArray(n)?n:[n],i=0,u=r.length;i<u;i++)t=r[i],t&&t.nodeType==1&&Ext.fly(t,"_internal").removeClass(n);return this.addClass(n)},toggleClass:function(n){return this.hasClass(n)?this.removeClass(n):this.addClass(n)},hasClass:function(n){return n&&(" "+this.dom.className+" ").indexOf(" "+n+" ")!=-1},replaceClass:function(n,t){return this.removeClass(n).addClass(t)},isStyle:function(n,t){return this.getStyle(n)==t},getStyle:function(){return t&&t.getComputedStyle?function(n){var i=this.dom,u,f,r,e;return i==document?null:(n=d(n),r=(u=i.style[n])?u:(f=t.getComputedStyle(i,""))?f[n]:null,n!="marginRight"||r=="0px"||s.correctRightMargin||(e=i.style.display,i.style.display="inline-block",r=t.getComputedStyle(i,"").marginRight,i.style.display=e),n!="backgroundColor"||r!="rgba(0, 0, 0, 0)"||s.correctTransparentColor||(r="transparent"),r)}:function(n){var t=this.dom,r,u,i;return t==document?null:n=="opacity"?t.style.filter.match&&(r=t.style.filter.match(h))&&(i=parseFloat(r[1]),!isNaN(i))?i?i/100:0:1:(n=d(n),t.style[n]||((u=t.currentStyle)?u[n]:null))}}(),getColor:function(n,t,i){var r=this.getStyle(n),u=typeof i!="undefined"?i:"#",f;return!r||/transparent|inherit/.test(r)?t:(/^r/.test(r)?Ext.each(r.slice(4,r.length-1).split(","),function(n){f=parseInt(n,10);u+=(f<16?"0":"")+f.toString(16)}):(r=r.replace("#",""),u+=r.length==3?r.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):r),u.length>5?u.toLowerCase():t)},setStyle:function(n,t){var r,i;typeof n!="object"&&(r={},r[n]=t,n=r);for(i in n)t=n[i],i=="opacity"?this.setOpacity(t):this.dom.style[d(i)]=t;return this},setOpacity:function(n,t){var r=this,u=r.dom.style,e,f;return t&&r.anim?r.anim({opacity:{to:n}},r.preanim(arguments,1),null,.35,"easeIn"):Ext.isIE9m?(e=n<1?"alpha(opacity="+n*100+")":"",f=u.filter.replace(h,"").replace(i,""),u.zoom=1,u.filter=f+(f.length>0?" ":"")+e):u.opacity=n,r},clearOpacity:function(){var n=this.dom.style;return Ext.isIE9m?Ext.isEmpty(n.filter)||(n.filter=n.filter.replace(h,"").replace(i,"")):n.opacity=n["-moz-opacity"]=n["-khtml-opacity"]="",this},getHeight:function(n){var i=this,r=i.dom,u=Ext.isIE9m&&i.isStyle("display","none"),t=y.max(r.offsetHeight,u?0:r.clientHeight)||0;return t=n?t-i.getBorderWidth("tb")-i.getPadding("tb"):t,t<0?0:t},getWidth:function(n){var i=this,r=i.dom,u=Ext.isIE9m&&i.isStyle("display","none"),t=y.max(r.offsetWidth,u?0:r.clientWidth)||0;return t=n?t-i.getBorderWidth("lr")-i.getPadding("lr"):t,t<0?0:t},setWidth:function(n,t){var i=this;return n=i.adjustWidth(n),!t||!i.anim?i.dom.style.width=i.addUnits(n):i.anim({width:{to:n}},i.preanim(arguments,1)),i},setHeight:function(n,t){var i=this;return n=i.adjustHeight(n),!t||!i.anim?i.dom.style.height=i.addUnits(n):i.anim({height:{to:n}},i.preanim(arguments,1)),i},getBorderWidth:function(n){return this.addStyles(n,ut)},getPadding:function(n){return this.addStyles(n,ft)},clip:function(){var t=this,i=t.dom;return n(i,o)||(n(i,o,!0),n(i,nt,{o:t.getStyle(w),x:t.getStyle(b),y:t.getStyle(k)}),t.setStyle(w,p),t.setStyle(b,p),t.setStyle(k,p)),t},unclip:function(){var i=this,r=i.dom,t;return n(r,o)&&(n(r,o,!1),t=n(r,nt),t.o&&i.setStyle(w,t.o),t.x&&i.setStyle(b,t.x),t.y&&i.setStyle(k,t.y)),i},addStyles:function(n,t){for(var f=0,e=n.match(rt),r,u,o=e.length,i=0;i<o;i++)r=e[i],u=r&&parseInt(this.getStyle(t[r]),10),u&&(f+=y.abs(u));return f},margins:et}}()),function(){var t=Ext.lib.Dom,i="left",u="right",r="top",f="bottom",n="position",e="static",o="relative",s="auto",h="z-index";Ext.Element.addMethods({getX:function(){return t.getX(this.dom)},getY:function(){return t.getY(this.dom)},getXY:function(){return t.getXY(this.dom)},getOffsetsTo:function(n){var t=this.getXY(),i=Ext.fly(n,"_internal").getXY();return[t[0]-i[0],t[1]-i[1]]},setX:function(n,t){return this.setXY([n,this.getY()],this.animTest(arguments,t,1))},setY:function(n,t){return this.setXY([this.getX(),n],this.animTest(arguments,t,1))},setLeft:function(n){return this.setStyle(i,this.addUnits(n)),this},setTop:function(n){return this.setStyle(r,this.addUnits(n)),this},setRight:function(n){return this.setStyle(u,this.addUnits(n)),this},setBottom:function(n){return this.setStyle(f,this.addUnits(n)),this},setXY:function(n,i){var r=this;return i&&r.anim?r.anim({points:{to:n}},r.preanim(arguments,1),"motion"):t.setXY(r.dom,n),r},setLocation:function(n,t,i){return this.setXY([n,t],this.animTest(arguments,i,2))},moveTo:function(n,t,i){return this.setXY([n,t],this.animTest(arguments,i,2))},getLeft:function(n){return n?parseInt(this.getStyle(i),10)||0:this.getX()},getRight:function(n){var t=this;return n?t.getLeft(!0)+t.getWidth()||0:t.getX()+t.getWidth()},getTop:function(n){return n?parseInt(this.getStyle(r),10)||0:this.getY()},getBottom:function(n){var t=this;return n?t.getTop(!0)+t.getHeight()||0:t.getY()+t.getHeight()},position:function(t,i,r,u){var f=this;!t&&f.isStyle(n,e)?f.setStyle(n,o):t&&f.setStyle(n,t);i&&f.setStyle(h,i);(r||u)&&f.setXY([r||!1,u||!1])},clearPositioning:function(n){return n=n||"",this.setStyle({left:n,right:n,top:n,bottom:n,"z-index":"",position:e}),this},getPositioning:function(){var t=this.getStyle(i),e=this.getStyle(r);return{position:this.getStyle(n),left:t,right:t?"":this.getStyle(u),top:e,bottom:e?"":this.getStyle(f),"z-index":this.getStyle(h)}},setPositioning:function(n){var t=this,i=t.dom.style;return t.setStyle(n),n.right==s&&(i.right=""),n.bottom==s&&(i.bottom=""),t},translatePoints:function(t,u){u=isNaN(t[1])?u:t[1];t=isNaN(t[0])?t:t[0];var f=this,h=f.isStyle(n,o),c=f.getXY(),e=parseInt(f.getStyle(i),10),s=parseInt(f.getStyle(r),10);return e=isNaN(e)?h?0:f.dom.offsetLeft:e,s=isNaN(s)?h?0:f.dom.offsetTop:s,{left:t-c[0]+e,top:u-c[1]+s}},animTest:function(n,t,i){return!!t&&this.preanim?this.preanim(n,i):!1}})}();Ext.Element.addMethods({isScrollable:function(){var n=this.dom;return n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth},scrollTo:function(n,t){return this.dom["scroll"+(/top/i.test(n)?"Top":"Left")]=t,this},getScroll:function(){var t=this.dom,i=document,n=i.body,e=i.documentElement,r,u,f;return t==i||t==n?(Ext.isIE&&Ext.isStrict?(r=e.scrollLeft,u=e.scrollTop):(r=window.pageXOffset,u=window.pageYOffset),f={left:r||(n?n.scrollLeft:0),top:u||(n?n.scrollTop:0)}):f={left:t.scrollLeft,top:t.scrollTop},f}});Ext.Element.VISIBILITY=1;Ext.Element.DISPLAY=2;Ext.Element.OFFSETS=3;Ext.Element.ASCLASS=4;Ext.Element.visibilityCls="x-hide-nosize";Ext.Element.addMethods(function(){var n=Ext.Element,u="visibility",i="display",f="hidden",l="offsets",a="asclass",r="none",v="nosize",h="originalDisplay",e="visibilityMode",o="isVisible",t=n.data,c=function(n){var i=t(n,h);return i===undefined&&t(n,h,i=""),i},s=function(n){var i=t(n,e);return i===undefined&&t(n,e,i=1),i};return{originalDisplay:"",visibilityMode:1,setVisibilityMode:function(n){return t(this.dom,e,n),this},animate:function(n,t,i,r,u){return this.anim(n,{duration:t,callback:i,easing:r},u),this},anim:function(n,t,i,r,u,f){i=i||"run";t=t||{};var e=this,o=Ext.lib.Anim[i](e.dom,n,t.duration||r||.35,t.easing||u||"easeOut",function(){f&&f.call(e);t.callback&&t.callback.call(t.scope||e,e,t)},e);return t.anim=o,o},preanim:function(n,t){return n[t]?typeof n[t]=="object"?n[t]:{duration:n[t+1],callback:n[t+2],easing:n[t+3]}:!1},isVisible:function(){var e=this,c=e.dom,h=t(c,o);return typeof h=="boolean"?h:(h=!e.isStyle(u,f)&&!e.isStyle(i,r)&&!(s(c)==n.ASCLASS&&e.hasClass(e.visibilityCls||n.visibilityCls)),t(c,o,h),h)},setVisible:function(r,e){var h=this,y=h.dom,c=s(y);if(typeof e=="string"){switch(e){case i:c=n.DISPLAY;break;case u:c=n.VISIBILITY;break;case l:c=n.OFFSETS;break;case v:case a:c=n.ASCLASS}h.setVisibilityMode(c);e=!1}if(e&&h.anim)r&&(h.setOpacity(.01),h.setVisible(!0)),h.anim({opacity:{to:r?1:0}},h.preanim(arguments,1),null,.35,"easeIn",function(){r||h.setVisible(!1).setOpacity(1)});else if(c==n.ASCLASS)h[r?"removeClass":"addClass"](h.visibilityCls||n.visibilityCls);else{if(c==n.DISPLAY)return h.setDisplayed(r);c==n.OFFSETS?r?(h.applyStyles(h.hideModeStyles||{position:"",top:"",left:""}),delete h.hideModeStyles):(h.hideModeStyles={position:h.getStyle("position"),top:h.getStyle("top"),left:h.getStyle("left")},h.applyStyles({position:"absolute",top:"-10000px",left:"-10000px"})):(h.fixDisplay(),y.style.visibility=r?"visible":f)}return t(y,o,r),h},hasMetrics:function(){var t=this.dom;return this.isVisible()||s(t)==n.VISIBILITY},toggle:function(){var n=this;return n.setVisible(!n.isVisible(),n.preanim(arguments,0)),n},setDisplayed:function(n){return typeof n=="boolean"&&(n=n?c(this.dom):r),this.setStyle(i,n),this},fixDisplay:function(){var n=this;n.isStyle(i,r)&&(n.setStyle(u,f),n.setStyle(i,c(this.dom)),n.isStyle(i,r)&&n.setStyle(i,"block"))},hide:function(n){return typeof n=="string"?(this.setVisible(!1,n),this):(this.setVisible(!1,this.preanim(arguments,0)),this)},show:function(n){return typeof n=="string"?(this.setVisible(!0,n),this):(this.setVisible(!0,this.preanim(arguments,0)),this)}}}()),function(){var t=null,it=undefined,o=!0,i=!1,d="setX",g="setY",rt="setXY",r="left",s="bottom",u="top",h="right",c="height",l="width",y="points",nt="hidden",b="absolute",p="visible",a="motion",ut="position",e="easeOut",k=new Ext.Element.Flyweight,w={},f=function(n){return n||{}},n=function(n){return k.dom=n,k.id=Ext.id(n),k},v=function(n){return w[n]||(w[n]=[]),w[n]},tt=function(n,t){w[n]=t};Ext.enableFx=o;Ext.Fx={switchStatements:function(n,t,i){return t.apply(this,i[n])},slideIn:function(i,o){o=f(o);var ft=this,y=ft.dom,l=y.style,it,ut,c,v,et,w,tt,k;return i=i||"t",ft.queueFx(o,function(){function f(){n(y).fxUnwrap(v,ut.pos,o);l.width=ut.width;l.height=ut.height;n(y).afterFx(o)}function ft(t,i,r,u,f,e,o,s,h,c,l){var a={};return n(t).setWidth(r).setHeight(u),n(t)[f]&&n(t)[f](e),i[o]=i[s]="0",h&&(a.width=h),c&&(a.height=c),l&&(a.points=l),a}it=n(y).getXY();n(y).fixDisplay();ut=n(y).getFxRestore();c={x:it[0],y:it[1],0:it[0],1:it[1],width:y.offsetWidth,height:y.offsetHeight};c.right=c.x+c.width;c.bottom=c.y+c.height;n(y).setWidth(c.width).setHeight(c.height);v=n(y).fxWrap(ut.pos,o,nt);l.visibility=p;l.position=b;w={to:[c.x,c.y]};tt={to:c.width};k={to:c.height};et=n(y).switchStatements(i.toLowerCase(),ft,{t:[v,l,c.width,0,t,t,r,s,t,k,t],l:[v,l,0,c.height,t,t,h,u,tt,t,t],r:[v,l,c.width,c.height,d,c.right,r,u,t,t,w],b:[v,l,c.width,c.height,g,c.bottom,r,u,t,k,w],tl:[v,l,0,0,t,t,h,s,tt,k,w],bl:[v,l,0,0,g,c.y+c.height,h,u,tt,k,w],br:[v,l,0,0,rt,[c.right,c.bottom],r,u,tt,k,w],tr:[v,l,0,0,d,c.x+c.width,r,s,tt,k,w]});l.visibility=p;n(v).show();arguments.callee.anim=n(v).fxanim(et,o,a,.5,e,f)}),ft},slideOut:function(t,o){o=f(o);var nt=this,d=nt.dom,w=d.style,tt=nt.getXY(),it,g,v,rt,k={to:0};return t=t||"t",nt.queueFx(o,function(){function f(){o.useDisplay?n(d).setDisplayed(i):n(d).hide();n(d).fxUnwrap(it,g.pos,o);w.width=g.width;w.height=g.height;n(d).afterFx(o)}function nt(n,t,i,r,u,f,e,o,s){var h={};return n[t]=n[i]="0",h[r]=u,f&&(h[f]=e),o&&(h[o]=s),h}g=n(d).getFxRestore();v={x:tt[0],y:tt[1],0:tt[0],1:tt[1],width:d.offsetWidth,height:d.offsetHeight};v.right=v.x+v.width;v.bottom=v.y+v.height;n(d).setWidth(v.width).setHeight(v.height);it=n(d).fxWrap(g.pos,o,p);w.visibility=p;w.position=b;n(it).setWidth(v.width).setHeight(v.height);rt=n(d).switchStatements(t.toLowerCase(),nt,{t:[w,r,s,c,k],l:[w,h,u,l,k],r:[w,r,u,l,k,y,{to:[v.right,v.y]}],b:[w,r,u,c,k,y,{to:[v.x,v.bottom]}],tl:[w,h,s,l,k,c,k],bl:[w,h,u,l,k,c,k,y,{to:[v.x,v.bottom]}],br:[w,r,u,l,k,c,k,y,{to:[v.x+v.width,v.bottom]}],tr:[w,r,s,l,k,c,k,y,{to:[v.right,v.y]}]});arguments.callee.anim=n(it).fxanim(rt,o,a,.5,e,f)}),nt},puff:function(t){t=f(t);var o=this,r=o.dom,s=r.style,h,c,u;return o.queueFx(t,function(){function f(){t.useDisplay?n(r).setDisplayed(i):n(r).hide();n(r).clearOpacity();n(r).setPositioning(u.pos);s.width=u.width;s.height=u.height;s.fontSize="";n(r).afterFx(t)}h=n(r).getWidth();c=n(r).getHeight();n(r).clearOpacity();n(r).show();u=n(r).getFxRestore();arguments.callee.anim=n(r).fxanim({width:{to:n(r).adjustWidth(h*2)},height:{to:n(r).adjustHeight(c*2)},points:{by:[-h*.5,-c*.5]},opacity:{to:0},fontSize:{to:200,unit:"%"}},t,a,.5,e,f)}),o},switchOff:function(r){r=f(r);var o=this,u=o.dom,s=u.style,e;return o.queueFx(r,function(){function f(){r.useDisplay?n(u).setDisplayed(i):n(u).hide();n(u).clearOpacity();n(u).setPositioning(e.pos);s.width=e.width;s.height=e.height;n(u).afterFx(r)}n(u).clearOpacity();n(u).clip();e=n(u).getFxRestore();n(u).fxanim({opacity:{to:.3}},t,t,.1,t,function(){n(u).clearOpacity(),function(){n(u).fxanim({height:{to:1},points:{by:[0,n(u).getHeight()*.5]}},r,a,.3,"easeIn",f)}.defer(100)})}),o},highlight:function(t,i){i=f(i);var e=this,r=e.dom,u=i.attr||"backgroundColor",o={},s;return e.queueFx(i,function(){function f(){r.style[u]=s;n(r).afterFx(i)}n(r).clearOpacity();n(r).show();s=r.style[u];o[u]={from:t||"ffff9c",to:i.endColor||n(r).getColor(u)||"ffffff"};arguments.callee.anim=n(r).fxanim(o,i,"color",1,"easeIn",f)}),e},frame:function(t,i,r){r=f(r);var o=this,u=o.dom,e,s;return o.queueFx(r,function(){function c(){var t=Ext.isBorderBox?2:1;s=e.anim({top:{from:f.y,to:f.y-20},left:{from:f.x,to:f.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:f.height,to:f.height+20*t},width:{from:f.width,to:f.width+20*t}},{duration:r.duration||1,callback:function(){e.remove();--i>0?h():n(u).afterFx(r)}});arguments.callee.anim={isAnimated:!0,stop:function(){s.stop()}}}t=t||"#C3DAF9";t.length==6&&(t="#"+t);i=i||1;n(u).show();var o=n(u).getXY(),f={x:o[0],y:o[1],0:o[0],1:o[1],width:u.offsetWidth,height:u.offsetHeight},h=function(){return e=n(document.body||document.documentElement).createChild({style:{position:b,"z-index":35e3,border:"0px solid "+t}}),e.queueFx({},c)};arguments.callee.anim={isAnimated:!0,stop:function(){i=0;e.stopFx()}};h()}),o},pause:function(t){var i=this.dom,r;return this.queueFx({},function(){r=setTimeout(function(){n(i).afterFx({})},t*1e3);arguments.callee.anim={isAnimated:!0,stop:function(){clearTimeout(r);n(i).afterFx({})}}}),this},fadeIn:function(i){i=f(i);var u=this,r=u.dom,o=i.endOpacity||1;return u.queueFx(i,function(){n(r).setOpacity(0);n(r).fixDisplay();r.style.visibility=p;arguments.callee.anim=n(r).fxanim({opacity:{to:o}},i,t,.5,e,function(){o==1&&n(r).clearOpacity();n(r).afterFx(i)})}),u},fadeOut:function(i){i=f(i);var u=this,r=u.dom,o=r.style,s=i.endOpacity||0;return u.queueFx(i,function(){arguments.callee.anim=n(r).fxanim({opacity:{to:s}},i,t,.5,e,function(){s==0&&(Ext.Element.data(r,"visibilityMode")==Ext.Element.DISPLAY||i.useDisplay?o.display="none":o.visibility=nt,n(r).clearOpacity());n(r).afterFx(i)})}),u},scale:function(n,t,i){return this.shift(Ext.apply({},i,{width:n,height:t})),this},shift:function(t){t=f(t);var r=this.dom,i={};return this.queueFx(t,function(){for(var u in t)t[u]!=it&&(i[u]={to:t[u]});i.width?i.width.to=n(r).adjustWidth(t.width):i;i.height?i.height.to=n(r).adjustWidth(t.height):i;(i.x||i.y||i.xy)&&(i.points=i.xy||{to:[i.x?i.x.to:n(r).getX(),i.y?i.y.to:n(r).getY()]});arguments.callee.anim=n(r).fxanim(i,t,a,.35,e,function(){n(r).afterFx(t)})}),this},ghost:function(t,r){r=f(r);var c=this,u=c.dom,l=u.style,v={opacity:{to:0},points:{}},y=v.points,h,o,s;return t=t||"b",c.queueFx(r,function(){function f(){r.useDisplay?n(u).setDisplayed(i):n(u).hide();n(u).clearOpacity();n(u).setPositioning(h.pos);l.width=h.width;l.height=h.height;n(u).afterFx(r)}h=n(u).getFxRestore();o=n(u).getWidth();s=n(u).getHeight();y.by=n(u).switchStatements(t.toLowerCase(),function(n,t){return[n,t]},{t:[0,-s],l:[-o,0],r:[o,0],b:[0,s],tl:[-o,-s],bl:[-o,s],br:[o,s],tr:[o,-s]});arguments.callee.anim=n(u).fxanim(v,r,a,.5,e,f)}),c},syncFx:function(){var n=this;return n.fxDefaults=Ext.apply(n.fxDefaults||{},{block:i,concurrent:o,stopFx:i}),n},sequenceFx:function(){var n=this;return n.fxDefaults=Ext.apply(n.fxDefaults||{},{block:i,concurrent:i,stopFx:i}),n},nextFx:function(){var n=v(this.dom.id)[0];n&&n.call(this)},hasActiveFx:function(){return v(this.dom.id)[0]},stopFx:function(n){var i=this,r=i.dom.id,t;return i.hasActiveFx()&&(t=v(r)[0],t&&t.anim&&(t.anim.isAnimated?(tt(r,[t]),t.anim.stop(n!==undefined?n:o)):tt(r,[]))),i},beforeFx:function(n){return this.hasActiveFx()&&!n.concurrent?n.stopFx?(this.stopFx(),o):i:o},hasFxBlock:function(){var n=v(this.dom.id);return n&&n[0]&&n[0].block},queueFx:function(t,i){var r=n(this.dom),u;return r.hasFxBlock()||(Ext.applyIf(t,r.fxDefaults),t.concurrent?i.call(r):(u=r.beforeFx(t),i.block=t.block,v(r.dom.id).push(i),u&&r.nextFx())),r},fxWrap:function(t,i,r){var f=this.dom,u,e,o;return i.wrap&&(u=Ext.getDom(i.wrap))||(i.fixPosition&&(e=n(f).getXY()),o=document.createElement("div"),o.style.visibility=r,u=f.parentNode.insertBefore(o,f),n(u).setPositioning(t),n(u).isStyle(ut,"static")&&n(u).position("relative"),n(f).clearPositioning("auto"),n(u).clip(),u.appendChild(f),e&&n(u).setXY(e)),u},fxUnwrap:function(t,i,r){var u=this.dom,f;n(u).clearPositioning();n(u).setPositioning(i);r.wrap||(f=n(t).dom.parentNode,f.insertBefore(u,t),n(t).remove())},getFxRestore:function(){var n=this.dom.style;return{pos:this.getPositioning(),width:n.width,height:n.height}},afterFx:function(t){var i=this.dom,r=i.id;t.afterStyle&&n(i).setStyle(t.afterStyle);t.afterCls&&n(i).addClass(t.afterCls);t.remove==o&&n(i).remove();t.callback&&t.callback.call(t.scope,n(i));t.concurrent||(v(r).shift(),n(i).nextFx())},fxanim:function(n,t,i,r,u,f){i=i||"run";t=t||{};var o=Ext.lib.Anim[i](this.dom,n,t.duration||r||.35,t.easing||u||e,f,this);return t.anim=o,o}};Ext.Fx.resize=Ext.Fx.scale;Ext.Element.addMethods(Ext.Fx)}();Ext.CompositeElementLite=function(n,t){this.elements=[];this.add(n,t);this.el=new Ext.Element.Flyweight};Ext.CompositeElementLite.prototype={isComposite:!0,getElement:function(n){var t=this.el;return t.dom=n,t.id=n.id,t},transformElement:function(n){return Ext.getDom(n)},getCount:function(){return this.elements.length},add:function(n,t){var r=this,f=r.elements,i,u;if(!n)return this;for(typeof n=="string"?n=Ext.Element.selectorFunction(n,t):n.isComposite?n=n.elements:Ext.isIterable(n)||(n=[n]),i=0,u=n.length;i<u;++i)f.push(r.transformElement(n[i]));return r},invoke:function(n,t){for(var r=this,f=r.elements,e=f.length,u,i=0;i<e;i++)u=f[i],u&&Ext.Element.prototype[n].apply(r.getElement(u),t);return r},item:function(n){var t=this,i=t.elements[n],r=null;return i&&(r=t.getElement(i)),r},addListener:function(n,t,i,r){for(var e=this.elements,o=e.length,f,u=0;u<o;u++)if(f=e[u],f)Ext.EventManager.on(f,n,t,i||f,r);return this},each:function(n,t){for(var u=this,f=u.elements,e=f.length,i,r=0;r<e;r++)if(i=f[r],i&&(i=this.getElement(i),n.call(t||i,i,u,r)===!1))break;return u},fill:function(n){var t=this;return t.elements=[],t.add(n),t},filter:function(n){var i=[],t=this,r=Ext.isFunction(n)?n:function(t){return t.is(n)};return t.each(function(n,u,f){r(n,f)!==!1&&(i[i.length]=t.transformElement(n))}),t.elements=i,t},indexOf:function(n){return this.elements.indexOf(this.transformElement(n))},replaceElement:function(n,t,i){var u=isNaN(n)?this.indexOf(n):n,r;return u>-1&&(t=Ext.getDom(t),i&&(r=this.elements[u],r.parentNode.insertBefore(t,r),Ext.removeNode(r)),this.elements.splice(u,1,t)),this},clear:function(){this.elements=[]}};Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener;Ext.CompositeElementLite.importElementMethods=function(){var n,i=Ext.Element.prototype,t=Ext.CompositeElementLite.prototype;for(n in i)typeof i[n]=="function"&&function(n){t[n]=t[n]||function(){return this.invoke(n,arguments)}}.call(t,n)};Ext.CompositeElementLite.importElementMethods();Ext.DomQuery&&(Ext.Element.selectorFunction=Ext.DomQuery.select);Ext.Element.select=function(n,t){var i;if(typeof n=="string")i=Ext.Element.selectorFunction(n,t);else if(n.length!==undefined)i=n;else throw"Invalid selector";return new Ext.CompositeElementLite(i)};Ext.select=Ext.Element.select,function(){var r="beforerequest",n="requestcomplete",u="requestexception",f=undefined,e="load",o="POST",t="GET",i=window;Ext.data.Connection=function(t){Ext.apply(this,t);this.addEvents(r,n,u);Ext.data.Connection.superclass.constructor.call(this)};Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:3e4,autoAbort:!1,disableCaching:!0,disableCachingParam:"_dc",request:function(n){var u=this,a;if(u.fireEvent(r,u,n)){n.el&&(Ext.isEmpty(n.indicatorText)||(u.indicatorText='<div class="loading-indicator">'+n.indicatorText+"<\/div>"),u.indicatorText&&(Ext.getDom(n.el).innerHTML=u.indicatorText),n.success=(Ext.isFunction(n.success)?n.success:function(){}).createInterceptor(function(t){Ext.getDom(n.el).innerHTML=t.responseText}));var e=n.params,s=n.url||u.url,h,v={success:u.handleResponse,failure:u.handleFailure,scope:u,argument:{options:n},timeout:Ext.num(n.timeout,u.timeout)},c,l;if(Ext.isFunction(e)&&(e=e.call(n.scope||i,n)),e=Ext.urlEncode(u.extraParams,Ext.isObject(e)?Ext.urlEncode(e):e),Ext.isFunction(s)&&(s=s.call(n.scope||i,n)),c=Ext.getDom(n.form)){if(s=s||c.action,n.isUpload||/multipart\/form-data/i.test(c.getAttribute("enctype")))return u.doFormUpload.call(u,n,e,s);l=Ext.lib.Ajax.serializeForm(c);e=e?e+"&"+l:l}return h=n.method||u.method||(e||n.xmlData||n.jsonData?o:t),(h===t&&u.disableCaching&&n.disableCaching!==!1||n.disableCaching===!0)&&(a=n.disableCachingParam||u.disableCachingParam,s=Ext.urlAppend(s,a+"="+(new Date).getTime())),n.headers=Ext.applyIf(n.headers||{},u.defaultHeaders||{}),(n.autoAbort===!0||u.autoAbort)&&u.abort(),(h==t||n.xmlData||n.jsonData)&&e&&(s=Ext.urlAppend(s,e),e=""),u.transId=Ext.lib.Ajax.request(h,s,v,e,n)}return n.callback?n.callback.apply(n.scope,[n,f,f]):null},isLoading:function(n){return n?Ext.lib.Ajax.isCallInProgress(n):!!this.transId},abort:function(n){(n||this.isLoading())&&Ext.lib.Ajax.abort(n||this.transId)},handleResponse:function(t){this.transId=!1;var i=t.argument.options;t.argument=i?i.argument:null;this.fireEvent(n,this,t,i);i.success&&i.success.call(i.scope,t,i);i.callback&&i.callback.call(i.scope,i,!0,t)},handleFailure:function(n,t){this.transId=!1;var i=n.argument.options;n.argument=i?i.argument:null;this.fireEvent(u,this,n,i,t);i.failure&&i.failure.call(i.scope,n,i);i.callback&&i.callback.call(i.scope,i,!1,n)},doFormUpload:function(t,r,u){function p(){function c(n,t,i){Ext.isFunction(n)&&n.apply(t,i)}var f=this,u={responseText:"",responseXML:null,argument:t.argument},r,o;try{r=s.contentWindow.document||s.contentDocument||i.frames[h].document;r&&(r.body&&(u.responseText=/textarea/i.test((o=r.body.firstChild||{}).tagName)?o.value:r.body.innerHTML),u.responseXML=r.XMLDocument||r)}catch(l){}Ext.EventManager.removeListener(s,e,p,f);f.fireEvent(n,f,u,t);c(t.success,t.scope,[u,t]);c(t.callback,t.scope,[t,!0,u]);f.debugUploads||setTimeout(function(){Ext.removeNode(s)},100)}var h=Ext.id(),l=document,s=l.createElement("iframe"),f=Ext.getDom(t.form),a=[],c,v="multipart/form-data",y={target:f.target,method:f.method,encoding:f.encoding,enctype:f.enctype,action:f.action};Ext.fly(s).set({id:h,name:h,cls:"x-hidden",src:Ext.SSL_SECURE_URL});l.body.appendChild(s);Ext.isIE&&(document.frames[h].name=h);Ext.fly(f).set({target:h,method:o,enctype:v,encoding:v,action:u||y.action});Ext.iterate(Ext.urlDecode(r,!1),function(n,t){c=l.createElement("input");Ext.fly(c).set({type:"hidden",value:t,name:n});f.appendChild(c);a.push(c)});Ext.EventManager.on(s,e,p,this);f.submit();Ext.fly(f).set(y);Ext.each(a,function(n){Ext.removeNode(n)})}})}();Ext.Ajax=new Ext.data.Connection({autoAbort:!1,serializeForm:function(n){return Ext.lib.Ajax.serializeForm(n)}});Ext.util.JSON=new function(){var r=!!{}.hasOwnProperty,i=function(){var n=null;return function(){return n===null&&(n=Ext.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]"),n}}(),n=function(n){return n<10?"0"+n:n},u=function(json){return json?eval("("+json+")"):""},t=function(n){if(Ext.isDefined(n)&&n!==null){if(Ext.isArray(n))return o(n);if(Ext.isDate(n))return Ext.util.JSON.encodeDate(n);if(Ext.isString(n))return e(n);if(typeof n=="number")return isFinite(n)?String(n):"null";if(Ext.isBoolean(n))return String(n);var i=["{"],s,u,f;for(u in n)if(!n.getElementsByTagName&&(!r||n.hasOwnProperty(u))){f=n[u];switch(typeof f){case"undefined":case"function":case"unknown":break;default:s&&i.push(",");i.push(t(u),":",f===null?"null":t(f));s=!0}}return i.push("}"),i.join("")}return"null"},f={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},e=function(n){return/["\\\x00-\x1f]/.test(n)?'"'+n.replace(/([\x00-\x1f\\"])/g,function(n,t){var i=f[t];return i?i:(i=t.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})+'"':'"'+n+'"'},o=function(n){for(var t=["["],u,f=n.length,r,i=0;i<f;i+=1){r=n[i];switch(typeof r){case"undefined":case"function":case"unknown":break;default:u&&t.push(",");t.push(r===null?"null":Ext.util.JSON.encode(r));u=!0}}return t.push("]"),t.join("")};this.encodeDate=function(t){return'"'+t.getFullYear()+"-"+n(t.getMonth()+1)+"-"+n(t.getDate())+"T"+n(t.getHours())+":"+n(t.getMinutes())+":"+n(t.getSeconds())+'"'};this.encode=function(){var n;return function(r){return n||(n=i()?JSON.stringify:t),n(r)}}();this.decode=function(){var n;return function(t){return n||(n=i()?JSON.parse:u),n(t)}}()};Ext.encode=Ext.util.JSON.encode;Ext.decode=Ext.util.JSON.decode;Ext.EventManager=function(){function o(n){var t=!1,i=0,e=u.length,f=!1,r;if(n){if(n.getElementById||n.navigator){for(;i<e;++i)if(r=u[i],r.el===n){t=r.id;break}t||(t=Ext.id(n),u.push({id:t,el:n}),f=!0)}else t=Ext.id(n);Ext.elCache[t]||(Ext.Element.addToCache(new Ext.Element(n),t),f&&(Ext.elCache[t].skipGC=!0))}return t}function k(t,r,u,f,e,s){var a,h,v,c;t=Ext.getDom(t);a=o(t);h=Ext.elCache[a].events;v=i.on(t,r,e);h[r]=h[r]||[];h[r].push([u,e,s,v,f]);t.addEventListener&&r=="mousewheel"&&(c=["DOMMouseScroll",e,!1],t.addEventListener.apply(t,c),Ext.EventManager.addListener(l,"unload",function(){t.removeEventListener.apply(t,c)}));t==n&&r=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.addListener(e)}function d(){if(window!=top)return!1;try{n.documentElement.doScroll("left")}catch(t){return!1}return r(),!0}function f(){return Ext.isIE9m&&d()?!0:n.readyState==p?(r(),!0):(h||(s=setTimeout(arguments.callee,2)),!1)}function w(){return(a||(a=Ext.query("style, link[rel=stylesheet]")),a.length==n.styleSheets.length)?(r(),!0):(h||(s=setTimeout(arguments.callee,2)),!1)}function g(){n.removeEventListener(c,arguments.callee,!1);w()}function r(){h||(h=!0,s&&clearTimeout(s),y&&n.removeEventListener(c,r,!1),Ext.isIE9m&&f.bindIE&&n.detachEvent("onreadystatechange",f),i.un(l,"load",arguments.callee));t&&!Ext.isReady&&(Ext.isReady=!0,t.fire(),t.listeners=[])}function nt(){t||(t=new Ext.util.Event);y&&n.addEventListener(c,r,!1);Ext.isIE9m?f()||(f.bindIE=!0,n.attachEvent("onreadystatechange",f)):Ext.isOpera?n.readyState==p&&w()||n.addEventListener(c,g,!1):Ext.isWebKit&&f();i.on(l,"load",r)}function tt(n,t){return function(){var i=Ext.toArray(arguments);t.target==Ext.EventObject.setEvent(i[0]).target&&n.apply(this,i)}}function it(n,t,i){return function(r){i.delay(t.buffer,n,null,[new Ext.EventObjectImpl(r)])}}function rt(n,t,i,r,u){return function(f){Ext.EventManager.removeListener(t,i,r,u);n(f)}}function ut(n,t,i){return function(r){var u=new Ext.util.DelayedTask(n);i.tasks||(i.tasks=[]);i.tasks.push(u);u.delay(t.delay||10,n,null,[new Ext.EventObjectImpl(r)])}}function v(n,t,i,r,u){function e(n){if(Ext){n=Ext.EventObject.setEvent(n);var t;if(f.delegate){if(!(t=n.getTarget(f.delegate,o)))return}else t=n.target;f.stopEvent&&n.stopEvent();f.preventDefault&&n.preventDefault();f.stopPropagation&&n.stopPropagation();f.normalized===!1&&(n=n.browserEvent);r.call(u||o,n,t,f)}}var f=!i||typeof i=="boolean"?{}:i,o=Ext.getDom(n),s;if(r=r||f.fn,u=u||f.scope,!o)throw'Error listening for "'+t+'". Element "'+n+"\" doesn't exist.";return f.target&&(e=tt(e,f)),f.delay&&(e=ut(e,f,r)),f.single&&(e=rt(e,o,t,r,u)),f.buffer&&(s=new Ext.util.DelayedTask(e),e=it(e,f,s)),k(o,t,r,s,e,u),e}var t,s,h=!1,y=Ext.isGecko||Ext.isWebKit||Ext.isSafari||Ext.isIE10p,i=Ext.lib.Event,ft=Ext.lib.Dom,n=document,l=window,c="DOMContentLoaded",p="complete",b=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,u=[],a,e={addListener:function(n,t,i,r,u){if(typeof t=="object"){var e=t,f,o;for(f in e)o=e[f],b.test(f)||(Ext.isFunction(o)?v(n,f,e,o,e.scope):v(n,f,o))}else v(n,t,u,i,r)},removeListener:function(t,r,u,f){t=Ext.getDom(t);for(var l=o(t),a=t&&Ext.elCache[l].events[r]||[],s,c,e,h=0,v=a.length;h<v;h++)if(Ext.isArray(e=a[h])&&e[0]==u&&(!f||e[2]==f)){if(e[4]&&e[4].cancel(),c=u.tasks&&u.tasks.length,c){while(c--)u.tasks[c].cancel();delete u.tasks}s=e[1];i.un(t,r,i.extAdapter?e[3]:s);s&&t.addEventListener&&r=="mousewheel"&&t.removeEventListener("DOMMouseScroll",s,!1);s&&t==n&&r=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.removeListener(s);a.splice(h,1);a.length===0&&delete Ext.elCache[l].events[r];for(c in Ext.elCache[l].events)return!1;return Ext.elCache[l].events={},!1}},removeAll:function(t){t=Ext.getDom(t);var s=o(t),v=Ext.elCache[s]||{},h=v.events||{},c,e,a,u,r,l,f;for(u in h)if(h.hasOwnProperty(u))for(c=h[u],e=0,a=c.length;e<a;e++){if(r=c[e],r[4]&&r[4].cancel(),r[0].tasks&&(l=r[0].tasks.length)){while(l--)r[0].tasks[l].cancel();delete r.tasks}f=r[1];i.un(t,u,i.extAdapter?r[3]:f);t.addEventListener&&f&&u=="mousewheel"&&t.removeEventListener("DOMMouseScroll",f,!1);f&&t==n&&u=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.removeListener(f)}Ext.elCache[s]&&(Ext.elCache[s].events={})},getListeners:function(n,t){n=Ext.getDom(n);var r=o(n),u=Ext.elCache[r]||{},i=u.events||{};return i&&i[t]?i[t]:null},removeFromSpecialCache:function(n){for(var t=0,i=u.length;t<i;++t)u[t].el==n&&u.splice(t,1)},purgeElement:function(n,t,i){n=Ext.getDom(n);var s=o(n),h=Ext.elCache[s]||{},f=h.events||{},r,e,u;if(i){if(f&&f.hasOwnProperty(i))for(e=f[i],r=0,u=e.length;r<u;r++)Ext.EventManager.removeListener(n,i,e[r][0])}else Ext.EventManager.removeAll(n);if(t&&n&&n.childNodes)for(r=0,u=n.childNodes.length;r<u;r++)Ext.EventManager.purgeElement(n.childNodes[r],t,i)},_unload:function(){var u,t,i,r,n;for(u in Ext.elCache)Ext.EventManager.removeAll(u);delete Ext.elCache;delete Ext.Element._flyweights;n=Ext.lib.Ajax;i=typeof n.conn=="object"?n.conn:{};for(r in i)t=i[r],t&&n.abort({conn:t,tId:r})},onDocumentReady:function(n,i,r){Ext.isReady?(t||(t=new Ext.util.Event),t.addListener(n,i,r),t.fire(),t.listeners=[]):(t||nt(),r=r||{},r.delay=r.delay||1,t.addListener(n,i,r))},fireDocReady:r};return e.on=e.addListener,e.un=e.removeListener,e.stoppedMouseDownEvent=new Ext.util.Event,e}();Ext.onReady=Ext.EventManager.onDocumentReady,function(){var n=function(){var i=document.body||document.getElementsByTagName("body")[0],n,t;return i?(n=[],Ext.isIE&&(Ext.isIE10p||n.push("ext-ie"),Ext.isIE6?n.push("ext-ie6"):Ext.isIE7?n.push("ext-ie7","ext-ie7m"):Ext.isIE8?n.push("ext-ie8","ext-ie8m"):Ext.isIE9?n.push("ext-ie9","ext-ie9m"):Ext.isIE10&&n.push("ext-ie10")),Ext.isGecko&&(Ext.isGecko2?n.push("ext-gecko2"):n.push("ext-gecko3")),Ext.isOpera&&n.push("ext-opera"),Ext.isWebKit&&n.push("ext-webkit"),Ext.isSafari?n.push("ext-safari "+(Ext.isSafari2?"ext-safari2":Ext.isSafari3?"ext-safari3":"ext-safari4")):Ext.isChrome&&n.push("ext-chrome"),Ext.isMac&&n.push("ext-mac"),Ext.isLinux&&n.push("ext-linux"),(Ext.isStrict||Ext.isBorderBox)&&(t=i.parentNode,t&&(Ext.isStrict||(Ext.fly(t,"_internal").addClass("x-quirks"),Ext.isIE9m&&!Ext.isStrict&&(Ext.isIEQuirks=!0)),Ext.fly(t,"_internal").addClass(Ext.isStrict&&Ext.isIE||!Ext.enableForcedBoxModel&&!Ext.isIE?" ext-strict":" ext-border-box"))),Ext.enableForcedBoxModel&&!Ext.isIE&&(Ext.isForcedBorderBox=!0,n.push("ext-forced-border-box")),Ext.fly(i,"_internal").addClass(n),!0):!1};if(!n())Ext.onReady(n)}(),function(){var n=Ext.apply(Ext.supports,{correctRightMargin:!0,correctTransparentColor:!0,cssFloat:!0}),t=function(){var t=document.createElement("div"),i=document,r,u;t.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"><\/div><\/div><div style="float:left;background-color:transparent;">';i.body.appendChild(t);u=t.lastChild;(r=i.defaultView)&&(r.getComputedStyle(t.firstChild.firstChild,null).marginRight!="0px"&&(n.correctRightMargin=!1),r.getComputedStyle(u,null).backgroundColor!="transparent"&&(n.correctTransparentColor=!1));n.cssFloat=!!u.style.cssFloat;i.body.removeChild(t)};if(Ext.isReady)t();else Ext.onReady(t)}();Ext.EventObject=function(){var n=Ext.lib.Event,t=/(dbl)?click/,i={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},r=Ext.isIE?{1:0,4:1,2:2}:{0:0,1:1,2:2};return Ext.EventObjectImpl=function(n){n&&this.setEvent(n.browserEvent||n)},Ext.EventObjectImpl.prototype={setEvent:function(i){var u=this;return i==u||i&&i.browserEvent?i:(u.browserEvent=i,i?(u.button=i.button?r[i.button]:i.which?i.which-1:-1,t.test(i.type)&&u.button==-1&&(u.button=0),u.type=i.type,u.shiftKey=i.shiftKey,u.ctrlKey=i.ctrlKey||i.metaKey||!1,u.altKey=i.altKey,u.keyCode=i.keyCode,u.charCode=i.charCode,u.target=n.getTarget(i),u.xy=n.getXY(i)):(u.button=-1,u.shiftKey=!1,u.ctrlKey=!1,u.altKey=!1,u.keyCode=0,u.charCode=0,u.target=null,u.xy=[0,0]),u)},stopEvent:function(){var t=this;t.browserEvent&&(t.browserEvent.type=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.fire(t),n.stopEvent(t.browserEvent))},preventDefault:function(){this.browserEvent&&n.preventDefault(this.browserEvent)},stopPropagation:function(){var t=this;t.browserEvent&&(t.browserEvent.type=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.fire(t),n.stopPropagation(t.browserEvent))},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(n){return Ext.isSafari?i[n]||n:n},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getXY:function(){return this.xy},getTarget:function(n,t,i){return n?Ext.fly(this.target).findParent(n,t,i):i?Ext.get(this.target):this.target},getRelatedTarget:function(){return this.browserEvent?n.getRelatedTarget(this.browserEvent):null},getWheelDelta:function(){var n=this.browserEvent,t=0;return n.wheelDelta?t=n.wheelDelta/120:n.detail&&(t=-n.detail/3),t},within:function(n,t,i){if(n){var r=this[t?"getRelatedTarget":"getTarget"]();return r&&((i?r==Ext.getDom(n):!1)||Ext.fly(n).contains(r))}return!1}},new Ext.EventObjectImpl}();Ext.Loader=Ext.apply({},{load:function(n,t,i,r){var i=i||this,f=document.getElementsByTagName("head")[0],e=document.createDocumentFragment(),h=n.length,u=0,c=this,o=function(t){f.appendChild(c.buildScriptTag(n[t],s))},s=function(){u++;h==u&&typeof t=="function"?t.call(i):r===!0&&o(u)};r===!0?o.call(this,0):(Ext.each(n,function(n){e.appendChild(this.buildScriptTag(n,s))},this),f.appendChild(e))},buildScriptTag:function(n,t){var i=document.createElement("script");return i.type="text/javascript",i.src=n,i.readyState?i.onreadystatechange=function(){(i.readyState=="loaded"||i.readyState=="complete")&&(i.onreadystatechange=null,t())}:i.onload=t,i}});Ext.ns("Ext.grid","Ext.list","Ext.dd","Ext.tree","Ext.form","Ext.menu","Ext.state","Ext.layout.boxOverflow","Ext.app","Ext.ux","Ext.chart","Ext.direct","Ext.slider");Ext.apply(Ext,function(){var n=Ext,t=null;return{emptyFn:function(){},BLANK_IMAGE_URL:Ext.isIE6||Ext.isIE7||Ext.isAir?"http://www.extjs.com/s.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",extendX:function(n,t){return Ext.extend(n,t(n.prototype))},getDoc:function(){return Ext.get(document)},num:function(n,t){return n=Number(Ext.isEmpty(n)||Ext.isArray(n)||typeof n=="boolean"||typeof n=="string"&&n.trim().length==0?NaN:n),isNaN(n)?t:n},value:function(n,t,i){return Ext.isEmpty(n,i)?t:n},escapeRe:function(n){return n.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},sequence:function(n,t,i,r){n[t]=n[t].createSequence(i,r)},addBehaviors:function(n){if(Ext.isReady){var i={},r,u,t;for(u in n)if((r=u.split("@"))[1]){t=r[0];i[t]||(i[t]=Ext.select(t));i[t].on(r[1],n[u])}i=null}else Ext.onReady(function(){Ext.addBehaviors(n)})},getScrollBarWidth:function(n){var u;if(!Ext.isReady)return 0;if(n===!0||t===null){var i=Ext.getBody().createChild('<div class="x-hide-offsets" style="width:100px;height:50px;overflow:hidden;"><div style="height:200px;"><\/div><\/div>'),r=i.child("div",!0),f=r.offsetWidth;i.setStyle("overflow",Ext.isWebKit||Ext.isGecko?"auto":"scroll");u=r.offsetWidth;i.remove();t=f-u+2}return t},combine:function(){for(var r=arguments,u=r.length,t=[],n,i=0;i<u;i++)n=r[i],Ext.isArray(n)?t=t.concat(n):n.length===undefined||n.substr?t.push(n):t=t.concat(Array.prototype.slice.call(n,0));return t},copyTo:function(n,t,i){return typeof i=="string"&&(i=i.split(/[,;\s]/)),Ext.each(i,function(i){t.hasOwnProperty(i)&&(n[i]=t[i])},this),n},destroy:function(){Ext.each(arguments,function(n){n&&(Ext.isArray(n)?this.destroy.apply(this,n):typeof n.destroy=="function"?n.destroy():n.dom&&n.remove())},this)},destroyMembers:function(n){for(var t=1,i=arguments,r=i.length;t<r;t++)Ext.destroy(n[i[t]]),delete n[i[t]]},clean:function(n){var t=[];return Ext.each(n,function(n){!n||t.push(n)}),t},unique:function(n){var t=[],i={};return Ext.each(n,function(n){i[n]||t.push(n);i[n]=!0}),t},flatten:function(n){function i(n){return Ext.each(n,function(n){Ext.isArray(n)?i(n):t.push(n)}),t}var t=[];return i(n)},min:function(n,t){var i=n[0];return t=t||function(n,t){return n<t?-1:1},Ext.each(n,function(n){i=t(i,n)==-1?i:n}),i},max:function(n,t){var i=n[0];return t=t||function(n,t){return n>t?1:-1},Ext.each(n,function(n){i=t(i,n)==1?i:n}),i},mean:function(n){return n.length>0?Ext.sum(n)/n.length:undefined},sum:function(n){var t=0;return Ext.each(n,function(n){t+=n}),t},partition:function(n,t){var i=[[],[]];return Ext.each(n,function(n,r,u){i[t&&t(n,r,u)||!t&&n?0:1].push(n)}),i},invoke:function(n,t){var i=[],r=Array.prototype.slice.call(arguments,2);return Ext.each(n,function(n){n&&typeof n[t]=="function"?i.push(n[t].apply(n,r)):i.push(undefined)}),i},pluck:function(n,t){var i=[];return Ext.each(n,function(n){i.push(n[t])}),i},zip:function(){for(var f=Ext.partition(arguments,function(n){return typeof n!="function"}),t=f[0],u=f[1][0],o=Ext.max(Ext.pluck(t,"length")),i=[],r,e,n=0;n<o;n++)if(i[n]=[],u)i[n]=u.apply(u,Ext.pluck(t,n));else for(r=0,e=t.length;r<e;r++)i[n].push(t[r][n]);return i},getCmp:function(n){return Ext.ComponentMgr.get(n)},useShims:n.isIE6||n.isMac&&n.isGecko2,type:function(n){if(n===undefined||n===null)return!1;if(n.htmlElement)return"element";var t=typeof n;if(t=="object"&&n.nodeName)switch(n.nodeType){case 1:return"element";case 3:return/\S/.test(n.nodeValue)?"textnode":"whitespace"}if(t=="object"||t=="function"){switch(n.constructor){case Array:return"array";case RegExp:return"regexp";case Date:return"date"}if(typeof n.length=="number"&&typeof n.item=="function")return"nodelist"}return t},intercept:function(n,t,i,r){n[t]=n[t].createInterceptor(i,r)},callback:function(n,t,i,r){typeof n=="function"&&(r?n.defer(r,t,i||[]):n.apply(t,i||[]))}}}());Ext.apply(Function.prototype,{createSequence:function(n,t){var i=this;return typeof n!="function"?this:function(){var r=i.apply(this||window,arguments);return n.apply(t||this||window,arguments),r}}});Ext.applyIf(String,{escape:function(n){return n.replace(/('|\\)/g,"\\$1")},leftPad:function(n,t,i){var r=String(n);for(i||(i=" ");r.length<t;)r=i+r;return r}});String.prototype.toggle=function(n,t){return this==n?t:n};String.prototype.trim=function(){var n=/^\s+|\s+$/g;return function(){return this.replace(n,"")}}();Date.prototype.getElapsed=function(n){return Math.abs((n||new Date).getTime()-this.getTime())};Ext.applyIf(Number.prototype,{constrain:function(n,t){return Math.min(Math.max(this,n),t)}});Ext.lib.Dom.getRegion=function(n){return Ext.lib.Region.getRegion(n)};Ext.lib.Region=function(n,t,i,r){var u=this;u.top=n;u[1]=n;u.right=t;u.bottom=i;u.left=r;u[0]=r};Ext.lib.Region.prototype={contains:function(n){var t=this;return n.left>=t.left&&n.right<=t.right&&n.top>=t.top&&n.bottom<=t.bottom},getArea:function(){var n=this;return(n.bottom-n.top)*(n.right-n.left)},intersect:function(n){var t=this,i=Math.max(t.top,n.top),r=Math.min(t.right,n.right),u=Math.min(t.bottom,n.bottom),f=Math.max(t.left,n.left);if(u>=i&&r>=f)return new Ext.lib.Region(i,r,u,f)},union:function(n){var t=this,i=Math.min(t.top,n.top),r=Math.max(t.right,n.right),u=Math.max(t.bottom,n.bottom),f=Math.min(t.left,n.left);return new Ext.lib.Region(i,r,u,f)},constrainTo:function(n){var t=this;return t.top=t.top.constrain(n.top,n.bottom),t.bottom=t.bottom.constrain(n.top,n.bottom),t.left=t.left.constrain(n.left,n.right),t.right=t.right.constrain(n.left,n.right),t},adjust:function(n,t,i,r){var u=this;return u.top+=n,u.left+=t,u.right+=r,u.bottom+=i,u}};Ext.lib.Region.getRegion=function(n){var t=Ext.lib.Dom.getXY(n),i=t[1],r=t[0]+n.offsetWidth,u=t[1]+n.offsetHeight,f=t[0];return new Ext.lib.Region(i,r,u,f)};Ext.lib.Point=function(n,t){Ext.isArray(n)&&(t=n[1],n=n[0]);var i=this;i.x=i.right=i.left=i[0]=n;i.y=i.top=i.bottom=i[1]=t};Ext.lib.Point.prototype=new Ext.lib.Region;Ext.apply(Ext.DomHelper,function(){function n(n,r,u,f,e,o){n=Ext.getDom(n);var s;return i.useDom?(s=t(r,null),o?n.appendChild(s):(e=="firstChild"?n:n.parentNode).insertBefore(s,n[e]||n)):s=Ext.DomHelper.insertHtml(f,n,Ext.DomHelper.createHtml(r)),u?Ext.get(s,!0):s}function t(n,i){var r,s=document,h,f,c,e,l,u;if(Ext.isArray(n))for(r=s.createDocumentFragment(),e=0,l=n.length;e<l;e++)t(n[e],r);else if(typeof n=="string")r=s.createTextNode(n);else{r=s.createElement(n.tag||"div");h=!!r.setAttribute;for(u in n)o.test(u)||(f=n[u],u=="cls"?r.className=f:h?r.setAttribute(u,f):r[u]=f);Ext.DomHelper.applyStyles(r,n.style);(c=n.children||n.cn)?t(c,r):n.html&&(r.innerHTML=n.html)}return i&&i.appendChild(r),r}var i,r="afterbegin",u="afterend",f="beforebegin",e="beforeend",o=/tag|children|cn|html$/i;return i={createTemplate:function(n){var t=Ext.DomHelper.createHtml(n);return new Ext.Template(t)},useDom:!1,insertBefore:function(t,i,r){return n(t,i,r,f)},insertAfter:function(t,i,r){return n(t,i,r,u,"nextSibling")},insertFirst:function(t,i,u){return n(t,i,u,r,"firstChild")},append:function(t,i,r){return n(t,i,r,e,"",!0)},createDom:t}}());Ext.apply(Ext.Template.prototype,{disableFormats:!1,re:/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,argsRe:/^\s*['"](.*)["']\s*$/,compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,applyTemplate:function(n){function f(f,e,o,s){var c,h,l;if(o&&r){if(o.substr(0,5)=="this.")return u.call(o.substr(5),n[e],n);if(s){for(c=t.argsRe,s=s.split(","),h=0,l=s.length;h<l;h++)s[h]=s[h].replace(c,"$1");s=[n[e]].concat(s)}else s=[n[e]];return i[o].apply(i,s)}return n[e]!==undefined?n[e]:""}var t=this,r=t.disableFormats!==!0,i=Ext.util.Format,u=t;return t.compiled?t.compiled(n):t.html.replace(t.re,f)},compile:function(){function fn(n,t,i,r){return i&&useF?(r=r?","+r:"",i.substr(0,5)!="this."?i="fm."+i+"(":(i='this.call("'+i.substr(5)+'", ',r=", values")):(r="",i="(values['"+t+"'] == undefined ? '' : "),"'"+sep+i+"values['"+t+"']"+r+")"+sep+"'"}var me=this,fm=Ext.util.Format,useF=me.disableFormats!==!0,sep=Ext.isGecko?"+":",",body;return Ext.isGecko?body="this.compiled = function(values){ return '"+me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn)+"';};":(body=["this.compiled = function(values){ return ['"],body.push(me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn)),body.push("'].join('');};"),body=body.join("")),eval(body),me},call:function(n,t,i){return this[n](t,i)}});Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.util.Functions={createInterceptor:function(n,t,i){var r=n;return Ext.isFunction(t)?function(){var r=this,u=arguments;return t.target=r,t.method=n,t.apply(i||r||window,u)!==!1?n.apply(r||window,u):null}:n},createDelegate:function(n,t,i,r){return Ext.isFunction(n)?function(){var u=i||arguments,f;return r===!0?(u=Array.prototype.slice.call(arguments,0),u=u.concat(i)):Ext.isNumber(r)&&(u=Array.prototype.slice.call(arguments,0),f=[r,0].concat(i),Array.prototype.splice.apply(u,f)),n.apply(t||window,u)}:n},defer:function(n,t,i,r,u){return(n=Ext.util.Functions.createDelegate(n,i,r,u),t>0)?setTimeout(n,t):(n(),0)},createSequence:function(n,t,i){return Ext.isFunction(t)?function(){var r=n.apply(this||window,arguments);return t.apply(i||this||window,arguments),r}:n}};Ext.defer=Ext.util.Functions.defer;Ext.createInterceptor=Ext.util.Functions.createInterceptor;Ext.createSequence=Ext.util.Functions.createSequence;Ext.createDelegate=Ext.util.Functions.createDelegate;Ext.apply(Ext.util.Observable.prototype,function(){function n(n){var t=(this.methodEvents=this.methodEvents||{})[n],r,i,u,e=this,f;return t||(this.methodEvents[n]=t={},t.originalFn=this[n],t.methodName=n,t.before=[],t.after=[],f=function(n,t,f){(i=n.apply(t||e,f))!==undefined&&(typeof i=="object"?(r=i.returnValue!==undefined?i.returnValue:i,u=!!i.cancel):i===!1?u=!0:r=i)},this[n]=function(){var h=Array.prototype.slice.call(arguments,0),o,n,s;for(r=i=undefined,u=!1,n=0,s=t.before.length;n<s;n++)if(o=t.before[n],f(o.fn,o.scope,h),u)return r;for((i=t.originalFn.apply(e,h))!==undefined&&(r=i),n=0,s=t.after.length;n<s;n++)if(o=t.after[n],f(o.fn,o.scope,h),u)return r;return r}),t}return{beforeMethod:function(t,i,r){n.call(this,t).before.push({fn:i,scope:r})},afterMethod:function(t,i,r){n.call(this,t).after.push({fn:i,scope:r})},removeMethodListener:function(n,t,i){for(var u=this.getMethodEvent(n),r=0,f=u.before.length;r<f;r++)if(u.before[r].fn==t&&u.before[r].scope==i){u.before.splice(r,1);return}for(r=0,f=u.after.length;r<f;r++)if(u.after[r].fn==t&&u.after[r].scope==i){u.after.splice(r,1);return}},relayEvents:function(n,t){function e(n){return function(){return i.fireEvent.apply(i,[n].concat(Array.prototype.slice.call(arguments,0)))}}for(var i=this,r,u=0,f=t.length;u<f;u++){r=t[u];i.events[r]=i.events[r]||!0;n.on(r,e(r),i)}},enableBubble:function(n){var u=this,r,f,t,i;if(!Ext.isEmpty(n))for(n=Ext.isArray(n)?n:Array.prototype.slice.call(arguments,0),r=0,f=n.length;r<f;r++)t=n[r],t=t.toLowerCase(),i=u.events[t]||!0,typeof i=="boolean"&&(i=new Ext.util.Event(u,t),u.events[t]=i),i.bubble=!0}}}());Ext.util.Observable.capture=function(n,t,i){n.fireEvent=n.fireEvent.createInterceptor(t,i)};Ext.util.Observable.observeClass=function(n,t){if(n){if(n.fireEvent||(Ext.apply(n,new Ext.util.Observable),Ext.util.Observable.capture(n.prototype,n.fireEvent,n)),typeof t=="object")n.on(t);return n}};Ext.apply(Ext.EventManager,function(){var n,u,t,i,r=Ext.lib.Dom,s=Ext.EventManager._unload,f=0,e=0,o=Ext.isWebKit?Ext.num(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1])>=525:!(Ext.isGecko&&!Ext.isWindows||Ext.isOpera);return{_unload:function(){Ext.EventManager.un(window,"resize",this.fireWindowResize,this);s.call(Ext.EventManager)},doResizeEvent:function(){var t=r.getViewHeight(),i=r.getViewWidth();(e!=t||f!=i)&&n.fire(f=i,e=t)},onWindowResize:function(t,i,r){if(!n){n=new Ext.util.Event;u=new Ext.util.DelayedTask(this.doResizeEvent);Ext.EventManager.on(window,"resize",this.fireWindowResize,this)}n.addListener(t,i,r)},fireWindowResize:function(){n&&u.delay(100)},onTextResize:function(n,r,u){if(!t){t=new Ext.util.Event;var f=new Ext.Element(document.createElement("div"));f.dom.className="x-text-resize";f.dom.innerHTML="X";f.appendTo(document.body);i=f.dom.offsetHeight;setInterval(function(){f.dom.offsetHeight!=i&&t.fire(i,i=f.dom.offsetHeight)},this.textResizeInterval)}t.addListener(n,r,u)},removeResizeListener:function(t,i){n&&n.removeListener(t,i)},fireResize:function(){n&&n.fire(r.getViewWidth(),r.getViewHeight())},textResizeInterval:50,ieDeferSrc:!1,getKeyEvent:function(){return o?"keydown":"keypress"},useKeydown:o}}());Ext.EventManager.on=Ext.EventManager.addListener;Ext.apply(Ext.EventObjectImpl.prototype,{BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGEUP:33,PAGE_DOWN:34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,isNavKeyPress:function(){var t=this,n=this.normalizeKey(t.keyCode);return n>=33&&n<=40||n==t.RETURN||n==t.TAB||n==t.ESC},isSpecialKey:function(){var n=this.normalizeKey(this.keyCode);return this.type=="keypress"&&this.ctrlKey||this.isNavKeyPress()||n==this.BACKSPACE||n>=16&&n<=20||n>=44&&n<=46},getPoint:function(){return new Ext.lib.Point(this.xy[0],this.xy[1])},hasModifier:function(){return this.ctrlKey||this.altKey||this.shiftKey}});Ext.Element.addMethods({swallowEvent:function(n,t){function r(n){n.stopPropagation();t&&n.preventDefault()}var i=this;if(Ext.isArray(n))return Ext.each(n,function(n){i.on(n,r)}),i;i.on(n,r);return i},relayEvent:function(n,t){this.on(n,function(i){t.fireEvent(n,i)})},clean:function(n){var r=this,i=r.dom,t=i.firstChild,f=-1,u;if(Ext.Element.data(i,"isCleaned")&&n!==!0)return r;while(t)u=t.nextSibling,t.nodeType!=3||/\S/.test(t.nodeValue)?t.nodeIndex=++f:i.removeChild(t),t=u;return Ext.Element.data(i,"isCleaned",!0),r},load:function(){var n=this.getUpdater();return n.update.apply(n,arguments),this},getUpdater:function(){return this.updateManager||(this.updateManager=new Ext.Updater(this))},update:function(n,t,i){if(!this.dom)return this;if(n=n||"",t!==!0)return this.dom.innerHTML=n,typeof i=="function"&&i(),this;var r=Ext.id(),u=this.dom;n+='<span id="'+r+'"><\/span>';Ext.lib.Event.onAvailable(r,function(){for(var DOC=document,hd=DOC.getElementsByTagName("head")[0],re=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,srcRe=/\ssrc=([\'\"])(.*?)\1/i,typeRe=/\stype=([\'\"])(.*?)\1/i,match,attrs,srcMatch,typeMatch,el,s;match=re.exec(n);)attrs=match[1],srcMatch=attrs?attrs.match(srcRe):!1,srcMatch&&srcMatch[2]?(s=DOC.createElement("script"),s.src=srcMatch[2],typeMatch=attrs.match(typeRe),typeMatch&&typeMatch[2]&&(s.type=typeMatch[2]),hd.appendChild(s)):match[2]&&match[2].length>0&&(window.execScript?window.execScript(match[2]):window.eval(match[2]));el=DOC.getElementById(r);el&&Ext.removeNode(el);typeof i=="function"&&i()});return u.innerHTML=n.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,""),this},removeAllListeners:function(){return this.removeAnchor(),Ext.EventManager.removeAll(this.dom),this},createProxy:function(n,t,i){n=typeof n=="object"?n:{tag:"div",cls:n};var r=this,u=t?Ext.DomHelper.append(t,n,!0):Ext.DomHelper.insertBefore(r.dom,n,!0);return i&&r.setBox&&r.getBox&&u.setBox(r.getBox()),u}});Ext.Element.prototype.getUpdateManager=Ext.Element.prototype.getUpdater;Ext.Element.addMethods({getAnchorXY:function(n,t,i){n=(n||"tl").toLowerCase();i=i||{};var r=this,o=r.dom==document.body||r.dom==document,u=i.width||o?Ext.lib.Dom.getViewWidth():r.getWidth(),f=i.height||o?Ext.lib.Dom.getViewHeight():r.getHeight(),s,e=Math.round,h=r.getXY(),c=r.getScroll(),l=o?c.left:t?0:h[0],a=o?c.top:t?0:h[1],v={c:[e(u*.5),e(f*.5)],t:[e(u*.5),0],l:[0,e(f*.5)],r:[u,e(f*.5)],b:[e(u*.5),f],tl:[0,0],bl:[0,f],br:[u,f],tr:[u,0]};return s=v[n],[s[0]+l,s[1]+a]},anchorTo:function(n,t,i,r,u,f){var o=this,s=o.dom,h=!Ext.isEmpty(u),e=function(){Ext.fly(s).alignTo(n,t,i,r);Ext.callback(f,Ext.fly(s))},c=this.getAnchor();this.removeAnchor();Ext.apply(c,{fn:e,scroll:h});Ext.EventManager.onWindowResize(e,null);if(h)Ext.EventManager.on(window,"scroll",e,null,{buffer:isNaN(u)?50:u});return e.call(o),o},removeAnchor:function(){var t=this,n=this.getAnchor();return n&&n.fn&&(Ext.EventManager.removeResizeListener(n.fn),n.scroll&&Ext.EventManager.un(window,"scroll",n.fn),delete n.fn),t},getAnchor:function(){var i=Ext.Element.data,t=this.dom,n;if(t)return n=i(t,"_anchor"),n||(n=i(t,"_anchor",{})),n},getAlignToXY:function(n,t,i){if(n=Ext.get(n),!n||!n.dom)throw"Element.alignToXY with an element that doesn't exist";i=i||[0,0];t=(!t||t=="?"?"tl-bl?":!/-/.test(t)&&t!==""?"tl-"+t:t||"tl-bl").toLowerCase();var s=this,ot=s.dom,y,p,r,u,h,c,f,tt=Ext.lib.Dom.getViewWidth()-10,it=Ext.lib.Dom.getViewHeight()-10,w,b,k,d,g,nt,rt=document,ut=rt.documentElement,ft=rt.body,l=(ut.scrollLeft||ft.scrollLeft||0)+5,a=(ut.scrollTop||ft.scrollTop||0)+5,et=!1,e="",o="",v=t.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!v)throw"Element.alignTo with an invalid alignment "+t;return e=v[1],o=v[2],et=!!v[3],y=s.getAnchorXY(e,!0),p=n.getAnchorXY(o,!1),r=p[0]-y[0]+i[0],u=p[1]-y[1]+i[1],et&&(h=s.getWidth(),c=s.getHeight(),f=n.getRegion(),w=e.charAt(0),b=e.charAt(e.length-1),k=o.charAt(0),d=o.charAt(o.length-1),g=w=="t"&&k=="b"||w=="b"&&k=="t",nt=b=="r"&&d=="l"||b=="l"&&d=="r",r+h>tt+l&&(r=nt?f.left-h:tt+l-h),r<l&&(r=nt?f.right:l),u+c>it+a&&(u=g?f.top-c:it+a-c),u<a&&(u=g?f.bottom:a)),[r,u]},alignTo:function(n,t,i,r){var u=this;return u.setXY(u.getAlignToXY(n,t,i),u.preanim&&!!r?u.preanim(arguments,3):!1)},adjustForConstraints:function(n,t,i){return this.getConstrainToXY(t||document,!1,i,n)||n},getConstrainToXY:function(){var n={top:0,left:0,bottom:0,right:0};return function(t,i,r,u){var c,l,f,e,a,v;t=Ext.get(t);r=r?Ext.applyIf(r,n):n;f=0;e=0;t.dom==document.body||t.dom==document?(c=Ext.lib.Dom.getViewWidth(),l=Ext.lib.Dom.getViewHeight()):(c=t.dom.clientWidth,l=t.dom.clientHeight,i||(a=t.getXY(),f=a[0],e=a[1]));v=t.getScroll();f+=r.left+v.left;e+=r.top+v.top;c-=r.right;l-=r.bottom;var y=f+c,p=e+l,w=u||(i?[this.getLeft(!0),this.getTop(!0)]:this.getXY()),o=w[0],s=w[1],b=this.getConstrainOffset(),k=this.dom.offsetWidth+b,d=this.dom.offsetHeight+b,h=!1;return o+k>y&&(o=y-k,h=!0),s+d>p&&(s=p-d,h=!0),o<f&&(o=f,h=!0),s<e&&(s=e,h=!0),h?[o,s]:!1}}(),getConstrainOffset:function(){return 0},getCenterXY:function(){return this.getAlignToXY(document,"c-c")},center:function(n){return this.alignTo(n||document,"c-c")}});Ext.Element.addMethods({select:function(n,t){return Ext.Element.select(n,t,this.dom)}});Ext.apply(Ext.Element.prototype,function(){var t=Ext.getDom,i=Ext.get,n=Ext.DomHelper;return{insertSibling:function(r,u,f){var o=this,e,s=(u||"before").toLowerCase()=="after",h;return Ext.isArray(r)?(h=o,Ext.each(r,function(n){e=Ext.fly(h,"_internal").insertSibling(n,u,f);s&&(h=e)}),e):(r=r||{},r.nodeType||r.dom?(e=o.dom.parentNode.insertBefore(t(r),s?o.dom.nextSibling:o.dom),f||(e=i(e))):e=s&&!o.dom.nextSibling?n.append(o.dom.parentNode,r,!f):n[s?"insertAfter":"insertBefore"](o.dom,r,!f),e)}}}());Ext.Element.boxMarkup='<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"><\/div><\/div><\/div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"><\/div><\/div><\/div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"><\/div><\/div><\/div>';Ext.Element.addMethods(function(){var n="_internal";return{applyStyles:function(n){return Ext.DomHelper.applyStyles(this.dom,n),this},getStyles:function(){var n={};return Ext.each(arguments,function(t){n[t]=this.getStyle(t)},this),n},setOverflow:function(n){var t=this.dom;n=="auto"&&Ext.isMac&&Ext.isGecko2?(t.style.overflow="hidden",function(){t.style.overflow="auto"}.defer(1)):t.style.overflow=n},boxWrap:function(n){n=n||"x-box";var t=Ext.get(this.insertHtml("beforeBegin","<div class='"+n+"'>"+String.format(Ext.Element.boxMarkup,n)+"<\/div>"));return Ext.DomQuery.selectNode("."+n+"-mc",t.dom).appendChild(this.dom),t},setSize:function(n,t,i){var r=this;return typeof n=="object"&&(t=n.height,n=n.width),n=r.adjustWidth(n),t=r.adjustHeight(t),i&&r.anim?r.anim({width:{to:n},height:{to:t}},r.preanim(arguments,2)):(r.dom.style.width=r.addUnits(n),r.dom.style.height=r.addUnits(t)),r},getComputedHeight:function(){var n=this,t=Math.max(n.dom.offsetHeight,n.dom.clientHeight);return t||(t=parseFloat(n.getStyle("height"))||0,n.isBorderBox()||(t+=n.getFrameWidth("tb"))),t},getComputedWidth:function(){var n=Math.max(this.dom.offsetWidth,this.dom.clientWidth);return n||(n=parseFloat(this.getStyle("width"))||0,this.isBorderBox()||(n+=this.getFrameWidth("lr"))),n},getFrameWidth:function(n,t){return t&&this.isBorderBox()?0:this.getPadding(n)+this.getBorderWidth(n)},addClassOnOver:function(t){return this.hover(function(){Ext.fly(this,n).addClass(t)},function(){Ext.fly(this,n).removeClass(t)}),this},addClassOnFocus:function(t){this.on("focus",function(){Ext.fly(this,n).addClass(t)},this.dom);this.on("blur",function(){Ext.fly(this,n).removeClass(t)},this.dom);return this},addClassOnClick:function(t){var i=this.dom;this.on("mousedown",function(){Ext.fly(i,n).addClass(t);var r=Ext.getDoc(),u=function(){Ext.fly(i,n).removeClass(t);r.removeListener("mouseup",u)};r.on("mouseup",u)});return this},getViewSize:function(){var i=document,n=this.dom,r=n==i||n==i.body,t;return r?(t=Ext.lib.Dom,{width:t.getViewWidth(),height:t.getViewHeight()}):{width:n.clientWidth,height:n.clientHeight}},getStyleSize:function(){var n=this,i,r,e=document,u=this.dom,o=u==e||u==e.body,t=u.style,f;return o?(f=Ext.lib.Dom,{width:f.getViewWidth(),height:f.getViewHeight()}):(t.width&&t.width!="auto"&&(i=parseFloat(t.width),n.isBorderBox()&&(i-=n.getFrameWidth("lr"))),t.height&&t.height!="auto"&&(r=parseFloat(t.height),n.isBorderBox()&&(r-=n.getFrameWidth("tb"))),{width:i||n.getWidth(!0),height:r||n.getHeight(!0)})},getSize:function(n){return{width:this.getWidth(n),height:this.getHeight(n)}},repaint:function(){var n=this.dom;return this.addClass("x-repaint"),setTimeout(function(){Ext.fly(n).removeClass("x-repaint")},1),this},unselectable:function(){return this.dom.unselectable="on",this.swallowEvent("selectstart",!0).addClass("x-unselectable")},getMargins:function(n){var t=this,i,u={t:"top",l:"left",r:"right",b:"bottom"},r={};if(n)return t.addStyles.call(t,n,t.margins);for(i in t.margins)r[u[i]]=parseFloat(t.getStyle(t.margins[i]))||0;return r}}}());Ext.Element.addMethods({setBox:function(n,t,i){var r=this,u=n.width,f=n.height;return!t||r.autoBoxAdjust||r.isBorderBox()||(u-=r.getBorderWidth("lr")+r.getPadding("lr"),f-=r.getBorderWidth("tb")+r.getPadding("tb")),r.setBounds(n.x,n.y,u,f,r.animTest.call(r,arguments,i,2)),r},getBox:function(n,t){var i=this,r,h,c,f=i.getBorderWidth,e=i.getPadding,o,l,s,a;t?(h=parseInt(i.getStyle("left"),10)||0,c=parseInt(i.getStyle("top"),10)||0,r=[h,c]):r=i.getXY();var v=i.dom,y=v.offsetWidth,p=v.offsetHeight,u;return n?(o=f.call(i,"l")+e.call(i,"l"),l=f.call(i,"r")+e.call(i,"r"),s=f.call(i,"t")+e.call(i,"t"),a=f.call(i,"b")+e.call(i,"b"),u={x:r[0]+o,y:r[1]+s,0:r[0]+o,1:r[1]+s,width:y-(o+l),height:p-(s+a)}):u={x:r[0],y:r[1],0:r[0],1:r[1],width:y,height:p},u.right=u.x+u.width,u.bottom=u.y+u.height,u},move:function(n,t,i){var r=this,s=r.getXY(),u=s[0],f=s[1],h=[u-t,f],c=[u+t,f],e=[u,f-t],o=[u,f+t],l={l:h,left:h,r:c,right:c,t:e,top:e,up:e,b:o,bottom:o,down:o};n=n.toLowerCase();r.moveTo(l[n][0],l[n][1],r.animTest.call(r,arguments,i,2))},setLeftTop:function(n,t){var i=this,r=i.dom.style;return r.left=i.addUnits(n),r.top=i.addUnits(t),i},getRegion:function(){return Ext.lib.Dom.getRegion(this.dom)},setBounds:function(n,t,i,r,u){var f=this;return u&&f.anim?f.anim({points:{to:[n,t]},width:{to:f.adjustWidth(i)},height:{to:f.adjustHeight(r)}},f.preanim(arguments,4),"motion"):(f.setSize(i,r),f.setLocation(n,t)),f},setRegion:function(n,t){return this.setBounds(n.left,n.top,n.right-n.left,n.bottom-n.top,this.animTest.call(this,arguments,t,1))}});Ext.Element.addMethods({scrollTo:function(n,t,i){var f=/top/i.test(n),r=this,e=r.dom,u;return i&&r.anim?(u="scroll"+(f?"Left":"Top"),r.anim({scroll:{to:f?[e[u],t]:[t,e[u]]}},r.preanim(arguments,2),"scroll")):(u="scroll"+(f?"Top":"Left"),e[u]=t),r},scrollIntoView:function(n,t){var i=Ext.getDom(n)||Ext.getBody().dom,r=this.dom,o=this.getOffsetsTo(i),u=o[0]+i.scrollLeft,f=o[1]+i.scrollTop,s=f+r.offsetHeight,h=u+r.offsetWidth,e=i.clientHeight,c=parseInt(i.scrollTop,10),l=parseInt(i.scrollLeft,10),a=c+e,v=l+i.clientWidth;return r.offsetHeight>e||f<c?i.scrollTop=f:s>a&&(i.scrollTop=s-e),i.scrollTop=i.scrollTop,t!==!1&&(r.offsetWidth>i.clientWidth||u<l?i.scrollLeft=u:h>v&&(i.scrollLeft=h-i.clientWidth),i.scrollLeft=i.scrollLeft),this},scrollChildIntoView:function(n,t){Ext.fly(n,"_scrollChildIntoView").scrollIntoView(this,t)},scroll:function(n,t){if(!this.isScrollable())return!1;var i=this.dom,f=i.scrollLeft,e=i.scrollTop,s=i.scrollWidth,h=i.scrollHeight,c=i.clientWidth,l=i.clientHeight,o=!1,u,r={l:Math.min(f+t,s-c),r:u=Math.max(f-t,0),t:Math.max(e-t,0),b:Math.min(e+t,h-l)};return r.d=r.b,r.u=r.t,n=n.substr(0,1),(u=r[n])>-1&&(o=!0,this.scrollTo(n=="l"||n=="r"?"left":"top",u,this.preanim(arguments,2))),o}});Ext.Element.addMethods(function(){var f="visibility",t="display",e="hidden",i="none",r="x-masked",u="x-masked-relative",n=Ext.Element.data;return{isVisible:function(n){var u=!this.isStyle(f,e)&&!this.isStyle(t,i),r=this.dom.parentNode;if(n!==!0||!u)return u;while(r&&!/^body/i.test(r.tagName)){if(!Ext.fly(r,"_isVisible").isVisible())return!1;r=r.parentNode}return!0},isDisplayed:function(){return!this.isStyle(t,i)},enableDisplayMode:function(t){return this.setVisibilityMode(Ext.Element.DISPLAY),Ext.isEmpty(t)||n(this.dom,"originalDisplay",t),this},mask:function(t,i){var f=this,e=f.dom,l=Ext.DomHelper,c="ext-el-mask-msg",h,s,o;return/^body/i.test(e.tagName)||f.getStyle("position")!="static"||f.addClass(u),(h=n(e,"maskMsg"))&&h.remove(),(h=n(e,"mask"))&&h.remove(),s=l.append(e,{cls:"ext-el-mask"},!0),n(e,"mask",s),f.addClass(r),s.setDisplayed(!0),typeof t=="string"&&(o=l.append(e,{cls:c,cn:{tag:"div"}},!0),n(e,"maskMsg",o),o.dom.className=i?c+" "+i:c,o.dom.firstChild.innerHTML=t,o.setDisplayed(!0),o.center(f)),!Ext.isIE||Ext.isIE7&&Ext.isStrict||f.getStyle("height")!="auto"||s.setSize(undefined,f.getHeight()),s},unmask:function(){var i=this,t=i.dom,f=n(t,"mask"),e=n(t,"maskMsg");f&&(e&&(e.remove(),n(t,"maskMsg",undefined)),f.remove(),n(t,"mask",undefined),i.removeClass([r,u]))},isMasked:function(){var t=n(this.dom,"mask");return t&&t.isVisible()},createShim:function(){var n=document.createElement("iframe"),t;return n.frameBorder="0",n.className="ext-shim",n.src=Ext.SSL_SECURE_URL,t=Ext.get(this.dom.parentNode.insertBefore(n,this.dom)),t.autoBoxAdjust=!1,t}}}());Ext.Element.addMethods({addKeyListener:function(n,t,i){var r;return r=typeof n!="object"||Ext.isArray(n)?{key:n,fn:t,scope:i}:{key:n.key,shift:n.shift,ctrl:n.ctrl,alt:n.alt,fn:t,scope:i},new Ext.KeyMap(this,r)},addKeyMap:function(n){return new Ext.KeyMap(this,n)}});Ext.CompositeElementLite.importElementMethods();Ext.apply(Ext.CompositeElementLite.prototype,{addElements:function(n,t){if(!n)return this;typeof n=="string"&&(n=Ext.Element.selectorFunction(n,t));var i=this.elements;return Ext.each(n,function(n){i.push(Ext.get(n))}),this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(n){return this.indexOf(n)!=-1},removeElement:function(n,t){var u=this,r=this.elements,i;return Ext.each(n,function(n){(i=r[n]||r[n=u.indexOf(n)])&&(t&&(i.dom?i.remove():Ext.removeNode(i)),r.splice(n,1))}),this}});Ext.CompositeElement=Ext.extend(Ext.CompositeElementLite,{constructor:function(n,t){this.elements=[];this.add(n,t)},getElement:function(n){return n},transformElement:function(n){return Ext.get(n)}});Ext.Element.select=function(n,t,i){var r;if(typeof n=="string")r=Ext.Element.selectorFunction(n,i);else if(n.length!==undefined)r=n;else throw"Invalid selector";return t===!0?new Ext.CompositeElement(r):new Ext.CompositeElementLite(r)};Ext.select=Ext.Element.select;Ext.UpdateManager=Ext.Updater=Ext.extend(Ext.util.Observable,function(){function u(n){var i=this;if(i.transaction=null,n.argument.form&&n.argument.reset)try{n.argument.form.reset()}catch(r){}i.loadScripts?i.renderer.render(i.el,n,i,t.createDelegate(i,[n])):(i.renderer.render(i.el,n,i),t.call(i,n))}function t(n,t,r){this.fireEvent(t||i,this.el,n);Ext.isFunction(n.argument.callback)&&n.argument.callback.call(n.argument.scope,this.el,Ext.isEmpty(r)?!0:!1,n,n.argument.options)}function f(n){t.call(this,n,r,!!(this.transaction=null))}var n="beforeupdate",i="update",r="failure";return{constructor:function(t,u){var f=this;if(t=Ext.get(t),!u&&t.updateManager)return t.updateManager;f.el=t;f.defaultUrl=null;f.addEvents(n,i,r);Ext.apply(f,Ext.Updater.defaults);f.transaction=null;f.refreshDelegate=f.refresh.createDelegate(f);f.updateDelegate=f.update.createDelegate(f);f.formUpdateDelegate=(f.formUpdate||function(){}).createDelegate(f);f.renderer=f.renderer||f.getDefaultRenderer();Ext.Updater.superclass.constructor.call(f)},setRenderer:function(n){this.renderer=n},getRenderer:function(){return this.renderer},getDefaultRenderer:function(){return new Ext.Updater.BasicRenderer},setDefaultUrl:function(n){this.defaultUrl=n},getEl:function(){return this.el},update:function(t,i,r,e){var s=this,o,h,c;s.fireEvent(n,s.el,t,i)!==!1&&(Ext.isObject(t)&&(o=t,t=o.url,i=i||o.params,r=r||o.callback,e=e||o.discardUrl,h=o.scope,Ext.isEmpty(o.nocache)||(s.disableCaching=o.nocache),Ext.isEmpty(o.text)||(s.indicatorText='<div class="loading-indicator">'+o.text+"<\/div>"),Ext.isEmpty(o.scripts)||(s.loadScripts=o.scripts),Ext.isEmpty(o.timeout)||(s.timeout=o.timeout)),s.showLoading(),e||(s.defaultUrl=t),Ext.isFunction(t)&&(t=t.call(s)),c=Ext.apply({},{url:t,params:Ext.isFunction(i)&&h?i.createDelegate(h):i,success:u,failure:f,scope:s,callback:undefined,timeout:s.timeout*1e3,disableCaching:s.disableCaching,argument:{options:o,url:t,form:null,callback:r,scope:h||window,params:i}},o),s.transaction=Ext.Ajax.request(c))},formUpdate:function(t,i,r,e){var o=this;o.fireEvent(n,o.el,t,i)!==!1&&(Ext.isFunction(i)&&(i=i.call(o)),t=Ext.getDom(t),o.transaction=Ext.Ajax.request({form:t,url:i,success:u,failure:f,scope:o,timeout:o.timeout*1e3,argument:{url:i,form:t,callback:e,reset:r}}),o.showLoading.defer(1,o))},startAutoRefresh:function(n,t,i,r,u){var f=this;u&&f.update(t||f.defaultUrl,i,r,!0);f.autoRefreshProcId&&clearInterval(f.autoRefreshProcId);f.autoRefreshProcId=setInterval(f.update.createDelegate(f,[t||f.defaultUrl,i,r,!0]),n*1e3)},stopAutoRefresh:function(){this.autoRefreshProcId&&(clearInterval(this.autoRefreshProcId),delete this.autoRefreshProcId)},isAutoRefreshing:function(){return!!this.autoRefreshProcId},showLoading:function(){this.showLoadIndicator&&(this.el.dom.innerHTML=this.indicatorText)},abort:function(){this.transaction&&Ext.Ajax.abort(this.transaction)},isUpdating:function(){return this.transaction?Ext.Ajax.isLoading(this.transaction):!1},refresh:function(n){this.defaultUrl&&this.update(this.defaultUrl,null,n,!0)}}}());Ext.Updater.defaults={timeout:30,disableCaching:!1,showLoadIndicator:!0,indicatorText:'<div class="loading-indicator">Loading...<\/div>',loadScripts:!1,sslBlankUrl:Ext.SSL_SECURE_URL};Ext.Updater.updateElement=function(n,t,i,r){var u=Ext.get(n).getUpdater();Ext.apply(u,r);u.update(t,i,r?r.callback:null)};Ext.Updater.BasicRenderer=function(){};Ext.Updater.BasicRenderer.prototype={render:function(n,t,i,r){n.update(t.responseText,i.loadScripts,r)}},function(){function t(n){var t=Array.prototype.slice.call(arguments,1);return n.replace(/\{(\d+)\}/g,function(n,i){return t[i]})}Date.useStrict=!1;Date.formatCodeToRegex=function(n,i){var r=Date.parseCodes[n];return r&&(r=typeof r=="function"?r():r,Date.parseCodes[n]=r),r?Ext.applyIf({c:r.c?t(r.c,i||"{0}"):r.c},r):{g:0,c:null,s:Ext.escapeRe(n)}};var n=Date.formatCodeToRegex;Ext.apply(Date,{parseFunctions:{M$:function(n){var i=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),t=(n||"").match(i);return t?new Date(((t[1]||"")+t[2])*1):null}},parseRegexes:[],formatFunctions:{M$:function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},getShortMonthName:function(n){return Date.monthNames[n].substring(0,3)},getShortDayName:function(n){return Date.dayNames[n].substring(0,3)},getMonthNumber:function(n){return Date.monthNumbers[n.substring(0,1).toUpperCase()+n.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(){var n=/(\\.)/g,t=/([gGhHisucUOPZ]|M\$)/;return function(i){return t.test(i.replace(n,""))}}(),formatCodes:{d:"String.leftPad(this.getDate(), 2, '0')",D:"Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"this.getSuffix()",w:"this.getDay()",z:"this.getDayOfYear()",W:"String.leftPad(this.getWeekOfYear(), 2, '0')",F:"Date.monthNames[this.getMonth()]",m:"String.leftPad(this.getMonth() + 1, 2, '0')",M:"Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"this.getDaysInMonth()",L:"(this.isLeapYear() ? 1 : 0)",o:"(this.getFullYear() + (this.getWeekOfYear() == 1 && this.getMonth() > 0 ? +1 : (this.getWeekOfYear() >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"String.leftPad(this.getHours(), 2, '0')",i:"String.leftPad(this.getMinutes(), 2, '0')",s:"String.leftPad(this.getSeconds(), 2, '0')",u:"String.leftPad(this.getMilliseconds(), 3, '0')",O:"this.getGMTOffset()",P:"this.getGMTOffset(true)",T:"this.getTimezone()",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var t,i="Y-m-dTH:i:sP",r=[],n=0,u=i.length;n<u;++n)t=i.charAt(n),r.push(t=="T"?"'T'":Date.getFormatCode(t));return r.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(n,t,i,r,u,f,e){r=r||0;u=u||0;f=f||0;e=e||0;var o=new Date(n<100?100:n,t-1,i,r,u,f,e).add(Date.YEAR,n<100?n-100:0);return n==o.getFullYear()&&t==o.getMonth()+1&&i==o.getDate()&&r==o.getHours()&&u==o.getMinutes()&&f==o.getSeconds()&&e==o.getMilliseconds()},parseDate:function(n,t,i){var r=Date.parseFunctions;return r[t]==null&&Date.createParser(t),r[t](n,Ext.isDefined(i)?i:Date.useStrict)},getFormatCode:function(n){var t=Date.formatCodes[n];return t&&(t=typeof t=="function"?t():t,Date.formatCodes[n]=t),t||"'"+String.escape(n)+"'"},createFormat:function(n){for(var u=[],t=!1,i="",r=0;r<n.length;++r)i=n.charAt(r),t||i!="\\"?t?(t=!1,u.push("'"+String.escape(i)+"'")):u.push(Date.getFormatCode(i)):t=!0;Date.formatFunctions[n]=new Function("return "+u.join("+"))},createParser:function(){var i="var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,\ndef = Date.defaults,\nresults = String(input).match(Date.parseRegexes[{0}]);\nif(results){\n{1}\nif(u != null){\nv = new Date(u * 1000);\n}else{\ndt = (new Date()).clearTime();\ny = Ext.num(y, Ext.num(def.y, dt.getFullYear()));\nm = Ext.num(m, Ext.num(def.m - 1, dt.getMonth()));\nd = Ext.num(d, Ext.num(def.d, dt.getDate()));\nh  = Ext.num(h, Ext.num(def.h, dt.getHours()));\ni  = Ext.num(i, Ext.num(def.i, dt.getMinutes()));\ns  = Ext.num(s, Ext.num(def.s, dt.getSeconds()));\nms = Ext.num(ms, Ext.num(def.ms, dt.getMilliseconds()));\nif(z >= 0 && y >= 0){\nv = new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);\nv = !strict? v : (strict === true && (z <= 364 || (v.isLeapYear() && z <= 365))? v.add(Date.DAY, z) : null);\n}else if(strict === true && !Date.isValid(y, m + 1, d, h, i, s, ms)){\nv = null;\n}else{\nv = new Date(y < 100 ? 100 : y, m, d, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);\n}\n}\n}\nif(v){\nif(zz != null){\nv = v.add(Date.SECOND, -v.getTimezoneOffset() * 60 - zz);\n}else if(o){\nv = v.add(Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));\n}\n}\nreturn v;";return function(r){for(var l=Date.parseRegexes.length,a=1,o=[],s=[],f=!1,e="",h=0,u,c;h<r.length;++h)e=r.charAt(h),f||e!="\\"?f?(f=!1,s.push(String.escape(e))):(u=n(e,a),a+=u.g,s.push(u.s),u.g&&u.c&&(u.calcLast?c=u.c:o.push(u.c))):f=!0;c&&o.push(c);Date.parseRegexes[l]=new RegExp("^"+s.join("")+"$","i");Date.parseFunctions[r]=new Function("input","strict",t(i,l,o.join("")))}}(),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},D:function(){for(var t=[],n=0;n<7;t.push(Date.getShortDayName(n)),++n);return{g:0,c:null,s:"(?:"+t.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Date.getMonthNumber(results[{0}]), 10);\n",s:"("+Date.monthNames.join("|")+")"}},M:function(){for(var i=[],t=0;t<12;i.push(Date.getShortMonthName(t)),++t);return Ext.applyIf({s:"("+i.join("|")+")"},n("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{2})"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{1,2})"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return n("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:function(){return n("A")},A:{calcLast:!0,g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)"},g:function(){return n("G")},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},h:function(){return n("H")},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:"o = results[{0}];\nvar sn = o.substring(0,1),\nhr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),\nmn = o.substring(3,5) % 60;\no = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n",s:"([+-]\\d{4})"},P:{g:1,c:"o = results[{0}];\nvar sn = o.substring(0,1),\nhr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),\nmn = o.substring(4,6) % 60;\no = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n",s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){for(var r=[],t=[n("Y",1),n("m",2),n("d",3),n("h",4),n("i",5),n("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",n("P",8).c,"}else{",n("O",8).c,"}","}"].join("\n")}],i=0,u=t.length;i<u;++i)r.push(t[i].c);return{g:1,c:r.join(""),s:[t[0].s,"(?:","-",t[1].s,"(?:","-",t[2].s,"(?:","(?:T| )?",t[3].s,":",t[4].s,"(?::",t[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}}})}();Ext.apply(Date.prototype,{dateFormat:function(n){return Date.formatFunctions[n]==null&&Date.createFormat(n),Date.formatFunctions[n].call(this)},getTimezone:function(){return this.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(n){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+(n?":":"")+String.leftPad(Math.abs(this.getTimezoneOffset()%60),2,"0")},getDayOfYear:function(){var i=0,n=this.clone(),r=this.getMonth(),t;for(t=0,n.setDate(1),n.setMonth(0);t<r;n.setMonth(++t))i+=n.getDaysInMonth();return i+this.getDate()-1},getWeekOfYear:function(){var n=864e5,t=7*n;return function(){var r=Date.UTC(this.getFullYear(),this.getMonth(),this.getDate()+3)/n,i=Math.floor(r/7),u=new Date(i*t).getUTCFullYear();return i-Math.floor(Date.UTC(u,0,7)/t)+1}}(),isLeapYear:function(){var n=this.getFullYear();return!!((n&3)==0&&(n%100||n%400==0&&n))},getFirstDayOfMonth:function(){var n=(this.getDay()-(this.getDate()-1))%7;return n<0?n+7:n},getLastDayOfMonth:function(){return this.getLastDateOfMonth().getDay()},getFirstDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),1)},getLastDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),this.getDaysInMonth())},getDaysInMonth:function(){var n=[31,28,31,30,31,30,31,31,30,31,30,31];return function(){var t=this.getMonth();return t==1&&this.isLeapYear()?29:n[t]}}(),getSuffix:function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(){return new Date(this.getTime())},isDST:function(){return new Date(this.getFullYear(),0,1).getTimezoneOffset()!=this.getTimezoneOffset()},clearTime:function(n){var t,i,r;if(n)return this.clone().clearTime();if(t=this.getDate(),this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this.getDate()!=t){for(i=1,r=this.add(Date.HOUR,i);r.getDate()!=t;i++,r=this.add(Date.HOUR,i));this.setDate(t);this.setHours(r.getHours())}return this},add:function(n,t){var i=this.clone(),r;if(!n||t===0)return i;switch(n.toLowerCase()){case Date.MILLI:i.setMilliseconds(this.getMilliseconds()+t);break;case Date.SECOND:i.setSeconds(this.getSeconds()+t);break;case Date.MINUTE:i.setMinutes(this.getMinutes()+t);break;case Date.HOUR:i.setHours(this.getHours()+t);break;case Date.DAY:i.setDate(this.getDate()+t);break;case Date.MONTH:r=this.getDate();r>28&&(r=Math.min(r,this.getFirstDateOfMonth().add("mo",t).getLastDateOfMonth().getDate()));i.setDate(r);i.setMonth(this.getMonth()+t);break;case Date.YEAR:i.setFullYear(this.getFullYear()+t)}return i},between:function(n,t){var i=this.getTime();return n.getTime()<=i&&i<=t.getTime()}});Date.prototype.format=Date.prototype.dateFormat;Ext.isSafari&&(navigator.userAgent.match(/WebKit\/(\d+)/)[1]||NaN)<420&&Ext.apply(Date.prototype,{_xMonth:Date.prototype.setMonth,_xDate:Date.prototype.setDate,setMonth:function(n){if(n<=-1){var t=Math.ceil(-n),i=Math.ceil(t/12),r=t%12?12-t%12:0;return this.setFullYear(this.getFullYear()-i),this._xMonth(r)}return this._xMonth(n)},setDate:function(n){return this.setTime(this.getTime()-(this.getDate()-n)*864e5)}});Ext.util.MixedCollection=function(n,t){this.items=[];this.map={};this.keys=[];this.length=0;this.addEvents("clear","add","replace","remove","sort");this.allowFunctions=n===!0;t&&(this.getKey=t);Ext.util.MixedCollection.superclass.constructor.call(this)};Ext.extend(Ext.util.MixedCollection,Ext.util.Observable,{allowFunctions:!1,add:function(n,t){if(arguments.length==1&&(t=arguments[0],n=this.getKey(t)),typeof n!="undefined"&&n!==null){var i=this.map[n];if(typeof i!="undefined")return this.replace(n,t);this.map[n]=t}return this.length++,this.items.push(t),this.keys.push(n),this.fireEvent("add",this.length-1,t,n),t},getKey:function(n){return n.id},replace:function(n,t){var i,r;return(arguments.length==1&&(t=arguments[0],n=this.getKey(t)),i=this.map[n],typeof n=="undefined"||n===null||typeof i=="undefined")?this.add(n,t):(r=this.indexOfKey(n),this.items[r]=t,this.map[n]=t,this.fireEvent("replace",n,i,t),t)},addAll:function(n){var r,t,u,i;if(arguments.length>1||Ext.isArray(n))for(r=arguments.length>1?arguments:n,t=0,u=r.length;t<u;t++)this.add(r[t]);else for(i in n)(this.allowFunctions||typeof n[i]!="function")&&this.add(i,n[i])},each:function(n,t){for(var r=[].concat(this.items),i=0,u=r.length;i<u;i++)if(n.call(t||r[i],r[i],i,u)===!1)break},eachKey:function(n,t){for(var i=0,r=this.keys.length;i<r;i++)n.call(t||window,this.keys[i],this.items[i],i,r)},find:function(n,t){for(var i=0,r=this.items.length;i<r;i++)if(n.call(t||window,this.items[i],this.keys[i]))return this.items[i];return null},insert:function(n,t,i){return(arguments.length==2&&(i=arguments[1],t=this.getKey(i)),this.containsKey(t)&&(this.suspendEvents(),this.removeKey(t),this.resumeEvents()),n>=this.length)?this.add(t,i):(this.length++,this.items.splice(n,0,i),typeof t!="undefined"&&t!==null&&(this.map[t]=i),this.keys.splice(n,0,t),this.fireEvent("add",n,i,t),i)},remove:function(n){return this.removeAt(this.indexOf(n))},removeAt:function(n){var i,t;return n<this.length&&n>=0?(this.length--,i=this.items[n],this.items.splice(n,1),t=this.keys[n],typeof t!="undefined"&&delete this.map[t],this.keys.splice(n,1),this.fireEvent("remove",i,t),i):!1},removeKey:function(n){return this.removeAt(this.indexOfKey(n))},getCount:function(){return this.length},indexOf:function(n){return this.items.indexOf(n)},indexOfKey:function(n){return this.keys.indexOf(n)},item:function(n){var t=this.map[n],i=t!==undefined?t:typeof n=="number"?this.items[n]:undefined;return typeof i!="function"||this.allowFunctions?i:null},itemAt:function(n){return this.items[n]},key:function(n){return this.map[n]},contains:function(n){return this.indexOf(n)!=-1},containsKey:function(n){return typeof this.map[n]!="undefined"},clear:function(){this.length=0;this.items=[];this.keys=[];this.map={};this.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(n,t,i){var r,f,s=String(t).toUpperCase()=="DESC"?-1:1,u=[],o=this.keys,e=this.items;for(i=i||function(n,t){return n-t},r=0,f=e.length;r<f;r++)u[u.length]={key:o[r],value:e[r],index:r};for(u.sort(function(t,r){var u=i(t[n],r[n])*s;return u===0&&(u=t.index<r.index?-1:1),u}),r=0,f=u.length;r<f;r++)e[r]=u[r].value,o[r]=u[r].key;this.fireEvent("sort",this)},sort:function(n,t){this._sort("value",n,t)},reorder:function(n){this.suspendEvents();var r=this.items,t=0,f=r.length,i=[],e=[],u;for(u in n)i[n[u]]=r[u];for(t=0;t<f;t++)n[t]==undefined&&e.push(r[t]);for(t=0;t<f;t++)i[t]==undefined&&(i[t]=e.shift());this.clear();this.addAll(i);this.resumeEvents();this.fireEvent("sort",this)},keySort:function(n,t){this._sort("key",n,t||function(n,t){var i=String(n).toUpperCase(),r=String(t).toUpperCase();return i>r?1:i<r?-1:0})},getRange:function(n,t){var u=this.items,i,r;if(u.length<1)return[];if(n=n||0,t=Math.min(typeof t=="undefined"?this.length-1:t,this.length-1),r=[],n<=t)for(i=n;i<=t;i++)r[r.length]=u[i];else for(i=n;i>=t;i--)r[r.length]=u[i];return r},filter:function(n,t,i,r){return Ext.isEmpty(t,!1)?this.clone():(t=this.createValueMatcher(t,i,r),this.filterBy(function(i){return i&&t.test(i[n])}))},filterBy:function(n,t){var u=new Ext.util.MixedCollection,f,r,i,e;for(u.getKey=this.getKey,f=this.keys,r=this.items,i=0,e=r.length;i<e;i++)n.call(t||this,r[i],f[i])&&u.add(f[i],r[i]);return u},findIndex:function(n,t,i,r,u){return Ext.isEmpty(t,!1)?-1:(t=this.createValueMatcher(t,r,u),this.findIndexBy(function(i){return i&&t.test(i[n])},null,i))},findIndexBy:function(n,t,i){for(var e=this.keys,u=this.items,r=i||0,f=u.length;r<f;r++)if(n.call(t||this,u[r],e[r]))return r;return-1},createValueMatcher:function(n,t,i,r){if(!n.exec){var u=Ext.escapeRe;n=String(n);t===!0?n=u(n):(n="^"+u(n),r===!0&&(n+="$"));n=new RegExp(n,i?"":"i")}return n},clone:function(){for(var t=new Ext.util.MixedCollection,u=this.keys,i=this.items,n=0,r=i.length;n<r;n++)t.add(u[n],i[n]);return t.getKey=this.getKey,t}});Ext.util.MixedCollection.prototype.get=Ext.util.MixedCollection.prototype.item;Ext.AbstractManager=Ext.extend(Object,{typeName:"type",constructor:function(n){Ext.apply(this,n||{});this.all=new Ext.util.MixedCollection;this.types={}},get:function(n){return this.all.get(n)},register:function(n){this.all.add(n)},unregister:function(n){this.all.remove(n)},registerType:function(n,t){this.types[n]=t;t[this.typeName]=n},isRegistered:function(n){return this.types[n]!==undefined},create:function(n,t){var i=n[this.typeName]||n.type||t,r=this.types[i];if(r==undefined)throw new Error(String.format("The '{0}' type has not been registered with this manager",i));return new r(n)},onAvailable:function(n,t,i){var r=this.all;r.on("add",function(u,f){f.id==n&&(t.call(i||f,f),r.un("add",t,i))})}});Ext.util.Format=function(){var n=/^\s+|\s+$/g,t=/<\/?[^>]+>/gi,i=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,r=/\r?\n/g;return{ellipsis:function(n,t,i){if(n&&n.length>t){if(i){var r=n.substr(0,t-2),u=Math.max(r.lastIndexOf(" "),r.lastIndexOf("."),r.lastIndexOf("!"),r.lastIndexOf("?"));return u==-1||u<t-15?n.substr(0,t-3)+"...":r.substr(0,u)+"..."}return n.substr(0,t-3)+"..."}return n},undef:function(n){return n!==undefined?n:""},defaultValue:function(n,t){return t||t===0||(t=""),n!==undefined&&n!==""?n:t},htmlEncode:function(n){return n?String(n).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"):n},htmlDecode:function(n){return n?String(n).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):n},trim:function(t){return String(t).replace(n,"")},substr:function(n,t,i){return String(n).substr(t,i)},lowercase:function(n){return String(n).toLowerCase()},uppercase:function(n){return String(n).toUpperCase()},capitalize:function(n){return n?n.charAt(0).toUpperCase()+n.substr(1).toLowerCase():n},call:function(value,fn){if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);return args.unshift(value),eval(fn).apply(window,args)}return eval(fn).call(window,value)},usMoney:function(n){n=Math.round((+n)*100)/100;n=n==Math.floor(n)?n+".00":n*10==Math.floor(n*10)?n+"0":n;n=String(n);for(var i=n.split("."),t=i[0],u=i[1]?"."+i[1]:".00",r=/(\d+)(\d{3})/;r.test(t);)t=t.replace(r,"$1,$2");return(n=t+u,n.charAt(0)=="-")?"-$"+n.substr(1):"$"+n},date:function(n,t){return n?(Ext.isDate(n)||(n=new Date(Date.parse(n))),n.dateFormat(t||"m/d/Y")):""},dateRenderer:function(n){return function(t){return Ext.util.Format.date(t,n)}},stripTags:function(n){return n?String(n).replace(t,""):n},stripScripts:function(n){return n?String(n).replace(i,""):n},fileSize:function(n){return n<1024?n+" bytes":n<1048576?Math.round(n*10/1024)/10+" KB":Math.round(n*10/1048576)/10+" MB"},math:function(){var n={};return function(t,i){return n[i]||(n[i]=new Function("v","return v "+i+";")),n[i](t)}}(),round:function(n,t){var i=Number(n);return typeof t=="number"&&(t=Math.pow(10,t),i=Math.round(n*t)/t),i},number:function(n,t){var l,i,r;if(!t)return n;if(n=Ext.num(n,NaN),isNaN(n))return"";var e=",",f=".",c=!1,v=n<0;if(n=Math.abs(n),t.substr(t.length-2)=="/i"&&(t=t.substr(0,t.length-2),c=!0,e=".",f=","),l=t.indexOf(e)!=-1,i=(c?t.replace(/[^\d\,]/g,""):t.replace(/[^\d\.]/g,"")).split(f),1<i.length)n=n.toFixed(i[1].length);else if(2<i.length)throw"NumberFormatException: invalid format, formats should have no more than 1 period: "+t;else n=n.toFixed(0);if(r=n.toString(),i=r.split("."),l){for(var o=i[0],s=[],a=o.length,y=Math.floor(a/3),h=o.length%3||3,u=0;u<a;u+=h)u!=0&&(h=3),s[s.length]=o.substr(u,h),y-=1;r=s.join(e);i[1]&&(r+=f+i[1])}else i[1]&&(r=i[0]+f+i[1]);return(v?"-":"")+t.replace(/[\d,?\.?]+/,r)},numberRenderer:function(n){return function(t){return Ext.util.Format.number(t,n)}},plural:function(n,t,i){return n+" "+(n==1?t:i?i:t+"s")},nl2br:function(n){return Ext.isEmpty(n)?"":n.replace(r,"<br/>")}}}();Ext.XTemplate=function(){var a;Ext.XTemplate.superclass.constructor.apply(this,arguments);for(var s=this,e=s.html,t,v=0,i=[],r="values",u="parent",p="xindex",w="xcount",h="return ",o="with(values){ ",e=["<tpl>",e,"<\/tpl>"].join("");t=e.match(/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/);){var y=t[0].match(/^<tpl\b[^>]*?for="(.*?)"/),c=t[0].match(/^<tpl\b[^>]*?if="(.*?)"/),l=t[0].match(/^<tpl\b[^>]*?exec="(.*?)"/),f=null,b=null,k=null,n=y&&y[1]?y[1]:"";if(c&&(f=c&&c[1]?c[1]:null,f&&(b=new Function(r,u,p,w,o+h+Ext.util.Format.htmlDecode(f)+"; }"))),l&&(f=l&&l[1]?l[1]:null,f&&(k=new Function(r,u,p,w,o+Ext.util.Format.htmlDecode(f)+"; }"))),n)switch(n){case".":n=new Function(r,u,o+h+r+"; }");break;case"..":n=new Function(r,u,o+h+u+"; }");break;default:n=new Function(r,u,o+h+n+"; }")}i.push({id:v,target:n,exec:k,test:b,body:t[1]||""});e=e.replace(t[0],"{xtpl"+v+"}");++v}for(a=i.length-1;a>=0;--a)s.compileTpl(i[a]);s.master=i[i.length-1];s.tpls=i};Ext.extend(Ext.XTemplate,Ext.Template,{re:/\{([\w\-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\\]\s?[\d\.\+\-\*\\\(\)]+)?\}/g,codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,applySubTemplate:function(n,t,i,r,u){var e=this,f=e.tpls[n],o,c=[],h,s;if(f.test&&!f.test.call(e,t,i,r,u)||f.exec&&f.exec.call(e,t,i,r,u))return"";if(o=f.target?f.target.call(e,t,i):t,s=o.length,i=f.target?t:i,f.target&&Ext.isArray(o)){for(h=0,s=o.length;h<s;h++)c[c.length]=f.compiled.call(e,o[h],i,h+1,s);return c.join("")}return f.compiled.call(e,o,i,r,u)},compileTpl:function(tpl){function fn(n,t,i,r,u){if(t.substr(0,4)=="xtpl")return"'"+sep+"this.applySubTemplate("+t.substr(4)+", values, parent, xindex, xcount)"+sep+"'";var f;return f=t==="."?"values":t==="#"?"xindex":t.indexOf(".")!=-1?t:"values['"+t+"']",u&&(f="("+f+u+")"),i&&useF?(r=r?","+r:"",i.substr(0,5)!="this."?i="fm."+i+"(":(i='this.call("'+i.substr(5)+'", ',r=", values")):(r="",i="("+f+" === undefined ? '' : "),"'"+sep+i+f+r+")"+sep+"'"}function codeFn(n,t){return"'"+sep+"("+t.replace(/\\'/g,"'")+")"+sep+"'"}var fm=Ext.util.Format,useF=this.disableFormats!==!0,sep=Ext.isGecko?"+":",",body;return Ext.isGecko?body="tpl.compiled = function(values, parent, xindex, xcount){ return '"+tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)+"';};":(body=["tpl.compiled = function(values, parent, xindex, xcount){ return ['"],body.push(tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)),body.push("'].join('');};"),body=body.join("")),eval(body),this},applyTemplate:function(n){return this.master.compiled.call(this,n,{},1,1)},compile:function(){return this}});Ext.XTemplate.prototype.apply=Ext.XTemplate.prototype.applyTemplate;Ext.XTemplate.from=function(n){return n=Ext.getDom(n),new Ext.XTemplate(n.value||n.innerHTML)};Ext.util.CSS=function(){var t=null,n=document,i=/(-[a-z])/gi,r=function(n,t){return t.charAt(1).toUpperCase()};return{createStyleSheet:function(t,i){var u,f=n.getElementsByTagName("head")[0],r=n.createElement("style");if(r.setAttribute("type","text/css"),i&&r.setAttribute("id",i),Ext.isIE)f.appendChild(r),u=r.styleSheet,u.cssText=t;else{try{r.appendChild(n.createTextNode(t))}catch(e){r.cssText=t}f.appendChild(r);u=r.styleSheet?r.styleSheet:r.sheet||n.styleSheets[n.styleSheets.length-1]}return this.cacheStyleSheet(u),u},removeStyleSheet:function(t){var i=n.getElementById(t);i&&i.parentNode.removeChild(i)},swapStyleSheet:function(t,i){this.removeStyleSheet(t);var r=n.createElement("link");r.setAttribute("rel","stylesheet");r.setAttribute("type","text/css");r.setAttribute("id",t);r.setAttribute("href",i);n.getElementsByTagName("head")[0].appendChild(r)},refreshCache:function(){return this.getRules(!0)},cacheStyleSheet:function(n){var r,i;t||(t={});try{for(r=n.cssRules||n.rules,i=r.length-1;i>=0;--i)t[r[i].selectorText.toLowerCase()]=r[i]}catch(u){}},getRules:function(i){var u,r,f;if(t===null||i)for(t={},u=n.styleSheets,r=0,f=u.length;r<f;r++)try{this.cacheStyleSheet(u[r])}catch(e){}return t},getRule:function(n,t){var r=this.getRules(t),i;if(!Ext.isArray(n))return r[n.toLowerCase()];for(i=0;i<n.length;i++)if(r[n[i]])return r[n[i].toLowerCase()];return null},updateRule:function(n,t,u){var e,f;if(Ext.isArray(n)){for(f=0;f<n.length;f++)if(this.updateRule(n[f],t,u))return!0}else if(e=this.getRule(n),e)return e.style[t.replace(i,r)]=u,!0;return!1}}}();Ext.util.ClickRepeater=Ext.extend(Ext.util.Observable,{constructor:function(n,t){if(this.el=Ext.get(n),this.el.unselectable(),Ext.apply(this,t),this.addEvents("mousedown","click","mouseup"),this.disabled||(this.disabled=!0,this.enable()),this.handler)this.on("click",this.handler,this.scope||this);Ext.util.ClickRepeater.superclass.constructor.call(this)},interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(Ext.isIE)this.el.on("dblclick",this.handleDblClick,this);if(this.preventDefault||this.stopDefault)this.el.on("click",this.eventOptions,this)}this.disabled=!1},disable:function(n){(n||!this.disabled)&&(clearTimeout(this.timer),this.pressClass&&this.el.removeClass(this.pressClass),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.el.removeAllListeners());this.disabled=!0},setDisabled:function(n){this[n?"disable":"enable"]()},eventOptions:function(n){this.preventDefault&&n.preventDefault();this.stopDefault&&n.stopEvent()},destroy:function(){this.disable(!0);Ext.destroy(this.el);this.purgeListeners()},handleDblClick:function(n){clearTimeout(this.timer);this.el.blur();this.fireEvent("mousedown",this,n);this.fireEvent("click",this,n)},handleMouseDown:function(n){clearTimeout(this.timer);this.el.blur();this.pressClass&&this.el.addClass(this.pressClass);this.mousedownTime=new Date;Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this,n);this.fireEvent("click",this,n);this.accelerate&&(this.delay=400);this.timer=this.click.defer(this.delay||this.interval,this,[n])},click:function(n){this.fireEvent("click",this,n);this.timer=this.click.defer(this.accelerate?this.easeOutExpo(this.mousedownTime.getElapsed(),400,-390,12e3):this.interval,this,[n])},easeOutExpo:function(n,t,i,r){return n==r?t+i:i*(-Math.pow(2,-10*n/r)+1)+t},handleMouseOut:function(){clearTimeout(this.timer);this.pressClass&&this.el.removeClass(this.pressClass);this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this);this.pressClass&&this.el.addClass(this.pressClass);this.click()},handleMouseUp:function(n){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.removeClass(this.pressClass);this.fireEvent("mouseup",this,n)}});Ext.KeyNav=function(n,t){this.el=Ext.get(n);Ext.apply(this,t);this.disabled||(this.disabled=!0,this.enable())};Ext.KeyNav.prototype={disabled:!1,defaultEventAction:"stopEvent",forceKeyDown:!1,relay:function(n){var i=n.getKey(),t=this.keyToHandler[i];t&&this[t]&&this.doRelay(n,this[t],t)!==!0&&n[this.defaultEventAction]()},doRelay:function(n,t,i){return t.call(this.scope||this,n,i)},enter:!1,left:!1,right:!1,up:!1,down:!1,tab:!1,esc:!1,pageUp:!1,pageDown:!1,del:!1,home:!1,end:!1,space:!1,keyToHandler:{37:"left",39:"right",38:"up",40:"down",33:"pageUp",34:"pageDown",46:"del",36:"home",35:"end",13:"enter",27:"esc",9:"tab",32:"space"},stopKeyUp:function(n){var t=n.getKey();t>=37&&t<=40&&n.stopEvent()},destroy:function(){this.disable()},enable:function(){if(this.disabled){if(Ext.isSafari2)this.el.on("keyup",this.stopKeyUp,this);this.el.on(this.isKeydown()?"keydown":"keypress",this.relay,this);this.disabled=!1}},disable:function(){this.disabled||(Ext.isSafari2&&this.el.un("keyup",this.stopKeyUp,this),this.el.un(this.isKeydown()?"keydown":"keypress",this.relay,this),this.disabled=!0)},setDisabled:function(n){this[n?"disable":"enable"]()},isKeydown:function(){return this.forceKeyDown||Ext.EventManager.useKeydown}};Ext.KeyMap=function(n,t,i){this.el=Ext.get(n);this.eventName=i||"keydown";this.bindings=[];t&&this.addBinding(t);this.enable()};Ext.KeyMap.prototype={stopEvent:!1,addBinding:function(n){var r,u,i,o,s,h;if(Ext.isArray(n)){Ext.each(n,function(n){this.addBinding(n)},this);return}var t=n.key,f=n.fn||n.handler,e=n.scope;if(n.stopEvent&&(this.stopEvent=n.stopEvent),typeof t=="string"){for(r=[],u=t.toUpperCase(),i=0,o=u.length;i<o;i++)r.push(u.charCodeAt(i));t=r}s=Ext.isArray(t);h=function(i){var r,u,o;if(this.checkModifiers(n,i))if(r=i.getKey(),s){for(u=0,o=t.length;u<o;u++)if(t[u]==r){this.stopEvent&&i.stopEvent();f.call(e||window,r,i);return}}else r==t&&(this.stopEvent&&i.stopEvent(),f.call(e||window,r,i))};this.bindings.push(h)},checkModifiers:function(n,t){for(var r,u,f=["shift","ctrl","alt"],i=0,e=f.length;i<e;++i)if(u=f[i],r=n[u],!(r===undefined||r===t[u+"Key"]))return!1;return!0},on:function(n,t,i){var r,u,f,e;typeof n!="object"||Ext.isArray(n)?r=n:(r=n.key,u=n.shift,f=n.ctrl,e=n.alt);this.addBinding({key:r,shift:u,ctrl:f,alt:e,fn:t,scope:i})},handleKeyDown:function(n){var i,t,r;if(this.enabled)for(i=this.bindings,t=0,r=i.length;t<r;t++)i[t].call(this,n)},isEnabled:function(){return this.enabled},enable:function(){if(!this.enabled){this.el.on(this.eventName,this.handleKeyDown,this);this.enabled=!0}},disable:function(){this.enabled&&(this.el.removeListener(this.eventName,this.handleKeyDown,this),this.enabled=!1)},setDisabled:function(n){this[n?"disable":"enable"]()}};Ext.util.TextMetrics=function(){var n;return{measure:function(t,i,r){return n||(n=Ext.util.TextMetrics.Instance(t,r)),n.bind(t),n.setFixedWidth(r||"auto"),n.getSize(i)},createInstance:function(n,t){return Ext.util.TextMetrics.Instance(n,t)}}}();Ext.util.TextMetrics.Instance=function(n,t){var i=new Ext.Element(document.createElement("div")),r;return document.body.appendChild(i.dom),i.position("absolute"),i.setLeftTop(-1e3,-1e3),i.hide(),t&&i.setWidth(t),r={getSize:function(n){i.update(n);var t=i.getSize();return i.update(""),t},bind:function(n){i.setStyle(Ext.fly(n).getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"))},setFixedWidth:function(n){i.setWidth(n)},getWidth:function(n){return i.dom.style.width="auto",this.getSize(n).width},getHeight:function(n){return this.getSize(n).height}},r.bind(n),r};Ext.Element.addMethods({getTextWidth:function(n,t,i){return Ext.util.TextMetrics.measure(this.dom,Ext.value(n,this.dom.innerHTML,!0)).width.constrain(t||0,i||1e6)}});Ext.util.Cookies={set:function(n,t){var i=arguments,r=arguments.length,u=r>2?i[2]:null,f=r>3?i[3]:"/",e=r>4?i[4]:null,o=r>5?i[5]:!1;document.cookie=n+"="+escape(t)+(u===null?"":"; expires="+u.toGMTString())+(f===null?"":"; path="+f)+(e===null?"":"; domain="+e)+(o===!0?"; secure":"")},get:function(n){for(var r=n+"=",u=r.length,f=document.cookie.length,t=0,i=0;t<f;){if(i=t+u,document.cookie.substring(t,i)==r)return Ext.util.Cookies.getCookieVal(i);if(t=document.cookie.indexOf(" ",t)+1,t===0)break}return null},clear:function(n){Ext.util.Cookies.get(n)&&(document.cookie=n+"=; expires=Thu, 01-Jan-70 00:00:01 GMT")},getCookieVal:function(n){var t=document.cookie.indexOf(";",n);return t==-1&&(t=document.cookie.length),unescape(document.cookie.substring(n,t))}};Ext.handleError=function(n){throw n;};Ext.Error=function(n){this.message=this.lang[n]?this.lang[n]:n};Ext.Error.prototype=new Error;Ext.apply(Ext.Error.prototype,{lang:{},name:"Ext.Error",getName:function(){return this.name},getMessage:function(){return this.message},toJson:function(){return Ext.encode(this)}});Ext.ComponentMgr=function(){var n=new Ext.util.MixedCollection,t={},i={};return{register:function(t){n.add(t)},unregister:function(t){n.remove(t)},get:function(t){return n.get(t)},onAvailable:function(t,i,r){n.on("add",function(u,f){f.id==t&&(i.call(r||f,f),n.un("add",i,r))})},all:n,types:t,ptypes:i,isRegistered:function(n){return t[n]!==undefined},isPluginRegistered:function(n){return i[n]!==undefined},registerType:function(n,i){t[n]=i;i.xtype=n},create:function(n,i){return n.render?n:new t[n.xtype||i](n)},registerPlugin:function(n,t){i[n]=t;t.ptype=n},createPlugin:function(n,t){var r=i[n.ptype||t];return r.init?r:new r(n)}}}();Ext.reg=Ext.ComponentMgr.registerType;Ext.preg=Ext.ComponentMgr.registerPlugin;Ext.create=Ext.ComponentMgr.create;Ext.Component=function(n){if(n=n||{},n.initialConfig?(n.isAction&&(this.baseAction=n),n=n.initialConfig):(n.tagName||n.dom||Ext.isString(n))&&(n={applyTo:n,id:n.id||n}),this.initialConfig=n,Ext.apply(this,n),this.addEvents("added","disable","enable","beforeshow","show","beforehide","hide","removed","beforerender","render","afterrender","beforedestroy","destroy","beforestaterestore","staterestore","beforestatesave","statesave"),this.getId(),Ext.ComponentMgr.register(this),Ext.Component.superclass.constructor.call(this),this.baseAction&&this.baseAction.addComponent(this),this.initComponent(),this.plugins)if(Ext.isArray(this.plugins))for(var t=0,i=this.plugins.length;t<i;t++)this.plugins[t]=this.initPlugin(this.plugins[t]);else this.plugins=this.initPlugin(this.plugins);this.stateful!==!1&&this.initState();this.applyTo?(this.applyToMarkup(this.applyTo),delete this.applyTo):this.renderTo&&(this.render(this.renderTo),delete this.renderTo)};Ext.Component.AUTO_ID=1e3;Ext.extend(Ext.Component,Ext.util.Observable,{disabled:!1,hidden:!1,autoEl:"div",disabledClass:"x-item-disabled",allowDomMove:!0,autoShow:!1,hideMode:"display",hideParent:!1,rendered:!1,tplWriteMode:"overwrite",bubbleEvents:[],ctype:"Ext.Component",actionMode:"el",getActionEl:function(){return this[this.actionMode]},initPlugin:function(n){return n.ptype&&!Ext.isFunction(n.init)?n=Ext.ComponentMgr.createPlugin(n):Ext.isString(n)&&(n=Ext.ComponentMgr.createPlugin({ptype:n})),n.init(this),n},initComponent:function(){if(this.listeners){this.on(this.listeners);delete this.listeners}this.enableBubble(this.bubbleEvents)},render:function(n,t){var i,r;if(!this.rendered&&this.fireEvent("beforerender",this)!==!1){!n&&this.el&&(this.el=Ext.get(this.el),n=this.el.dom.parentNode,this.allowDomMove=!1);this.container=Ext.get(n);this.ctCls&&this.container.addClass(this.ctCls);this.rendered=!0;t!==undefined&&(t=Ext.isNumber(t)?this.container.dom.childNodes[t]:Ext.getDom(t));this.onRender(this.container,t||null);this.autoShow&&this.el.removeClass(["x-hidden","x-hide-"+this.hideMode]);this.cls&&(this.el.addClass(this.cls),delete this.cls);this.style&&(this.el.applyStyles(this.style),delete this.style);this.overCls&&this.el.addClassOnOver(this.overCls);this.fireEvent("render",this);i=this.getContentTarget();this.html&&(i.update(Ext.DomHelper.markup(this.html)),delete this.html);this.contentEl&&(r=Ext.getDom(this.contentEl),Ext.fly(r).removeClass(["x-hidden","x-hide-display"]),i.appendChild(r));this.tpl&&(this.tpl.compile||(this.tpl=new Ext.XTemplate(this.tpl)),this.data&&(this.tpl[this.tplWriteMode](i,this.data),delete this.data));this.afterRender(this.container);this.hidden&&this.doHide();this.disabled&&this.disable(!0);this.stateful!==!1&&this.initStateEvents();this.fireEvent("afterrender",this)}return this},update:function(n,t,i){var r=this.getContentTarget(),u;this.tpl&&typeof n!="string"?this.tpl[this.tplWriteMode](r,n||{}):(u=Ext.isObject(n)?Ext.DomHelper.markup(n):n,r.update(u,t,i))},onAdded:function(n,t){this.ownerCt=n;this.initRef();this.fireEvent("added",this,n,t)},onRemoved:function(){this.removeRef();this.fireEvent("removed",this,this.ownerCt);delete this.ownerCt},initRef:function(){if(this.ref&&!this.refOwner){for(var i=this.ref.split("/"),r=i.length,t=0,n=this;n&&t<r;)n=n.ownerCt,++t;n&&(n[this.refName=i[--t]]=this,this.refOwner=n)}},removeRef:function(){this.refOwner&&this.refName&&(delete this.refOwner[this.refName],delete this.refOwner)},initState:function(){var t,n;Ext.state.Manager&&(t=this.getStateId(),t&&(n=Ext.state.Manager.get(t),n&&this.fireEvent("beforestaterestore",this,n)!==!1&&(this.applyState(Ext.apply({},n)),this.fireEvent("staterestore",this,n))))},getStateId:function(){return this.stateId||(/^(ext-comp-|ext-gen)/.test(String(this.id))?null:this.id)},initStateEvents:function(){if(this.stateEvents)for(var n=0,t;t=this.stateEvents[n];n++)this.on(t,this.saveState,this,{delay:100})},applyState:function(n){n&&Ext.apply(this,n)},getState:function(){return null},saveState:function(){var t,n;Ext.state.Manager&&this.stateful!==!1&&(t=this.getStateId(),t&&(n=this.getState(),this.fireEvent("beforestatesave",this,n)!==!1&&(Ext.state.Manager.set(t,n),this.fireEvent("statesave",this,n))))},applyToMarkup:function(n){this.allowDomMove=!1;this.el=Ext.get(n);this.render(this.el.dom.parentNode)},addClass:function(n){return this.el?this.el.addClass(n):this.cls=this.cls?this.cls+" "+n:n,this},removeClass:function(n){return this.el?this.el.removeClass(n):this.cls&&(this.cls=this.cls.split(" ").remove(n).join(" ")),this},onRender:function(n,t){if(!this.el&&this.autoEl){if(Ext.isString(this.autoEl))this.el=document.createElement(this.autoEl);else{var i=document.createElement("div");Ext.DomHelper.overwrite(i,this.autoEl);this.el=i.firstChild}this.el.id||(this.el.id=this.getId())}this.el&&(this.el=Ext.get(this.el),this.allowDomMove!==!1&&(n.dom.insertBefore(this.el.dom,t),i&&(Ext.removeNode(i),i=null)))},getAutoCreate:function(){var n=Ext.isObject(this.autoCreate)?this.autoCreate:Ext.apply({},this.defaultAutoCreate);return this.id&&!n.id&&(n.id=this.id),n},afterRender:Ext.emptyFn,destroy:function(){this.isDestroyed||this.fireEvent("beforedestroy",this)!==!1&&(this.destroying=!0,this.beforeDestroy(),this.ownerCt&&this.ownerCt.remove&&this.ownerCt.remove(this,!1),this.rendered&&(this.el.remove(),(this.actionMode=="container"||this.removeMode=="container")&&this.container.remove()),this.focusTask&&this.focusTask.cancel&&this.focusTask.cancel(),this.onDestroy(),Ext.ComponentMgr.unregister(this),this.fireEvent("destroy",this),this.purgeListeners(),this.destroying=!1,this.isDestroyed=!0)},deleteMembers:function(){for(var t=arguments,n=0,i=t.length;n<i;++n)delete this[t[n]]},beforeDestroy:Ext.emptyFn,onDestroy:Ext.emptyFn,getEl:function(){return this.el},getContentTarget:function(){return this.el},getId:function(){return this.id||(this.id="ext-comp-"+ ++Ext.Component.AUTO_ID)},getItemId:function(){return this.itemId||this.getId()},focus:function(n,t){return t?(this.focusTask=new Ext.util.DelayedTask(this.focus,this,[n,!1]),this.focusTask.delay(Ext.isNumber(t)?t:10),this):(this.rendered&&!this.isDestroyed&&(this.el.focus(),n===!0&&this.el.dom.select()),this)},blur:function(){return this.rendered&&this.el.blur(),this},disable:function(n){return this.rendered&&this.onDisable(),this.disabled=!0,n!==!0&&this.fireEvent("disable",this),this},onDisable:function(){this.getActionEl().addClass(this.disabledClass);this.el.dom.disabled=!0},enable:function(){return this.rendered&&this.onEnable(),this.disabled=!1,this.fireEvent("enable",this),this},onEnable:function(){this.getActionEl().removeClass(this.disabledClass);this.el.dom.disabled=!1},setDisabled:function(n){return this[n?"disable":"enable"]()},show:function(){return this.fireEvent("beforeshow",this)!==!1&&(this.hidden=!1,this.autoRender&&this.render(Ext.isBoolean(this.autoRender)?Ext.getBody():this.autoRender),this.rendered&&this.onShow(),this.fireEvent("show",this)),this},onShow:function(){this.getVisibilityEl().removeClass("x-hide-"+this.hideMode)},hide:function(){return this.fireEvent("beforehide",this)!==!1&&(this.doHide(),this.fireEvent("hide",this)),this},doHide:function(){this.hidden=!0;this.rendered&&this.onHide()},onHide:function(){this.getVisibilityEl().addClass("x-hide-"+this.hideMode)},getVisibilityEl:function(){return this.hideParent?this.container:this.getActionEl()},setVisible:function(n){return this[n?"show":"hide"]()},isVisible:function(){return this.rendered&&this.getVisibilityEl().isVisible()},cloneConfig:function(n){n=n||{};var i=n.id||Ext.id(),t=Ext.applyIf(n,this.initialConfig);return t.id=i,new this.constructor(t)},getXType:function(){return this.constructor.xtype},isXType:function(n,t){return Ext.isFunction(n)?n=n.xtype:Ext.isObject(n)&&(n=n.constructor.xtype),t?this.constructor.xtype==n:("/"+this.getXTypes()+"/").indexOf("/"+n+"/")!=-1},getXTypes:function(){var t=this.constructor,i,n;if(!t.xtypes){for(i=[],n=this;n&&n.constructor.xtype;)i.unshift(n.constructor.xtype),n=n.constructor.superclass;t.xtypeChain=i;t.xtypes=i.join("/")}return t.xtypes},findParentBy:function(n){for(var t=this.ownerCt;t!=null&&!n(t,this);t=t.ownerCt);return t||null},findParentByType:function(n,t){return this.findParentBy(function(i){return i.isXType(n,t)})},bubble:function(n,t,i){for(var r=this;r;){if(n.apply(t||r,i||[r])===!1)break;r=r.ownerCt}return this},getPositionEl:function(){return this.positionEl||this.el},purgeListeners:function(){if(Ext.Component.superclass.purgeListeners.call(this),this.mons)this.on("beforedestroy",this.clearMons,this,{single:!0})},clearMons:function(){Ext.each(this.mons,function(n){n.item.un(n.ename,n.fn,n.scope)},this);this.mons=[]},createMons:function(){if(!this.mons){this.mons=[];this.on("beforedestroy",this.clearMons,this,{single:!0})}},mon:function(n,t,i,r,u){var o,f,e;if(this.createMons(),Ext.isObject(t)){o=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/;f=t;for(e in f)if(!o.test(e))if(Ext.isFunction(f[e])){this.mons.push({item:n,ename:e,fn:f[e],scope:f.scope});n.on(e,f[e],f.scope,f)}else{this.mons.push({item:n,ename:e,fn:f[e],scope:f.scope});n.on(e,f[e])}return}this.mons.push({item:n,ename:t,fn:i,scope:r});n.on(t,i,r,u)},mun:function(n,t,i,r){var e,u,f,o;for(this.createMons(),f=0,o=this.mons.length;f<o;++f)if(u=this.mons[f],n===u.item&&t==u.ename&&i===u.fn&&r===u.scope){this.mons.splice(f,1);n.un(t,i,r);e=!0;break}return e},nextSibling:function(){if(this.ownerCt){var n=this.ownerCt.items.indexOf(this);if(n!=-1&&n+1<this.ownerCt.items.getCount())return this.ownerCt.items.itemAt(n+1)}return null},previousSibling:function(){if(this.ownerCt){var n=this.ownerCt.items.indexOf(this);if(n>0)return this.ownerCt.items.itemAt(n-1)}return null},getBubbleTarget:function(){return this.ownerCt}});Ext.reg("component",Ext.Component);Ext.Action=Ext.extend(Object,{constructor:function(n){this.initialConfig=n;this.itemId=n.itemId=n.itemId||n.id||Ext.id();this.items=[]},isAction:!0,setText:function(n){this.initialConfig.text=n;this.callEach("setText",[n])},getText:function(){return this.initialConfig.text},setIconClass:function(n){this.initialConfig.iconCls=n;this.callEach("setIconClass",[n])},getIconClass:function(){return this.initialConfig.iconCls},setDisabled:function(n){this.initialConfig.disabled=n;this.callEach("setDisabled",[n])},enable:function(){this.setDisabled(!1)},disable:function(){this.setDisabled(!0)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(n){this.initialConfig.hidden=n;this.callEach("setVisible",[!n])},show:function(){this.setHidden(!1)},hide:function(){this.setHidden(!0)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(n,t){this.initialConfig.handler=n;this.initialConfig.scope=t;this.callEach("setHandler",[n,t])},each:function(n,t){Ext.each(this.items,n,t)},callEach:function(n,t){for(var r=this.items,i=0,u=r.length;i<u;i++)r[i][n].apply(r[i],t)},addComponent:function(n){this.items.push(n);n.on("destroy",this.removeComponent,this)},removeComponent:function(n){this.items.remove(n)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||window,arguments)}}),function(){Ext.Layer=function(n,t){var r;n=n||{};var u=Ext.DomHelper,i=n.parentEl,f=i?Ext.getDom(i):document.body;t&&(this.dom=Ext.getDom(t));this.dom||(r=n.dh||{tag:"div",cls:"x-layer"},this.dom=u.append(f,r));n.cls&&this.addClass(n.cls);this.constrain=n.constrain!==!1;this.setVisibilityMode(Ext.Element.VISIBILITY);this.id=n.id?this.dom.id=n.id:Ext.id(this.dom);this.zindex=n.zindex||this.getZIndex();this.position("absolute",this.zindex);n.shadow?(this.shadowOffset=n.shadowOffset||4,this.shadow=new Ext.Shadow({offset:this.shadowOffset,mode:n.shadow})):this.shadowOffset=0;this.useShim=n.shim!==!1&&Ext.useShims;this.useDisplay=n.useDisplay;this.hide()};var n=Ext.Element.prototype,t=[];Ext.extend(Ext.Layer,Ext.Element,{getZIndex:function(){return this.zindex||parseInt((this.getShim()||this).getStyle("z-index"),10)||11e3},getShim:function(){var n,i;return this.useShim?this.shim?this.shim:(n=t.shift(),n||(n=this.createShim(),n.enableDisplayMode("block"),n.dom.style.display="none",n.dom.style.visibility="visible"),i=this.dom.parentNode,n.dom.parentNode!=i&&i.insertBefore(n.dom,this.dom),n.setStyle("z-index",this.getZIndex()-2),this.shim=n,n):null},hideShim:function(){this.shim&&(this.shim.setDisplayed(!1),t.push(this.shim),delete this.shim)},disableShadow:function(){this.shadow&&(this.shadowDisabled=!0,this.shadow.hide(),this.lastShadowOffset=this.shadowOffset,this.shadowOffset=0)},enableShadow:function(n){this.shadow&&(this.shadowDisabled=!1,Ext.isDefined(this.lastShadowOffset)&&(this.shadowOffset=this.lastShadowOffset,delete this.lastShadowOffset),n&&this.sync(!0))},sync:function(n){var t=this.shadow;if(!this.updating&&this.isVisible()&&(t||this.useShim)){var i=this.getShim(),u=this.getWidth(),f=this.getHeight(),e=this.getLeft(!0),o=this.getTop(!0);if(t&&!this.shadowDisabled){if(n&&!t.isVisible()?t.show(this):t.realign(e,o,u,f),i){n&&i.show();var s=t.el.getXY(),r=i.dom.style,h=t.el.getSize();r.left=s[0]+"px";r.top=s[1]+"px";r.width=h.width+"px";r.height=h.height+"px"}}else i&&(n&&i.show(),i.setSize(u,f),i.setLeftTop(e,o))}},destroy:function(){this.hideShim();this.shadow&&this.shadow.hide();this.removeAllListeners();Ext.removeNode(this.dom);delete this.dom},remove:function(){this.destroy()},beginUpdate:function(){this.updating=!0},endUpdate:function(){this.updating=!1;this.sync(!0)},hideUnders:function(){this.shadow&&this.shadow.hide();this.hideShim()},constrainXY:function(){var s;if(this.constrain){var h=Ext.lib.Dom.getViewWidth(),c=Ext.lib.Dom.getViewHeight(),i=Ext.getDoc().getScroll(),r=this.getXY(),u=r[0],t=r[1],e=this.shadowOffset,l=this.dom.offsetWidth+e,o=this.dom.offsetHeight+e,f=!1;u+l>h+i.left&&(u=h-l-e,f=!0);t+o>c+i.top&&(t=c-o-e,f=!0);u<i.left&&(u=i.left,f=!0);t<i.top&&(t=i.top,f=!0);f&&(this.avoidY&&(s=this.avoidY,t<=s&&t+o>=s&&(t=s-o-5)),r=[u,t],this.storeXY(r),n.setXY.call(this,r),this.sync())}return this},getConstrainOffset:function(){return this.shadowOffset},isVisible:function(){return this.visible},showAction:function(){this.visible=!0;this.useDisplay===!0?this.setDisplayed(""):this.lastXY?n.setXY.call(this,this.lastXY):this.lastLT&&n.setLeftTop.call(this,this.lastLT[0],this.lastLT[1])},hideAction:function(){this.visible=!1;this.useDisplay===!0?this.setDisplayed(!1):this.setLeftTop(-1e4,-1e4)},setVisible:function(t,i,r,u,f){var e;return t&&this.showAction(),i&&t?(e=function(){this.sync(!0);u&&u()}.createDelegate(this),n.setVisible.call(this,!0,!0,r,e,f)):(t||this.hideUnders(!0),e=u,i&&(e=function(){this.hideAction();u&&u()}.createDelegate(this)),n.setVisible.call(this,t,i,r,e,f),t?this.sync(!0):i||this.hideAction()),this},storeXY:function(n){delete this.lastLT;this.lastXY=n},storeLeftTop:function(n,t){delete this.lastXY;this.lastLT=[n,t]},beforeFx:function(){return this.beforeAction(),Ext.Layer.superclass.beforeFx.apply(this,arguments)},afterFx:function(){Ext.Layer.superclass.afterFx.apply(this,arguments);this.sync(this.isVisible())},beforeAction:function(){!this.updating&&this.shadow&&this.shadow.hide()},setLeft:function(t){return this.storeLeftTop(t,this.getTop(!0)),n.setLeft.apply(this,arguments),this.sync(),this},setTop:function(t){return this.storeLeftTop(this.getLeft(!0),t),n.setTop.apply(this,arguments),this.sync(),this},setLeftTop:function(t,i){return this.storeLeftTop(t,i),n.setLeftTop.apply(this,arguments),this.sync(),this},setXY:function(t,i,r,u,f){this.fixDisplay();this.beforeAction();this.storeXY(t);var e=this.createCB(u);return n.setXY.call(this,t,i,r,e,f),i||e(),this},createCB:function(n){var t=this;return function(){t.constrainXY();t.sync(!0);n&&n()}},setX:function(n,t,i,r,u){return this.setXY([n,this.getY()],t,i,r,u),this},setY:function(n,t,i,r,u){return this.setXY([this.getX(),n],t,i,r,u),this},setSize:function(t,i,r,u,f,e){this.beforeAction();var o=this.createCB(f);return n.setSize.call(this,t,i,r,u,o,e),r||o(),this},setWidth:function(t,i,r,u,f){this.beforeAction();var e=this.createCB(u);return n.setWidth.call(this,t,i,r,e,f),i||e(),this},setHeight:function(t,i,r,u,f){this.beforeAction();var e=this.createCB(u);return n.setHeight.call(this,t,i,r,e,f),i||e(),this},setBounds:function(t,i,r,u,f,e,o,s){this.beforeAction();var h=this.createCB(o);return f?n.setBounds.call(this,t,i,r,u,f,e,h,s):(this.storeXY([t,i]),n.setXY.call(this,[t,i]),n.setSize.call(this,r,u,f,e,h,s),h()),this},setZIndex:function(n){return this.zindex=n,this.setStyle("z-index",n+2),this.shadow&&this.shadow.setZIndex(n+1),this.shim&&this.shim.setStyle("z-index",n),this}})}();Ext.Shadow=function(n){Ext.apply(this,n);typeof this.mode!="string"&&(this.mode=this.defaultMode);var r=this.offset,t={h:0},i=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case"drop":t.w=0;t.l=t.t=r;t.t-=1;Ext.isIE9m&&(t.l-=this.offset+i,t.t-=this.offset+i,t.w-=i,t.h-=i,t.t+=1);break;case"sides":t.w=r*2;t.l=-r;t.t=r-1;Ext.isIE9m&&(t.l-=this.offset-i,t.t-=this.offset+i,t.l+=1,t.w-=(this.offset-i)*2,t.w-=i+1,t.h-=1);break;case"frame":t.w=t.h=r*2;t.l=t.t=-r;t.t+=1;t.h-=2;Ext.isIE9m&&(t.l-=this.offset-i,t.t-=this.offset-i,t.l+=1,t.w-=this.offset+i+1,t.h-=this.offset+i,t.h+=1)}this.adjusts=t};Ext.Shadow.prototype={offset:4,defaultMode:"drop",show:function(n){n=Ext.get(n);this.el||(this.el=Ext.Shadow.Pool.pull(),this.el.dom.nextSibling!=n.dom&&this.el.insertBefore(n));this.el.setStyle("z-index",this.zIndex||parseInt(n.getStyle("z-index"),10)-1);Ext.isIE9m&&(this.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")");this.realign(n.getLeft(!0),n.getTop(!0),n.getWidth(),n.getHeight());this.el.dom.style.display="block"},isVisible:function(){return this.el?!0:!1},realign:function(n,t,i,r){if(this.el){var e=this.adjusts,s=this.el.dom,u=s.style,h=i+e.w,c=r+e.h,l=h+"px",a=c+"px",f,o;u.left=n+e.l+"px";u.top=t+e.t+"px";(u.width!=l||u.height!=a)&&(u.width=l,u.height=a,Ext.isIE9m||(f=s.childNodes,o=Math.max(0,h-12)+"px",f[0].childNodes[1].style.width=o,f[1].childNodes[1].style.width=o,f[2].childNodes[1].style.width=o,f[1].style.height=Math.max(0,c-12)+"px"))}},hide:function(){this.el&&(this.el.dom.style.display="none",Ext.Shadow.Pool.push(this.el),delete this.el)},setZIndex:function(n){this.zIndex=n;this.el&&this.el.setStyle("z-index",n)}};Ext.Shadow.Pool=function(){var n=[],t=Ext.isIE9m?'<div class="x-ie-shadow"><\/div>':'<div class="x-shadow"><div class="xst"><div class="xstl"><\/div><div class="xstc"><\/div><div class="xstr"><\/div><\/div><div class="xsc"><div class="xsml"><\/div><div class="xsmc"><\/div><div class="xsmr"><\/div><\/div><div class="xsb"><div class="xsbl"><\/div><div class="xsbc"><\/div><div class="xsbr"><\/div><\/div><\/div>';return{pull:function(){var i=n.shift();return i||(i=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,t)),i.autoBoxAdjust=!1),i},push:function(t){n.push(t)}}}();Ext.BoxComponent=Ext.extend(Ext.Component,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.call(this);this.addEvents("resize","move")},boxReady:!1,deferHeight:!1,setSize:function(n,t){if(typeof n=="object"&&(t=n.height,n=n.width),Ext.isDefined(n)&&Ext.isDefined(this.boxMinWidth)&&n<this.boxMinWidth&&(n=this.boxMinWidth),Ext.isDefined(t)&&Ext.isDefined(this.boxMinHeight)&&t<this.boxMinHeight&&(t=this.boxMinHeight),Ext.isDefined(n)&&Ext.isDefined(this.boxMaxWidth)&&n>this.boxMaxWidth&&(n=this.boxMaxWidth),Ext.isDefined(t)&&Ext.isDefined(this.boxMaxHeight)&&t>this.boxMaxHeight&&(t=this.boxMaxHeight),!this.boxReady)return this.width=n,this.height=t,this;if(this.cacheSizes!==!1&&this.lastSize&&this.lastSize.width==n&&this.lastSize.height==t)return this;this.lastSize={width:n,height:t};var f=this.adjustSize(n,t),i=f.width,r=f.height,u;if(i!==undefined||r!==undefined){u=this.getResizeEl();this.deferHeight||i===undefined||r===undefined?this.deferHeight||r===undefined?i!==undefined&&u.setWidth(i):u.setHeight(r):u.setSize(i,r);this.onResize(i,r,n,t);this.fireEvent("resize",this,i,r,n,t)}return this},setWidth:function(n){return this.setSize(n)},setHeight:function(n){return this.setSize(undefined,n)},getSize:function(){return this.getResizeEl().getSize()},getWidth:function(){return this.getResizeEl().getWidth()},getHeight:function(){return this.getResizeEl().getHeight()},getOuterSize:function(){var n=this.getResizeEl();return{width:n.getWidth()+n.getMargins("lr"),height:n.getHeight()+n.getMargins("tb")}},getPosition:function(n){var t=this.getPositionEl();return n===!0?[t.getLeft(!0),t.getTop(!0)]:this.xy||t.getXY()},getBox:function(n){var i=this.getPosition(n),t=this.getSize();return t.x=i[0],t.y=i[1],t},updateBox:function(n){return this.setSize(n.width,n.height),this.setPagePosition(n.x,n.y),this},getResizeEl:function(){return this.resizeEl||this.el},setAutoScroll:function(n){return this.rendered&&this.getContentTarget().setOverflow(n?"auto":""),this.autoScroll=n,this},setPosition:function(n,t){if(n&&typeof n[1]=="number"&&(t=n[1],n=n[0]),this.x=n,this.y=t,!this.boxReady)return this;var f=this.adjustPosition(n,t),i=f.x,r=f.y,u=this.getPositionEl();if(i!==undefined||r!==undefined){i!==undefined&&r!==undefined?u.setLeftTop(i,r):i!==undefined?u.setLeft(i):r!==undefined&&u.setTop(r);this.onPosition(i,r);this.fireEvent("move",this,i,r)}return this},setPagePosition:function(n,t){if((n&&typeof n[1]=="number"&&(t=n[1],n=n[0]),this.pageX=n,this.pageY=t,this.boxReady)&&n!==undefined&&t!==undefined){var i=this.getPositionEl().translatePoints(n,t);return this.setPosition(i.left,i.top),this}},afterRender:function(){Ext.BoxComponent.superclass.afterRender.call(this);this.resizeEl&&(this.resizeEl=Ext.get(this.resizeEl));this.positionEl&&(this.positionEl=Ext.get(this.positionEl));this.boxReady=!0;Ext.isDefined(this.autoScroll)&&this.setAutoScroll(this.autoScroll);this.setSize(this.width,this.height);this.x||this.y?this.setPosition(this.x,this.y):(this.pageX||this.pageY)&&this.setPagePosition(this.pageX,this.pageY)},syncSize:function(){return delete this.lastSize,this.setSize(this.autoWidth?undefined:this.getResizeEl().getWidth(),this.autoHeight?undefined:this.getResizeEl().getHeight()),this},onResize:function(){},onPosition:function(){},adjustSize:function(n,t){return this.autoWidth&&(n="auto"),this.autoHeight&&(t="auto"),{width:n,height:t}},adjustPosition:function(n,t){return{x:n,y:t}}});Ext.reg("box",Ext.BoxComponent);Ext.Spacer=Ext.extend(Ext.BoxComponent,{autoEl:"div"});Ext.reg("spacer",Ext.Spacer);Ext.SplitBar=function(n,t,i,r,u){this.el=Ext.get(n,!0);this.el.unselectable();this.resizingEl=Ext.get(t,!0);this.orientation=i||Ext.SplitBar.HORIZONTAL;this.minSize=0;this.maxSize=2e3;this.animate=!1;this.useShim=!1;this.shim=null;this.proxy=u?Ext.get(u).dom:Ext.SplitBar.createProxy(this.orientation);this.dd=new Ext.dd.DDProxy(this.el.dom.id,"XSplitBars",{dragElId:this.proxy.id});this.dd.b4StartDrag=this.onStartProxyDrag.createDelegate(this);this.dd.endDrag=this.onEndProxyDrag.createDelegate(this);this.dragSpecs={};this.adapter=new Ext.SplitBar.BasicLayoutAdapter;this.adapter.init(this);this.orientation==Ext.SplitBar.HORIZONTAL?(this.placement=r||(this.el.getX()>this.resizingEl.getX()?Ext.SplitBar.LEFT:Ext.SplitBar.RIGHT),this.el.addClass("x-splitbar-h")):(this.placement=r||(this.el.getY()>this.resizingEl.getY()?Ext.SplitBar.TOP:Ext.SplitBar.BOTTOM),this.el.addClass("x-splitbar-v"));this.addEvents("resize","moved","beforeresize","beforeapply");Ext.SplitBar.superclass.constructor.call(this)};Ext.extend(Ext.SplitBar,Ext.util.Observable,{onStartProxyDrag:function(n,t){var u,i,r;this.fireEvent("beforeresize",this);this.overlay=Ext.DomHelper.append(document.body,{cls:"x-drag-overlay",html:"&#160;"},!0);this.overlay.unselectable();this.overlay.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0));this.overlay.show();Ext.get(this.proxy).setDisplayed("block");u=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize();this.activeMaxSize=this.getMaximumSize();i=u-this.activeMinSize;r=Math.max(this.activeMaxSize-u,0);this.orientation==Ext.SplitBar.HORIZONTAL?(this.dd.resetConstraints(),this.dd.setXConstraint(this.placement==Ext.SplitBar.LEFT?i:r,this.placement==Ext.SplitBar.LEFT?r:i,this.tickSize),this.dd.setYConstraint(0,0)):(this.dd.resetConstraints(),this.dd.setXConstraint(0,0),this.dd.setYConstraint(this.placement==Ext.SplitBar.TOP?i:r,this.placement==Ext.SplitBar.TOP?r:i,this.tickSize));this.dragSpecs.startSize=u;this.dragSpecs.startPoint=[n,t];Ext.dd.DDProxy.prototype.b4StartDrag.call(this.dd,n,t)},onEndProxyDrag:function(n){var i,t;Ext.get(this.proxy).setDisplayed(!1);i=Ext.lib.Event.getXY(n);this.overlay&&(Ext.destroy(this.overlay),delete this.overlay);t=this.orientation==Ext.SplitBar.HORIZONTAL?this.dragSpecs.startSize+(this.placement==Ext.SplitBar.LEFT?i[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-i[0]):this.dragSpecs.startSize+(this.placement==Ext.SplitBar.TOP?i[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-i[1]);t=Math.min(Math.max(t,this.activeMinSize),this.activeMaxSize);t!=this.dragSpecs.startSize&&this.fireEvent("beforeapply",this,t)!==!1&&(this.adapter.setElementSize(this,t),this.fireEvent("moved",this,t),this.fireEvent("resize",this,t))},getAdapter:function(){return this.adapter},setAdapter:function(n){this.adapter=n;this.adapter.init(this)},getMinimumSize:function(){return this.minSize},setMinimumSize:function(n){this.minSize=n},getMaximumSize:function(){return this.maxSize},setMaximumSize:function(n){this.maxSize=n},setCurrentSize:function(n){var t=this.animate;this.animate=!1;this.adapter.setElementSize(this,n);this.animate=t},destroy:function(n){Ext.destroy(this.shim,Ext.get(this.proxy));this.dd.unreg();n&&this.el.remove();this.purgeListeners()}});Ext.SplitBar.createProxy=function(n){var t=new Ext.Element(document.createElement("div")),i;return document.body.appendChild(t.dom),t.unselectable(),i="x-splitbar-proxy",t.addClass(i+" "+(n==Ext.SplitBar.HORIZONTAL?i+"-h":i+"-v")),t.dom};Ext.SplitBar.BasicLayoutAdapter=function(){};Ext.SplitBar.BasicLayoutAdapter.prototype={init:function(){},getElementSize:function(n){return n.orientation==Ext.SplitBar.HORIZONTAL?n.resizingEl.getWidth():n.resizingEl.getHeight()},setElementSize:function(n,t,i){n.orientation==Ext.SplitBar.HORIZONTAL?n.animate?n.resizingEl.setWidth(t,!0,.1,i,"easeOut"):(n.resizingEl.setWidth(t),i&&i(n,t)):n.animate?n.resizingEl.setHeight(t,!0,.1,i,"easeOut"):(n.resizingEl.setHeight(t),i&&i(n,t))}};Ext.SplitBar.AbsoluteLayoutAdapter=function(n){this.basic=new Ext.SplitBar.BasicLayoutAdapter;this.container=Ext.get(n)};Ext.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(n){this.basic.init(n)},getElementSize:function(n){return this.basic.getElementSize(n)},setElementSize:function(n,t){this.basic.setElementSize(n,t,this.moveSplitter.createDelegate(this,[n]))},moveSplitter:function(n){var t=Ext.SplitBar;switch(n.placement){case t.LEFT:n.el.setX(n.resizingEl.getRight());break;case t.RIGHT:n.el.setStyle("right",this.container.getWidth()-n.resizingEl.getLeft()+"px");break;case t.TOP:n.el.setY(n.resizingEl.getBottom());break;case t.BOTTOM:n.el.setY(n.resizingEl.getTop()-n.el.getHeight())}}};Ext.SplitBar.VERTICAL=1;Ext.SplitBar.HORIZONTAL=2;Ext.SplitBar.LEFT=1;Ext.SplitBar.RIGHT=2;Ext.SplitBar.TOP=3;Ext.SplitBar.BOTTOM=4;Ext.Container=Ext.extend(Ext.BoxComponent,{bufferResize:50,autoDestroy:!0,forceLayout:!1,defaultType:"panel",resizeEvent:"resize",bubbleEvents:["add","remove"],initComponent:function(){Ext.Container.superclass.initComponent.call(this);this.addEvents("afterlayout","beforeadd","beforeremove","add","remove");var n=this.items;n&&(delete this.items,this.add(n))},initItems:function(){this.items||(this.items=new Ext.util.MixedCollection(!1,this.getComponentId),this.getLayout())},setLayout:function(n){this.layout&&this.layout!=n&&this.layout.setContainer(null);this.layout=n;this.initItems();n.setContainer(this)},afterRender:function(){if(Ext.Container.superclass.afterRender.call(this),this.layout||(this.layout="auto"),Ext.isObject(this.layout)&&!this.layout.layout&&(this.layoutConfig=this.layout,this.layout=this.layoutConfig.type),Ext.isString(this.layout)&&(this.layout=new Ext.Container.LAYOUTS[this.layout.toLowerCase()](this.layoutConfig)),this.setLayout(this.layout),this.activeItem!==undefined&&this.layout.setActiveItem){var n=this.activeItem;delete this.activeItem;this.layout.setActiveItem(n)}if(this.ownerCt||this.doLayout(!1,!0),this.monitorResize===!0)Ext.EventManager.onWindowResize(this.doLayout,this,[!1])},getLayoutTarget:function(){return this.el},getComponentId:function(n){return n.getItemId()},add:function(n){var r,u,t,i;if(this.initItems(),r=arguments.length>1,r||Ext.isArray(n))return u=[],Ext.each(r?arguments:n,function(n){u.push(this.add(n))},this),u;if(t=this.lookupComponent(this.applyDefaults(n)),i=this.items.length,this.fireEvent("beforeadd",this,t,i)!==!1&&this.onBeforeAdd(t)!==!1){this.items.add(t);t.onAdded(this,i);this.onAdd(t);this.fireEvent("add",this,t,i)}return t},onAdd:function(){},onAdded:function(n,t){this.ownerCt=n;this.initRef();this.cascade(function(n){n.initRef()});this.fireEvent("added",this,n,t)},insert:function(n,t){var u=arguments,f=u.length,e=[],r,i;if(this.initItems(),f>2){for(r=f-1;r>=1;--r)e.push(this.insert(n,u[r]));return e}if(i=this.lookupComponent(this.applyDefaults(t)),n=Math.min(n,this.items.length),this.fireEvent("beforeadd",this,i,n)!==!1&&this.onBeforeAdd(i)!==!1){i.ownerCt==this&&this.items.remove(i);this.items.insert(n,i);i.onAdded(this,n);this.onAdd(i);this.fireEvent("add",this,i,n)}return i},applyDefaults:function(n){var t=this.defaults;return t&&(Ext.isFunction(t)&&(t=t.call(this,n)),Ext.isString(n)?(n=Ext.ComponentMgr.get(n),Ext.apply(n,t)):n.events?Ext.apply(n,t):Ext.applyIf(n.isAction?n.initialConfig:n,t)),n},onBeforeAdd:function(n){n.ownerCt&&n.ownerCt.remove(n,!1);this.hideBorders===!0&&(n.border=n.border===!0)},remove:function(n,t){this.initItems();var i=this.getComponent(n);return i&&this.fireEvent("beforeremove",this,i)!==!1&&(this.doRemove(i,t),this.fireEvent("remove",this,i)),i},onRemove:function(){},doRemove:function(n,t){var i=this.layout,r=i&&this.rendered;if(r)i.onRemove(n);this.items.remove(n);n.onRemoved();this.onRemove(n);(t===!0||t!==!1&&this.autoDestroy)&&n.destroy();r&&i.afterRemove(n)},removeAll:function(n){var t,i,u,r,f;for(this.initItems(),i=[],u=[],this.items.each(function(n){i.push(n)}),r=0,f=i.length;r<f;++r)t=i[r],this.remove(t,n),t.ownerCt!==this&&u.push(t);return u},getComponent:function(n){return Ext.isObject(n)&&(n=n.getItemId()),this.items.get(n)},lookupComponent:function(n){return Ext.isString(n)?Ext.ComponentMgr.get(n):n.events?n:this.createComponent(n)},createComponent:function(n,t){if(n.render)return n;var i=Ext.create(Ext.apply({ownerCt:this},n),t||this.defaultType);return delete i.initialConfig.ownerCt,delete i.ownerCt,i},canLayout:function(){var n=this.getVisibilityEl();return n&&n.dom&&!n.isStyle("display","none")},doLayout:function(n,t){var e=this.rendered,r=t||this.forceLayout,u,i,o,f;if(this.collapsed||!this.canLayout()){if(this.deferLayout=this.deferLayout||!n,!r)return;n=n&&!this.deferLayout}else delete this.deferLayout;if(e&&this.layout&&this.layout.layout(),n!==!0&&this.items)for(u=this.items.items,i=0,o=u.length;i<o;i++)f=u[i],f.doLayout&&f.doLayout(!1,r);if(e)this.onLayout(n,r);this.hasLayout=!0;delete this.forceLayout},onLayout:Ext.emptyFn,shouldBufferLayout:function(){var n=this.hasLayout;return this.ownerCt?n?!this.hasLayoutPending():!1:n},hasLayoutPending:function(){var n=!1;return this.ownerCt.bubble(function(t){if(t.layoutPending)return n=!0,!1}),n},onShow:function(){Ext.Container.superclass.onShow.call(this);Ext.isDefined(this.deferLayout)&&(delete this.deferLayout,this.doLayout(!0))},getLayout:function(){if(!this.layout){var n=new Ext.layout.AutoLayout(this.layoutConfig);this.setLayout(n)}return this.layout},beforeDestroy:function(){var n;if(this.items)while(n=this.items.first())this.doRemove(n,!0);this.monitorResize&&Ext.EventManager.removeResizeListener(this.doLayout,this);Ext.destroy(this.layout);Ext.Container.superclass.beforeDestroy.call(this)},cascade:function(n,t,i){var u,r,f;if(n.apply(t||this,i||[this])!==!1&&this.items)for(u=this.items.items,r=0,f=u.length;r<f;r++)u[r].cascade?u[r].cascade(n,t,i):n.apply(t||u[r],i||[u[r]]);return this},findById:function(n){var t=null,i=this;return this.cascade(function(r){if(i!=r&&r.id===n)return t=r,!1}),t},findByType:function(n,t){return this.findBy(function(i){return i.isXType(n,t)})},find:function(n,t){return this.findBy(function(i){return i[n]===t})},findBy:function(n,t){var i=[],r=this;return this.cascade(function(u){r!=u&&n.call(t||u,u,r)===!0&&i.push(u)}),i},get:function(n){return this.getComponent(n)}});Ext.Container.LAYOUTS={};Ext.reg("container",Ext.Container);Ext.layout.ContainerLayout=Ext.extend(Object,{monitorResize:!1,activeItem:null,constructor:function(n){this.id=Ext.id(null,"ext-layout-");Ext.apply(this,n)},type:"container",IEMeasureHack:function(n,t){for(var f=n.dom.childNodes,e=f.length,u,o=[],r,s,i=0;i<e;i++)u=f[i],r=Ext.get(u),r&&(o[i]=r.getStyle("display"),r.setStyle({display:"none"}));for(s=n?n.getViewSize(t):{},i=0;i<e;i++)u=f[i],r=Ext.get(u),r&&r.setStyle({display:o[i]});return s},getLayoutTargetSize:Ext.EmptyFn,layout:function(){var n=this.container,t=n.getLayoutTarget();this.hasLayout||Ext.isEmpty(this.targetCls)||t.addClass(this.targetCls);this.onLayout(n,t);n.fireEvent("afterlayout",n,this)},onLayout:function(n,t){this.renderAll(n,t)},isValidParent:function(n,t){return t&&n.getPositionEl().dom.parentNode==(t.dom||t)},renderAll:function(n,t){for(var u=n.items.items,r,f=u.length,i=0;i<f;i++)r=u[i],!r||r.rendered&&this.isValidParent(r,t)||this.renderItem(r,i,t)},renderItem:function(n,t,i){n&&(n.rendered?this.isValidParent(n,i)||(Ext.isNumber(t)&&(t=i.dom.childNodes[t]),i.dom.insertBefore(n.getPositionEl().dom,t||null),n.container=i,this.configureItem(n)):(n.render(i,t),this.configureItem(n)))},getRenderedItems:function(n){for(var f=n.getLayoutTarget(),r=n.items.items,e=r.length,i,u=[],t=0;t<e;t++)(i=r[t]).rendered&&this.isValidParent(i,f)&&i.shouldLayout!==!1&&u.push(i);return u},configureItem:function(n){if(this.extraCls){var t=n.getPositionEl?n.getPositionEl():n;t.addClass(this.extraCls)}n.doLayout&&this.forceLayout&&n.doLayout();this.renderHidden&&n!=this.activeItem&&n.hide()},onRemove:function(n){if(this.activeItem==n&&delete this.activeItem,n.rendered&&this.extraCls){var t=n.getPositionEl?n.getPositionEl():n;t.removeClass(this.extraCls)}},afterRemove:function(n){n.removeRestore&&(n.removeMode="container",delete n.removeRestore)},onResize:function(){var n=this.container,t;n.collapsed||((t=n.bufferResize&&n.shouldBufferLayout())?(this.resizeTask||(this.resizeTask=new Ext.util.DelayedTask(this.runLayout,this),this.resizeBuffer=Ext.isNumber(t)?t:50),n.layoutPending=!0,this.resizeTask.delay(this.resizeBuffer)):this.runLayout())},runLayout:function(){var n=this.container;this.layout();n.onLayout();delete n.layoutPending},setContainer:function(n){if(this.monitorResize&&n!=this.container){var t=this.container;if(t&&t.un(t.resizeEvent,this.onResize,this),n)n.on(n.resizeEvent,this.onResize,this)}this.container=n},parseMargins:function(n){Ext.isNumber(n)&&(n=n.toString());var t=n.split(" "),i=t.length;return i==1?t[1]=t[2]=t[3]=t[0]:i==2?(t[2]=t[0],t[3]=t[1]):i==3&&(t[3]=t[1]),{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0}},fieldTpl:function(){var n=new Ext.Template('<div class="x-form-item {itemCls}" tabIndex="-1">','<label for="{id}" style="{labelStyle}" class="x-form-item-label">{label}{labelSeparator}<\/label>','<div class="x-form-element" id="x-form-el-{id}" style="{elementStyle}">','<\/div><div class="{clearCls}"><\/div>',"<\/div>");return n.disableFormats=!0,n.compile()}(),destroy:function(){if(this.resizeTask&&this.resizeTask.cancel&&this.resizeTask.cancel(),this.container&&this.container.un(this.container.resizeEvent,this.onResize,this),!Ext.isEmpty(this.targetCls)){var n=this.container.getLayoutTarget();n&&n.removeClass(this.targetCls)}}});Ext.layout.AutoLayout=Ext.extend(Ext.layout.ContainerLayout,{type:"auto",monitorResize:!0,onLayout:function(n,t){Ext.layout.AutoLayout.superclass.onLayout.call(this,n,t);for(var u=this.getRenderedItems(n),f=u.length,r,i=0;i<f;i++)r=u[i],r.doLayout&&r.doLayout(!0)}});Ext.Container.LAYOUTS.auto=Ext.layout.AutoLayout;Ext.layout.FitLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"fit",getLayoutTargetSize:function(){var n=this.container.getLayoutTarget();return n?n.getStyleSize():{}},onLayout:function(n,t){Ext.layout.FitLayout.superclass.onLayout.call(this,n,t);n.collapsed||this.setItemSize(this.activeItem||n.items.itemAt(0),this.getLayoutTargetSize())},setItemSize:function(n,t){n&&t.height>0&&n.setSize(t)}});Ext.Container.LAYOUTS.fit=Ext.layout.FitLayout;Ext.layout.CardLayout=Ext.extend(Ext.layout.FitLayout,{deferredRender:!1,layoutOnCardChange:!1,renderHidden:!0,type:"card",setActiveItem:function(n){var t=this.activeItem,r=this.container,i;if(n=r.getComponent(n),n&&t!=n){if(t){if(t.hide(),t.hidden!==!0)return!1;t.fireEvent("deactivate",t)}i=n.doLayout&&(this.layoutOnCardChange||!n.rendered);this.activeItem=n;delete n.deferLayout;n.show();this.layout();i&&n.doLayout();n.fireEvent("activate",n)}},renderAll:function(n,t){this.deferredRender?this.renderItem(this.activeItem,undefined,t):Ext.layout.CardLayout.superclass.renderAll.call(this,n,t)}});Ext.Container.LAYOUTS.card=Ext.layout.CardLayout;Ext.layout.AnchorLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,getLayoutTargetSize:function(){var t=this.container.getLayoutTarget(),n={};return t&&(n=t.getViewSize(),Ext.isIE9m&&Ext.isStrict&&n.width==0&&(n=t.getStyleSize()),n.width-=t.getPadding("lr"),n.height-=t.getPadding("tb")),n},onLayout:function(n,t){var p;Ext.layout.AnchorLayout.superclass.onLayout.call(this,n,t);var f=this.getLayoutTargetSize(),w=f.width,b=f.height,k=t.getStyle("overflow"),d=this.getRenderedItems(n),s=d.length,h=[],e,o,c,i,u,l,a,v,r,y;if(!(w<20)||!(b<20)){for(n.anchorSize?typeof n.anchorSize=="number"?o=n.anchorSize:(o=n.anchorSize.width,c=n.anchorSize.height):(o=n.initialConfig.width,c=n.initialConfig.height),r=0;r<s;r++)i=d[r],y=i.getPositionEl(),i.anchor||!i.items||Ext.isNumber(i.width)||Ext.isIE6&&Ext.isStrict||(i.anchor=this.defaultAnchor),i.anchor&&(u=i.anchorSpec,u||(v=i.anchor.split(" "),i.anchorSpec=u={right:this.parseAnchor(v[0],i.initialConfig.width,o),bottom:this.parseAnchor(v[1],i.initialConfig.height,c)}),l=u.right?this.adjustWidthAnchor(u.right(w)-y.getMargins("lr"),i):undefined,a=u.bottom?this.adjustHeightAnchor(u.bottom(b)-y.getMargins("tb"),i):undefined,(l||a)&&h.push({component:i,width:l||undefined,height:a||undefined}));for(r=0,s=h.length;r<s;r++)e=h[r],e.component.setSize(e.width,e.height);if(k&&k!="hidden"&&!this.adjustmentPass&&(p=this.getLayoutTargetSize(),p.width!=f.width||p.height!=f.height)){this.adjustmentPass=!0;this.onLayout(n,t)}delete this.adjustmentPass}},parseAnchor:function(n,t,i){var r,u,f;if(n&&n!="none"){if(this.parseAnchorRE.test(n))return u=i-t,function(n){if(n!==r)return r=n,n-u};if(n.indexOf("%")!=-1)return f=parseFloat(n.replace("%",""))*.01,function(n){if(n!==r)return r=n,Math.floor(n*f)};if(n=parseInt(n,10),!isNaN(n))return function(t){if(t!==r)return r=t,t+n}}return!1},adjustWidthAnchor:function(n){return n},adjustHeightAnchor:function(n){return n}});Ext.Container.LAYOUTS.anchor=Ext.layout.AnchorLayout;Ext.layout.ColumnLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"column",extraCls:"x-column",scrollOffset:0,targetCls:"x-column-layout-ct",isValidParent:function(n){return this.innerCt&&n.getPositionEl().dom.parentNode==this.innerCt.dom},getLayoutTargetSize:function(){var t=this.container.getLayoutTarget(),n;return t&&(n=t.getViewSize(),Ext.isIE9m&&Ext.isStrict&&n.width==0&&(n=t.getStyleSize()),n.width-=t.getPadding("lr"),n.height-=t.getPadding("tb")),n},renderAll:function(n,t){this.innerCt||(this.innerCt=t.createChild({cls:"x-column-inner"}),this.innerCt.createChild({cls:"x-clear"}));Ext.layout.ColumnLayout.superclass.renderAll.call(this,n,this.innerCt)},onLayout:function(n,t){var o=n.items.items,s=o.length,r,i,f,h=[],u,l;if(this.renderAll(n,t),u=this.getLayoutTargetSize(),!Ext.isIE9m||!(u.width<1)||!(u.height<1)){var c=u.width-this.scrollOffset,a=u.height,e=c;for(this.innerCt.setWidth(c),i=0;i<s;i++)r=o[i],f=r.getPositionEl().getMargins("lr"),h[i]=f,r.columnWidth||(e-=r.getWidth()+f);for(e=e<0?0:e,i=0;i<s;i++)r=o[i],f=h[i],r.columnWidth&&r.setSize(Math.floor(r.columnWidth*e)-f);if(Ext.isIE9m&&(i=t.getStyle("overflow")&&i!="hidden"&&!this.adjustmentPass)&&(l=this.getLayoutTargetSize(),l.width!=u.width)){this.adjustmentPass=!0;this.onLayout(n,t)}delete this.adjustmentPass}}});Ext.Container.LAYOUTS.column=Ext.layout.ColumnLayout;Ext.layout.BorderLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,rendered:!1,type:"border",targetCls:"x-border-layout-ct",getLayoutTargetSize:function(){var n=this.container.getLayoutTarget();return n?n.getViewSize():{}},onLayout:function(n,t){var e,f,u,s,nt=n.items.items,b=nt.length,o,rt,g;if(!this.rendered){for(e=[],f=0;f<b;f++)u=nt[f],s=u.region,u.collapsed&&e.push(u),u.collapsed=!1,u.rendered||(u.render(t,f),u.getPositionEl().addClass("x-border-panel")),this[s]=s!="center"&&u.split?new Ext.layout.BorderLayout.SplitRegion(this,u.initialConfig,s):new Ext.layout.BorderLayout.Region(this,u.initialConfig,s),this[s].render(t,u);this.rendered=!0}if(o=this.getLayoutTargetSize(),o.width<20||o.height<20){e&&(this.restoreCollapsed=e);return}this.restoreCollapsed&&(e=this.restoreCollapsed,delete this.restoreCollapsed);var w=o.width,tt=o.height,k=w,c=tt,l=0,it=0,a=this.north,v=this.south,y=this.west,p=this.east,u=this.center,r,i,h,d;if(!u&&Ext.layout.BorderLayout.WARN!==!1)throw"No center region defined in BorderLayout "+n.id;if(a&&a.isVisible()&&(r=a.getSize(),i=a.getMargins(),r.width=w-(i.left+i.right),r.x=i.left,r.y=i.top,l=r.height+r.y+i.bottom,c-=l,a.applyLayout(r)),v&&v.isVisible()&&(r=v.getSize(),i=v.getMargins(),r.width=w-(i.left+i.right),r.x=i.left,d=r.height+i.top+i.bottom,r.y=tt-d+i.top,c-=d,v.applyLayout(r)),y&&y.isVisible()&&(r=y.getSize(),i=y.getMargins(),r.height=c-(i.top+i.bottom),r.x=i.left,r.y=l+i.top,h=r.width+i.left+i.right,it+=h,k-=h,y.applyLayout(r)),p&&p.isVisible()&&(r=p.getSize(),i=p.getMargins(),r.height=c-(i.top+i.bottom),h=r.width+i.left+i.right,r.x=w-h+i.left,r.y=l+i.top,k-=h,p.applyLayout(r)),u&&(i=u.getMargins(),rt={x:it+i.left,y:l+i.top,width:k-(i.left+i.right),height:c-(i.top+i.bottom)},u.applyLayout(rt)),e)for(f=0,b=e.length;f<b;f++)e[f].collapse(!1);if(Ext.isIE9m&&Ext.isStrict&&t.repaint(),(f=t.getStyle("overflow")&&f!="hidden"&&!this.adjustmentPass)&&(g=this.getLayoutTargetSize(),g.width!=o.width||g.height!=o.height)){this.adjustmentPass=!0;this.onLayout(n,t)}delete this.adjustmentPass},destroy:function(){for(var i=["north","south","east","west"],n,t=0;t<i.length;t++)n=this[i[t]],n&&(n.destroy?n.destroy():n.split&&n.split.destroy(!0));Ext.layout.BorderLayout.superclass.destroy.call(this)}});Ext.layout.BorderLayout.Region=function(n,t,i){Ext.apply(this,t);this.layout=n;this.position=i;this.state={};typeof this.margins=="string"&&(this.margins=this.layout.parseMargins(this.margins));this.margins=Ext.applyIf(this.margins||{},this.defaultMargins);this.collapsible&&(typeof this.cmargins=="string"&&(this.cmargins=this.layout.parseMargins(this.cmargins)),this.cmargins=this.collapseMode!="mini"||this.cmargins?Ext.applyIf(this.cmargins||{},i=="north"||i=="south"?this.defaultNSCMargins:this.defaultEWCMargins):{left:0,top:0,right:0,bottom:0})};Ext.layout.BorderLayout.Region.prototype={collapsible:!1,split:!1,floatable:!0,minWidth:50,minHeight:50,defaultMargins:{left:0,top:0,right:0,bottom:0},defaultNSCMargins:{left:5,top:5,right:5,bottom:5},defaultEWCMargins:{left:5,top:0,right:5,bottom:0},floatingZIndex:100,isCollapsed:!1,render:function(n,t){this.panel=t;t.el.enableDisplayMode();this.targetEl=n;this.el=t.el;var r=t.getState,i=this.position;if(t.getState=function(){return Ext.apply(r.call(t)||{},this.state)}.createDelegate(this),i!="center"){t.allowQueuedExpand=!1;t.on({beforecollapse:this.beforeCollapse,collapse:this.onCollapse,beforeexpand:this.beforeExpand,expand:this.onExpand,hide:this.onHide,show:this.onShow,scope:this});(this.collapsible||this.floatable)&&(t.collapseEl="el",t.slideAnchor=this.getSlideAnchor());t.tools&&t.tools.toggle&&(t.tools.toggle.addClass("x-tool-collapse-"+i),t.tools.toggle.addClassOnOver("x-tool-collapse-"+i+"-over"))}},getCollapsedEl:function(){var n,t;if(!this.collapsedEl)if(this.toolTemplate||(n=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;<\/div>'),n.disableFormats=!0,n.compile(),Ext.layout.BorderLayout.Region.prototype.toolTemplate=n),this.collapsedEl=this.targetEl.createChild({cls:"x-layout-collapsed x-layout-collapsed-"+this.position,id:this.panel.id+"-xcollapsed"}),this.collapsedEl.enableDisplayMode("block"),this.collapseMode=="mini"){this.collapsedEl.addClass("x-layout-cmini-"+this.position);this.miniCollapsedEl=this.collapsedEl.createChild({cls:"x-layout-mini x-layout-mini-"+this.position,html:"&#160;"});this.miniCollapsedEl.addClassOnOver("x-layout-mini-over");this.collapsedEl.addClassOnOver("x-layout-collapsed-over");this.collapsedEl.on("click",this.onExpandClick,this,{stopEvent:!0})}else{if(this.collapsible!==!1&&!this.hideCollapseTool){t=this.expandToolEl=this.toolTemplate.append(this.collapsedEl.dom,{id:"expand-"+this.position},!0);t.addClassOnOver("x-tool-expand-"+this.position+"-over");t.on("click",this.onExpandClick,this,{stopEvent:!0})}if(this.floatable!==!1||this.titleCollapse){this.collapsedEl.addClassOnOver("x-layout-collapsed-over");this.collapsedEl.on("click",this[this.floatable?"collapseClick":"onExpandClick"],this)}}return this.collapsedEl},onExpandClick:function(){this.isSlid?this.panel.expand(!1):this.panel.expand()},onCollapseClick:function(){this.panel.collapse()},beforeCollapse:function(n,t){this.lastAnim=t;this.splitEl&&this.splitEl.hide();this.getCollapsedEl().show();var i=this.panel.getEl();this.originalZIndex=i.getStyle("z-index");i.setStyle("z-index",100);this.isCollapsed=!0;this.layout.layout()},onCollapse:function(){this.panel.el.setStyle("z-index",1);this.lastAnim===!1||this.panel.animCollapse===!1?this.getCollapsedEl().dom.style.visibility="visible":this.getCollapsedEl().slideIn(this.panel.slideAnchor,{duration:.2});this.state.collapsed=!0;this.panel.saveState()},beforeExpand:function(){this.isSlid&&this.afterSlideIn();var n=this.getCollapsedEl();this.el.show();this.position=="east"||this.position=="west"?this.panel.setSize(undefined,n.getHeight()):this.panel.setSize(n.getWidth(),undefined);n.hide();n.dom.style.visibility="hidden";this.panel.el.setStyle("z-index",this.floatingZIndex)},onExpand:function(){this.isCollapsed=!1;this.splitEl&&this.splitEl.show();this.layout.layout();this.panel.el.setStyle("z-index",this.originalZIndex);this.state.collapsed=!1;this.panel.saveState()},collapseClick:function(n){this.isSlid?(n.stopPropagation(),this.slideIn()):(n.stopPropagation(),this.slideOut())},onHide:function(){this.isCollapsed?this.getCollapsedEl().hide():this.splitEl&&this.splitEl.hide()},onShow:function(){this.isCollapsed?this.getCollapsedEl().show():this.splitEl&&this.splitEl.show()},isVisible:function(){return!this.panel.hidden},getMargins:function(){return this.isCollapsed&&this.cmargins?this.cmargins:this.margins},getSize:function(){return this.isCollapsed?this.getCollapsedEl().getSize():this.panel.getSize()},setPanel:function(n){this.panel=n},getMinWidth:function(){return this.minWidth},getMinHeight:function(){return this.minHeight},applyLayoutCollapsed:function(n){var t=this.getCollapsedEl();t.setLeftTop(n.x,n.y);t.setSize(n.width,n.height)},applyLayout:function(n){this.isCollapsed?this.applyLayoutCollapsed(n):(this.panel.setPosition(n.x,n.y),this.panel.setSize(n.width,n.height))},beforeSlide:function(){this.panel.beforeEffect()},afterSlide:function(){this.panel.afterEffect()},initAutoHide:function(){if(this.autoHide!==!1){this.autoHideHd||(this.autoHideSlideTask=new Ext.util.DelayedTask(this.slideIn,this),this.autoHideHd={mouseout:function(n){n.within(this.el,!0)||this.autoHideSlideTask.delay(500)},mouseover:function(){this.autoHideSlideTask.cancel()},scope:this});this.el.on(this.autoHideHd);this.collapsedEl.on(this.autoHideHd)}},clearAutoHide:function(){this.autoHide!==!1&&(this.el.un("mouseout",this.autoHideHd.mouseout),this.el.un("mouseover",this.autoHideHd.mouseover),this.collapsedEl.un("mouseout",this.autoHideHd.mouseout),this.collapsedEl.un("mouseover",this.autoHideHd.mouseover))},clearMonitor:function(){Ext.getDoc().un("click",this.slideInIf,this)},slideOut:function(){if(!this.isSlid&&!this.el.hasActiveFx()){this.isSlid=!0;var n=this.panel.tools,t,i;if(n&&n.toggle&&n.toggle.hide(),this.el.show(),i=this.panel.collapsed,this.panel.collapsed=!1,this.position=="east"||this.position=="west"?(t=this.panel.deferHeight,this.panel.deferHeight=!1,this.panel.setSize(undefined,this.collapsedEl.getHeight()),this.panel.deferHeight=t):this.panel.setSize(this.collapsedEl.getWidth(),undefined),this.panel.collapsed=i,this.restoreLT=[this.el.dom.style.left,this.el.dom.style.top],this.el.alignTo(this.collapsedEl,this.getCollapseAnchor()),this.el.setStyle("z-index",this.floatingZIndex+2),this.panel.el.replaceClass("x-panel-collapsed","x-panel-floating"),this.animFloat!==!1)this.beforeSlide(),this.el.slideIn(this.getSlideAnchor(),{callback:function(){this.afterSlide();this.initAutoHide();Ext.getDoc().on("click",this.slideInIf,this)},scope:this,block:!0});else{this.initAutoHide();Ext.getDoc().on("click",this.slideInIf,this)}}},afterSlideIn:function(){this.clearAutoHide();this.isSlid=!1;this.clearMonitor();this.el.setStyle("z-index","");this.panel.el.replaceClass("x-panel-floating","x-panel-collapsed");this.el.dom.style.left=this.restoreLT[0];this.el.dom.style.top=this.restoreLT[1];var n=this.panel.tools;n&&n.toggle&&n.toggle.show()},slideIn:function(n){if(!this.isSlid||this.el.hasActiveFx()){Ext.callback(n);return}this.isSlid=!1;this.animFloat!==!1?(this.beforeSlide(),this.el.slideOut(this.getSlideAnchor(),{callback:function(){this.el.hide();this.afterSlide();this.afterSlideIn();Ext.callback(n)},scope:this,block:!0})):(this.el.hide(),this.afterSlideIn())},slideInIf:function(n){n.within(this.el)||this.slideIn()},anchors:{west:"left",east:"right",north:"top",south:"bottom"},sanchors:{west:"l",east:"r",north:"t",south:"b"},canchors:{west:"tl-tr",east:"tr-tl",north:"tl-bl",south:"bl-tl"},getAnchor:function(){return this.anchors[this.position]},getCollapseAnchor:function(){return this.canchors[this.position]},getSlideAnchor:function(){return this.sanchors[this.position]},getAlignAdj:function(){var n=this.cmargins;switch(this.position){case"west":return[0,0];case"east":return[0,0];case"north":return[0,0];case"south":return[0,0]}},getExpandAdj:function(){var t=this.collapsedEl,n=this.cmargins;switch(this.position){case"west":return[-(n.right+t.getWidth()+n.left),0];case"east":return[n.right+t.getWidth()+n.left,0];case"north":return[0,-(n.top+n.bottom+t.getHeight())];case"south":return[0,n.top+n.bottom+t.getHeight()]}},destroy:function(){this.autoHideSlideTask&&this.autoHideSlideTask.cancel&&this.autoHideSlideTask.cancel();Ext.destroyMembers(this,"miniCollapsedEl","collapsedEl","expandToolEl")}};Ext.layout.BorderLayout.SplitRegion=function(n,t,i){Ext.layout.BorderLayout.SplitRegion.superclass.constructor.call(this,n,t,i);this.applyLayout=this.applyFns[i]};Ext.extend(Ext.layout.BorderLayout.SplitRegion,Ext.layout.BorderLayout.Region,{splitTip:"Drag to resize.",collapsibleSplitTip:"Drag to resize. Double click to hide.",useSplitTips:!1,splitSettings:{north:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.TOP,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},south:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.BOTTOM,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},east:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.RIGHT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"},west:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.LEFT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"}},applyFns:{west:function(n){var i,t,r;if(this.isCollapsed)return this.applyLayoutCollapsed(n);i=this.splitEl.dom;t=i.style;this.panel.setPosition(n.x,n.y);r=i.offsetWidth;t.left=n.x+n.width-r+"px";t.top=n.y+"px";t.height=Math.max(0,n.height)+"px";this.panel.setSize(n.width-r,n.height)},east:function(n){if(this.isCollapsed)return this.applyLayoutCollapsed(n);var i=this.splitEl.dom,t=i.style,r=i.offsetWidth;this.panel.setPosition(n.x+r,n.y);t.left=n.x+"px";t.top=n.y+"px";t.height=Math.max(0,n.height)+"px";this.panel.setSize(n.width-r,n.height)},north:function(n){if(this.isCollapsed)return this.applyLayoutCollapsed(n);var i=this.splitEl.dom,t=i.style,r=i.offsetHeight;this.panel.setPosition(n.x,n.y);t.left=n.x+"px";t.top=n.y+n.height-r+"px";t.width=Math.max(0,n.width)+"px";this.panel.setSize(n.width,n.height-r)},south:function(n){if(this.isCollapsed)return this.applyLayoutCollapsed(n);var i=this.splitEl.dom,t=i.style,r=i.offsetHeight;this.panel.setPosition(n.x,n.y+r);t.left=n.x+"px";t.top=n.y+"px";t.width=Math.max(0,n.width)+"px";this.panel.setSize(n.width,n.height-r)}},render:function(n,t){var r,i;if(Ext.layout.BorderLayout.SplitRegion.superclass.render.call(this,n,t),r=this.position,this.splitEl=n.createChild({cls:"x-layout-split x-layout-split-"+r,html:"&#160;",id:this.panel.id+"-xsplit"}),this.collapseMode=="mini"){this.miniSplitEl=this.splitEl.createChild({cls:"x-layout-mini x-layout-mini-"+r,html:"&#160;"});this.miniSplitEl.addClassOnOver("x-layout-mini-over");this.miniSplitEl.on("click",this.onCollapseClick,this,{stopEvent:!0})}i=this.splitSettings[r];this.split=new Ext.SplitBar(this.splitEl.dom,t.el,i.orientation);this.split.tickSize=this.tickSize;this.split.placement=i.placement;this.split.getMaximumSize=this[i.maxFn].createDelegate(this);this.split.minSize=this.minSize||this[i.minProp];this.split.on("beforeapply",this.onSplitMove,this);if(this.split.useShim=this.useShim===!0,this.maxSize=this.maxSize||this[i.maxProp],t.hidden&&this.splitEl.hide(),this.useSplitTips&&(this.splitEl.dom.title=this.collapsible?this.collapsibleSplitTip:this.splitTip),this.collapsible)this.splitEl.on("dblclick",this.onCollapseClick,this)},getSize:function(){if(this.isCollapsed)return this.collapsedEl.getSize();var n=this.panel.getSize();return this.position=="north"||this.position=="south"?n.height+=this.splitEl.dom.offsetHeight:n.width+=this.splitEl.dom.offsetWidth,n},getHMaxSize:function(){var t=this.maxSize||1e4,n=this.layout.center;return Math.min(t,this.el.getWidth()+n.el.getWidth()-n.getMinWidth())},getVMaxSize:function(){var t=this.maxSize||1e4,n=this.layout.center;return Math.min(t,this.el.getHeight()+n.el.getHeight()-n.getMinHeight())},onSplitMove:function(n,t){var i=this.panel.getSize();return this.lastSplitSize=t,this.position=="north"||this.position=="south"?(this.panel.setSize(i.width,t),this.state.height=t):(this.panel.setSize(t,i.height),this.state.width=t),this.layout.layout(),this.panel.saveState(),!1},getSplitBar:function(){return this.split},destroy:function(){Ext.destroy(this.miniSplitEl,this.split,this.splitEl);Ext.layout.BorderLayout.SplitRegion.superclass.destroy.call(this)}});Ext.Container.LAYOUTS.border=Ext.layout.BorderLayout;Ext.layout.FormLayout=Ext.extend(Ext.layout.AnchorLayout,{labelSeparator:":",trackLabels:!0,type:"form",onRemove:function(n){Ext.layout.FormLayout.superclass.onRemove.call(this,n);this.trackLabels&&(n.un("show",this.onFieldShow,this),n.un("hide",this.onFieldHide,this));var t=n.getPositionEl(),i=n.getItemCt&&n.getItemCt();n.rendered&&i&&(t&&t.dom&&t.insertAfter(i),Ext.destroy(i),Ext.destroyMembers(n,"label","itemCt"),n.customItemCt&&Ext.destroyMembers(n,"getItemCt","customItemCt"))},setContainer:function(n){if(Ext.layout.FormLayout.superclass.setContainer.call(this,n),n.labelAlign=n.labelAlign||this.labelAlign,n.labelAlign&&n.addClass("x-form-label-"+n.labelAlign),n.hideLabels||this.hideLabels)Ext.apply(this,{labelStyle:"display:none",elementStyle:"padding-left:0;",labelAdjust:0});else{if(this.labelSeparator=Ext.isDefined(n.labelSeparator)?n.labelSeparator:this.labelSeparator,n.labelWidth=n.labelWidth||this.labelWidth||100,Ext.isNumber(n.labelWidth)){var t=n.labelPad||this.labelPad;t=Ext.isNumber(t)?t:5;Ext.apply(this,{labelAdjust:n.labelWidth+t,labelStyle:"width:"+n.labelWidth+"px;",elementStyle:"padding-left:"+(n.labelWidth+t)+"px"})}n.labelAlign=="top"&&Ext.apply(this,{labelStyle:"width:auto;",labelAdjust:0,elementStyle:"padding-left:0;"})}},isHide:function(n){return n.hideLabel||this.container.hideLabels},onFieldShow:function(n){n.getItemCt().removeClass("x-hide-"+n.hideMode);n.isComposite&&n.doLayout()},onFieldHide:function(n){n.getItemCt().addClass("x-hide-"+n.hideMode)},getLabelStyle:function(n){for(var i="",r=[this.labelStyle,n],t=0,u=r.length;t<u;++t)r[t]&&(i+=r[t],i.substr(-1,1)!=";"&&(i+=";"));return i},renderItem:function(n,t,i){if(n&&(n.isFormField||n.fieldLabel)&&n.inputType!="hidden"){var r=this.getTemplateArgs(n);if(Ext.isNumber(t)&&(t=i.dom.childNodes[t]||null),n.itemCt=t?this.fieldTpl.insertBefore(t,r,!0):this.fieldTpl.append(i,r,!0),n.getItemCt||Ext.apply(n,{getItemCt:function(){return n.itemCt},customItemCt:!0}),n.label=n.getItemCt().child("label.x-form-item-label"),n.rendered?this.isValidParent(n,i)||Ext.fly("x-form-el-"+n.id).appendChild(n.getPositionEl()):n.render("x-form-el-"+n.id),this.trackLabels){if(n.hidden)this.onFieldHide(n);n.on({scope:this,show:this.onFieldShow,hide:this.onFieldHide})}this.configureItem(n)}else Ext.layout.FormLayout.superclass.renderItem.apply(this,arguments)},getTemplateArgs:function(n){var i=!n.fieldLabel||n.hideLabel,t=(n.itemCls||this.container.itemCls||"")+(n.hideLabel?" x-hide-label":"");return Ext.isIE9&&Ext.isIEQuirks&&n instanceof Ext.form.TextField&&(t+=" x-input-wrapper"),{id:n.id,label:n.fieldLabel,itemCls:t,clearCls:n.clearCls||"x-form-clear-left",labelStyle:this.getLabelStyle(n.labelStyle),elementStyle:this.elementStyle||"",labelSeparator:i?"":Ext.isDefined(n.labelSeparator)?n.labelSeparator:this.labelSeparator}},adjustWidthAnchor:function(n,t){if(t.label&&!this.isHide(t)&&this.container.labelAlign!="top"){var i=Ext.isIE6||Ext.isIEQuirks;return n-this.labelAdjust+(i?-3:0)}return n},adjustHeightAnchor:function(n,t){return t.label&&!this.isHide(t)&&this.container.labelAlign=="top"?n-t.label.getHeight():n},isValidParent:function(n,t){return t&&this.container.getEl().contains(n.getPositionEl())}});Ext.Container.LAYOUTS.form=Ext.layout.FormLayout;Ext.layout.AccordionLayout=Ext.extend(Ext.layout.FitLayout,{fill:!0,autoWidth:!0,titleCollapse:!0,hideCollapseTool:!1,collapseFirst:!1,animate:!1,sequence:!1,activeOnTop:!1,type:"accordion",renderItem:function(n){this.animate===!1&&(n.animCollapse=!1);n.collapsible=!0;this.autoWidth&&(n.autoWidth=!0);this.titleCollapse&&(n.titleCollapse=!0);this.hideCollapseTool&&(n.hideCollapseTool=!0);this.collapseFirst!==undefined&&(n.collapseFirst=this.collapseFirst);this.activeItem||n.collapsed?this.activeItem&&this.activeItem!=n&&(n.collapsed=!0):this.setActiveItem(n,!0);Ext.layout.AccordionLayout.superclass.renderItem.apply(this,arguments);n.header.addClass("x-accordion-hd");n.on("beforeexpand",this.beforeExpand,this)},onRemove:function(n){Ext.layout.AccordionLayout.superclass.onRemove.call(this,n);n.rendered&&n.header.removeClass("x-accordion-hd");n.un("beforeexpand",this.beforeExpand,this)},beforeExpand:function(n,t){var i=this.activeItem;if(i)if(this.sequence){if(delete this.activeItem,!i.collapsed)return i.collapse({callback:function(){n.expand(t||!0)},scope:this}),!1}else i.collapse(this.animate);this.setActive(n);this.activeOnTop&&n.el.dom.parentNode.insertBefore(n.el.dom,n.el.dom.parentNode.firstChild);this.layout()},setItemSize:function(n,t){if(this.fill&&n){for(var u=0,f=this.getRenderedItems(this.container),e=f.length,r,i=0;i<e;i++)(r=f[i])==n||r.hidden||(u+=r.header.getHeight());t.height-=u;n.setSize(t)}},setActiveItem:function(n){this.setActive(n,!0)},setActive:function(n,t){var i=this.activeItem;n=this.container.getComponent(n);i!=n&&(n.rendered&&n.collapsed&&t?n.expand():(i&&i.fireEvent("deactivate",i),this.activeItem=n,n.fireEvent("activate",n)))}});Ext.Container.LAYOUTS.accordion=Ext.layout.AccordionLayout;Ext.layout.Accordion=Ext.layout.AccordionLayout;Ext.layout.TableLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!1,type:"table",targetCls:"x-table-layout-ct",tableAttrs:null,setContainer:function(n){Ext.layout.TableLayout.superclass.setContainer.call(this,n);this.currentRow=0;this.currentColumn=0;this.cells=[]},onLayout:function(n,t){var i=n.items.items,r=i.length;this.table||(t.addClass("x-table-layout-ct"),this.table=t.createChild(Ext.apply({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,!0));this.renderAll(n,t)},getRow:function(n){var t=this.table.tBodies[0].childNodes[n];return t||(t=document.createElement("tr"),this.table.tBodies[0].appendChild(t)),t},getNextCell:function(n){for(var e=this.getNextNonSpan(this.currentColumn,this.currentRow),o=this.currentColumn=e[0],u=this.currentRow=e[1],r,t,f,i=u;i<u+(n.rowspan||1);i++)for(this.cells[i]||(this.cells[i]=[]),r=o;r<o+(n.colspan||1);r++)this.cells[i][r]=!0;return t=document.createElement("td"),n.cellId&&(t.id=n.cellId),f="x-table-layout-cell",n.cellCls&&(f+=" "+n.cellCls),t.className=f,n.colspan&&(t.colSpan=n.colspan),n.rowspan&&(t.rowSpan=n.rowspan),this.getRow(u).appendChild(t),t},getNextNonSpan:function(n,t){for(var i=this.columns;i&&n>=i||this.cells[t]&&this.cells[t][n];)i&&n>=i?(t++,n=0):n++;return[n,t]},renderItem:function(n,t,i){if(this.table||(this.table=i.createChild(Ext.apply({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,!0)),n&&!n.rendered)n.render(this.getNextCell(n)),this.configureItem(n);else if(n&&!this.isValidParent(n,i)){var r=this.getNextCell(n);r.insertBefore(n.getPositionEl().dom,null);n.container=Ext.get(r);this.configureItem(n)}},isValidParent:function(n,t){return n.getPositionEl().up("table",5).dom.parentNode===(t.dom||t)},destroy:function(){delete this.table;Ext.layout.TableLayout.superclass.destroy.call(this)}});Ext.Container.LAYOUTS.table=Ext.layout.TableLayout;Ext.layout.AbsoluteLayout=Ext.extend(Ext.layout.AnchorLayout,{extraCls:"x-abs-layout-item",type:"absolute",onLayout:function(n,t){t.position();this.paddingLeft=t.getPadding("l");this.paddingTop=t.getPadding("t");Ext.layout.AbsoluteLayout.superclass.onLayout.call(this,n,t)},adjustWidthAnchor:function(n,t){return n?n-t.getPosition(!0)[0]+this.paddingLeft:n},adjustHeightAnchor:function(n,t){return n?n-t.getPosition(!0)[1]+this.paddingTop:n}});Ext.Container.LAYOUTS.absolute=Ext.layout.AbsoluteLayout;Ext.layout.BoxLayout=Ext.extend(Ext.layout.ContainerLayout,{defaultMargins:{left:0,top:0,right:0,bottom:0},padding:"0",pack:"start",monitorResize:!0,type:"box",scrollOffset:0,extraCls:"x-box-item",targetCls:"x-box-layout-ct",innerCls:"x-box-inner",constructor:function(n){var t,r,i;Ext.layout.BoxLayout.superclass.constructor.call(this,n);Ext.isString(this.defaultMargins)&&(this.defaultMargins=this.parseMargins(this.defaultMargins));t=this.overflowHandler;typeof t=="string"&&(t={type:t});r="none";t&&t.type!=undefined&&(r=t.type);i=Ext.layout.boxOverflow[r];i[this.type]&&(i=i[this.type]);this.overflowHandler=new i(this,t)},onLayout:function(n,t){Ext.layout.BoxLayout.superclass.onLayout.call(this,n,t);var i=this.getLayoutTargetSize(),f=this.getVisibleItems(n),r=this.calculateChildBoxes(f,i),e=r.boxes,o=r.meta;if(i.width>0){var s=this.overflowHandler,h=o.tooNarrow?"handleOverflow":"clearOverflow",u=s[h](r,i);u&&(u.targetSize&&(i=u.targetSize),u.recalculate&&(f=this.getVisibleItems(n),r=this.calculateChildBoxes(f,i),e=r.boxes))}this.layoutTargetLastSize=i;this.childBoxCache=r;this.updateInnerCtSize(i,r);this.updateChildBoxes(e);this.handleTargetOverflow(i,n,t)},updateChildBoxes:function(n){for(var t,r,i=0,u=n.length;i<u;i++)(t=n[i],r=t.component,t.dirtySize&&r.setSize(t.width,t.height),isNaN(t.left)||isNaN(t.top))||r.setPosition(t.left,t.top)},updateInnerCtSize:function(n,t){var u=this.align,f=this.padding,e=n.width,o=n.height,r,i;this.type=="hbox"?(i=e,r=t.meta.maxHeight+f.top+f.bottom,u=="stretch"?r=o:u=="middle"&&(r=Math.max(o,r))):(r=o,i=t.meta.maxWidth+f.left+f.right,u=="stretch"?i=e:u=="center"&&(i=Math.max(e,i)));this.innerCt.setSize(i||undefined,r||undefined)},handleTargetOverflow:function(n,t,i){var u=i.getStyle("overflow"),r;if(u&&u!="hidden"&&!this.adjustmentPass&&(r=this.getLayoutTargetSize(),r.width!=n.width||r.height!=n.height)){this.adjustmentPass=!0;this.onLayout(t,i)}delete this.adjustmentPass},isValidParent:function(n){return this.innerCt&&n.getPositionEl().dom.parentNode==this.innerCt.dom},getVisibleItems:function(n){for(var n=n||this.container,f=n.getLayoutTarget(),r=n.items.items,e=r.length,t,u=[],i=0;i<e;i++)(t=r[i]).rendered&&this.isValidParent(t,f)&&t.hidden!==!0&&t.collapsed!==!0&&t.shouldLayout!==!1&&u.push(t);return u},renderAll:function(n,t){this.innerCt||(this.innerCt=t.createChild({cls:this.innerCls}),this.padding=this.parseMargins(this.padding));Ext.layout.BoxLayout.superclass.renderAll.call(this,n,this.innerCt)},getLayoutTargetSize:function(){var t=this.container.getLayoutTarget(),n;return t&&(n=t.getViewSize(),Ext.isIE9m&&Ext.isStrict&&n.width==0&&(n=t.getStyleSize()),n.width-=t.getPadding("lr"),n.height-=t.getPadding("tb")),n},renderItem:function(n){Ext.isString(n.margins)?n.margins=this.parseMargins(n.margins):n.margins||(n.margins=this.defaultMargins);Ext.layout.BoxLayout.superclass.renderItem.apply(this,arguments)},destroy:function(){Ext.destroy(this.overflowHandler);Ext.layout.BoxLayout.superclass.destroy.apply(this,arguments)}});Ext.layout.boxOverflow.None=Ext.extend(Object,{constructor:function(n,t){this.layout=n;Ext.apply(this,t||{})},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn});Ext.layout.boxOverflow.none=Ext.layout.boxOverflow.None;Ext.layout.boxOverflow.Menu=Ext.extend(Ext.layout.boxOverflow.None,{afterCls:"x-strip-right",noItemsMenuText:'<div class="x-toolbar-no-items">(None)<\/div>',constructor:function(){Ext.layout.boxOverflow.Menu.superclass.constructor.apply(this,arguments);this.menuItems=[]},createInnerElements:function(){this.afterCt||(this.afterCt=this.layout.innerCt.insertSibling({cls:this.afterCls},"before"))},clearOverflow:function(n,t){var f=t.width+(this.afterCt?this.afterCt.getWidth():0),r=this.menuItems,i,u;for(this.hideTrigger(),i=0,u=r.length;i<u;i++)r.pop().component.show();return{targetSize:{height:t.height,width:f}}},showTrigger:function(){this.createMenu();this.menuTrigger.show()},hideTrigger:function(){this.menuTrigger!=undefined&&this.menuTrigger.hide()},beforeMenuShow:function(n){var u=this.menuItems,e=u.length,t,i,f=function(n,t){return n.isXType("buttongroup")&&!(t instanceof Ext.Toolbar.Separator)},r;for(this.clearMenu(),n.removeAll(),r=0;r<e;r++)t=u[r].component,i&&(f(t,i)||f(i,t))&&n.add("-"),this.addComponentToMenu(n,t),i=t;n.items.length<1&&n.add(this.noItemsMenuText)},createMenuConfig:function(n,t){var i=Ext.apply({},n.initialConfig),r=n.toggleGroup;return Ext.copyTo(i,n,["iconCls","icon","itemId","disabled","handler","scope","menu"]),Ext.apply(i,{text:n.overflowText||n.text,hideOnClick:t}),(r||n.enableToggle)&&Ext.apply(i,{group:r,checked:n.pressed,listeners:{checkchange:function(t,i){n.toggle(i)}}}),delete i.ownerCt,delete i.xtype,delete i.id,i},addComponentToMenu:function(n,t){t instanceof Ext.Toolbar.Separator?n.add("-"):Ext.isFunction(t.isXType)&&(t.isXType("splitbutton")?n.add(this.createMenuConfig(t,!0)):t.isXType("button")?n.add(this.createMenuConfig(t,!t.menu)):t.isXType("buttongroup")&&t.items.each(function(t){this.addComponentToMenu(n,t)},this))},clearMenu:function(){var n=this.moreMenu;n&&n.items&&n.items.each(function(n){delete n.menu})},createMenu:function(){this.menuTrigger||(this.createInnerElements(),this.menu=new Ext.menu.Menu({ownerCt:this.layout.container,listeners:{scope:this,beforeshow:this.beforeMenuShow}}),this.menuTrigger=new Ext.Button({iconCls:"x-toolbar-more-icon",cls:"x-toolbar-more",menu:this.menu,renderTo:this.afterCt}))},destroy:function(){Ext.destroy(this.menu,this.menuTrigger)}});Ext.layout.boxOverflow.menu=Ext.layout.boxOverflow.Menu;Ext.layout.boxOverflow.HorizontalMenu=Ext.extend(Ext.layout.boxOverflow.Menu,{constructor:function(){Ext.layout.boxOverflow.HorizontalMenu.superclass.constructor.apply(this,arguments);var t=this,n=t.layout,i=n.calculateChildBoxes;n.calculateChildBoxes=function(r,u){for(var o=i.apply(n,arguments),e=o.meta,s=t.menuItems,h=0,f=0,c=s.length;f<c;f++)h+=s[f].width;return e.minimumWidth+=h,e.tooNarrow=e.minimumWidth>u.width,o}},handleOverflow:function(n,t){var s,h,i,f,u,c,y;this.showTrigger();var e=t.width-this.afterCt.getWidth(),r=n.boxes,l=0,o=!1;for(i=0,f=r.length;i<f;i++)l+=r[i].width;for(s=e-l,h=0,i=0,f=this.menuItems.length;i<f;i++){var a=this.menuItems[i],p=a.component,v=a.width;if(v<s)p.show(),s-=v,h++,o=!0;else break}if(o)this.menuItems=this.menuItems.slice(h);else for(u=r.length-1;u>=0;u--)if(c=r[u].component,y=r[u].left+r[u].width,y>=e)this.menuItems.unshift({component:c,width:r[u].width}),c.hide();else break;return this.menuItems.length==0&&this.hideTrigger(),{targetSize:{height:t.height,width:e},recalculate:o}}});Ext.layout.boxOverflow.menu.hbox=Ext.layout.boxOverflow.HorizontalMenu;Ext.layout.boxOverflow.Scroller=Ext.extend(Ext.layout.boxOverflow.None,{animateScroll:!0,scrollIncrement:100,wheelIncrement:3,scrollRepeatInterval:400,scrollDuration:.4,beforeCls:"x-strip-left",afterCls:"x-strip-right",scrollerCls:"x-strip-scroller",beforeScrollerCls:"x-strip-scroller-left",afterScrollerCls:"x-strip-scroller-right",createWheelListener:function(){this.layout.innerCt.on({scope:this,mousewheel:function(n){n.stopEvent();this.scrollBy(n.getWheelDelta()*this.wheelIncrement*-1,!1)}})},handleOverflow:function(){this.createInnerElements();this.showScrollers()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){this.createScrollers();this.beforeScroller.show();this.afterScroller.show();this.updateScrollButtons()},hideScrollers:function(){this.beforeScroller!=undefined&&(this.beforeScroller.hide(),this.afterScroller.hide())},createScrollers:function(){if(!this.beforeScroller&&!this.afterScroller){var n=this.beforeCt.createChild({cls:String.format("{0} {1} ",this.scrollerCls,this.beforeScrollerCls)}),t=this.afterCt.createChild({cls:String.format("{0} {1}",this.scrollerCls,this.afterScrollerCls)});n.addClassOnOver(this.beforeScrollerCls+"-hover");t.addClassOnOver(this.afterScrollerCls+"-hover");n.setVisibilityMode(Ext.Element.DISPLAY);t.setVisibilityMode(Ext.Element.DISPLAY);this.beforeRepeater=new Ext.util.ClickRepeater(n,{interval:this.scrollRepeatInterval,handler:this.scrollLeft,scope:this});this.afterRepeater=new Ext.util.ClickRepeater(t,{interval:this.scrollRepeatInterval,handler:this.scrollRight,scope:this});this.beforeScroller=n;this.afterScroller=t}},destroy:function(){Ext.destroy(this.beforeScroller,this.afterScroller,this.beforeRepeater,this.afterRepeater,this.beforeCt,this.afterCt)},scrollBy:function(n,t){this.scrollTo(this.getScrollPosition()+n,t)},getItem:function(n){return Ext.isString(n)?n=Ext.getCmp(n):Ext.isNumber(n)&&(n=this.items[n]),n},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){if(this.beforeScroller!=undefined&&this.afterScroller!=undefined){var n=this.atExtremeBefore()?"addClass":"removeClass",t=this.atExtremeAfter()?"addClass":"removeClass",i=this.beforeScrollerCls+"-disabled",r=this.afterScrollerCls+"-disabled";this.beforeScroller[n](i);this.afterScroller[t](r);this.scrolling=!1}},atExtremeBefore:function(){return this.getScrollPosition()===0},scrollLeft:function(n){this.scrollBy(-this.scrollIncrement,n)},scrollRight:function(n){this.scrollBy(this.scrollIncrement,n)},scrollToItem:function(n,t){var i,r,u;n=this.getItem(n);n!=undefined&&(i=this.getItemVisibility(n),i.fullyVisible||(r=n.getBox(!0,!0),u=r.x,i.hiddenRight&&(u-=this.layout.innerCt.getWidth()-r.width),this.scrollTo(u,t)))},getItemVisibility:function(n){var t=this.getItem(n).getBox(!0,!0),r=t.x,u=t.x+t.width,i=this.getScrollPosition(),f=this.layout.innerCt.getWidth()+i;return{hiddenLeft:r<i,hiddenRight:u>f,fullyVisible:r>i&&u<f}}});Ext.layout.boxOverflow.scroller=Ext.layout.boxOverflow.Scroller;Ext.layout.boxOverflow.VerticalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{scrollIncrement:75,wheelIncrement:2,handleOverflow:function(n,t){return Ext.layout.boxOverflow.VerticalScroller.superclass.handleOverflow.apply(this,arguments),{targetSize:{height:t.height-(this.beforeCt.getHeight()+this.afterCt.getHeight()),width:t.width}}},createInnerElements:function(){var n=this.layout.innerCt;this.beforeCt||(this.beforeCt=n.insertSibling({cls:this.beforeCls},"before"),this.afterCt=n.insertSibling({cls:this.afterCls},"after"),this.createWheelListener())},scrollTo:function(n,t){var r=this.getScrollPosition(),i=n.constrain(0,this.getMaxScrollBottom());i==r||this.scrolling||(t==undefined&&(t=this.animateScroll),this.layout.innerCt.scrollTo("top",i,t?this.getScrollAnim():!1),t?this.scrolling=!0:(this.scrolling=!1,this.updateScrollButtons()))},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollTop,10)||0},getMaxScrollBottom:function(){return this.layout.innerCt.dom.scrollHeight-this.layout.innerCt.getHeight()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollBottom()}});Ext.layout.boxOverflow.scroller.vbox=Ext.layout.boxOverflow.VerticalScroller;Ext.layout.boxOverflow.HorizontalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{handleOverflow:function(n,t){return Ext.layout.boxOverflow.HorizontalScroller.superclass.handleOverflow.apply(this,arguments),{targetSize:{height:t.height,width:t.width-(this.beforeCt.getWidth()+this.afterCt.getWidth())}}},createInnerElements:function(){var n=this.layout.innerCt;this.beforeCt||(this.afterCt=n.insertSibling({cls:this.afterCls},"before"),this.beforeCt=n.insertSibling({cls:this.beforeCls},"before"),this.createWheelListener())},scrollTo:function(n,t){var r=this.getScrollPosition(),i=n.constrain(0,this.getMaxScrollRight());i==r||this.scrolling||(t==undefined&&(t=this.animateScroll),this.layout.innerCt.scrollTo("left",i,t?this.getScrollAnim():!1),t?this.scrolling=!0:(this.scrolling=!1,this.updateScrollButtons()))},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollLeft,10)||0},getMaxScrollRight:function(){return this.layout.innerCt.dom.scrollWidth-this.layout.innerCt.getWidth()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollRight()}});Ext.layout.boxOverflow.scroller.hbox=Ext.layout.boxOverflow.HorizontalScroller;Ext.layout.HBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:"top",type:"hbox",calculateChildBoxes:function(n,t){for(var y=n.length,k=this.padding,rt=k.top,h=k.left,dt=rt+k.bottom,gt=h+k.right,d=t.width-this.scrollOffset,ni=t.height,yt=Math.max(0,ni-dt),ti=this.pack=="start",ii=this.pack=="center",ri=this.pack=="end",ut=0,g=0,pt=0,nt=0,ft=0,e=[],i,o,c,et,u,ot,f,st,tt,l,it,p,s,w,v,a,b,lt,at,vt,r=0;r<y;r++)i=n[r],c=i.height,o=i.width,ot=!i.hasLayout&&typeof i.doLayout=="function",typeof o!="number"&&(i.flex&&!o?pt+=i.flex:(!o&&ot&&i.doLayout(),et=i.getSize(),o=et.width,c=et.height)),u=i.margins,tt=u.left+u.right,ut+=tt+(o||0),nt+=tt+(i.flex?i.minWidth||0:o),ft+=tt+(i.minWidth||o||0),typeof c!="number"&&(ot&&i.doLayout(),c=i.getHeight()),g=Math.max(g,c+u.top+u.bottom),e.push({component:i,height:c||undefined,width:o||undefined});var ht=nt-d,wt=ft>d,ct=Math.max(0,d-ut-gt);if(wt)for(r=0;r<y;r++)e[r].width=n[r].minWidth||n[r].width||e[r].width;else if(ht>0){for(p=[],s=0,a=y;s<a;s++)w=n[s],v=w.minWidth||0,w.flex?e[s].width=v:p.push({minWidth:v,available:e[s].width-v,index:s});for(p.sort(function(n,t){return n.available>t.available?1:-1}),r=0,a=p.length;r<a;r++)if(b=p[r].index,b!=undefined){var w=n[b],ui=e[b],bt=ui.width,v=w.minWidth,kt=Math.max(v,bt-Math.ceil(ht/(a-r))),fi=bt-kt;e[b].width=kt;ht-=fi}}else for(lt=ct,at=pt,r=0;r<y;r++)i=n[r],f=e[r],u=i.margins,l=u.top+u.bottom,ti&&i.flex&&!i.width&&(st=Math.ceil(i.flex/at*lt),lt-=st,at-=i.flex,f.width=st,f.dirtySize=!0);for(ii?h+=ct/2:ri&&(h+=ct),r=0;r<y;r++){i=n[r];f=e[r];u=i.margins;h+=u.left;l=u.top+u.bottom;f.left=h;f.top=rt+u.top;switch(this.align){case"stretch":it=yt-l;f.height=it.constrain(i.minHeight||0,i.maxHeight||1e6);f.dirtySize=!0;break;case"stretchmax":it=g-l;f.height=it.constrain(i.minHeight||0,i.maxHeight||1e6);f.dirtySize=!0;break;case"middle":vt=yt-f.height-l;vt>0&&(f.top=rt+l+vt/2)}h+=f.width+u.right}return{boxes:e,meta:{maxHeight:g,nonFlexWidth:ut,desiredWidth:nt,minimumWidth:ft,shortfall:nt-d,tooNarrow:wt}}}});Ext.Container.LAYOUTS.hbox=Ext.layout.HBoxLayout;Ext.layout.VBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:"left",type:"vbox",calculateChildBoxes:function(n,t){for(var y=n.length,k=this.padding,c=k.top,rt=k.left,dt=c+k.bottom,gt=rt+k.right,ni=t.width-this.scrollOffset,d=t.height,yt=Math.max(0,ni-gt),ti=this.pack=="start",ii=this.pack=="center",ri=this.pack=="end",ut=0,g=0,pt=0,nt=0,ft=0,e=[],i,l,o,et,u,ot,f,st,a,tt,it,p,h,w,v,s,b,lt,at,vt,r=0;r<y;r++)i=n[r],o=i.height,l=i.width,ot=!i.hasLayout&&typeof i.doLayout=="function",typeof o!="number"&&(i.flex&&!o?pt+=i.flex:(!o&&ot&&i.doLayout(),et=i.getSize(),l=et.width,o=et.height)),u=i.margins,tt=u.top+u.bottom,ut+=tt+(o||0),nt+=tt+(i.flex?i.minHeight||0:o),ft+=tt+(i.minHeight||o||0),typeof l!="number"&&(ot&&i.doLayout(),l=i.getWidth()),g=Math.max(g,l+u.left+u.right),e.push({component:i,height:o||undefined,width:l||undefined});var ht=nt-d,wt=ft>d,ct=Math.max(0,d-ut-dt);if(wt)for(r=0,s=y;r<s;r++)e[r].height=n[r].minHeight||n[r].height||e[r].height;else if(ht>0){for(p=[],h=0,s=y;h<s;h++)w=n[h],v=w.minHeight||0,w.flex?e[h].height=v:p.push({minHeight:v,available:e[h].height-v,index:h});for(p.sort(function(n,t){return n.available>t.available?1:-1}),r=0,s=p.length;r<s;r++)if(b=p[r].index,b!=undefined){var w=n[b],ui=e[b],bt=ui.height,v=w.minHeight,kt=Math.max(v,bt-Math.ceil(ht/(s-r))),fi=bt-kt;e[b].height=kt;ht-=fi}}else for(lt=ct,at=pt,r=0;r<y;r++)i=n[r],f=e[r],u=i.margins,a=u.left+u.right,ti&&i.flex&&!i.height&&(st=Math.ceil(i.flex/at*lt),lt-=st,at-=i.flex,f.height=st,f.dirtySize=!0);for(ii?c+=ct/2:ri&&(c+=ct),r=0;r<y;r++){i=n[r];f=e[r];u=i.margins;c+=u.top;a=u.left+u.right;f.left=rt+u.left;f.top=c;switch(this.align){case"stretch":it=yt-a;f.width=it.constrain(i.minWidth||0,i.maxWidth||1e6);f.dirtySize=!0;break;case"stretchmax":it=g-a;f.width=it.constrain(i.minWidth||0,i.maxWidth||1e6);f.dirtySize=!0;break;case"center":vt=yt-f.width-a;vt>0&&(f.left=rt+a+vt/2)}c+=f.height+u.bottom}return{boxes:e,meta:{maxWidth:g,nonFlexHeight:ut,desiredHeight:nt,minimumHeight:ft,shortfall:nt-d,tooNarrow:wt}}}});Ext.Container.LAYOUTS.vbox=Ext.layout.VBoxLayout;Ext.layout.ToolbarLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"toolbar",triggerWidth:18,noItemsMenuText:'<div class="x-toolbar-no-items">(None)<\/div>',lastOverflow:!1,tableHTML:'<table cellspacing="0" class="x-toolbar-ct"><tbody><tr><td class="x-toolbar-left" align="{0}"><table cellspacing="0"><tbody><tr class="x-toolbar-left-row"><\/tr><\/tbody><\/table><\/td><td class="x-toolbar-right" align="right"><table cellspacing="0" class="x-toolbar-right-ct"><tbody><tr><td><table cellspacing="0"><tbody><tr class="x-toolbar-right-row"><\/tr><\/tbody><\/table><\/td><td><table cellspacing="0"><tbody><tr class="x-toolbar-extras-row"><\/tr><\/tbody><\/table><\/td><\/tr><\/tbody><\/table><\/td><\/tr><\/tbody><\/table>',onLayout:function(n,t){var o,f,h,i,e;this.leftTr||(o=n.buttonAlign=="center"?"center":"left",t.addClass("x-toolbar-layout-ct"),t.insertHtml("beforeEnd",String.format(this.tableHTML,o)),this.leftTr=t.child("tr.x-toolbar-left-row",!0),this.rightTr=t.child("tr.x-toolbar-right-row",!0),this.extrasTr=t.child("tr.x-toolbar-extras-row",!0),this.hiddenItem==undefined&&(this.hiddenItems=[]));var u=n.buttonAlign=="right"?this.rightTr:this.leftTr,s=n.items.items,r=0;for(f=0,h=s.length;f<h;f++,r++)i=s[f],i.isFill?(u=this.rightTr,r=-1):i.rendered?i.xtbHidden||this.isValidParent(i,u.childNodes[r])||(e=this.insertCell(i,u,r),e.appendChild(i.getPositionEl().dom),i.container=Ext.get(e)):(i.render(this.insertCell(i,u,r)),this.configureItem(i));this.cleanup(this.leftTr);this.cleanup(this.rightTr);this.cleanup(this.extrasTr);this.fitToSize(t)},cleanup:function(n){for(var r=n.childNodes,i,t=r.length-1;t>=0&&(i=r[t]);t--)i.firstChild||n.removeChild(i)},insertCell:function(n,t,i){var r=document.createElement("td");return r.className="x-toolbar-cell",t.insertBefore(r,t.childNodes[i]||null),r},hideItem:function(n){this.hiddenItems.push(n);n.xtbHidden=!0;n.xtbWidth=n.getPositionEl().dom.parentNode.offsetWidth;n.hide()},unhideItem:function(n){n.show();n.xtbHidden=!1;this.hiddenItems.remove(n)},getItemWidth:function(n){return n.hidden?n.xtbWidth||0:n.getPositionEl().dom.parentNode.offsetWidth},fitToSize:function(n){var r;if(this.container.enableOverflow!==!1){var i=n.dom.clientWidth,s=n.dom.firstChild.offsetWidth,h=i-this.triggerWidth,c=this.lastWidth||0,f=this.hiddenItems,u=f.length!=0,l=i>=c;if(this.lastWidth=i,s>i||u&&l){var e=this.container.items.items,a=e.length,o=0,t;for(r=0;r<a;r++)t=e[r],t.isFill||(o+=this.getItemWidth(t),o>h?t.hidden||t.xtbHidden||this.hideItem(t):t.xtbHidden&&this.unhideItem(t))}u=f.length!=0;u?(this.initMore(),this.lastOverflow||(this.container.fireEvent("overflowchange",this.container,!0),this.lastOverflow=!0)):this.more&&(this.clearMenu(),this.more.destroy(),delete this.more,this.lastOverflow&&(this.container.fireEvent("overflowchange",this.container,!1),this.lastOverflow=!1))}},createMenuConfig:function(n,t){var i=Ext.apply({},n.initialConfig),r=n.toggleGroup;return Ext.copyTo(i,n,["iconCls","icon","itemId","disabled","handler","scope","menu"]),Ext.apply(i,{text:n.overflowText||n.text,hideOnClick:t}),(r||n.enableToggle)&&Ext.apply(i,{group:r,checked:n.pressed,listeners:{checkchange:function(t,i){n.toggle(i)}}}),delete i.ownerCt,delete i.xtype,delete i.id,i},addComponentToMenu:function(n,t){t instanceof Ext.Toolbar.Separator?n.add("-"):Ext.isFunction(t.isXType)&&(t.isXType("splitbutton")?n.add(this.createMenuConfig(t,!0)):t.isXType("button")?n.add(this.createMenuConfig(t,!t.menu)):t.isXType("buttongroup")&&t.items.each(function(t){this.addComponentToMenu(n,t)},this))},clearMenu:function(){var n=this.moreMenu;n&&n.items&&n.items.each(function(n){delete n.menu})},beforeMoreShow:function(n){var u=this.container.items.items,e=u.length,t,i,f=function(n,t){return n.isXType("buttongroup")&&!(t instanceof Ext.Toolbar.Separator)},r;for(this.clearMenu(),n.removeAll(),r=0;r<e;r++)t=u[r],t.xtbHidden&&(i&&(f(t,i)||f(i,t))&&n.add("-"),this.addComponentToMenu(n,t),i=t);n.items.length<1&&n.add(this.noItemsMenuText)},initMore:function(){if(!this.more){this.moreMenu=new Ext.menu.Menu({ownerCt:this.container,listeners:{beforeshow:this.beforeMoreShow,scope:this}});this.more=new Ext.Button({iconCls:"x-toolbar-more-icon",cls:"x-toolbar-more",menu:this.moreMenu,ownerCt:this.container});var n=this.insertCell(this.more,this.extrasTr,100);this.more.render(n)}},destroy:function(){Ext.destroy(this.more,this.moreMenu);delete this.leftTr;delete this.rightTr;delete this.extrasTr;Ext.layout.ToolbarLayout.superclass.destroy.call(this)}});Ext.Container.LAYOUTS.toolbar=Ext.layout.ToolbarLayout;Ext.layout.MenuLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"menu",setContainer:function(n){this.monitorResize=!n.floating;n.on("autosize",this.doAutoSize,this);Ext.layout.MenuLayout.superclass.setContainer.call(this,n)},renderItem:function(n,t,i){if(this.itemTpl||(this.itemTpl=Ext.layout.MenuLayout.prototype.itemTpl=new Ext.XTemplate('<li id="{itemId}" class="{itemCls}">','<tpl if="needsIcon">','<img alt="{altText}" src="{icon}" class="{iconCls}"/>',"<\/tpl>","<\/li>")),n&&!n.rendered){Ext.isNumber(t)&&(t=i.dom.childNodes[t]);var r=this.getItemArgs(n);n.render(n.positionEl=t?this.itemTpl.insertBefore(t,r,!0):this.itemTpl.append(i,r,!0));n.positionEl.menuItemId=n.getItemId();!r.isMenuItem&&r.needsIcon&&n.positionEl.addClass("x-menu-list-item-indent");this.configureItem(n)}else n&&!this.isValidParent(n,i)&&(Ext.isNumber(t)&&(t=i.dom.childNodes[t]),i.dom.insertBefore(n.getActionEl().dom,t||null))},getItemArgs:function(n){var t=n instanceof Ext.menu.Item,i=!(t||n instanceof Ext.menu.Separator);return{isMenuItem:t,needsIcon:i&&(n.icon||n.iconCls),icon:n.icon||Ext.BLANK_IMAGE_URL,iconCls:"x-menu-item-icon "+(n.iconCls||""),itemId:"x-menu-el-"+n.id,itemCls:"x-menu-list-item ",altText:n.altText||""}},isValidParent:function(n,t){return n.el.up("li.x-menu-list-item",5).dom.parentNode===(t.dom||t)},onLayout:function(n,t){Ext.layout.MenuLayout.superclass.onLayout.call(this,n,t);this.doAutoSize()},doAutoSize:function(){var n=this.container,i=n.width,t,r;n.floating&&(i?n.setWidth(i):Ext.isIE9m&&(n.setWidth(Ext.isStrict&&(Ext.isIE7||Ext.isIE8||Ext.isIE9)?"auto":n.minWidth),t=n.getEl(),r=t.dom.offsetWidth,n.setWidth(n.getLayoutTarget().getWidth()+t.getFrameWidth("lr"))))}});Ext.Container.LAYOUTS.menu=Ext.layout.MenuLayout;Ext.Viewport=Ext.extend(Ext.Container,{initComponent:function(){Ext.Viewport.superclass.initComponent.call(this);document.getElementsByTagName("html")[0].className+=" x-viewport";this.el=Ext.getBody();this.el.setHeight=Ext.emptyFn;this.el.setWidth=Ext.emptyFn;this.el.setSize=Ext.emptyFn;this.el.dom.scroll="no";this.allowDomMove=!1;this.autoWidth=!0;this.autoHeight=!0;Ext.EventManager.onWindowResize(this.fireResize,this);this.renderTo=this.el},fireResize:function(n,t){this.fireEvent("resize",this,n,t,n,t)}});Ext.reg("viewport",Ext.Viewport);Ext.Panel=Ext.extend(Ext.Container,{baseCls:"x-panel",collapsedCls:"x-panel-collapsed",maskDisabled:!0,animCollapse:Ext.enableFx,headerAsText:!0,buttonAlign:"right",collapsed:!1,collapseFirst:!0,minButtonWidth:75,elements:"body",preventBodyReset:!1,padding:undefined,resizeEvent:"bodyresize",toolTarget:"header",collapseEl:"bwrap",slideAnchor:"t",disabledClass:"",deferHeight:!0,expandDefaults:{duration:.25},collapseDefaults:{duration:.25},initComponent:function(){if(Ext.Panel.superclass.initComponent.call(this),this.addEvents("bodyresize","titlechange","iconchange","collapse","expand","beforecollapse","beforeexpand","beforeclose","close","activate","deactivate"),this.unstyled&&(this.baseCls="x-plain"),this.toolbars=[],this.tbar&&(this.elements+=",tbar",this.topToolbar=this.createToolbar(this.tbar),this.tbar=null),this.bbar&&(this.elements+=",bbar",this.bottomToolbar=this.createToolbar(this.bbar),this.bbar=null),this.header===!0?(this.elements+=",header",this.header=null):(this.headerCfg||this.title&&this.header!==!1)&&(this.elements+=",header"),(this.footerCfg||this.footer===!0)&&(this.elements+=",footer",this.footer=null),this.buttons&&(this.fbar=this.buttons,this.buttons=null),this.fbar&&this.createFbar(this.fbar),this.autoLoad)this.on("render",this.doAutoLoad,this,{delay:10})},createFbar:function(n){var t=this.minButtonWidth;this.elements+=",footer";this.fbar=this.createToolbar(n,{buttonAlign:this.buttonAlign,toolbarCls:"x-panel-fbar",enableOverflow:!1,defaults:function(n){return{minWidth:n.minWidth||t}}});this.fbar.items.each(function(n){n.minWidth=n.minWidth||this.minButtonWidth},this);this.buttons=this.fbar.items.items},createToolbar:function(n,t){var i;return Ext.isArray(n)&&(n={items:n}),i=n.events?Ext.apply(n,t):this.createComponent(Ext.apply({},n,t),"toolbar"),this.toolbars.push(i),i},createElement:function(n,t){if(this[n]){t.appendChild(this[n].dom);return}if(n==="bwrap"||this.elements.indexOf(n)!=-1){if(this[n+"Cfg"])this[n]=Ext.fly(t).createChild(this[n+"Cfg"]);else{var i=document.createElement("div");i.className=this[n+"Cls"];this[n]=Ext.get(t.appendChild(i))}this[n+"CssClass"]&&this[n].addClass(this[n+"CssClass"]);this[n+"Style"]&&this[n].applyStyles(this[n+"Style"])}},onRender:function(n,t){var r,u,i,o,f,s,h,e;Ext.Panel.superclass.onRender.call(this,n,t);this.createClasses();r=this.el;u=r.dom;this.collapsible&&!this.hideCollapseTool&&(this.tools=this.tools?this.tools.slice(0):[],this.tools[this.collapseFirst?"unshift":"push"]({id:"toggle",handler:this.toggleCollapse,scope:this}));this.tools&&(o=this.tools,this.elements+=this.header!==!1?",header":"");this.tools={};r.addClass(this.baseCls);u.firstChild&&(this.header=r.down("."+this.headerCls),this.bwrap=r.down("."+this.bwrapCls),f=this.bwrap?this.bwrap:r,this.tbar=f.down("."+this.tbarCls),this.body=f.down("."+this.bodyCls),this.bbar=f.down("."+this.bbarCls),this.footer=f.down("."+this.footerCls),this.fromMarkup=!0);this.preventBodyReset===!0&&r.addClass("x-panel-reset");this.cls&&r.addClass(this.cls);this.buttons&&(this.elements+=",footer");this.frame?(r.insertHtml("afterBegin",String.format(Ext.Element.boxMarkup,this.baseCls)),this.createElement("header",u.firstChild.firstChild.firstChild),this.createElement("bwrap",u),i=this.bwrap.dom,s=u.childNodes[1],h=u.childNodes[2],i.appendChild(s),i.appendChild(h),e=i.firstChild.firstChild.firstChild,this.createElement("tbar",e),this.createElement("body",e),this.createElement("bbar",e),this.createElement("footer",i.lastChild.firstChild.firstChild),this.footer||(this.bwrap.dom.lastChild.className+=" x-panel-nofooter"),this.ft=Ext.get(this.bwrap.dom.lastChild),this.mc=Ext.get(e)):(this.createElement("header",u),this.createElement("bwrap",u),i=this.bwrap.dom,this.createElement("tbar",i),this.createElement("body",i),this.createElement("bbar",i),this.createElement("footer",i),this.header||(this.body.addClass(this.bodyCls+"-noheader"),this.tbar&&this.tbar.addClass(this.tbarCls+"-noheader")));Ext.isDefined(this.padding)&&this.body.setStyle("padding",this.body.addUnits(this.padding));this.border===!1&&(this.el.addClass(this.baseCls+"-noborder"),this.body.addClass(this.bodyCls+"-noborder"),this.header&&this.header.addClass(this.headerCls+"-noborder"),this.footer&&this.footer.addClass(this.footerCls+"-noborder"),this.tbar&&this.tbar.addClass(this.tbarCls+"-noborder"),this.bbar&&this.bbar.addClass(this.bbarCls+"-noborder"));this.bodyBorder===!1&&this.body.addClass(this.bodyCls+"-noborder");this.bwrap.enableDisplayMode("block");this.header&&(this.header.unselectable(),this.headerAsText&&(this.header.dom.innerHTML='<span class="'+this.headerTextCls+'">'+this.header.dom.innerHTML+"<\/span>",this.iconCls&&this.setIconClass(this.iconCls)));this.floating&&this.makeFloating(this.floating);this.collapsible&&this.titleCollapse&&this.header&&(this.mon(this.header,"click",this.toggleCollapse,this),this.header.setStyle("cursor","pointer"));o&&this.addTool.apply(this,o);this.fbar&&(this.footer.addClass("x-panel-btns"),this.fbar.ownerCt=this,this.fbar.render(this.footer),this.footer.createChild({cls:"x-clear"}));this.tbar&&this.topToolbar&&(this.topToolbar.ownerCt=this,this.topToolbar.render(this.tbar));this.bbar&&this.bottomToolbar&&(this.bottomToolbar.ownerCt=this,this.bottomToolbar.render(this.bbar))},setIconClass:function(n){var t=this.iconCls,i,r,u;this.iconCls=n;this.rendered&&this.header&&(this.frame?(this.header.addClass("x-panel-icon"),this.header.replaceClass(t,this.iconCls)):(i=this.header,r=i.child("img.x-panel-inline-icon"),r?Ext.fly(r).replaceClass(t,this.iconCls):(u=i.child("span."+this.headerTextCls),u&&Ext.DomHelper.insertBefore(u.dom,{tag:"img",alt:"",src:Ext.BLANK_IMAGE_URL,cls:"x-panel-inline-icon "+this.iconCls}))));this.fireEvent("iconchange",this,n,t)},makeFloating:function(n){this.floating=!0;this.el=new Ext.Layer(Ext.apply({},n,{shadow:Ext.isDefined(this.shadow)?this.shadow:"sides",shadowOffset:this.shadowOffset,constrain:!1,shim:this.shim===!1?!1:undefined}),this.el)},getTopToolbar:function(){return this.topToolbar},getBottomToolbar:function(){return this.bottomToolbar},getFooterToolbar:function(){return this.fbar},addButton:function(n,t,i){return this.fbar||this.createFbar([]),t&&(Ext.isString(n)&&(n={text:n}),n=Ext.apply({handler:t,scope:i},n)),this.fbar.add(n)},addTool:function(){var i,n,u,t;if(!this.rendered){this.tools||(this.tools=[]);Ext.each(arguments,function(n){this.tools.push(n)},this);return}if(this[this.toolTarget]){this.toolTemplate||(i=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;<\/div>'),i.disableFormats=!0,i.compile(),Ext.Panel.prototype.toolTemplate=i);for(var r=0,f=arguments,e=f.length;r<e;r++)n=f[r],this.tools[n.id]||(u="x-tool-"+n.id+"-over",t=this.toolTemplate.insertFirst(this[this.toolTarget],n,!0),this.tools[n.id]=t,t.enableDisplayMode("block"),this.mon(t,"click",this.createToolHandler(t,n,u,this)),n.on&&this.mon(t,n.on),n.hidden&&t.hide(),n.qtip&&(Ext.isObject(n.qtip)?Ext.QuickTips.register(Ext.apply({target:t.id},n.qtip)):t.dom.qtip=n.qtip),t.addClassOnOver(u))}},onLayout:function(n,t){Ext.Panel.superclass.onLayout.apply(this,arguments);this.hasLayout&&this.toolbars.length>0&&(Ext.each(this.toolbars,function(n){n.doLayout(undefined,t)}),this.syncHeight())},syncHeight:function(){var n=this.toolbarHeight,r=this.body,t=this.lastSize.height,i;if(!this.autoHeight&&Ext.isDefined(t)&&t!="auto"&&n!=this.getToolbarHeight()){n=Math.max(0,t-this.getFrameHeight());r.setHeight(n);i=r.getSize();this.toolbarHeight=this.getToolbarHeight();this.onBodyResize(i.width,i.height)}},onShow:function(){if(this.floating)return this.el.show();Ext.Panel.superclass.onShow.call(this)},onHide:function(){if(this.floating)return this.el.hide();Ext.Panel.superclass.onHide.call(this)},createToolHandler:function(n,t,i,r){return function(u){n.removeClass(i);t.stopEvent!==!1&&u.stopEvent();t.handler&&t.handler.call(t.scope||n,u,n,r,t)}},afterRender:function(){this.floating&&!this.hidden&&this.el.show();this.title&&this.setTitle(this.title);Ext.Panel.superclass.afterRender.call(this);this.collapsed&&(this.collapsed=!1,this.collapse(!1));this.initEvents()},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.KeyMap(this.el,this.keys)),this.keyMap},initEvents:function(){this.keys&&this.getKeyMap();this.draggable&&this.initDraggable();this.toolbars.length>0&&(Ext.each(this.toolbars,function(n){n.doLayout();n.on({scope:this,afterlayout:this.syncHeight,remove:this.syncHeight})},this),this.syncHeight())},initDraggable:function(){this.dd=new Ext.Panel.DD(this,Ext.isBoolean(this.draggable)?null:this.draggable)},beforeEffect:function(n){this.floating&&this.el.beforeAction();n!==!1&&this.el.addClass("x-panel-animated")},afterEffect:function(){this.syncShadow();this.el.removeClass("x-panel-animated")},createEffect:function(n,t,i){var r={scope:i,block:!0};return n===!0?(r.callback=t,r):(r.callback=n.callback?function(){t.call(i);Ext.callback(n.callback,n.scope)}:t,Ext.applyIf(r,n))},collapse:function(n){if(!this.collapsed&&!this.el.hasFxBlock()&&this.fireEvent("beforecollapse",this,n)!==!1){var t=n===!0||n!==!1&&this.animCollapse;this.beforeEffect(t);this.onCollapse(t,n);return this}},onCollapse:function(n,t){n?this[this.collapseEl].slideOut(this.slideAnchor,Ext.apply(this.createEffect(t||!0,this.afterCollapse,this),this.collapseDefaults)):(this[this.collapseEl].hide(this.hideMode),this.afterCollapse(!1))},afterCollapse:function(n){this.collapsed=!0;this.el.addClass(this.collapsedCls);n!==!1&&this[this.collapseEl].hide(this.hideMode);this.afterEffect(n);this.cascade(function(n){n.lastSize&&(n.lastSize={width:undefined,height:undefined})});this.fireEvent("collapse",this)},expand:function(n){if(this.collapsed&&!this.el.hasFxBlock()&&this.fireEvent("beforeexpand",this,n)!==!1){var t=n===!0||n!==!1&&this.animCollapse;this.el.removeClass(this.collapsedCls);this.beforeEffect(t);this.onExpand(t,n);return this}},onExpand:function(n,t){n?this[this.collapseEl].slideIn(this.slideAnchor,Ext.apply(this.createEffect(t||!0,this.afterExpand,this),this.expandDefaults)):(this[this.collapseEl].show(this.hideMode),this.afterExpand(!1))},afterExpand:function(n){this.collapsed=!1;n!==!1&&this[this.collapseEl].show(this.hideMode);this.afterEffect(n);this.deferLayout&&(delete this.deferLayout,this.doLayout(!0));this.fireEvent("expand",this)},toggleCollapse:function(n){return this[this.collapsed?"expand":"collapse"](n),this},onDisable:function(){this.rendered&&this.maskDisabled&&this.el.mask();Ext.Panel.superclass.onDisable.call(this)},onEnable:function(){this.rendered&&this.maskDisabled&&this.el.unmask();Ext.Panel.superclass.onEnable.call(this)},onResize:function(n,t,i,r){var u=n,f=t;if(Ext.isDefined(u)||Ext.isDefined(f)){if(this.collapsed){if(this.queuedBodySize={width:u,height:f},!this.queuedExpand&&this.allowQueuedExpand!==!1){this.queuedExpand=!0;this.on("expand",function(){delete this.queuedExpand;this.onResize(this.queuedBodySize.width,this.queuedBodySize.height)},this,{single:!0})}}else Ext.isNumber(u)?this.body.setWidth(u=this.adjustBodyWidth(u-this.getFrameWidth())):u=u=="auto"?this.body.setWidth("auto").dom.offsetWidth:this.body.dom.offsetWidth,this.tbar&&(this.tbar.setWidth(u),this.topToolbar&&this.topToolbar.setSize(u)),this.bbar&&(this.bbar.setWidth(u),this.bottomToolbar&&(this.bottomToolbar.setSize(u),Ext.isIE9m&&(this.bbar.setStyle("position","static"),this.bbar.setStyle("position","")))),this.footer&&(this.footer.setWidth(u),this.fbar&&this.fbar.setSize(Ext.isIE9m?u-this.footer.getFrameWidth("lr"):"auto")),Ext.isNumber(f)?(f=Math.max(0,f-this.getFrameHeight()),this.body.setHeight(f)):f=="auto"&&this.body.setHeight(f),this.disabled&&this.el._mask&&this.el._mask.setSize(this.el.dom.clientWidth,this.el.getHeight());this.onBodyResize(u,f)}this.syncShadow();Ext.Panel.superclass.onResize.call(this,n,t,i,r)},onBodyResize:function(n,t){this.fireEvent("bodyresize",this,n,t)},getToolbarHeight:function(){var n=0;return this.rendered&&Ext.each(this.toolbars,function(t){n+=t.getHeight()},this),n},adjustBodyHeight:function(n){return n},adjustBodyWidth:function(n){return n},onPosition:function(){this.syncShadow()},getFrameWidth:function(){var n=this.el.getFrameWidth("lr")+this.bwrap.getFrameWidth("lr"),t;return this.frame&&(t=this.bwrap.dom.firstChild,n+=Ext.fly(t).getFrameWidth("l")+Ext.fly(t.firstChild).getFrameWidth("r"),n+=this.mc.getFrameWidth("lr")),n},getFrameHeight:function(){var n=this.el.getFrameWidth("tb")+this.bwrap.getFrameWidth("tb");return n+=(this.tbar?this.tbar.getHeight():0)+(this.bbar?this.bbar.getHeight():0),n+(this.frame?this.el.dom.firstChild.offsetHeight+this.ft.dom.offsetHeight+this.mc.getFrameWidth("tb"):(this.header?this.header.getHeight():0)+(this.footer?this.footer.getHeight():0))},getInnerWidth:function(){return this.getSize().width-this.getFrameWidth()},getInnerHeight:function(){return this.body.getHeight()},syncShadow:function(){this.floating&&this.el.sync(!0)},getLayoutTarget:function(){return this.body},getContentTarget:function(){return this.body},setTitle:function(n,t){return this.title=n,this.header&&this.headerAsText&&this.header.child("span").update(n),t&&this.setIconClass(t),this.fireEvent("titlechange",this,n),this},getUpdater:function(){return this.body.getUpdater()},load:function(){var n=this.body.getUpdater();return n.update.apply(n,arguments),this},beforeDestroy:function(){if(Ext.Panel.superclass.beforeDestroy.call(this),this.header&&this.header.removeAllListeners(),this.tools)for(var n in this.tools)Ext.destroy(this.tools[n]);if(this.toolbars.length>0&&Ext.each(this.toolbars,function(n){n.un("afterlayout",this.syncHeight,this);n.un("remove",this.syncHeight,this)},this),Ext.isArray(this.buttons))while(this.buttons.length)Ext.destroy(this.buttons[0]);this.rendered&&(Ext.destroy(this.ft,this.header,this.footer,this.tbar,this.bbar,this.body,this.mc,this.bwrap,this.dd),this.fbar&&Ext.destroy(this.fbar,this.fbar.el));Ext.destroy(this.toolbars)},createClasses:function(){this.headerCls=this.baseCls+"-header";this.headerTextCls=this.baseCls+"-header-text";this.bwrapCls=this.baseCls+"-bwrap";this.tbarCls=this.baseCls+"-tbar";this.bodyCls=this.baseCls+"-body";this.bbarCls=this.baseCls+"-bbar";this.footerCls=this.baseCls+"-footer"},createGhost:function(n,t,i){var r=document.createElement("div"),u;return r.className="x-panel-ghost "+(n?n:""),this.header&&r.appendChild(this.el.dom.firstChild.cloneNode(!0)),Ext.fly(r.appendChild(document.createElement("ul"))).setHeight(this.bwrap.getHeight()),r.style.width=this.el.dom.offsetWidth+"px",i?Ext.getDom(i).appendChild(r):this.container.dom.appendChild(r),t!==!1&&this.el.useShim!==!1?(u=new Ext.Layer({shadow:!1,useDisplay:!0,constrain:!1},r),u.show(),u):new Ext.Element(r)},doAutoLoad:function(){var n=this.body.getUpdater();this.renderer&&n.setRenderer(this.renderer);n.update(Ext.isObject(this.autoLoad)?this.autoLoad:{url:this.autoLoad})},getTool:function(n){return this.tools[n]}});Ext.reg("panel",Ext.Panel);Ext.Editor=function(n,t){n.field?(this.field=Ext.create(n.field,"textfield"),t=Ext.apply({},n),delete t.field):this.field=n;Ext.Editor.superclass.constructor.call(this,t)};Ext.extend(Ext.Editor,Ext.Component,{allowBlur:!0,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:!1,swallowKeys:!0,completeOnEnter:!0,cancelOnEsc:!0,updateEl:!1,initComponent:function(){Ext.Editor.superclass.initComponent.call(this);this.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onRender:function(n){this.el=new Ext.Layer({shadow:this.shadow,cls:"x-editor",parentEl:n,shim:this.shim,shadowOffset:this.shadowOffset||4,id:this.id,constrain:this.constrain});this.zIndex&&this.el.setZIndex(this.zIndex);this.el.setStyle("overflow",Ext.isGecko?"auto":"hidden");this.field.msgTarget!="title"&&(this.field.msgTarget="qtip");this.field.inEditor=!0;this.mon(this.field,{scope:this,blur:this.onBlur,specialkey:this.onSpecialKey});this.field.grow&&this.mon(this.field,"autosize",this.el.sync,this.el,{delay:1});this.field.render(this.el).show();this.field.getEl().dom.name="";this.swallowKeys&&this.field.el.swallowEvent(["keypress","keydown"])},onSpecialKey:function(n,t){var i=t.getKey(),r=this.completeOnEnter&&i==t.ENTER,u=this.cancelOnEsc&&i==t.ESC;(r||u)&&(t.stopEvent(),r?this.completeEdit():this.cancelEdit(),n.triggerBlur&&n.triggerBlur());this.fireEvent("specialkey",n,t)},startEdit:function(n,t){this.editing&&this.completeEdit();this.boundEl=Ext.get(n);var i=t!==undefined?t:this.boundEl.dom.innerHTML;this.rendered||this.render(this.parentEl||document.body);this.fireEvent("beforestartedit",this,this.boundEl,i)!==!1&&(this.startValue=i,this.field.reset(),this.field.setValue(i),this.realign(!0),this.editing=!0,this.show())},doAutoSize:function(){if(this.autoSize){var n=this.boundEl.getSize(),t=this.field.getSize();switch(this.autoSize){case"width":this.setSize(n.width,t.height);break;case"height":this.setSize(t.width,n.height);break;case"none":this.setSize(t.width,t.height);break;default:this.setSize(n.width,n.height)}}},setSize:function(n,t){delete this.field.lastSize;this.field.setSize(n,t);this.el&&((Ext.isGecko2||Ext.isOpera||Ext.isIE7&&Ext.isStrict)&&this.el.setSize(n,t),this.el.sync())},realign:function(n){n===!0&&this.doAutoSize();this.el.alignTo(this.boundEl,this.alignment,this.offsets)},completeEdit:function(n){if(this.editing){this.field.assertValue&&this.field.assertValue();var t=this.getValue();if(!this.field.isValid()){this.revertInvalid!==!1&&this.cancelEdit(n);return}if(String(t)===String(this.startValue)&&this.ignoreNoChange){this.hideEdit(n);return}this.fireEvent("beforecomplete",this,t,this.startValue)!==!1&&(t=this.getValue(),this.updateEl&&this.boundEl&&this.boundEl.update(t),this.hideEdit(n),this.fireEvent("complete",this,t,this.startValue))}},onShow:function(){this.el.show();this.hideEl!==!1&&this.boundEl.hide();this.field.show().focus(!1,!0);this.fireEvent("startedit",this.boundEl,this.startValue)},cancelEdit:function(n){if(this.editing){var t=this.getValue();this.setValue(this.startValue);this.hideEdit(n);this.fireEvent("canceledit",this,t,this.startValue)}},hideEdit:function(n){n!==!0&&(this.editing=!1,this.hide())},onBlur:function(){this.allowBlur===!0&&this.editing&&this.selectSameEditor!==!0&&this.completeEdit()},onHide:function(){if(this.editing){this.completeEdit();return}this.field.blur();this.field.collapse&&this.field.collapse();this.el.hide();this.hideEl!==!1&&this.boundEl.show()},setValue:function(n){this.field.setValue(n)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){Ext.destroyMembers(this,"field");delete this.parentEl;delete this.boundEl}});Ext.reg("editor",Ext.Editor);Ext.ColorPalette=Ext.extend(Ext.Component,{itemCls:"x-color-palette",value:null,clickEvent:"click",ctype:"Ext.ColorPalette",allowReselect:!1,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],initComponent:function(){if(Ext.ColorPalette.superclass.initComponent.call(this),this.addEvents("select"),this.handler)this.on("select",this.handler,this.scope,!0)},onRender:function(n,t){this.autoEl={tag:"div",cls:this.itemCls};Ext.ColorPalette.superclass.onRender.call(this,n,t);var i=this.tpl||new Ext.XTemplate('<tpl for="."><a href="#" class="color-{.}" hidefocus="on"><em><span style="background:#{.}" class="x-unselectable" unselectable="on">&#160;<\/span><\/em><\/a><\/tpl>');i.overwrite(this.el,this.colors);this.mon(this.el,this.clickEvent,this.handleClick,this,{delegate:"a"});this.clickEvent!="click"&&this.mon(this.el,"click",Ext.emptyFn,this,{delegate:"a",preventDefault:!0})},afterRender:function(){if(Ext.ColorPalette.superclass.afterRender.call(this),this.value){var n=this.value;this.value=null;this.select(n,!0)}},handleClick:function(n,t){if(n.preventDefault(),!this.disabled){var i=t.className.match(/(?:^|\s)color-(.{6})(?:\s|$)/)[1];this.select(i.toUpperCase())}},select:function(n,t){if(n=n.replace("#",""),n!=this.value||this.allowReselect){var i=this.el;this.value&&i.child("a.color-"+this.value).removeClass("x-color-palette-sel");i.child("a.color-"+n).addClass("x-color-palette-sel");this.value=n;t!==!0&&this.fireEvent("select",this,n)}}});Ext.reg("colorpalette",Ext.ColorPalette);Ext.DatePicker=Ext.extend(Ext.BoxComponent,{todayText:"Today",okText:"&#160;OK&#160;",cancelText:"Cancel",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",format:"m/d/y",disabledDaysText:"Disabled",disabledDatesText:"Disabled",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,showToday:!0,focusOnSelect:!0,initHour:12,initComponent:function(){if(Ext.DatePicker.superclass.initComponent.call(this),this.value=this.value?this.value.clearTime(!0):(new Date).clearTime(),this.addEvents("select"),this.handler)this.on("select",this.handler,this.scope||this);this.initDisabledDays()},initDisabledDays:function(){if(!this.disabledDatesRE&&this.disabledDates){var n=this.disabledDates,i=n.length-1,t="(?:";Ext.each(n,function(r,u){t+=Ext.isDate(r)?"^"+Ext.escapeRe(r.dateFormat(this.format))+"$":n[u];u!=i&&(t+="|")},this);this.disabledDatesRE=new RegExp(t+")")}},setDisabledDates:function(n){Ext.isArray(n)?(this.disabledDates=n,this.disabledDatesRE=null):this.disabledDatesRE=n;this.initDisabledDays();this.update(this.value,!0)},setDisabledDays:function(n){this.disabledDays=n;this.update(this.value,!0)},setMinDate:function(n){this.minDate=n;this.update(this.value,!0)},setMaxDate:function(n){this.maxDate=n;this.update(this.value,!0)},setValue:function(n){this.value=n.clearTime(!0);this.update(this.value)},getValue:function(){return this.value},focus:function(){this.update(this.activeDate)},onEnable:function(n){Ext.DatePicker.superclass.onEnable.call(this);this.doDisabled(!1);this.update(n?this.value:this.activeDate);Ext.isIE9m&&this.el.repaint()},onDisable:function(){Ext.DatePicker.superclass.onDisable.call(this);this.doDisabled(!0);Ext.isIE9m&&!Ext.isIE8&&Ext.each([].concat(this.textNodes,this.el.query("th span")),function(n){Ext.fly(n).repaint()})},doDisabled:function(n){this.keyNav.setDisabled(n);this.prevRepeater.setDisabled(n);this.nextRepeater.setDisabled(n);this.showToday&&(this.todayKeyListener.setDisabled(n),this.todayBtn.setDisabled(n))},onRender:function(n,t){for(var i=['<table cellspacing="0">','<tr><td class="x-date-left"><a href="#" title="',this.prevText,'">&#160;<\/a><\/td><td class="x-date-middle" align="center"><\/td><td class="x-date-right"><a href="#" title="',this.nextText,'">&#160;<\/a><\/td><\/tr>','<tr><td colspan="3"><table class="x-date-inner" cellspacing="0"><thead><tr>'],o=this.dayNames,f,u,e,r=0;r<7;r++)f=this.startDay+r,f>6&&(f=f-7),i.push("<th><span>",o[f].substr(0,1),"<\/span><\/th>");for(i[i.length]="<\/tr><\/thead><tbody><tr>",r=0;r<42;r++)r%7==0&&r!==0&&(i[i.length]="<\/tr><tr>"),i[i.length]='<td><a href="#" hidefocus="on" class="x-date-date" tabIndex="1"><em><span><\/span><\/em><\/a><\/td>';i.push("<\/tr><\/tbody><\/table><\/td><\/tr>",this.showToday?'<tr><td colspan="3" class="x-date-bottom" align="center"><\/td><\/tr>':"",'<\/table><div class="x-date-mp"><\/div>');u=document.createElement("div");u.className="x-date-picker";u.innerHTML=i.join("");n.dom.insertBefore(u,t);this.el=Ext.get(u);this.eventEl=Ext.get(u.firstChild);this.prevRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-left a"),{handler:this.showPrevMonth,scope:this,preventDefault:!0,stopDefault:!0});this.nextRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-right a"),{handler:this.showNextMonth,scope:this,preventDefault:!0,stopDefault:!0});this.monthPicker=this.el.down("div.x-date-mp");this.monthPicker.enableDisplayMode("block");this.keyNav=new Ext.KeyNav(this.eventEl,{left:function(n){n.ctrlKey?this.showPrevMonth():this.update(this.activeDate.add("d",-1))},right:function(n){n.ctrlKey?this.showNextMonth():this.update(this.activeDate.add("d",1))},up:function(n){n.ctrlKey?this.showNextYear():this.update(this.activeDate.add("d",-7))},down:function(n){n.ctrlKey?this.showPrevYear():this.update(this.activeDate.add("d",7))},pageUp:function(){this.showNextMonth()},pageDown:function(){this.showPrevMonth()},enter:function(n){return n.stopPropagation(),!0},scope:this});this.el.unselectable();this.cells=this.el.select("table.x-date-inner tbody td");this.textNodes=this.el.query("table.x-date-inner tbody span");this.mbtn=new Ext.Button({text:"&#160;",tooltip:this.monthYearText,renderTo:this.el.child("td.x-date-middle",!0)});this.mbtn.el.child("em").addClass("x-btn-arrow");this.showToday&&(this.todayKeyListener=this.eventEl.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this),e=(new Date).dateFormat(this.format),this.todayBtn=new Ext.Button({renderTo:this.el.child("td.x-date-bottom",!0),text:String.format(this.todayText,e),tooltip:String.format(this.todayTip,e),handler:this.selectToday,scope:this}));this.mon(this.eventEl,"mousewheel",this.handleMouseWheel,this);this.mon(this.eventEl,"click",this.handleDateClick,this,{delegate:"a.x-date-date"});this.mon(this.mbtn,"click",this.showMonthPicker,this);this.onEnable(!0)},createMonthPicker:function(){var t,n;if(!this.monthPicker.dom.firstChild){for(t=['<table border="0" cellspacing="0">'],n=0;n<6;n++)t.push('<tr><td class="x-date-mp-month"><a href="#">',Date.getShortMonthName(n),"<\/a><\/td>",'<td class="x-date-mp-month x-date-mp-sep"><a href="#">',Date.getShortMonthName(n+6),"<\/a><\/td>",n===0?'<td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-prev"><\/a><\/td><td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-next"><\/a><\/td><\/tr>':'<td class="x-date-mp-year"><a href="#"><\/a><\/td><td class="x-date-mp-year"><a href="#"><\/a><\/td><\/tr>');t.push('<tr class="x-date-mp-btns"><td colspan="4"><button type="button" class="x-date-mp-ok">',this.okText,'<\/button><button type="button" class="x-date-mp-cancel">',this.cancelText,"<\/button><\/td><\/tr>","<\/table>");this.monthPicker.update(t.join(""));this.mon(this.monthPicker,"click",this.onMonthClick,this);this.mon(this.monthPicker,"dblclick",this.onMonthDblClick,this);this.mpMonths=this.monthPicker.select("td.x-date-mp-month");this.mpYears=this.monthPicker.select("td.x-date-mp-year");this.mpMonths.each(function(n,t,i){i+=1;n.dom.xmonth=i%2==0?5+Math.round(i*.5):Math.round((i-1)*.5)})}},showMonthPicker:function(){if(!this.disabled){this.createMonthPicker();var n=this.el.getSize();this.monthPicker.setSize(n);this.monthPicker.child("table").setSize(n);this.mpSelMonth=(this.activeDate||this.value).getMonth();this.updateMPMonth(this.mpSelMonth);this.mpSelYear=(this.activeDate||this.value).getFullYear();this.updateMPYear(this.mpSelYear);this.monthPicker.slideIn("t",{duration:.2})}},updateMPYear:function(n){var u,t,r,i;for(this.mpyear=n,u=this.mpYears.elements,t=1;t<=10;t++)r=u[t-1],t%2==0?(i=n+Math.round(t*.5),r.firstChild.innerHTML=i,r.xyear=i):(i=n-(5-Math.round(t*.5)),r.firstChild.innerHTML=i,r.xyear=i),this.mpYears.item(t-1)[i==this.mpSelYear?"addClass":"removeClass"]("x-date-mp-sel")},updateMPMonth:function(n){this.mpMonths.each(function(t){t[t.dom.xmonth==n?"addClass":"removeClass"]("x-date-mp-sel")})},selectMPMonth:function(){},onMonthClick:function(n,t){var i,r,u;n.stopEvent();i=new Ext.Element(t);i.is("button.x-date-mp-cancel")?this.hideMonthPicker():i.is("button.x-date-mp-ok")?(u=new Date(this.mpSelYear,this.mpSelMonth,(this.activeDate||this.value).getDate()),u.getMonth()!=this.mpSelMonth&&(u=new Date(this.mpSelYear,this.mpSelMonth,1).getLastDateOfMonth()),this.update(u),this.hideMonthPicker()):(r=i.up("td.x-date-mp-month",2))?(this.mpMonths.removeClass("x-date-mp-sel"),r.addClass("x-date-mp-sel"),this.mpSelMonth=r.dom.xmonth):(r=i.up("td.x-date-mp-year",2))?(this.mpYears.removeClass("x-date-mp-sel"),r.addClass("x-date-mp-sel"),this.mpSelYear=r.dom.xyear):i.is("a.x-date-mp-prev")?this.updateMPYear(this.mpyear-10):i.is("a.x-date-mp-next")&&this.updateMPYear(this.mpyear+10)},onMonthDblClick:function(n,t){n.stopEvent();var r=new Ext.Element(t),i;(i=r.up("td.x-date-mp-month",2))?(this.update(new Date(this.mpSelYear,i.dom.xmonth,(this.activeDate||this.value).getDate())),this.hideMonthPicker()):(i=r.up("td.x-date-mp-year",2))&&(this.update(new Date(i.dom.xyear,this.mpSelMonth,(this.activeDate||this.value).getDate())),this.hideMonthPicker())},hideMonthPicker:function(n){this.monthPicker&&(n===!0?this.monthPicker.hide():this.monthPicker.slideOut("t",{duration:.2}))},showPrevMonth:function(){this.update(this.activeDate.add("mo",-1))},showNextMonth:function(){this.update(this.activeDate.add("mo",1))},showPrevYear:function(){this.update(this.activeDate.add("y",-1))},showNextYear:function(){this.update(this.activeDate.add("y",1))},handleMouseWheel:function(n){if(n.stopEvent(),!this.disabled){var t=n.getWheelDelta();t>0?this.showPrevMonth():t<0&&this.showNextMonth()}},handleDateClick:function(n,t){n.stopEvent();this.disabled||!t.dateValue||Ext.fly(t.parentNode).hasClass("x-date-disabled")||(this.cancelFocus=this.focusOnSelect===!1,this.setValue(new Date(t.dateValue)),delete this.cancelFocus,this.fireEvent("select",this,this.value))},selectToday:function(){this.todayBtn&&!this.todayBtn.disabled&&(this.setValue((new Date).clearTime()),this.fireEvent("select",this,this.value))},update:function(n,t){var s,y,k,o,b,a,i,it,rt,e,v;if(this.rendered){if(s=this.activeDate,y=this.isVisible(),this.activeDate=n,!t&&s&&this.el&&(k=n.getTime(),s.getMonth()==n.getMonth()&&s.getFullYear()==n.getFullYear())){this.cells.removeClass("x-date-selected");this.cells.each(function(n){if(n.dom.firstChild.dateValue==k)return n.addClass("x-date-selected"),y&&!this.cancelFocus&&Ext.fly(n.dom.firstChild).focus(50),!1},this);return}var d=n.getDaysInMonth(),ut=n.getFirstDateOfMonth(),u=ut.getDay()-this.startDay;u<0&&(u+=7);d+=u;var p=n.add("mo",-1),g=p.getDaysInMonth()-u,f=this.cells.elements,w=this.textNodes,r=new Date(p.getFullYear(),p.getMonth(),g,this.initHour),ft=(new Date).clearTime().getTime(),et=n.clearTime(!0).getTime(),nt=this.minDate?this.minDate.clearTime(!0):Number.NEGATIVE_INFINITY,tt=this.maxDate?this.maxDate.clearTime(!0):Number.POSITIVE_INFINITY,h=this.disabledDatesRE,ot=this.disabledDatesText,c=this.disabledDays?this.disabledDays.join(""):!1,st=this.disabledDaysText,l=this.format;for(this.showToday&&(o=(new Date).clearTime(),b=o<nt||o>tt||h&&l&&h.test(o.dateFormat(l))||c&&c.indexOf(o.getDay())!=-1,this.disabled||(this.todayBtn.setDisabled(b),this.todayKeyListener[b?"disable":"enable"]())),a=function(n,t){var i,u;if(t.title="",i=r.clearTime(!0).getTime(),t.firstChild.dateValue=i,i==ft&&(t.className+=" x-date-today",t.title=n.todayText),i==et&&(t.className+=" x-date-selected",y&&Ext.fly(t.firstChild).focus(50)),i<nt){t.className=" x-date-disabled";t.title=n.minText;return}if(i>tt){t.className=" x-date-disabled";t.title=n.maxText;return}c&&c.indexOf(r.getDay())!=-1&&(t.title=st,t.className=" x-date-disabled");h&&l&&(u=r.dateFormat(l),h.test(u)&&(t.title=ot.replace("%0",u),t.className=" x-date-disabled"))},i=0;i<u;i++)w[i].innerHTML=++g,r.setDate(r.getDate()+1),f[i].className="x-date-prevday",a(this,f[i]);for(;i<d;i++)it=i-u+1,w[i].innerHTML=it,r.setDate(r.getDate()+1),f[i].className="x-date-active",a(this,f[i]);for(rt=0;i<42;i++)w[i].innerHTML=++rt,r.setDate(r.getDate()+1),f[i].className="x-date-nextday",a(this,f[i]);this.mbtn.setText(this.monthNames[n.getMonth()]+" "+n.getFullYear());this.internalRender||(e=this.el.dom.firstChild,v=e.offsetWidth,this.el.setWidth(v+this.el.getBorderWidth("lr")),Ext.fly(e).setWidth(v),this.internalRender=!0,Ext.isOpera&&!this.secondPass&&(e.rows[0].cells[1].style.width=v-(e.rows[0].cells[0].offsetWidth+e.rows[0].cells[2].offsetWidth)+"px",this.secondPass=!0,this.update.defer(10,this,[n])))}},beforeDestroy:function(){this.rendered&&(Ext.destroy(this.keyNav,this.monthPicker,this.eventEl,this.mbtn,this.nextRepeater,this.prevRepeater,this.cells.el,this.todayBtn),delete this.textNodes,delete this.cells.elements)}});Ext.reg("datepicker",Ext.DatePicker);Ext.LoadMask=function(n,t){if(this.el=Ext.get(n),Ext.apply(this,t),this.store){this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.onLoad});this.removeMask=Ext.value(this.removeMask,!1)}else{var i=this.el.getUpdater();i.showLoadIndicator=!1;i.on({scope:this,beforeupdate:this.onBeforeLoad,update:this.onLoad,failure:this.onLoad});this.removeMask=Ext.value(this.removeMask,!0)}};Ext.LoadMask.prototype={msg:"Loading...",msgCls:"x-mask-loading",disabled:!1,disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){this.disabled||this.el.mask(this.msg,this.msgCls)},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){if(this.store)this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("exception",this.onLoad,this);else{var n=this.el.getUpdater();n.un("beforeupdate",this.onBeforeLoad,this);n.un("update",this.onLoad,this);n.un("failure",this.onLoad,this)}}};Ext.slider.Thumb=Ext.extend(Object,{dragging:!1,constructor:function(n){Ext.apply(this,n||{},{cls:"x-slider-thumb",constrain:!1});Ext.slider.Thumb.superclass.constructor.call(this,n);this.slider.vertical&&Ext.apply(this,Ext.slider.Thumb.Vertical)},render:function(){this.el=this.slider.innerEl.insertFirst({cls:this.cls});this.initEvents()},enable:function(){this.disabled=!1;this.el.removeClass(this.slider.disabledClass)},disable:function(){this.disabled=!0;this.el.addClass(this.slider.disabledClass)},initEvents:function(){var n=this.el;n.addClassOnOver("x-slider-thumb-over");this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeDragStart.createDelegate(this),onStart:this.onDragStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onDragEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(n)},onBeforeDragStart:function(){return this.disabled?!1:(this.slider.promoteThumb(this),!0)},onDragStart:function(n){this.el.addClass("x-slider-thumb-drag");this.dragging=!0;this.dragStartValue=this.value;this.slider.fireEvent("dragstart",this.slider,n,this)},onDrag:function(n){var t=this.slider,f=this.index,i=this.getNewValue(),r,u;this.constrain&&(r=t.thumbs[f+1],u=t.thumbs[f-1],u!=undefined&&i<=u.value&&(i=u.value),r!=undefined&&i>=r.value&&(i=r.value));t.setValue(f,i,!1);t.fireEvent("drag",t,n,this)},getNewValue:function(){var n=this.slider,t=n.innerEl.translatePoints(this.tracker.getXY());return Ext.util.Format.round(n.reverseValue(t.left),n.decimalPrecision)},onDragEnd:function(n){var t=this.slider,i=this.value;this.el.removeClass("x-slider-thumb-drag");this.dragging=!1;t.fireEvent("dragend",t,n);this.dragStartValue!=i&&t.fireEvent("changecomplete",t,i,this)},destroy:function(){Ext.destroyMembers(this,"tracker","el")}});Ext.slider.MultiSlider=Ext.extend(Ext.BoxComponent,{vertical:!1,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:!0,animate:!0,constrainThumbs:!0,topThumbZIndex:1e4,initComponent:function(){var t,n;for(Ext.isDefined(this.value)||(this.value=this.minValue),this.thumbs=[],Ext.slider.MultiSlider.superclass.initComponent.call(this),this.keyIncrement=Math.max(this.increment,this.keyIncrement),this.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend"),(this.values==undefined||Ext.isEmpty(this.values))&&(this.values=[0]),t=this.values,n=0;n<t.length;n++)this.addThumb(t[n]);this.vertical&&Ext.apply(this,Ext.slider.Vertical)},addThumb:function(n){var t=new Ext.slider.Thumb({value:n,slider:this,index:this.thumbs.length,constrain:this.constrainThumbs});this.thumbs.push(t);this.rendered&&t.render()},promoteThumb:function(n){for(var r=this.thumbs,u,i,t=0,f=r.length;t<f;t++)i=r[t],u=i==n?this.topThumbZIndex:"",i.el.setStyle("zIndex",u)},onRender:function(){var n,t;for(this.autoEl={cls:"x-slider "+(this.vertical?"x-slider-vert":"x-slider-horz"),cn:{cls:"x-slider-end",cn:{cls:"x-slider-inner",cn:[{tag:"a",cls:"x-slider-focus",href:"#",tabIndex:"-1",hidefocus:"on"}]}}},Ext.slider.MultiSlider.superclass.onRender.apply(this,arguments),this.endEl=this.el.first(),this.innerEl=this.endEl.first(),this.focusEl=this.innerEl.child(".x-slider-focus"),n=0;n<this.thumbs.length;n++)this.thumbs[n].render();t=this.innerEl.child(".x-slider-thumb");this.halfThumb=(this.vertical?t.getHeight():t.getWidth())/2;this.initEvents()},initEvents:function(){this.mon(this.el,{scope:this,mousedown:this.onMouseDown,keydown:this.onKeyDown});this.focusEl.swallowEvent("click",!0)},onMouseDown:function(n){var t,i,r;if(!this.disabled){for(t=!1,i=0;i<this.thumbs.length;i++)t=t||n.target==this.thumbs[i].el.dom;if(this.clickToChange&&!t){r=this.innerEl.translatePoints(n.getXY());this.onClickChange(r)}this.focus()}},onClickChange:function(n){if(n.top>this.clickRange[0]&&n.top<this.clickRange[1]){var t=this.getNearest(n,"left"),i=t.index;this.setValue(i,Ext.util.Format.round(this.reverseValue(n.left),this.decimalPrecision),undefined,!0)}},getNearest:function(n,t){for(var o=t=="top"?this.innerEl.getHeight()-n[t]:n[t],s=this.reverseValue(o),r=this.maxValue-this.minValue+5,h=0,u=null,i=0;i<this.thumbs.length;i++){var f=this.thumbs[i],c=f.value,e=Math.abs(c-s);Math.abs(e<=r)&&(u=f,h=i,r=e)}return u},onKeyDown:function(n){if(this.disabled||this.thumbs.length!==1){n.preventDefault();return}var i=n.getKey(),t;switch(i){case n.UP:case n.RIGHT:n.stopEvent();t=n.ctrlKey?this.maxValue:this.getValue(0)+this.keyIncrement;this.setValue(0,t,undefined,!0);break;case n.DOWN:case n.LEFT:n.stopEvent();t=n.ctrlKey?this.minValue:this.getValue(0)-this.keyIncrement;this.setValue(0,t,undefined,!0);break;default:n.preventDefault()}},doSnap:function(n){if(!(this.increment&&n))return n;var i=n,t=this.increment,r=n%t;return r!=0&&(i-=r,r*2>=t?i+=t:r*2<-t&&(i-=t)),i.constrain(this.minValue,this.maxValue)},afterRender:function(){var n,t,i;for(Ext.slider.MultiSlider.superclass.afterRender.apply(this,arguments),n=0;n<this.thumbs.length;n++)t=this.thumbs[n],t.value!==undefined&&(i=this.normalizeValue(t.value),i!==t.value?this.setValue(n,i,!1):this.moveThumb(n,this.translateValue(i),!1))},getRatio:function(){var n=this.innerEl.getWidth(),t=this.maxValue-this.minValue;return t==0?n:n/t},normalizeValue:function(n){return n=this.doSnap(n),n=Ext.util.Format.round(n,this.decimalPrecision),n.constrain(this.minValue,this.maxValue)},setMinValue:function(n){this.minValue=n;for(var i=0,r=this.thumbs,u=r.length,t;i<u;++i)t=r[i],t.value=t.value<n?n:t.value;this.syncThumb()},setMaxValue:function(n){this.maxValue=n;for(var i=0,r=this.thumbs,u=r.length,t;i<u;++i)t=r[i],t.value=t.value>n?n:t.value;this.syncThumb()},setValue:function(n,t,i,r){var u=this.thumbs[n],f=u.el;t=this.normalizeValue(t);t!==u.value&&this.fireEvent("beforechange",this,t,u.value,u)!==!1&&(u.value=t,this.rendered&&(this.moveThumb(n,this.translateValue(t),i!==!1),this.fireEvent("change",this,t,u),r&&this.fireEvent("changecomplete",this,t,u)))},translateValue:function(n){var t=this.getRatio();return n*t-this.minValue*t-this.halfThumb},reverseValue:function(n){var t=this.getRatio();return(n+this.minValue*t)/t},moveThumb:function(n,t,i){var r=this.thumbs[n].el;i&&this.animate!==!1?r.shift({left:t,stopFx:!0,duration:.35}):r.setLeft(t)},focus:function(){this.focusEl.focus(10)},onResize:function(n){for(var i=this.thumbs,r=i.length,t=0;t<r;++t)i[t].el.stopFx();Ext.isNumber(n)&&this.innerEl.setWidth(n-(this.el.getPadding("l")+this.endEl.getPadding("r")));this.syncThumb();Ext.slider.MultiSlider.superclass.onResize.apply(this,arguments)},onDisable:function(){var n,t,i,r;for(Ext.slider.MultiSlider.superclass.onDisable.call(this),n=0;n<this.thumbs.length;n++)t=this.thumbs[n],i=t.el,t.disable(),Ext.isIE&&(r=i.getXY(),i.hide(),this.innerEl.addClass(this.disabledClass).dom.disabled=!0,this.thumbHolder||(this.thumbHolder=this.endEl.createChild({cls:"x-slider-thumb "+this.disabledClass})),this.thumbHolder.show().setXY(r))},onEnable:function(){var n,t,i;for(Ext.slider.MultiSlider.superclass.onEnable.call(this),n=0;n<this.thumbs.length;n++)t=this.thumbs[n],i=t.el,t.enable(),Ext.isIE&&(this.innerEl.removeClass(this.disabledClass).dom.disabled=!1,this.thumbHolder&&this.thumbHolder.hide(),i.show(),this.syncThumb())},syncThumb:function(){if(this.rendered)for(var n=0;n<this.thumbs.length;n++)this.moveThumb(n,this.translateValue(this.thumbs[n].value))},getValue:function(n){return this.thumbs[n].value},getValues:function(){for(var t=[],n=0;n<this.thumbs.length;n++)t.push(this.thumbs[n].value);return t},beforeDestroy:function(){for(var t=this.thumbs,n=0,i=t.length;n<i;++n)t[n].destroy(),t[n]=null;Ext.destroyMembers(this,"endEl","innerEl","focusEl","thumbHolder");Ext.slider.MultiSlider.superclass.beforeDestroy.call(this)}});Ext.reg("multislider",Ext.slider.MultiSlider);Ext.slider.SingleSlider=Ext.extend(Ext.slider.MultiSlider,{constructor:function(n){n=n||{};Ext.applyIf(n,{values:[n.value||0]});Ext.slider.SingleSlider.superclass.constructor.call(this,n)},getValue:function(){return Ext.slider.SingleSlider.superclass.getValue.call(this,0)},setValue:function(){var n=Ext.toArray(arguments),t=n.length;return(t==1||t<=3&&typeof arguments[1]!="number")&&n.unshift(0),Ext.slider.SingleSlider.superclass.setValue.apply(this,n)},syncThumb:function(){return Ext.slider.SingleSlider.superclass.syncThumb.apply(this,[0].concat(arguments))},getNearest:function(){return this.thumbs[0]}});Ext.Slider=Ext.slider.SingleSlider;Ext.reg("slider",Ext.slider.SingleSlider);Ext.slider.Vertical={onResize:function(n,t){this.innerEl.setHeight(t-(this.el.getPadding("t")+this.endEl.getPadding("b")));this.syncThumb()},getRatio:function(){var n=this.innerEl.getHeight(),t=this.maxValue-this.minValue;return n/t},moveThumb:function(n,t,i){var u=this.thumbs[n],r=u.el;i&&this.animate!==!1?r.shift({bottom:t,stopFx:!0,duration:.35}):r.setBottom(t)},onClickChange:function(n){if(n.left>this.clickRange[0]&&n.left<this.clickRange[1]){var t=this.getNearest(n,"top"),i=t.index,r=this.minValue+this.reverseValue(this.innerEl.getHeight()-n.top);this.setValue(i,Ext.util.Format.round(r,this.decimalPrecision),undefined,!0)}}};Ext.slider.Thumb.Vertical={getNewValue:function(){var n=this.slider,t=n.innerEl,i=t.translatePoints(this.tracker.getXY()),r=t.getHeight()-i.top;return n.minValue+Ext.util.Format.round(r/n.getRatio(),n.decimalPrecision)}};Ext.ProgressBar=Ext.extend(Ext.BoxComponent,{baseCls:"x-progress",animate:!1,waitTimer:null,initComponent:function(){Ext.ProgressBar.superclass.initComponent.call(this);this.addEvents("update")},onRender:function(n,t){var r=new Ext.Template('<div class="{cls}-wrap">','<div class="{cls}-inner">','<div class="{cls}-bar">','<div class="{cls}-text">',"<div>&#160;<\/div>","<\/div>","<\/div>",'<div class="{cls}-text {cls}-text-back">',"<div>&#160;<\/div>","<\/div>","<\/div>","<\/div>"),i,u;this.el=t?r.insertBefore(t,{cls:this.baseCls},!0):r.append(n,{cls:this.baseCls},!0);this.id&&(this.el.dom.id=this.id);i=this.el.dom.firstChild;this.progressBar=Ext.get(i.firstChild);this.textEl?(this.textEl=Ext.get(this.textEl),delete this.textTopEl):(this.textTopEl=Ext.get(this.progressBar.dom.firstChild),u=Ext.get(i.childNodes[1]),this.textTopEl.setStyle("z-index",99).addClass("x-hidden"),this.textEl=new Ext.CompositeElement([this.textTopEl.dom.firstChild,u.dom.firstChild]),this.textEl.setWidth(i.offsetWidth));this.progressBar.setHeight(i.offsetHeight)},afterRender:function(){Ext.ProgressBar.superclass.afterRender.call(this);this.value?this.updateProgress(this.value,this.text):this.updateText(this.text)},updateProgress:function(n,t,i){if(this.value=n||0,t&&this.updateText(t),this.rendered&&!this.isDestroyed){var r=Math.floor(n*this.el.dom.firstChild.offsetWidth);this.progressBar.setWidth(r,i===!0||i!==!1&&this.animate);this.textTopEl&&this.textTopEl.removeClass("x-hidden").setWidth(r)}return this.fireEvent("update",this,n,t),this},wait:function(n){if(!this.waitTimer){var t=this;n=n||{};this.updateText(n.text);this.waitTimer=Ext.TaskMgr.start({run:function(t){var i=n.increment||10;t-=1;this.updateProgress(((t+i)%i+1)*(100/i)*.01,null,n.animate)},interval:n.interval||1e3,duration:n.duration,onStop:function(){n.fn&&n.fn.apply(n.scope||this);this.reset()},scope:t})}return this},isWaiting:function(){return this.waitTimer!==null},updateText:function(n){return this.text=n||"&#160;",this.rendered&&this.textEl.update(this.text),this},syncProgressBar:function(){return this.value&&this.updateProgress(this.value,this.text),this},setSize:function(n,t){if(Ext.ProgressBar.superclass.setSize.call(this,n,t),this.textTopEl){var i=this.el.dom.firstChild;this.textEl.setSize(i.offsetWidth,i.offsetHeight)}return this.syncProgressBar(),this},reset:function(n){return this.updateProgress(0),this.textTopEl&&this.textTopEl.addClass("x-hidden"),this.clearTimer(),n===!0&&this.hide(),this},clearTimer:function(){this.waitTimer&&(this.waitTimer.onStop=null,Ext.TaskMgr.stop(this.waitTimer),this.waitTimer=null)},onDestroy:function(){this.clearTimer();this.rendered&&(this.textEl.isComposite&&this.textEl.clear(),Ext.destroyMembers(this,"textEl","progressBar","textTopEl"));Ext.ProgressBar.superclass.onDestroy.call(this)}});Ext.reg("progress",Ext.ProgressBar),function(){var n=Ext.EventManager,t=Ext.lib.Dom;Ext.dd.DragDrop=function(n,t,i){n&&this.init(n,t,i)};Ext.dd.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},moveOnly:!1,unlock:function(){this.locked=!1},isTarget:!0,padding:null,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,b4StartDrag:function(){},startDrag:function(){},b4Drag:function(){},onDrag:function(){},onDragEnter:function(){},b4DragOver:function(){},onDragOver:function(){},b4DragOut:function(){},onDragOut:function(){},b4DragDrop:function(){},onDragDrop:function(){},onInvalidDrop:function(){},b4EndDrag:function(){},endDrag:function(){},b4MouseDown:function(){},onMouseDown:function(){},onMouseUp:function(){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(n,t){var e,o,s;Ext.isNumber(t)&&(t={left:t,right:t,top:t,bottom:t});t=t||this.defaultPadding;var r=Ext.get(this.getEl()).getBox(),u=Ext.get(n),h=u.getScroll(),i,f=u.dom;f==document.body?i={x:h.left,y:h.top,width:Ext.lib.Dom.getViewWidth(),height:Ext.lib.Dom.getViewHeight()}:(e=u.getXY(),i={x:e[0],y:e[1],width:f.clientWidth,height:f.clientHeight});o=r.y-i.y;s=r.x-i.x;this.resetConstraints();this.setXConstraint(s-(t.left||0),i.width-s-r.width-(t.right||0),this.xTickSize);this.setYConstraint(o-(t.top||0),i.height-o-r.height-(t.bottom||0),this.yTickSize)},getEl:function(){return this._domRef||(this._domRef=Ext.getDom(this.id)),this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(t,i,r){this.initTarget(t,i,r);n.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(n,t,i){this.config=i||{};this.DDM=Ext.dd.DDM;this.groups={};typeof n!="string"&&(n=Ext.id(n));this.id=n;this.addToGroup(t?t:"default");this.handleElId=n;this.setDragElId(n);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=this.config.isTarget!==!1;this.maintainOffset=this.config.maintainOffset;this.primaryButtonOnly=this.config.primaryButtonOnly!==!1},handleOnAvailable:function(){this.available=!0;this.resetConstraints();this.onAvailable()},setPadding:function(n,t,i,r){this.padding=t||0===t?i||0===i?[n,t,i,r]:[n,t,n,t]:[n,n,n,n]},setInitPosition:function(n,i){var u=this.getEl();if(this.DDM.verifyEl(u)){var f=n||0,e=i||0,r=t.getXY(u);this.initPageX=r[0]-f;this.initPageY=r[1]-e;this.lastPageX=r[0];this.lastPageY=r[1];this.setStartPosition(r)}},setStartPosition:function(n){var i=n||t.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=i[0];this.startPageY=i[1]},addToGroup:function(n){this.groups[n]=!0;this.DDM.regDragDrop(this,n)},removeFromGroup:function(n){this.groups[n]&&delete this.groups[n];this.DDM.removeDDFromGroup(this,n)},setDragElId:function(n){this.dragElId=n},setHandleElId:function(n){typeof n!="string"&&(n=Ext.id(n));this.handleElId=n;this.DDM.regHandle(this.id,n)},setOuterHandleElId:function(t){typeof t!="string"&&(t=Ext.id(t));n.on(t,"mousedown",this.handleMouseDown,this);this.setHandleElId(t);this.hasOuterHandles=!0},unreg:function(){n.un(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return this.DDM.isLocked()||this.locked},handleMouseDown:function(n){if((!this.primaryButtonOnly||n.button==0)&&!this.isLocked()){this.DDM.refreshCache(this.groups);var t=new Ext.lib.Point(Ext.lib.Event.getPageX(n),Ext.lib.Event.getPageY(n));if((this.hasOuterHandles||this.DDM.isOverTarget(t,this))&&this.clickValidator(n)){this.setStartPosition();this.b4MouseDown(n);this.onMouseDown(n);this.DDM.handleMouseDown(n,this);this.preventDefault||this.stopPropagation?(this.preventDefault&&n.preventDefault(),this.stopPropagation&&n.stopPropagation()):this.DDM.stopEvent(n)}}},clickValidator:function(n){var t=n.getTarget();return this.isValidHandleChild(t)&&(this.id==this.handleElId||this.DDM.handleWasClicked(t,this.id))},addInvalidHandleType:function(n){var t=n.toUpperCase();this.invalidHandleTypes[t]=t},addInvalidHandleId:function(n){typeof n!="string"&&(n=Ext.id(n));this.invalidHandleIds[n]=n},addInvalidHandleClass:function(n){this.invalidHandleClasses.push(n)},removeInvalidHandleType:function(n){var t=n.toUpperCase();delete this.invalidHandleTypes[t]},removeInvalidHandleId:function(n){typeof n!="string"&&(n=Ext.id(n));delete this.invalidHandleIds[n]},removeInvalidHandleClass:function(n){for(var t=0,i=this.invalidHandleClasses.length;t<i;++t)this.invalidHandleClasses[t]==n&&delete this.invalidHandleClasses[t]},isValidHandleChild:function(n){var t=!0,r,i,u;try{r=n.nodeName.toUpperCase()}catch(f){r=n.nodeName}for(t=t&&!this.invalidHandleTypes[r],t=t&&!this.invalidHandleIds[n.id],i=0,u=this.invalidHandleClasses.length;t&&i<u;++i)t=!Ext.fly(n).hasClass(this.invalidHandleClasses[i]);return t},setXTicks:function(n,t){var r,i;for(this.xTicks=[],this.xTickSize=t,r={},i=this.initPageX;i>=this.minX;i=i-t)r[i]||(this.xTicks[this.xTicks.length]=i,r[i]=!0);for(i=this.initPageX;i<=this.maxX;i=i+t)r[i]||(this.xTicks[this.xTicks.length]=i,r[i]=!0);this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(n,t){var r,i;for(this.yTicks=[],this.yTickSize=t,r={},i=this.initPageY;i>=this.minY;i=i-t)r[i]||(this.yTicks[this.yTicks.length]=i,r[i]=!0);for(i=this.initPageY;i<=this.maxY;i=i+t)r[i]||(this.yTicks[this.yTicks.length]=i,r[i]=!0);this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(n,t,i){this.leftConstraint=n;this.rightConstraint=t;this.minX=this.initPageX-n;this.maxX=this.initPageX+t;i&&this.setXTicks(this.initPageX,i);this.constrainX=!0},clearConstraints:function(){this.constrainX=!1;this.constrainY=!1;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(n,t,i){this.topConstraint=n;this.bottomConstraint=t;this.minY=this.initPageY-n;this.maxY=this.initPageY+t;i&&this.setYTicks(this.initPageY,i);this.constrainY=!0},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var n=this.maintainOffset?this.lastPageX-this.initPageX:0,t=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(n,t)}else this.setInitPosition();this.constrainX&&this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize);this.constrainY&&this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)},getTick:function(n,t){var i,u,r,f,e;if(t){if(t[0]>=n)return t[0];for(i=0,u=t.length;i<u;++i)if(r=i+1,t[r]&&t[r]>=n)return f=n-t[i],e=t[r]-n,e>f?t[i]:t[r];return t[t.length-1]}return n},toString:function(){return"DragDrop "+this.id}}}();Ext.dd.DragDropMgr||(Ext.dd.DragDropMgr=function(){var n=Ext.EventManager;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!0,initialized:!1,locked:!1,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,mode:0,notifyOccluded:!1,_execOnAll:function(n,t){var r,u,i;for(r in this.ids)for(u in this.ids[r])(i=this.ids[r][u],this.isTypeOfDD(i))&&i[n].apply(i,t)},_onLoad:function(){this.init();n.on(document,"mouseup",this.handleMouseUp,this,!0);n.on(document,"mousemove",this.handleMouseMove,this,!0);n.on(window,"unload",this._onUnload,this,!0);n.on(window,"resize",this._onResize,this,!0)},_onResize:function(){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,regDragDrop:function(n,t){this.initialized||this.init();this.ids[t]||(this.ids[t]={});this.ids[t][n.id]=n},removeDDFromGroup:function(n,t){this.ids[t]||(this.ids[t]={});var i=this.ids[t];i&&i[n.id]&&delete i[n.id]},_remove:function(n){for(var t in n.groups)t&&this.ids[t]&&this.ids[t][n.id]&&delete this.ids[t][n.id];delete this.handleIds[n.id]},regHandle:function(n,t){this.handleIds[n]||(this.handleIds[n]={});this.handleIds[n][t]=t},isDragDrop:function(n){return this.getDDById(n)?!0:!1},getRelated:function(n,t){var r=[],u,f,i;for(u in n.groups)for(f in this.ids[u])(i=this.ids[u][f],this.isTypeOfDD(i))&&(!t||i.isTarget)&&(r[r.length]=i);return r},isLegalTarget:function(n,t){for(var r=this.getRelated(n,!0),i=0,u=r.length;i<u;++i)if(r[i].id==t.id)return!0;return!1},isTypeOfDD:function(n){return n&&n.__ygDragDrop},isHandle:function(n,t){return this.handleIds[n]&&this.handleIds[n][t]},getDDById:function(n){for(var t in this.ids)if(this.ids[t][n])return this.ids[t][n];return null},handleMouseDown:function(n,t){Ext.QuickTips&&Ext.QuickTips.ddDisable();this.dragCurrent&&this.handleMouseUp(n);this.currentTarget=n.getTarget();this.dragCurrent=t;var i=t.getEl();this.startX=n.getPageX();this.startY=n.getPageY();this.deltaX=this.startX-i.offsetLeft;this.deltaY=this.startY-i.offsetTop;this.dragThreshMet=!1;this.clickTimeout=setTimeout(function(){var n=Ext.dd.DDM;n.startDrag(n.startX,n.startY)},this.clickTimeThresh)},startDrag:function(n,t){clearTimeout(this.clickTimeout);this.dragCurrent&&(this.dragCurrent.b4StartDrag(n,t),this.dragCurrent.startDrag(n,t));this.dragThreshMet=!0},handleMouseUp:function(n){(Ext.QuickTips&&Ext.QuickTips.ddEnable(),this.dragCurrent)&&(clearTimeout(this.clickTimeout),this.dragThreshMet&&this.fireEvents(n,!0),this.stopDrag(n),this.stopEvent(n))},stopEvent:function(n){this.stopPropagation&&n.stopPropagation();this.preventDefault&&n.preventDefault()},stopDrag:function(n){if(this.dragCurrent){this.dragThreshMet&&(this.dragCurrent.b4EndDrag(n),this.dragCurrent.endDrag(n));this.dragCurrent.onMouseUp(n)}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(n){if(!this.dragCurrent)return!0;if(Ext.isIE&&n.button!==0&&n.button!==1&&n.button!==2)return this.stopEvent(n),this.handleMouseUp(n);if(!this.dragThreshMet){var t=Math.abs(this.startX-n.getPageX()),i=Math.abs(this.startY-n.getPageY());(t>this.clickPixelThresh||i>this.clickPixelThresh)&&this.startDrag(this.startX,this.startY)}if(this.dragThreshMet){this.dragCurrent.b4Drag(n);this.dragCurrent.onDrag(n);this.dragCurrent.moveOnly||this.fireEvents(n,!1)}return this.stopEvent(n),!0},fireEvents:function(n,t){var f=this,r=f.dragCurrent,v=n.getPoint(),u,y,l=[],p=[],s=[],h=[],o=[],c=[],w,i,e,a;if(r&&!r.isLocked()){for(i in f.dragOvers)(u=f.dragOvers[i],f.isTypeOfDD(u))&&(this.isOverTarget(v,u,f.mode)||s.push(u),p[i]=!0,delete f.dragOvers[i]);for(a in r.groups)if("string"==typeof a)for(i in f.ids[a])u=f.ids[a][i],f.isTypeOfDD(u)&&(y=u.getEl())&&u.isTarget&&!u.isLocked()&&(u!=r||r.ignoreSelf===!1)&&((u.zIndex=f.getZIndex(y))!==-1&&(w=!0),l.push(u));for(w&&l.sort(f.byZIndex),i=0,e=l.length;i<e;i++)if(u=l[i],f.isOverTarget(v,u,f.mode)&&(t?o.push(u):(p[u.id]?h.push(u):c.push(u),f.dragOvers[u.id]=u),!f.notifyOccluded))break;if(f.mode){if(s.length){r.b4DragOut(n,s);r.onDragOut(n,s)}if(c.length)r.onDragEnter(n,c);if(h.length){r.b4DragOver(n,h);r.onDragOver(n,h)}if(o.length){r.b4DragDrop(n,o);r.onDragDrop(n,o)}}else{for(i=0,e=s.length;i<e;++i){r.b4DragOut(n,s[i].id);r.onDragOut(n,s[i].id)}for(i=0,e=c.length;i<e;++i)r.onDragEnter(n,c[i].id);for(i=0,e=h.length;i<e;++i){r.b4DragOver(n,h[i].id);r.onDragOver(n,h[i].id)}for(i=0,e=o.length;i<e;++i){r.b4DragDrop(n,o[i].id);r.onDragDrop(n,o[i].id)}}if(t&&!o.length)r.onInvalidDrop(n)}},getZIndex:function(n){var r=document.body,t,i=-1;for(n=Ext.getDom(n);n!==r;)isNaN(t=Number(Ext.fly(n).getStyle("zIndex")))||(i=t),n=n.parentNode;return i},byZIndex:function(n,t){return n.zIndex<t.zIndex},getBestMatch:function(n){var t=null,u=n.length,r,i;if(u==1)t=n[0];else for(r=0;r<u;++r)if(i=n[r],i.cursorIsOver){t=i;break}else(!t||t.overlap.getArea()<i.overlap.getArea())&&(t=i);return t},refreshCache:function(n){var i,u,t,r;for(i in n)if("string"==typeof i)for(u in this.ids[i])t=this.ids[i][u],this.isTypeOfDD(t)&&(r=this.getLocation(t),r?this.locationCache[t.id]=r:delete this.locationCache[t.id])},verifyEl:function(n){if(n){var t;if(Ext.isIE)try{t=n.offsetParent}catch(i){}else t=n.offsetParent;if(t)return!0}return!1},getLocation:function(n){if(!this.isTypeOfDD(n))return null;var i=n.getEl(),t,r,f,u,e,o,s,h,c;try{t=Ext.lib.Dom.getXY(i)}catch(l){}return t?(r=t[0],f=r+i.offsetWidth,u=t[1],e=u+i.offsetHeight,o=u-n.padding[0],s=f+n.padding[1],h=e+n.padding[2],c=r-n.padding[3],new Ext.lib.Region(o,s,h,c)):null},isOverTarget:function(n,t,i){var u=this.locationCache[t.id],r;if(u&&this.useCache||(u=this.getLocation(t),this.locationCache[t.id]=u),!u)return!1;if(t.cursorIsOver=u.contains(n),r=this.dragCurrent,!r||!r.getTargetCoord||!i&&!r.constrainX&&!r.constrainY)return t.cursorIsOver;t.overlap=null;var f=r.getTargetCoord(n.x,n.y),e=r.getDragEl(),s=new Ext.lib.Region(f.y,f.x+e.offsetWidth,f.y+e.offsetHeight,f.x),o=s.intersect(u);return o?(t.overlap=o,i?!0:t.cursorIsOver):!1},_onUnload:function(){n.removeListener(document,"mouseup",this.handleMouseUp,this);n.removeListener(document,"mousemove",this.handleMouseMove,this);n.removeListener(window,"resize",this._onResize,this);Ext.dd.DragDropMgr.unregAll()},unregAll:function(){this.dragCurrent&&(this.stopDrag(),this.dragCurrent=null);this._execOnAll("unreg",[]);for(var n in this.elementCache)delete this.elementCache[n];this.elementCache={};this.ids={}},elementCache:{},getElWrapper:function(n){var t=this.elementCache[n];return t&&t.el||(t=this.elementCache[n]=new this.ElementWrapper(Ext.getDom(n))),t},getElement:function(n){return Ext.getDom(n)},getCss:function(n){var t=Ext.getDom(n);return t?t.style:null},ElementWrapper:function(n){this.el=n||null;this.id=this.el&&n.id;this.css=this.el&&n.style},getPosX:function(n){return Ext.lib.Dom.getX(n)},getPosY:function(n){return Ext.lib.Dom.getY(n)},swapNode:function(n,t){if(n.swapNode)n.swapNode(t);else{var i=t.parentNode,r=t.nextSibling;r==n?i.insertBefore(n,t):t==n.nextSibling?i.insertBefore(t,n):(n.parentNode.replaceChild(t,n),i.insertBefore(n,r))}},getScroll:function(){var t,i,n=document.documentElement,r=document.body;return n&&(n.scrollTop||n.scrollLeft)?(t=n.scrollTop,i=n.scrollLeft):r&&(t=r.scrollTop,i=r.scrollLeft),{top:t,left:i}},getStyle:function(n,t){return Ext.fly(n).getStyle(t)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(n,t){var i=Ext.lib.Dom.getXY(t);Ext.lib.Dom.setXY(n,i)},numericSort:function(n,t){return n-t},_timeoutCount:0,_addListeners:function(){var n=Ext.dd.DDM;Ext.lib.Event&&document?n._onLoad():n._timeoutCount>2e3||(setTimeout(n._addListeners,10),document&&document.body&&(n._timeoutCount+=1))},handleWasClicked:function(n,t){if(this.isHandle(t,n.id))return!0;for(var i=n.parentNode;i;){if(this.isHandle(t,i.id))return!0;i=i.parentNode}return!1}}}(),Ext.dd.DDM=Ext.dd.DragDropMgr,Ext.dd.DDM._addListeners());Ext.dd.DD=function(n,t,i){n&&this.init(n,t,i)};Ext.extend(Ext.dd.DD,Ext.dd.DragDrop,{scroll:!0,autoOffset:function(n,t){var i=n-this.startPageX,r=t-this.startPageY;this.setDelta(i,r)},setDelta:function(n,t){this.deltaX=n;this.deltaY=t},setDragElPos:function(n,t){var i=this.getDragEl();this.alignElWithMouse(i,n,t)},alignElWithMouse:function(n,t,i){var r=this.getTargetCoord(t,i),u=n.dom?n:Ext.fly(n,"_dd"),f,e,o;return this.deltaSetXY?u.setLeftTop(r.x+this.deltaSetXY[0],r.y+this.deltaSetXY[1]):(f=[r.x,r.y],u.setXY(f),e=u.getLeft(!0),o=u.getTop(!0),this.deltaSetXY=[e-r.x,o-r.y]),this.cachePosition(r.x,r.y),this.autoScroll(r.x,r.y,n.offsetHeight,n.offsetWidth),r},cachePosition:function(n,t){if(n)this.lastPageX=n,this.lastPageY=t;else{var i=Ext.lib.Dom.getXY(this.getEl());this.lastPageX=i[0];this.lastPageY=i[1]}},autoScroll:function(n,t,i,r){if(this.scroll){var s=Ext.lib.Dom.getViewHeight(),h=Ext.lib.Dom.getViewWidth(),u=this.DDM.getScrollTop(),f=this.DDM.getScrollLeft(),c=i+t,l=r+n,a=s+u-t-this.deltaY,v=h+f-n-this.deltaX,e=40,o=document.all?80:30;c>s&&a<e&&window.scrollTo(f,u+o);t<u&&u>0&&t-u<e&&window.scrollTo(f,u-o);l>h&&v<e&&window.scrollTo(f+o,u);n<f&&f>0&&n-f<e&&window.scrollTo(f-o,u)}},getTargetCoord:function(n,t){var i=n-this.deltaX,r=t-this.deltaY;return this.constrainX&&(i<this.minX&&(i=this.minX),i>this.maxX&&(i=this.maxX)),this.constrainY&&(r<this.minY&&(r=this.minY),r>this.maxY&&(r=this.maxY)),i=this.getTick(i,this.xTicks),r=this.getTick(r,this.yTicks),{x:i,y:r}},applyConfig:function(){Ext.dd.DD.superclass.applyConfig.call(this);this.scroll=this.config.scroll!==!1},b4MouseDown:function(n){this.autoOffset(n.getPageX(),n.getPageY())},b4Drag:function(n){this.setDragElPos(n.getPageX(),n.getPageY())},toString:function(){return"DD "+this.id}});Ext.dd.DDProxy=function(n,t,i){n&&(this.init(n,t,i),this.initFrame())};Ext.dd.DDProxy.dragElId="ygddfdiv";Ext.extend(Ext.dd.DDProxy,Ext.dd.DD,{resizeFrame:!0,centerFrame:!1,createFrame:function(){var r=this,i=document.body,n,t;if(!i||!i.firstChild){setTimeout(function(){r.createFrame()},50);return}n=this.getDragEl();n||(n=document.createElement("div"),n.id=this.dragElId,t=n.style,t.position="absolute",t.visibility="hidden",t.cursor="move",t.border="2px solid #aaa",t.zIndex=999,i.insertBefore(n,i.firstChild))},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=this.config.resizeFrame!==!1;this.centerFrame=this.config.centerFrame;this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(n,t){var u=this.getEl(),i=this.getDragEl(),r=i.style;this._resizeProxy();this.centerFrame&&this.setDelta(Math.round(parseInt(r.width,10)/2),Math.round(parseInt(r.height,10)/2));this.setDragElPos(n,t);Ext.fly(i).show()},_resizeProxy:function(){if(this.resizeFrame){var n=this.getEl();Ext.fly(this.getDragEl()).setSize(n.offsetWidth,n.offsetHeight)}},b4MouseDown:function(n){var t=n.getPageX(),i=n.getPageY();this.autoOffset(t,i);this.setDragElPos(t,i)},b4StartDrag:function(n,t){this.showFrame(n,t)},b4EndDrag:function(){Ext.fly(this.getDragEl()).hide()},endDrag:function(){var n=this.getEl(),t=this.getDragEl();t.style.visibility="";this.beforeMove();n.style.visibility="hidden";Ext.dd.DDM.moveToEl(n,t);t.style.visibility="hidden";n.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return"DDProxy "+this.id}});Ext.dd.DDTarget=function(n,t,i){n&&this.initTarget(n,t,i)};Ext.extend(Ext.dd.DDTarget,Ext.dd.DragDrop,{getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return"DDTarget "+this.id}});Ext.dd.DragTracker=Ext.extend(Ext.util.Observable,{active:!1,tolerance:5,autoStart:!1,constructor:function(n){Ext.apply(this,n);this.addEvents("mousedown","mouseup","mousemove","dragstart","dragend","drag");this.dragRegion=new Ext.lib.Region(0,0,0,0);this.el&&this.initEl(this.el);Ext.dd.DragTracker.superclass.constructor.call(this,n)},initEl:function(n){this.el=Ext.get(n);n.on("mousedown",this.onMouseDown,this,this.delegate?{delegate:this.delegate}:undefined)},destroy:function(){this.el.un("mousedown",this.onMouseDown,this);delete this.el},onMouseDown:function(n,t){if(this.fireEvent("mousedown",this,n)!==!1&&this.onBeforeStart(n)!==!1){this.startXY=this.lastXY=n.getXY();this.dragTarget=this.delegate?t:this.el.dom;this.preventDefault!==!1&&n.preventDefault();Ext.getDoc().on({scope:this,mouseup:this.onMouseUp,mousemove:this.onMouseMove,selectstart:this.stopSelect});this.autoStart&&(this.timer=this.triggerStart.defer(this.autoStart===!0?1e3:this.autoStart,this,[n]))}},onMouseMove:function(n){var r=Ext.isIE6||Ext.isIE7||Ext.isIE8,t,i;if(this.active&&r&&!n.browserEvent.button){n.preventDefault();this.onMouseUp(n);return}if(n.preventDefault(),t=n.getXY(),i=this.startXY,this.lastXY=t,!this.active)if(Math.abs(i[0]-t[0])>this.tolerance||Math.abs(i[1]-t[1])>this.tolerance)this.triggerStart(n);else return;this.fireEvent("mousemove",this,n);this.onDrag(n);this.fireEvent("drag",this,n)},onMouseUp:function(n){var t=Ext.getDoc(),i=this.active;if(t.un("mousemove",this.onMouseMove,this),t.un("mouseup",this.onMouseUp,this),t.un("selectstart",this.stopSelect,this),n.preventDefault(),this.clearStart(),this.active=!1,delete this.elRegion,this.fireEvent("mouseup",this,n),i){this.onEnd(n);this.fireEvent("dragend",this,n)}},triggerStart:function(n){this.clearStart();this.active=!0;this.onStart(n);this.fireEvent("dragstart",this,n)},clearStart:function(){this.timer&&(clearTimeout(this.timer),delete this.timer)},stopSelect:function(n){return n.stopEvent(),!1},onBeforeStart:function(){},onStart:function(){},onDrag:function(){},onEnd:function(){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getXY:function(n){return n?this.constrainModes[n].call(this,this.lastXY):this.lastXY},getOffset:function(n){var t=this.getXY(n),i=this.startXY;return[i[0]-t[0],i[1]-t[1]]},constrainModes:{point:function(n){this.elRegion||(this.elRegion=this.getDragCt().getRegion());var t=this.dragRegion;return t.left=n[0],t.top=n[1],t.right=n[0],t.bottom=n[1],t.constrainTo(this.elRegion),[t.left,t.top]}}});Ext.dd.ScrollManager=function(){var t=Ext.dd.DragDropMgr,i={},r=null,n={},o=function(){r=null;f()},e=function(){t.dragCurrent&&t.refreshCache(t.dragCurrent.groups)},s=function(){if(t.dragCurrent){var i=Ext.dd.ScrollManager,r=n.el.ddScrollConfig?n.el.ddScrollConfig.increment:i.increment;i.animate?n.el.scroll(n.dir,r,!0,i.animDuration,e):n.el.scroll(n.dir,r)&&e()}},f=function(){n.id&&clearInterval(n.id);n.id=0;n.el=null;n.dir=""},u=function(i,r){f();n.el=i;n.dir=r;var u=i.ddScrollConfig?i.ddScrollConfig.ddGroup:undefined,e=i.ddScrollConfig&&i.ddScrollConfig.frequency?i.ddScrollConfig.frequency:Ext.dd.ScrollManager.frequency;(u===undefined||t.dragCurrent.ddGroup==u)&&(n.id=setInterval(s,e))},h=function(e,o){var a,v,h,y;if(!o&&t.dragCurrent){a=Ext.dd.ScrollManager;r&&r==t.dragCurrent||(r=t.dragCurrent,a.refreshCache());v=Ext.lib.Event.getXY(e);h=new Ext.lib.Point(v[0],v[1]);for(y in i){var s=i[y],c=s._region,l=s.ddScrollConfig?s.ddScrollConfig:a;if(c&&c.contains(h)&&s.isScrollable()){if(c.bottom-h.y<=l.vthresh){n.el!=s&&u(s,"down");return}if(c.right-h.x<=l.hthresh){n.el!=s&&u(s,"left");return}if(h.y-c.top<=l.vthresh){n.el!=s&&u(s,"up");return}if(h.x-c.left<=l.hthresh){n.el!=s&&u(s,"right");return}}}f()}};return t.fireEvents=t.fireEvents.createSequence(h,t),t.stopDrag=t.stopDrag.createSequence(o,t),{register:function(n){if(Ext.isArray(n))for(var t=0,r=n.length;t<r;t++)this.register(n[t]);else n=Ext.get(n),i[n.id]=n},unregister:function(n){if(Ext.isArray(n))for(var t=0,r=n.length;t<r;t++)this.unregister(n[t]);else n=Ext.get(n),delete i[n.id]},vthresh:25,hthresh:25,increment:100,frequency:500,animate:!0,animDuration:.4,ddGroup:undefined,refreshCache:function(){for(var n in i)typeof i[n]=="object"&&(i[n]._region=i[n].getRegion())}}}();Ext.dd.Registry=function(){var t={},n={},r=0,i=function(n,t){if(typeof n=="string")return n;var i=n.id;return i||t===!1||(i="extdd-"+ ++r,n.id=i),i};return{register:function(r,u){var e,f,o;if(u=u||{},typeof r=="string"&&(r=document.getElementById(r)),u.ddel=r,t[i(r)]=u,u.isHandle!==!1&&(n[u.ddel.id]=u),u.handles)for(e=u.handles,f=0,o=e.length;f<o;f++)n[i(e[f])]=u},unregister:function(r){var o=i(r,!1),f=t[o],e,u,s;if(f&&(delete t[o],f.handles))for(e=f.handles,u=0,s=e.length;u<s;u++)delete n[i(e[u],!1)]},getHandle:function(t){return typeof t!="string"&&(t=t.id),n[t]},getHandleFromEvent:function(t){var i=Ext.lib.Event.getTarget(t);return i?n[i.id]:null},getTarget:function(n){return typeof n!="string"&&(n=n.id),t[n]},getTargetFromEvent:function(i){var r=Ext.lib.Event.getTarget(i);return r?t[r.id]||n[r.id]:null}}}();Ext.dd.StatusProxy=function(n){Ext.apply(this,n);this.id=this.id||Ext.id();this.el=new Ext.Layer({dh:{id:this.id,tag:"div",cls:"x-dd-drag-proxy "+this.dropNotAllowed,children:[{tag:"div",cls:"x-dd-drop-icon"},{tag:"div",cls:"x-dd-drag-ghost"}]},shadow:!n||n.shadow!==!1});this.ghost=Ext.get(this.el.dom.childNodes[1]);this.dropStatus=this.dropNotAllowed};Ext.dd.StatusProxy.prototype={dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(n){n=n||this.dropNotAllowed;this.dropStatus!=n&&(this.el.replaceClass(this.dropStatus,n),this.dropStatus=n)},reset:function(n){this.el.dom.className="x-dd-drag-proxy "+this.dropNotAllowed;this.dropStatus=this.dropNotAllowed;n&&this.ghost.update("")},update:function(n){typeof n=="string"?this.ghost.update(n):(this.ghost.update(""),n.style.margin="0",this.ghost.dom.appendChild(n));var t=this.ghost.dom.firstChild;t&&Ext.fly(t).setStyle("float","none")},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(n){this.el.hide();n&&this.reset(!0)},stop:function(){this.anim&&this.anim.isAnimated&&this.anim.isAnimated()&&this.anim.stop()},show:function(){this.el.show()},sync:function(){this.el.sync()},repair:function(n,t,i){this.callback=t;this.scope=i;n&&this.animRepair!==!1?(this.el.addClass("x-dd-drag-repair"),this.el.hideUnders(!0),this.anim=this.el.shift({duration:this.repairDuration||.5,easing:"easeOut",xy:n,stopFx:!0,callback:this.afterRepair,scope:this})):this.afterRepair()},afterRepair:function(){this.hide(!0);typeof this.callback=="function"&&this.callback.call(this.scope||this);this.callback=null;this.scope=null},destroy:function(){Ext.destroy(this.ghost,this.el)}};Ext.dd.DragSource=function(n,t){this.el=Ext.get(n);this.dragData||(this.dragData={});Ext.apply(this,t);this.proxy||(this.proxy=new Ext.dd.StatusProxy);Ext.dd.DragSource.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:!1,isTarget:!1,scroll:this.scroll===!0});this.dragging=!1};Ext.extend(Ext.dd.DragSource,Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",getDragData:function(){return this.dragData},onDragEnter:function(n,t){var i=Ext.dd.DragDropMgr.getDDById(t),r;this.cachedTarget=i;this.beforeDragEnter(i,n,t)!==!1&&(i.isNotifyTarget?(r=i.notifyEnter(this,n,this.dragData),this.proxy.setStatus(r)):this.proxy.setStatus(this.dropAllowed),this.afterDragEnter&&this.afterDragEnter(i,n,t))},beforeDragEnter:function(){return!0},alignElWithMouse:function(){Ext.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments);this.proxy.sync()},onDragOver:function(n,t){var i=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(t),r;this.beforeDragOver(i,n,t)!==!1&&(i.isNotifyTarget&&(r=i.notifyOver(this,n,this.dragData),this.proxy.setStatus(r)),this.afterDragOver&&this.afterDragOver(i,n,t))},beforeDragOver:function(){return!0},onDragOut:function(n,t){var i=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(t);this.beforeDragOut(i,n,t)!==!1&&(i.isNotifyTarget&&i.notifyOut(this,n,this.dragData),this.proxy.reset(),this.afterDragOut&&this.afterDragOut(i,n,t));this.cachedTarget=null},beforeDragOut:function(){return!0},onDragDrop:function(n,t){var i=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(t);if(this.beforeDragDrop(i,n,t)!==!1){if(i.isNotifyTarget)if(i.notifyDrop(this,n,this.dragData))this.onValidDrop(i,n,t);else this.onInvalidDrop(i,n,t);else this.onValidDrop(i,n,t);this.afterDragDrop&&this.afterDragDrop(i,n,t)}delete this.cachedTarget},beforeDragDrop:function(){return!0},onValidDrop:function(n,t,i){this.hideProxy();this.afterValidDrop&&this.afterValidDrop(n,t,i)},getRepairXY:function(){return this.el.getXY()},onInvalidDrop:function(n,t,i){this.beforeInvalidDrop(n,t,i);this.cachedTarget&&(this.cachedTarget.isNotifyTarget&&this.cachedTarget.notifyOut(this,t,this.dragData),this.cacheTarget=null);this.proxy.repair(this.getRepairXY(t,this.dragData),this.afterRepair,this);this.afterInvalidDrop&&this.afterInvalidDrop(t,i)},afterRepair:function(){Ext.enableFx&&this.el.highlight(this.hlColor||"c3daf9");this.dragging=!1},beforeInvalidDrop:function(){return!0},handleMouseDown:function(n){if(!this.dragging){var t=this.getDragData(n);t&&this.onBeforeDrag(t,n)!==!1&&(this.dragData=t,this.proxy.stop(),Ext.dd.DragSource.superclass.handleMouseDown.apply(this,arguments))}},onBeforeDrag:function(){return!0},onStartDrag:Ext.emptyFn,startDrag:function(n,t){this.proxy.reset();this.dragging=!0;this.proxy.update("");this.onInitDrag(n,t);this.proxy.show()},onInitDrag:function(n,t){var i=this.el.dom.cloneNode(!0);i.id=Ext.id();this.proxy.update(i);this.onStartDrag(n,t);return!0},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(!0);this.dragging=!1},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(){},endDrag:function(n){this.onEndDrag(this.dragData,n)},onEndDrag:function(){},autoOffset:function(){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DragSource.superclass.destroy.call(this);Ext.destroy(this.proxy)}});Ext.dd.DropTarget=Ext.extend(Ext.dd.DDTarget,{constructor:function(n,t){this.el=Ext.get(n);Ext.apply(this,t);this.containerScroll&&Ext.dd.ScrollManager.register(this.el);Ext.dd.DropTarget.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:!0})},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:!0,isNotifyTarget:!0,notifyEnter:function(){return this.overClass&&this.el.addClass(this.overClass),this.dropAllowed},notifyOver:function(){return this.dropAllowed},notifyOut:function(){this.overClass&&this.el.removeClass(this.overClass)},notifyDrop:function(){return!1},destroy:function(){Ext.dd.DropTarget.superclass.destroy.call(this);this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el)}});Ext.dd.DragZone=Ext.extend(Ext.dd.DragSource,{constructor:function(n,t){Ext.dd.DragZone.superclass.constructor.call(this,n,t);this.containerScroll&&Ext.dd.ScrollManager.register(this.el)},getDragData:function(n){return Ext.dd.Registry.getHandleFromEvent(n)},onInitDrag:function(n,t){this.proxy.update(this.dragData.ddel.cloneNode(!0));this.onStartDrag(n,t);return!0},afterRepair:function(){Ext.enableFx&&Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9");this.dragging=!1},getRepairXY:function(){return Ext.Element.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragZone.superclass.destroy.call(this);this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el)}});Ext.dd.DropZone=function(n,t){Ext.dd.DropZone.superclass.constructor.call(this,n,t)};Ext.extend(Ext.dd.DropZone,Ext.dd.DropTarget,{getTargetFromEvent:function(n){return Ext.dd.Registry.getTargetFromEvent(n)},onNodeEnter:function(){},onNodeOver:function(){return this.dropAllowed},onNodeOut:function(){},onNodeDrop:function(){return!1},onContainerOver:function(){return this.dropNotAllowed},onContainerDrop:function(){return!1},notifyEnter:function(){return this.dropNotAllowed},notifyOver:function(n,t,i){var r=this.getTargetFromEvent(t);if(!r){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,n,t,i);this.lastOverNode=null}return this.onContainerOver(n,t,i)}if(this.lastOverNode!=r){if(this.lastOverNode)this.onNodeOut(this.lastOverNode,n,t,i);this.onNodeEnter(r,n,t,i);this.lastOverNode=r}return this.onNodeOver(r,n,t,i)},notifyOut:function(n,t,i){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,n,t,i);this.lastOverNode=null}},notifyDrop:function(n,t,i){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,n,t,i);this.lastOverNode=null}var r=this.getTargetFromEvent(t);return r?this.onNodeDrop(r,n,t,i):this.onContainerDrop(n,t,i)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}});Ext.Element.addMethods({initDD:function(n,t,i){var r=new Ext.dd.DD(Ext.id(this.dom),n,t);return Ext.apply(r,i)},initDDProxy:function(n,t,i){var r=new Ext.dd.DDProxy(Ext.id(this.dom),n,t);return Ext.apply(r,i)},initDDTarget:function(n,t,i){var r=new Ext.dd.DDTarget(Ext.id(this.dom),n,t);return Ext.apply(r,i)}});Ext.data.Api=function(){var n={};return{actions:{create:"create",read:"read",update:"update",destroy:"destroy"},restActions:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},isAction:function(n){return Ext.data.Api.actions[n]?!0:!1},getVerb:function(t){if(n[t])return n[t];for(var i in this.actions)if(this.actions[i]===t){n[t]=i;break}return n[t]!==undefined?n[t]:null},isValid:function(n){var t=[],r=this.actions,i;for(i in n)i in r||t.push(i);return t.length?t:!0},hasUniqueUrl:function(n,t){var u=n.api[t]?n.api[t].url:null,r=!0,i;for(i in n.api)if((r=i===t?!0:n.api[i].url!=u?!0:!1)==!1)break;return r},prepare:function(n){var i,t;n.api||(n.api={});for(i in this.actions)t=this.actions[i],n.api[t]=n.api[t]||n.url||n.directFn,typeof n.api[t]=="string"&&(n.api[t]={url:n.api[t],method:n.restful===!0?Ext.data.Api.restActions[t]:undefined})},restify:function(n){n.restful=!0;for(var t in this.restActions)n.api[this.actions[t]].method||(n.api[this.actions[t]].method=this.restActions[t]);n.onWrite=n.onWrite.createInterceptor(function(n,t,i,r){var f=t.reader,u=new Ext.data.Response({action:n,raw:i});switch(i.status){case 200:return!0;case 201:if(Ext.isEmpty(u.raw.responseText))u.success=!0;else return!0;break;case 204:u.success=!0;u.data=null;break;default:return!0}return u.success===!0?this.fireEvent("write",this,n,u.data,u,r,t.request.arg):this.fireEvent("exception",this,"remote",n,t,u,r),t.request.callback.call(t.request.scope,u.data,u,u.success),!1},n)}}}();Ext.data.Response=function(n,t){Ext.apply(this,n,{raw:t})};Ext.data.Response.prototype={message:null,success:!1,status:null,root:null,raw:null,getMessage:function(){return this.message},getSuccess:function(){return this.success},getStatus:function(){return this.status},getRoot:function(){return this.root},getRawResponse:function(){return this.raw}};Ext.data.Api.Error=Ext.extend(Ext.Error,{constructor:function(n,t){this.arg=t;Ext.Error.call(this,n)},name:"Ext.data.Api"});Ext.apply(Ext.data.Api.Error.prototype,{lang:{"action-url-undefined":"No fallback url defined for this action.  When defining a DataProxy api, please be sure to define an url for each CRUD action in Ext.data.Api.actions or define a default url in addition to your api-configuration.",invalid:"received an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions defined in Ext.data.Api.actions","invalid-url":"Invalid url.  Please review your proxy configuration.",execute:'Attempted to execute an unknown action.  Valid API actions are defined in Ext.data.Api.actions"'}});Ext.data.SortTypes={none:function(n){return n},stripTagsRE:/<\/?[^>]+>/gi,asText:function(n){return String(n).replace(this.stripTagsRE,"")},asUCText:function(n){return String(n).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(n){return String(n).toUpperCase()},asDate:function(n){return n?Ext.isDate(n)?n.getTime():Date.parse(String(n)):0},asFloat:function(n){var t=parseFloat(String(n).replace(/,/g,""));return isNaN(t)?0:t},asInt:function(n){var t=parseInt(String(n).replace(/,/g,""),10);return isNaN(t)?0:t}};Ext.data.Record=function(n,t){this.id=t||t===0?t:Ext.data.Record.id(this);this.data=n||{}};Ext.data.Record.create=function(n){var i=Ext.extend(Ext.data.Record,{}),r=i.prototype,t,u;for(r.fields=new Ext.util.MixedCollection(!1,function(n){return n.name}),t=0,u=n.length;t<u;t++)r.fields.add(new Ext.data.Field(n[t]));return i.getField=function(n){return r.fields.get(n)},i};Ext.data.Record.PREFIX="ext-record";Ext.data.Record.AUTO_ID=1;Ext.data.Record.EDIT="edit";Ext.data.Record.REJECT="reject";Ext.data.Record.COMMIT="commit";Ext.data.Record.id=function(n){return n.phantom=!0,[Ext.data.Record.PREFIX,"-",Ext.data.Record.AUTO_ID++].join("")};Ext.data.Record.prototype={dirty:!1,editing:!1,error:null,modified:null,phantom:!1,join:function(n){this.store=n},set:function(n,t){var i=Ext.isPrimitive(t)?String:Ext.encode;i(this.data[n])!=i(t)&&(this.dirty=!0,this.modified||(this.modified={}),this.modified[n]===undefined&&(this.modified[n]=this.data[n]),this.data[n]=t,this.editing||this.afterEdit())},afterEdit:function(){this.store!=undefined&&typeof this.store.afterEdit=="function"&&this.store.afterEdit(this)},afterReject:function(){this.store&&this.store.afterReject(this)},afterCommit:function(){this.store&&this.store.afterCommit(this)},get:function(n){return this.data[n]},beginEdit:function(){this.editing=!0;this.modified=this.modified||{}},cancelEdit:function(){this.editing=!1;delete this.modified},endEdit:function(){this.editing=!1;this.dirty&&this.afterEdit()},reject:function(n){var i=this.modified,t;for(t in i)typeof i[t]!="function"&&(this.data[t]=i[t]);this.dirty=!1;delete this.modified;this.editing=!1;n!==!0&&this.afterReject()},commit:function(n){this.dirty=!1;delete this.modified;this.editing=!1;n!==!0&&this.afterCommit()},getChanges:function(){var t=this.modified,i={},n;for(n in t)t.hasOwnProperty(n)&&(i[n]=this.data[n]);return i},hasError:function(){return this.error!==null},clearError:function(){this.error=null},copy:function(n){return new this.constructor(Ext.apply({},this.data),n||this.id)},isModified:function(n){return!!(this.modified&&this.modified.hasOwnProperty(n))},isValid:function(){return this.fields.find(function(n){return n.allowBlank===!1&&Ext.isEmpty(this.data[n.name])?!0:!1},this)?!1:!0},markDirty:function(){this.dirty=!0;this.modified||(this.modified={});this.fields.each(function(n){this.modified[n.name]=this.data[n.name]},this)}};Ext.StoreMgr=Ext.apply(new Ext.util.MixedCollection,{register:function(){for(var n=0,t;t=arguments[n];n++)this.add(t)},unregister:function(){for(var n=0,t;t=arguments[n];n++)this.remove(this.lookup(t))},lookup:function(n){var i,r,t,u;if(Ext.isArray(n)){if(i=["field1"],r=!Ext.isArray(n[0]),!r)for(t=2,u=n[0].length;t<=u;++t)i.push("field"+t);return new Ext.data.ArrayStore({fields:i,data:n,expandData:r,autoDestroy:!0,autoCreated:!0})}return Ext.isObject(n)?n.events?n:Ext.create(n,"store"):this.get(n)},getKey:function(n){return n.storeId}});Ext.data.Store=Ext.extend(Ext.util.Observable,{writer:undefined,remoteSort:!1,autoDestroy:!1,pruneModifiedRecords:!1,lastOptions:null,autoSave:!0,batch:!0,restful:!1,paramNames:undefined,defaultParamNames:{start:"start",limit:"limit",sort:"sort",dir:"dir"},isDestroyed:!1,hasMultiSort:!1,batchKey:"_ext_batch_",constructor:function(n){if(this.data=new Ext.util.MixedCollection(!1),this.data.getKey=function(n){return n.id},this.removed=[],n&&n.data&&(this.inlineData=n.data,delete n.data),Ext.apply(this,n),this.baseParams=Ext.isObject(this.baseParams)?this.baseParams:{},this.paramNames=Ext.applyIf(this.paramNames||{},this.defaultParamNames),(this.url||this.api)&&!this.proxy&&(this.proxy=new Ext.data.HttpProxy({url:this.url,api:this.api})),this.restful===!0&&this.proxy&&(this.batch=!1,Ext.data.Api.restify(this.proxy)),this.reader&&(this.recordType||(this.recordType=this.reader.recordType),this.reader.onMetaChange&&(this.reader.onMetaChange=this.reader.onMetaChange.createSequence(this.onMetaChange,this)),this.writer&&(this.writer instanceof Ext.data.DataWriter==!1&&(this.writer=this.buildWriter(this.writer)),this.writer.meta=this.reader.meta,this.pruneModifiedRecords=!0)),this.recordType&&(this.fields=this.recordType.prototype.fields),this.modified=[],this.addEvents("datachanged","metachange","add","remove","update","clear","exception","beforeload","load","loadexception","beforewrite","write","beforesave","save"),this.proxy&&this.relayEvents(this.proxy,["loadexception","exception"]),this.writer)this.on({scope:this,add:this.createRecords,remove:this.destroyRecord,update:this.updateRecord,clear:this.onClear});this.sortToggle={};this.sortField?this.setDefaultSort(this.sortField,this.sortDir):this.sortInfo&&this.setDefaultSort(this.sortInfo.field,this.sortInfo.direction);Ext.data.Store.superclass.constructor.call(this);this.id&&(this.storeId=this.id,delete this.id);this.storeId&&Ext.StoreMgr.register(this);this.inlineData?(this.loadData(this.inlineData),delete this.inlineData):this.autoLoad&&this.load.defer(10,this,[typeof this.autoLoad=="object"?this.autoLoad:undefined]);this.batchCounter=0;this.batches={}},buildWriter:function(n){var t=undefined,i=(n.format||"json").toLowerCase();switch(i){case"json":t=Ext.data.JsonWriter;break;case"xml":t=Ext.data.XmlWriter;break;default:t=Ext.data.JsonWriter}return new t(n)},destroy:function(){this.isDestroyed||(this.storeId&&Ext.StoreMgr.unregister(this),this.clearData(),this.data=null,Ext.destroy(this.proxy),this.reader=this.writer=null,this.purgeListeners(),this.isDestroyed=!0)},add:function(n){var i,r,t,u;if(n=[].concat(n),!(n.length<1)){for(i=0,r=n.length;i<r;i++)t=n[i],t.join(this),(t.dirty||t.phantom)&&this.modified.push(t);u=this.data.length;this.data.addAll(n);this.snapshot&&this.snapshot.addAll(n);this.fireEvent("add",this,n,u)}},addSorted:function(n){var t=this.findInsertIndex(n);this.insert(t,n)},doUpdate:function(n){var t=n.id;this.getById(t).join(null);this.data.replace(t,n);this.snapshot&&this.snapshot.replace(t,n);n.join(this);this.fireEvent("update",this,n,Ext.data.Record.COMMIT)},remove:function(n){if(Ext.isArray(n)){Ext.each(n,function(n){this.remove(n)},this);return}var t=this.data.indexOf(n);t>-1&&(n.join(null),this.data.removeAt(t));this.pruneModifiedRecords&&this.modified.remove(n);this.snapshot&&this.snapshot.remove(n);t>-1&&this.fireEvent("remove",this,n,t)},removeAt:function(n){this.remove(this.getAt(n))},removeAll:function(n){var t=[];this.each(function(n){t.push(n)});this.clearData();this.snapshot&&this.snapshot.clear();this.pruneModifiedRecords&&(this.modified=[]);n!==!0&&this.fireEvent("clear",this,t)},onClear:function(n,t){Ext.each(t,function(n,t){this.destroyRecord(this,n,t)},this)},insert:function(n,t){var r,u,i;for(t=[].concat(t),r=0,u=t.length;r<u;r++)i=t[r],this.data.insert(n+r,i),i.join(this),(i.dirty||i.phantom)&&this.modified.push(i);this.snapshot&&this.snapshot.addAll(t);this.fireEvent("add",this,t,n)},indexOf:function(n){return this.data.indexOf(n)},indexOfId:function(n){return this.data.indexOfKey(n)},getById:function(n){return(this.snapshot||this.data).key(n)},getAt:function(n){return this.data.itemAt(n)},getRange:function(n,t){return this.data.getRange(n,t)},storeOptions:function(n){n=Ext.apply({},n);delete n.callback;delete n.scope;this.lastOptions=n},clearData:function(){this.data.each(function(n){n.join(null)});this.data.clear()},load:function(n){if(n=Ext.apply({},n),this.storeOptions(n),this.sortInfo&&this.remoteSort){var t=this.paramNames;n.params=Ext.apply({},n.params);n.params[t.sort]=this.sortInfo.field;n.params[t.dir]=this.sortInfo.direction}try{return this.execute("read",null,n)}catch(i){return this.handleException(i),!1}},updateRecord:function(n,t,i){i==Ext.data.Record.EDIT&&this.autoSave===!0&&(!t.phantom||t.phantom&&t.isValid())&&this.save()},createRecords:function(n,t){for(var u=this.modified,f=t.length,i,r=0;r<f;r++)i=t[r],i.phantom&&i.isValid()&&(i.markDirty(),u.indexOf(i)==-1&&u.push(i));this.autoSave===!0&&this.save()},destroyRecord:function(n,t,i){this.modified.indexOf(t)!=-1&&this.modified.remove(t);t.phantom||(this.removed.push(t),t.lastIndex=i,this.autoSave===!0&&this.save())},execute:function(n,t,i,r){if(!Ext.data.Api.isAction(n))throw new Ext.data.Api.Error("execute",n);i=Ext.applyIf(i||{},{params:{}});r!==undefined&&this.addToBatch(r);var u=!0;return n==="read"?(u=this.fireEvent("beforeload",this,i),Ext.applyIf(i.params,this.baseParams)):(this.writer.listful===!0&&this.restful!==!0?t=Ext.isArray(t)?t:[t]:Ext.isArray(t)&&t.length==1&&(t=t.shift()),(u=this.fireEvent("beforewrite",this,n,t,i))!==!1&&this.writer.apply(i.params,this.baseParams,n,t)),u!==!1&&(this.writer&&this.proxy.url&&!this.proxy.restful&&!Ext.data.Api.hasUniqueUrl(this.proxy,n)&&(i.params.xaction=n),this.proxy.request(Ext.data.Api.actions[n],t,i.params,this.reader,this.createCallback(n,t,r),this,i)),u},save:function(){var i,u,r,e,o,n,t,f,s;if(!this.writer)throw new Ext.data.Store.Error("writer-undefined");if(i=[],o={},this.removed.length&&i.push(["destroy",this.removed]),t=[].concat(this.getModifiedRecords()),t.length){for(f=[],n=t.length-1;n>=0;n--)t[n].phantom===!0?(s=t.splice(n,1).shift(),s.isValid()&&f.push(s)):t[n].isValid()||t.splice(n,1);f.length&&i.push(["create",f]);t.length&&i.push(["update",t])}if(u=i.length,u){for(e=++this.batchCounter,n=0;n<u;++n)r=i[n],o[r[0]]=r[1];if(this.fireEvent("beforesave",this,o)!==!1){for(n=0;n<u;++n)r=i[n],this.doTransaction(r[0],r[1],e);return e}}return-1},doTransaction:function(n,t,i){function u(t){try{this.execute(n,t,undefined,i)}catch(r){this.handleException(r)}}if(this.batch===!1)for(var r=0,f=t.length;r<f;r++)u.call(this,t[r]);else u.call(this,t)},addToBatch:function(n){var i=this.batches,r=this.batchKey+n,t=i[r];t||(i[r]=t={id:n,count:0,data:{}});++t.count},removeFromBatch:function(n,t,i){var u=this.batches,f=this.batchKey+n,r=u[f],e;r&&(e=r.data[t]||[],r.data[t]=e.concat(i),r.count===1?(i=r.data,delete u[f],this.fireEvent("save",this,n,i)):--r.count)},createCallback:function(n,t,i){var r=Ext.data.Api.actions;return n=="read"?this.loadRecords:function(r,u,f){this["on"+Ext.util.Format.capitalize(n)+"Records"](f,t,[].concat(r));f===!0&&this.fireEvent("write",this,n,r,u,t);this.removeFromBatch(i,n,r)}},clearModified:function(n){if(Ext.isArray(n))for(var t=n.length-1;t>=0;t--)this.modified.splice(this.modified.indexOf(n[t]),1);else this.modified.splice(this.modified.indexOf(n),1)},reMap:function(n){var t,i,r;if(Ext.isArray(n))for(t=0,i=n.length;t<i;t++)this.reMap(n[t]);else delete this.data.map[n._phid],this.data.map[n.id]=n,r=this.data.keys.indexOf(n._phid),this.data.keys.splice(r,1,n.id),delete n._phid},onCreateRecords:function(n,t,i){if(n===!0)try{this.reader.realize(t,i)}catch(r){if(this.handleException(r),Ext.isArray(t))this.onCreateRecords(n,t,i)}},onUpdateRecords:function(n,t,i){if(n===!0)try{this.reader.update(t,i)}catch(r){if(this.handleException(r),Ext.isArray(t))this.onUpdateRecords(n,t,i)}},onDestroyRecords:function(n,t){t=t instanceof Ext.data.Record?[t]:[].concat(t);for(var i=0,r=t.length;i<r;i++)this.removed.splice(this.removed.indexOf(t[i]),1);if(n===!1)for(i=t.length-1;i>=0;i--)this.insert(t[i].lastIndex,t[i])},handleException:function(n){Ext.handleError(n)},reload:function(n){this.load(Ext.applyIf(n||{},this.lastOptions))},loadRecords:function(n,t,i){var u,f,r,o,s,e,h;if(this.isDestroyed!==!0){if(!n||i===!1){i!==!1&&this.fireEvent("load",this,[],t);t.callback&&t.callback.call(t.scope||this,[],t,!1,n);return}if(r=n.records,o=n.totalRecords||r.length,t&&t.add===!0){for(s=[],h=0,u=0,f=r.length;u<f;++u)e=r[u],this.indexOfId(e.id)>-1?this.doUpdate(e):(s.push(e),++h);this.totalLength=Math.max(o,this.data.length+h);this.add(s)}else{for(this.pruneModifiedRecords&&(this.modified=[]),u=0,f=r.length;u<f;u++)r[u].join(this);this.snapshot&&(this.data=this.snapshot,delete this.snapshot);this.clearData();this.data.addAll(r);this.totalLength=o;this.applySort();this.fireEvent("datachanged",this)}this.fireEvent("load",this,r,t);t.callback&&t.callback.call(t.scope||this,r,t,!0)}},loadData:function(n,t){var i=this.reader.readRecords(n);this.loadRecords(i,{add:t},!0)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalLength||0},getSortState:function(){return this.sortInfo},applySort:function(){(this.sortInfo||this.multiSortInfo)&&!this.remoteSort&&this.sortData()},sortData:function(){var u=this.hasMultiSort?this.multiSortInfo:this.sortInfo,i=u.direction||"ASC",r=u.sorters,n=[],t,e,o,f;for(this.hasMultiSort||(r=[{direction:i,field:u.field}]),t=0,e=r.length;t<e;t++)n.push(this.createSortFunction(r[t].field,r[t].direction));n.length!=0&&(o=i.toUpperCase()=="DESC"?-1:1,f=function(t,i){var u=n[0].call(this,t,i),r,f;if(n.length>1)for(r=1,f=n.length;r<f;r++)u=u||n[r].call(this,t,i);return o*u},this.data.sort(i,f),this.snapshot&&this.snapshot!=this.data&&this.snapshot.sort(i,f))},createSortFunction:function(n,t){t=t||"ASC";var r=t.toUpperCase()=="DESC"?-1:1,i=this.fields.get(n).sortType;return function(t,u){var f=i(t.data[n]),e=i(u.data[n]);return r*(f>e?1:f<e?-1:0)}},setDefaultSort:function(n,t){t=t?t.toUpperCase():"ASC";this.sortInfo={field:n,direction:t};this.sortToggle[n]=t},sort:function(n,t){return Ext.isArray(arguments[0])?this.multiSort.call(this,n,t):this.singleSort(n,t)},singleSort:function(n,t){var u=this.fields.get(n);if(!u)return!1;var i=u.name,r=this.sortInfo||null,f=this.sortToggle?this.sortToggle[i]:null;return t||(t=r&&r.field==i?(this.sortToggle[i]||"ASC").toggle("ASC","DESC"):u.sortDir),this.sortToggle[i]=t,this.sortInfo={field:i,direction:t},this.hasMultiSort=!1,this.remoteSort?this.load(this.lastOptions)||(f&&(this.sortToggle[i]=f),r&&(this.sortInfo=r)):(this.applySort(),this.fireEvent("datachanged",this)),!0},multiSort:function(n,t){this.hasMultiSort=!0;t=t||"ASC";this.multiSortInfo&&t==this.multiSortInfo.direction&&(t=t.toggle("ASC","DESC"));this.multiSortInfo={sorters:n,direction:t};this.remoteSort?this.singleSort(n[0].field,n[0].direction):(this.applySort(),this.fireEvent("datachanged",this))},each:function(n,t){this.data.each(n,t)},getModifiedRecords:function(){return this.modified},sum:function(n,t,i){var u=this.data.items,f=0,r;for(t=t||0,i=i||i===0?i:u.length-1,r=t;r<=i;r++)f+=u[r].data[n]||0;return f},createFilterFn:function(n,t,i,r,u){return Ext.isEmpty(t,!1)?!1:(t=this.data.createValueMatcher(t,i,r,u),function(i){return t.test(i.data[n])})},createMultipleFilterFn:function(n){return function(t){for(var r=!0,i=0,u=n.length;i<u;i++){var f=n[i],e=f.fn,o=f.scope;r=r&&e.call(o,t)}return r}},filter:function(n,t,i,r,u){var e,s,o,c;if(Ext.isObject(n)&&(n=[n]),Ext.isArray(n)){for(s=[],o=0,c=n.length;o<c;o++){var f=n[o],h=f.fn,l=f.scope||this;Ext.isFunction(h)||(h=this.createFilterFn(f.property,f.value,f.anyMatch,f.caseSensitive,f.exactMatch));s.push({fn:h,scope:l})}e=this.createMultipleFilterFn(s)}else e=this.createFilterFn(n,t,i,r,u);return e?this.filterBy(e):this.clearFilter()},filterBy:function(n,t){this.snapshot=this.snapshot||this.data;this.data=this.queryBy(n,t||this);this.fireEvent("datachanged",this)},clearFilter:function(n){this.isFiltered()&&(this.data=this.snapshot,delete this.snapshot,n!==!0&&this.fireEvent("datachanged",this))},isFiltered:function(){return!!this.snapshot&&this.snapshot!=this.data},query:function(n,t,i,r){var u=this.createFilterFn(n,t,i,r);return u?this.queryBy(u):this.data.clone()},queryBy:function(n,t){var i=this.snapshot||this.data;return i.filterBy(n,t||this)},find:function(n,t,i,r,u){var f=this.createFilterFn(n,t,r,u);return f?this.data.findIndexBy(f,null,i):-1},findExact:function(n,t,i){return this.data.findIndexBy(function(i){return i.get(n)===t},this,i)},findBy:function(n,t,i){return this.data.findIndexBy(n,t,i)},collect:function(n,t,i){for(var o=i===!0&&this.snapshot?this.snapshot.items:this.data.items,r,f,e=[],s={},u=0,h=o.length;u<h;u++)r=o[u].data[n],f=String(r),!t&&Ext.isEmpty(r)||s[f]||(s[f]=!0,e[e.length]=r);return e},afterEdit:function(n){this.modified.indexOf(n)==-1&&this.modified.push(n);this.fireEvent("update",this,n,Ext.data.Record.EDIT)},afterReject:function(n){this.modified.remove(n);this.fireEvent("update",this,n,Ext.data.Record.REJECT)},afterCommit:function(n){this.modified.remove(n);this.fireEvent("update",this,n,Ext.data.Record.COMMIT)},commitChanges:function(){for(var t=this.modified.slice(0),i=t.length,n=0;n<i;n++)t[n].commit();this.modified=[];this.removed=[]},rejectChanges:function(){for(var i=this.modified.slice(0),t=this.removed.slice(0).reverse(),r=i.length,u=t.length,n=0;n<r;n++)i[n].reject();for(n=0;n<u;n++)this.insert(t[n].lastIndex||0,t[n]),t[n].reject();this.modified=[];this.removed=[]},onMetaChange:function(){this.recordType=this.reader.recordType;this.fields=this.recordType.prototype.fields;delete this.snapshot;this.reader.meta.sortInfo?this.sortInfo=this.reader.meta.sortInfo:this.sortInfo&&!this.fields.get(this.sortInfo.field)&&delete this.sortInfo;this.writer&&(this.writer.meta=this.reader.meta);this.modified=[];this.fireEvent("metachange",this,this.reader.meta)},findInsertIndex:function(n){var t,i;return this.suspendEvents(),t=this.data.clone(),this.data.add(n),this.applySort(),i=this.data.indexOf(n),this.data=t,this.resumeEvents(),i},setBaseParam:function(n,t){this.baseParams=this.baseParams||{};this.baseParams[n]=t}});Ext.reg("store",Ext.data.Store);Ext.data.Store.Error=Ext.extend(Ext.Error,{name:"Ext.data.Store"});Ext.apply(Ext.data.Store.Error.prototype,{lang:{"writer-undefined":"Attempted to execute a write-action without a DataWriter installed."}});Ext.data.Field=Ext.extend(Object,{constructor:function(n){Ext.isString(n)&&(n={name:n});Ext.apply(this,n);var i=Ext.data.Types,t=this.sortType;this.type?Ext.isString(this.type)&&(this.type=Ext.data.Types[this.type.toUpperCase()]||i.AUTO):this.type=i.AUTO;Ext.isString(t)?this.sortType=Ext.data.SortTypes[t]:Ext.isEmpty(t)&&(this.sortType=this.type.sortType);this.convert||(this.convert=this.type.convert)},dateFormat:null,useNull:!1,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC",allowBlank:!0});Ext.data.DataReader=function(n,t){this.meta=n;this.recordType=Ext.isArray(t)?Ext.data.Record.create(t):t;this.recordType&&this.buildExtractors()};Ext.data.DataReader.prototype={getTotal:Ext.emptyFn,getRoot:Ext.emptyFn,getMessage:Ext.emptyFn,getSuccess:Ext.emptyFn,getId:Ext.emptyFn,buildExtractors:Ext.emptyFn,extractValues:Ext.emptyFn,realize:function(n,t){if(Ext.isArray(n))for(var i=n.length-1;i>=0;i--)Ext.isArray(t)?this.realize(n.splice(i,1).shift(),t.splice(i,1).shift()):this.realize(n.splice(i,1).shift(),t);else{if(Ext.isArray(t)&&t.length==1&&(t=t.shift()),!this.isData(t))throw new Ext.data.DataReader.Error("realize",n);n.phantom=!1;n._phid=n.id;n.id=this.getId(t);n.data=t;n.commit();n.store.reMap(n)}},update:function(n,t){if(Ext.isArray(n))for(var i=n.length-1;i>=0;i--)Ext.isArray(t)?this.update(n.splice(i,1).shift(),t.splice(i,1).shift()):this.update(n.splice(i,1).shift(),t);else Ext.isArray(t)&&t.length==1&&(t=t.shift()),this.isData(t)&&(n.data=Ext.apply(n.data,t)),n.commit()},extractData:function(n,t){var l=this instanceof Ext.data.JsonReader?"json":"node",r=[],c,u,f,i,e;!this.isData(n)||this instanceof Ext.data.XmlReader||(n=[n]);var o=this.recordType.prototype.fields,s=o.items,h=o.length,r=[];if(t===!0)for(c=this.recordType,i=0;i<n.length;i++)u=n[i],f=new c(this.extractValues(u,s,h),this.getId(u)),f[l]=u,r.push(f);else for(i=0;i<n.length;i++)e=this.extractValues(n[i],s,h),e[this.meta.idProperty]=this.getId(n[i]),r.push(e);return r},isData:function(n){return n&&Ext.isObject(n)&&!Ext.isEmpty(this.getId(n))?!0:!1},onMetaChange:function(n){delete this.ef;this.meta=n;this.recordType=Ext.data.Record.create(n.fields);this.buildExtractors()}};Ext.data.DataReader.Error=Ext.extend(Ext.Error,{constructor:function(n,t){this.arg=t;Ext.Error.call(this,n)},name:"Ext.data.DataReader"});Ext.apply(Ext.data.DataReader.Error.prototype,{lang:{update:"#update received invalid data from server.  Please see docs for DataReader#update and review your DataReader configuration.",realize:"#realize was called with invalid remote-data.  Please see the docs for DataReader#realize and review your DataReader configuration.","invalid-response":"#readResponse received an invalid response from the server."}});Ext.data.DataWriter=function(n){Ext.apply(this,n)};Ext.data.DataWriter.prototype={writeAllFields:!1,listful:!1,apply:function(n,t,i,r){var u=[],f=i+"Record";Ext.isArray(r)?Ext.each(r,function(n){u.push(this[f](n))},this):r instanceof Ext.data.Record&&(u=this[f](r));this.render(n,t,u)},render:Ext.emptyFn,updateRecord:Ext.emptyFn,createRecord:Ext.emptyFn,destroyRecord:Ext.emptyFn,toHash:function(n){var r=n.fields.map,t={},u=this.writeAllFields===!1&&n.phantom===!1?n.getChanges():n.data,i;return Ext.iterate(u,function(n,u){(i=r[n])&&(t[i.mapping?i.mapping:i.name]=u)}),n.phantom?n.fields.containsKey(this.meta.idProperty)&&Ext.isEmpty(n.data[this.meta.idProperty])&&delete t[this.meta.idProperty]:t[this.meta.idProperty]=n.id,t},toArray:function(n){var t=[];return Ext.iterate(n,function(n,i){t.push({name:n,value:i})},this),t}};Ext.data.DataProxy=function(n){n=n||{};this.api=n.api;this.url=n.url;this.restful=n.restful;this.listeners=n.listeners;this.prettyUrls=n.prettyUrls;this.addEvents("exception","beforeload","load","loadexception","beforewrite","write");Ext.data.DataProxy.superclass.constructor.call(this);try{Ext.data.Api.prepare(this)}catch(t){t instanceof Ext.data.Api.Error&&t.toConsole()}Ext.data.DataProxy.relayEvents(this,["beforewrite","write","exception"])};Ext.extend(Ext.data.DataProxy,Ext.util.Observable,{restful:!1,setApi:function(){if(arguments.length==1){var n=Ext.data.Api.isValid(arguments[0]);if(n===!0)this.api=arguments[0];else throw new Ext.data.Api.Error("invalid",n);}else if(arguments.length==2){if(!Ext.data.Api.isAction(arguments[0]))throw new Ext.data.Api.Error("invalid",arguments[0]);this.api[arguments[0]]=arguments[1]}Ext.data.Api.prepare(this)},isApiAction:function(n){return this.api[n]?!0:!1},request:function(n,t,i,r,u,f,e){if(!this.api[n]&&!this.load)throw new Ext.data.DataProxy.Error("action-undefined",n);i=i||{};(n===Ext.data.Api.actions.read?this.fireEvent("beforeload",this,i):this.fireEvent("beforewrite",this,n,t,i)!==!1)?this.doRequest.apply(this,arguments):u.call(f||this,null,e,!1)},load:null,doRequest:function(n,t,i,r,u,f,e){this.load(i,r,u,f,e)},onRead:Ext.emptyFn,onWrite:Ext.emptyFn,buildUrl:function(n,t){var i,r,u;if(t=t||null,i=this.conn&&this.conn.url?this.conn.url:this.api[n]?this.api[n].url:this.url,!i)throw new Ext.data.Api.Error("invalid-url",n);return r=null,u=i.match(/(.*)(\.json|\.xml|\.html)$/),u&&(r=u[2],i=u[1]),(this.restful===!0||this.prettyUrls===!0)&&t instanceof Ext.data.Record&&!t.phantom&&(i+="/"+t.id),r===null?i:i+r},destroy:function(){this.purgeListeners()}});Ext.apply(Ext.data.DataProxy,Ext.util.Observable.prototype);Ext.util.Observable.call(Ext.data.DataProxy);Ext.data.DataProxy.Error=Ext.extend(Ext.Error,{constructor:function(n,t){this.arg=t;Ext.Error.call(this,n)},name:"Ext.data.DataProxy"});Ext.apply(Ext.data.DataProxy.Error.prototype,{lang:{"action-undefined":"DataProxy attempted to execute an API-action but found an undefined url / function.  Please review your Proxy url/api-configuration.","api-invalid":"Recieved an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions from Ext.data.Api.actions."}});Ext.data.Request=function(n){Ext.apply(this,n)};Ext.data.Request.prototype={action:undefined,rs:undefined,params:undefined,callback:Ext.emptyFn,scope:undefined,reader:undefined};Ext.data.Response=function(n){Ext.apply(this,n)};Ext.data.Response.prototype={action:undefined,success:undefined,message:undefined,data:undefined,raw:undefined,records:undefined};Ext.data.ScriptTagProxy=function(n){Ext.apply(this,n);Ext.data.ScriptTagProxy.superclass.constructor.call(this,n);this.head=document.getElementsByTagName("head")[0]};Ext.data.ScriptTagProxy.TRANS_ID=1e3;Ext.extend(Ext.data.ScriptTagProxy,Ext.data.DataProxy,{timeout:3e4,callbackParam:"callback",nocache:!0,doRequest:function(n,t,i,r,u,f,e){var l=Ext.urlEncode(Ext.apply(i,this.extraParams)),o=this.buildUrl(n,t),c,s,h;if(!o)throw new Ext.data.Api.Error("invalid-url",o);o=Ext.urlAppend(o,l);this.nocache&&(o=Ext.urlAppend(o,"_dc="+(new Date).getTime()));c=++Ext.data.ScriptTagProxy.TRANS_ID;s={id:c,action:n,cb:"stcCallback"+c,scriptId:"stcScript"+c,params:i,arg:e,url:o,callback:u,scope:f,reader:r};window[s.cb]=this.createCallback(n,t,s);o+=String.format("&{0}={1}",this.callbackParam,s.cb);this.autoAbort!==!1&&this.abort();s.timeoutId=this.handleFailure.defer(this.timeout,this,[s]);h=document.createElement("script");h.setAttribute("src",o);h.setAttribute("type","text/javascript");h.setAttribute("id",s.scriptId);this.head.appendChild(h);this.trans=s},createCallback:function(n,t,i){var r=this;return function(u){r.trans=!1;r.destroyTrans(i,!0);n===Ext.data.Api.actions.read?r.onRead.call(r,n,i,u):r.onWrite.call(r,n,i,u,t)}},onRead:function(n,t,i){var r;try{r=t.reader.readRecords(i)}catch(u){this.fireEvent("loadexception",this,t,i,u);this.fireEvent("exception",this,"response",n,t,i,u);t.callback.call(t.scope||window,null,t.arg,!1);return}r.success===!1?(this.fireEvent("loadexception",this,t,i),this.fireEvent("exception",this,"remote",n,t,i,null)):this.fireEvent("load",this,i,t.arg);t.callback.call(t.scope||window,r,t.arg,r.success)},onWrite:function(n,t,i,r){var f=t.reader,u;try{u=f.readResponse(n,i)}catch(e){this.fireEvent("exception",this,"response",n,t,u,e);t.callback.call(t.scope||window,null,u,!1);return}if(!u.success==!0){this.fireEvent("exception",this,"remote",n,t,u,r);t.callback.call(t.scope||window,null,u,!1);return}this.fireEvent("write",this,n,u.data,u,r,t.arg);t.callback.call(t.scope||window,u.data,u,!0)},isLoading:function(){return this.trans?!0:!1},abort:function(){this.isLoading()&&this.destroyTrans(this.trans)},destroyTrans:function(n,t){if(this.head.removeChild(document.getElementById(n.scriptId)),clearTimeout(n.timeoutId),t){window[n.cb]=undefined;try{delete window[n.cb]}catch(i){}}else window[n.cb]=function(){window[n.cb]=undefined;try{delete window[n.cb]}catch(t){}}},handleFailure:function(n){this.trans=!1;this.destroyTrans(n,!1);n.action===Ext.data.Api.actions.read&&this.fireEvent("loadexception",this,null,n.arg);this.fireEvent("exception",this,"response",n.action,{response:null,options:n.arg});n.callback.call(n.scope||window,null,n.arg,!1)},destroy:function(){this.abort();Ext.data.ScriptTagProxy.superclass.destroy.call(this)}});Ext.data.HttpProxy=function(n){var t,i;Ext.data.HttpProxy.superclass.constructor.call(this,n);this.conn=n;this.conn.url=null;this.useAjax=!n||!n.events;t=Ext.data.Api.actions;this.activeRequest={};for(i in t)this.activeRequest[t[i]]=undefined};Ext.extend(Ext.data.HttpProxy,Ext.data.DataProxy,{getConnection:function(){return this.useAjax?Ext.Ajax:this.conn},setUrl:function(n,t){this.conn.url=n;t===!0&&(this.url=n,this.api=null,Ext.data.Api.prepare(this))},doRequest:function(n,t,i,r,u,f,e){var o={method:this.api[n]?this.api[n].method:undefined,request:{callback:u,scope:f,arg:e},reader:r,callback:this.createCallback(n,t),scope:this};i.jsonData?o.jsonData=i.jsonData:i.xmlData?o.xmlData=i.xmlData:o.params=i||{};this.conn.url=this.buildUrl(n,t);this.useAjax?(Ext.applyIf(o,this.conn),n==Ext.data.Api.actions.read&&this.activeRequest[n]&&Ext.Ajax.abort(this.activeRequest[n]),this.activeRequest[n]=Ext.Ajax.request(o)):this.conn.request(o);this.conn.url=null},createCallback:function(n,t){return function(i,r,u){if(this.activeRequest[n]=undefined,!r){n===Ext.data.Api.actions.read&&this.fireEvent("loadexception",this,i,u);this.fireEvent("exception",this,"response",n,i,u);i.request.callback.call(i.request.scope,null,i.request.arg,!1);return}if(n===Ext.data.Api.actions.read)this.onRead(n,i,u);else this.onWrite(n,i,u,t)}},onRead:function(n,t,i){var r,f;try{r=t.reader.read(i)}catch(u){this.fireEvent("loadexception",this,t,i,u);this.fireEvent("exception",this,"response",n,t,i,u);t.request.callback.call(t.request.scope,null,t.request.arg,!1);return}r.success===!1?(this.fireEvent("loadexception",this,t,i),f=t.reader.readResponse(n,i),this.fireEvent("exception",this,"remote",n,t,f,null)):this.fireEvent("load",this,t,t.request.arg);t.request.callback.call(t.request.scope,r,t.request.arg,r.success)},onWrite:function(n,t,i,r){var f=t.reader,u;try{u=f.readResponse(n,i)}catch(e){this.fireEvent("exception",this,"response",n,t,i,e);t.request.callback.call(t.request.scope,null,t.request.arg,!1);return}u.success===!0?this.fireEvent("write",this,n,u.data,u,r,t.request.arg):this.fireEvent("exception",this,"remote",n,t,u,r);t.request.callback.call(t.request.scope,u.data,u,u.success)},destroy:function(){var n,t;if(this.useAjax){if(this.activeRequest){n=Ext.data.Api.actions;for(t in n)this.activeRequest[n[t]]&&Ext.Ajax.abort(this.activeRequest[n[t]])}}else this.conn.abort();Ext.data.HttpProxy.superclass.destroy.call(this)}});Ext.data.MemoryProxy=function(n){var t={};t[Ext.data.Api.actions.read]=!0;Ext.data.MemoryProxy.superclass.constructor.call(this,{api:t});this.data=n};Ext.extend(Ext.data.MemoryProxy,Ext.data.DataProxy,{doRequest:function(n,t,i,r,u,f,e){i=i||{};var o;try{o=r.readRecords(this.data)}catch(s){this.fireEvent("loadexception",this,null,e,s);this.fireEvent("exception",this,"response",n,e,null,s);u.call(f,null,e,!1);return}u.call(f,o,e,!0)}});Ext.data.Types=new function(){var n=Ext.data.SortTypes;Ext.apply(this,{stripRe:/[\$,%]/g,AUTO:{convert:function(n){return n},sortType:n.none,type:"auto"},STRING:{convert:function(n){return n===undefined||n===null?"":String(n)},sortType:n.asUCString,type:"string"},INT:{convert:function(n){return n!==undefined&&n!==null&&n!==""?parseInt(String(n).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:n.none,type:"int"},FLOAT:{convert:function(n){return n!==undefined&&n!==null&&n!==""?parseFloat(String(n).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:n.none,type:"float"},BOOL:{convert:function(n){return n===!0||n==="true"||n==1},sortType:n.none,type:"bool"},DATE:{convert:function(n){var t=this.dateFormat,i;return n?Ext.isDate(n)?n:t?t=="timestamp"?new Date(n*1e3):t=="time"?new Date(parseInt(n,10)):Date.parseDate(n,t):(i=Date.parse(n),i?new Date(i):null):null},sortType:n.asDate,type:"date"}});Ext.apply(this,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})};Ext.data.JsonWriter=Ext.extend(Ext.data.DataWriter,{encode:!0,encodeDelete:!1,constructor:function(n){Ext.data.JsonWriter.superclass.constructor.call(this,n)},render:function(n,t,i){if(this.encode===!0)Ext.apply(n,t),n[this.meta.root]=Ext.encode(i);else{var r=Ext.apply({},t);r[this.meta.root]=i;n.jsonData=r}},createRecord:function(n){return this.toHash(n)},updateRecord:function(n){return this.toHash(n)},destroyRecord:function(n){if(this.encodeDelete){var t={};return t[this.meta.idProperty]=n.id,t}return n.id}});Ext.data.JsonReader=function(n,t){n=n||{};Ext.applyIf(n,{idProperty:"id",successProperty:"success",totalProperty:"total"});Ext.data.JsonReader.superclass.constructor.call(this,n,t||n.fields)};Ext.extend(Ext.data.JsonReader,Ext.data.DataReader,{read:function(n){var i=n.responseText,t=Ext.decode(i);if(!t)throw{message:"JsonReader.read: Json object not found"};return this.readRecords(t)},readResponse:function(n,t){var i=t.responseText!==undefined?Ext.decode(t.responseText):t,r,u,f,e;if(!i)throw new Ext.data.JsonReader.Error("response");if(r=this.getRoot(i),u=this.getSuccess(i),u&&n===Ext.data.Api.actions.create)if(f=Ext.isDefined(r),f&&Ext.isEmpty(r))throw new Ext.data.JsonReader.Error("root-empty",this.meta.root);else if(!f)throw new Ext.data.JsonReader.Error("root-undefined-response",this.meta.root);if(e=new Ext.data.Response({action:n,success:u,data:r?this.extractData(r,!1):[],message:this.getMessage(i),raw:i}),Ext.isEmpty(e.success))throw new Ext.data.JsonReader.Error("successProperty-response",this.meta.successProperty);return e},readRecords:function(n){if(this.jsonData=n,n.metaData)this.onMetaChange(n.metaData);var i=this.meta,o=this.recordType,r=o.prototype.fields,h=r.items,c=r.length,t,u=this.getRoot(n),s=u.length,f=s,e=!0;return i.totalProperty&&(t=parseInt(this.getTotal(n),10),isNaN(t)||(f=t)),i.successProperty&&(t=this.getSuccess(n),(t===!1||t==="false")&&(e=!1)),{success:e,records:this.extractData(u,!0),totalRecords:f}},buildExtractors:function(){var u,r,i,f;if(!this.ef){var n=this.meta,e=this.recordType,t=e.prototype.fields,o=t.items,s=t.length;for(n.totalProperty&&(this.getTotal=this.createAccessor(n.totalProperty)),n.successProperty&&(this.getSuccess=this.createAccessor(n.successProperty)),n.messageProperty&&(this.getMessage=this.createAccessor(n.messageProperty)),this.getRoot=n.root?this.createAccessor(n.root):function(n){return n},n.id||n.idProperty?(u=this.createAccessor(n.id||n.idProperty),this.getId=function(n){var t=u(n);return t===undefined||t===""?null:t}):this.getId=function(){return null},r=[],i=0;i<s;i++)t=o[i],f=t.mapping!==undefined&&t.mapping!==null?t.mapping:t.name,r.push(this.createAccessor(f));this.ef=r}},simpleAccess:function(n,t){return n[t]},createAccessor:function(){var n=/[\[\.]/;return function(t){if(Ext.isEmpty(t))return Ext.emptyFn;if(Ext.isFunction(t))return t;var i=String(t).search(n);return i>=0?new Function("obj","return obj"+(i>0?".":"")+t):function(n){return n[t]}}}(),extractValues:function(n,t,i){for(var u,e={},f,r=0;r<i;r++)u=t[r],f=this.ef[r](n),e[u.name]=u.convert(f!==undefined?f:u.defaultValue,n);return e}});Ext.data.JsonReader.Error=Ext.extend(Ext.Error,{constructor:function(n,t){this.arg=t;Ext.Error.call(this,n)},name:"Ext.data.JsonReader"});Ext.apply(Ext.data.JsonReader.Error.prototype,{lang:{response:"An error occurred while json-decoding your server response","successProperty-response":'Could not locate your "successProperty" in your server response.  Please review your JsonReader config to ensure the config-property "successProperty" matches the property in your server-response.  See the JsonReader docs.',"root-undefined-config":'Your JsonReader was configured without a "root" property.  Please review your JsonReader config and make sure to define the root property.  See the JsonReader docs.',"idProperty-undefined":'Your JsonReader was configured without an "idProperty"  Please review your JsonReader configuration and ensure the "idProperty" is set (e.g.: "id").  See the JsonReader docs.',"root-empty":'Data was expected to be returned by the server in the "root" property of the response.  Please review your JsonReader configuration to ensure the "root" property matches that returned in the server-response.  See JsonReader docs.'}});Ext.data.ArrayReader=Ext.extend(Ext.data.JsonReader,{readRecords:function(n){var s,w,e,k,r,h,c,l;this.arrayData=n;var u=this.meta,f=u?Ext.num(u.idIndex,u.id):null,a=this.recordType,v=a.prototype.fields,o=[],y=!0,t,p=this.getRoot(n);for(s=0,w=p.length;s<w;s++){var i=p[s],b={},d=(f||f===0)&&i[f]!==undefined&&i[f]!==""?i[f]:null;for(e=0,k=v.length;e<k;e++)r=v.items[e],h=r.mapping!==undefined&&r.mapping!==null?r.mapping:e,t=i[h]!==undefined?i[h]:r.defaultValue,t=r.convert(t,i),b[r.name]=t;c=new a(b,d);c.json=i;o[o.length]=c}return l=o.length,u.totalProperty&&(t=parseInt(this.getTotal(n),10),isNaN(t)||(l=t)),u.successProperty&&(t=this.getSuccess(n),(t===!1||t==="false")&&(y=!1)),{success:y,records:o,totalRecords:l}}});Ext.data.ArrayStore=Ext.extend(Ext.data.Store,{constructor:function(n){Ext.data.ArrayStore.superclass.constructor.call(this,Ext.apply(n,{reader:new Ext.data.ArrayReader(n)}))},loadData:function(n,t){var i,r,u;if(this.expandData===!0){for(i=[],r=0,u=n.length;r<u;r++)i[i.length]=[n[r]];n=i}Ext.data.ArrayStore.superclass.loadData.call(this,n,t)}});Ext.reg("arraystore",Ext.data.ArrayStore);Ext.data.SimpleStore=Ext.data.ArrayStore;Ext.reg("simplestore",Ext.data.SimpleStore);Ext.data.JsonStore=Ext.extend(Ext.data.Store,{constructor:function(n){Ext.data.JsonStore.superclass.constructor.call(this,Ext.apply(n,{reader:new Ext.data.JsonReader(n)}))}});Ext.reg("jsonstore",Ext.data.JsonStore);Ext.data.XmlWriter=function(){Ext.data.XmlWriter.superclass.constructor.apply(this,arguments);this.tpl=typeof this.tpl=="string"?new Ext.XTemplate(this.tpl).compile():this.tpl.compile()};Ext.extend(Ext.data.XmlWriter,Ext.data.DataWriter,{documentRoot:"xrequest",forceDocumentRoot:!1,root:"records",xmlVersion:"1.0",xmlEncoding:"ISO-8859-15",tpl:'<tpl for="."><?xml version="{version}" encoding="{encoding}"?><tpl if="documentRoot"><{documentRoot}><tpl for="baseParams"><tpl for="."><{name}>{value}<\/{name}><\/tpl><\/tpl><\/tpl><tpl if="records.length&gt;1"><{root}><\/tpl><tpl for="records"><{parent.record}><tpl for="."><{name}>{value}<\/{name}><\/tpl><\/{parent.record}><\/tpl><tpl if="records.length&gt;1"><\/{root}><\/tpl><tpl if="documentRoot"><\/{documentRoot}><\/tpl><\/tpl>',render:function(n,t,i){t=this.toArray(t);n.xmlData=this.tpl.applyTemplate({version:this.xmlVersion,encoding:this.xmlEncoding,documentRoot:t.length>0||this.forceDocumentRoot===!0?this.documentRoot:!1,record:this.meta.record,root:this.root,baseParams:t,records:Ext.isArray(i[0])?i:[i]})},createRecord:function(n){return this.toArray(this.toHash(n))},updateRecord:function(n){return this.toArray(this.toHash(n))},destroyRecord:function(n){var t={};return t[this.meta.idProperty]=n.id,this.toArray(t)}});Ext.data.XmlReader=function(n,t){n=n||{};Ext.applyIf(n,{idProperty:n.idProperty||n.idPath||n.id,successProperty:n.successProperty||n.success});Ext.data.XmlReader.superclass.constructor.call(this,n,t||n.fields)};Ext.extend(Ext.data.XmlReader,Ext.data.DataReader,{read:function(n){var t=n.responseXML;if(!t)throw{message:"XmlReader.read: XML Document not available"};return this.readRecords(t)},readRecords:function(n){var i;this.xmlData=n;var t=n.documentElement||n,f=Ext.DomQuery,r=0,u=!0;return this.meta.totalProperty&&(r=this.getTotal(t,0)),this.meta.successProperty&&(u=this.getSuccess(t)),i=this.extractData(f.select(this.meta.record,t),!0),{success:u,records:i,totalRecords:r||i.length}},readResponse:function(n,t){var e=Ext.DomQuery,u=t.responseXML,i=u.documentElement||u,r=new Ext.data.Response({action:n,success:this.getSuccess(i),message:this.getMessage(i),data:this.extractData(e.select(this.meta.record,i)||e.select(this.meta.root,i),!1),raw:u}),f;if(Ext.isEmpty(r.success))throw new Ext.data.DataReader.Error("successProperty-response",this.meta.successProperty);if(n===Ext.data.Api.actions.create)if(f=Ext.isDefined(r.data),f&&Ext.isEmpty(r.data))throw new Ext.data.JsonReader.Error("root-empty",this.meta.root);else if(!f)throw new Ext.data.JsonReader.Error("root-undefined-response",this.meta.root);return r},getSuccess:function(){return!0},buildExtractors:function(){var u,r,i,f;if(!this.ef){var n=this.meta,e=this.recordType,t=e.prototype.fields,o=t.items,s=t.length;for(n.totalProperty&&(this.getTotal=this.createAccessor(n.totalProperty)),n.successProperty&&(this.getSuccess=this.createAccessor(n.successProperty)),n.messageProperty&&(this.getMessage=this.createAccessor(n.messageProperty)),this.getRoot=function(n){return Ext.isEmpty(n[this.meta.record])?n[this.meta.root]:n[this.meta.record]},n.idPath||n.idProperty?(u=this.createAccessor(n.idPath||n.idProperty),this.getId=function(n){var t=u(n)||n.id;return t===undefined||t===""?null:t}):this.getId=function(){return null},r=[],i=0;i<s;i++)t=o[i],f=t.mapping!==undefined&&t.mapping!==null?t.mapping:t.name,r.push(this.createAccessor(f));this.ef=r}},createAccessor:function(){var n=Ext.DomQuery;return function(t){if(Ext.isFunction(t))return t;switch(t){case this.meta.totalProperty:return function(i,r){return n.selectNumber(t,i,r)};case this.meta.successProperty:return function(i){var r=n.selectValue(t,i,!0);return r!==!1&&r!=="false"};default:return function(i,r){return n.selectValue(t,i,r)}}}}(),extractValues:function(n,t,i){for(var u,e={},f,r=0;r<i;r++)u=t[r],f=this.ef[r](n),e[u.name]=u.convert(f!==undefined?f:u.defaultValue,n);return e}});Ext.data.XmlStore=Ext.extend(Ext.data.Store,{constructor:function(n){Ext.data.XmlStore.superclass.constructor.call(this,Ext.apply(n,{reader:new Ext.data.XmlReader(n)}))}});Ext.reg("xmlstore",Ext.data.XmlStore);Ext.data.GroupingStore=Ext.extend(Ext.data.Store,{constructor:function(n){n=n||{};this.hasMultiSort=!0;this.multiSortInfo=this.multiSortInfo||{sorters:[]};var t=this.multiSortInfo.sorters,i=n.groupField||this.groupField,r=n.sortInfo||this.sortInfo,u=n.groupDir||this.groupDir;i&&t.push({field:i,direction:u});r&&t.push(r);Ext.data.GroupingStore.superclass.constructor.call(this,n);this.addEvents("groupchange");this.applyGroupField()},remoteGroup:!1,groupOnSort:!1,groupDir:"ASC",clearGrouping:function(){if(this.groupField=!1,this.remoteGroup){this.baseParams&&(delete this.baseParams.groupBy,delete this.baseParams.groupDir);var n=this.lastOptions;n&&n.params&&(delete n.params.groupBy,delete n.params.groupDir);this.reload()}else this.sort(),this.fireEvent("datachanged",this)},groupBy:function(n,t,i){var r,u;if(i=i?String(i).toUpperCase()=="DESC"?"DESC":"ASC":this.groupDir,this.groupField!=n||this.groupDir!=i||t){if(r=this.multiSortInfo.sorters,r.length>0&&r[0].field==this.groupField&&r.shift(),this.groupField=n,this.groupDir=i,this.applyGroupField(),u=function(){this.fireEvent("groupchange",this,this.getGroupState())},this.groupOnSort){this.sort(n,i);u.call(this);return}if(this.remoteGroup){this.on("load",u,this,{single:!0});this.reload()}else this.sort(r),u.call(this)}},sort:function(n,t){var i,u;if(this.remoteSort)return Ext.data.GroupingStore.superclass.sort.call(this,n,t);if(i=[],Ext.isArray(arguments[0]))i=arguments[0];else if(n==undefined)i=this.sortInfo?[this.sortInfo]:[];else{if(u=this.fields.get(n),!u)return!1;var r=u.name,f=this.sortInfo||null,e=this.sortToggle?this.sortToggle[r]:null;t||(t=f&&f.field==r?(this.sortToggle[r]||"ASC").toggle("ASC","DESC"):u.sortDir);this.sortToggle[r]=t;this.sortInfo={field:r,direction:t};i=[this.sortInfo]}return this.groupField&&i.unshift({direction:this.groupDir,field:this.groupField}),this.multiSort.call(this,i,t)},applyGroupField:function(){if(this.remoteGroup){this.baseParams||(this.baseParams={});Ext.apply(this.baseParams,{groupBy:this.groupField,groupDir:this.groupDir});var n=this.lastOptions;n&&n.params&&(n.params.groupDir=this.groupDir,delete n.params.groupBy)}},applyGrouping:function(n){return this.groupField!==!1?(this.groupBy(this.groupField,!0,this.groupDir),!0):(n===!0&&this.fireEvent("datachanged",this),!1)},getGroupState:function(){return this.groupOnSort&&this.groupField!==!1?this.sortInfo?this.sortInfo.field:undefined:this.groupField}});Ext.reg("groupingstore",Ext.data.GroupingStore);Ext.data.DirectProxy=function(n){Ext.apply(this,n);typeof this.paramOrder=="string"&&(this.paramOrder=this.paramOrder.split(/[\s,|]/));Ext.data.DirectProxy.superclass.constructor.call(this,n)};Ext.extend(Ext.data.DirectProxy,Ext.data.DataProxy,{paramOrder:undefined,paramsAsHash:!0,directFn:undefined,doRequest:function(n,t,i,r,u,f,e){var o=[],h=this.api[n]||this.directFn,s,c,l;switch(n){case Ext.data.Api.actions.create:o.push(i.jsonData);break;case Ext.data.Api.actions.read:if(h.directCfg.method.len>0)if(this.paramOrder)for(s=0,c=this.paramOrder.length;s<c;s++)o.push(i[this.paramOrder[s]]);else this.paramsAsHash&&o.push(i);break;case Ext.data.Api.actions.update:o.push(i.jsonData);break;case Ext.data.Api.actions.destroy:o.push(i.jsonData)}l={params:i||{},request:{callback:u,scope:f,arg:e},reader:r};o.push(this.createCallback(n,t,l),this);h.apply(window,o)},createCallback:function(n,t,i){var r=this;return function(u,f){if(!f.status){n===Ext.data.Api.actions.read&&r.fireEvent("loadexception",r,i,f,null);r.fireEvent("exception",r,"remote",n,i,f,null);i.request.callback.call(i.request.scope,null,i.request.arg,!1);return}if(n===Ext.data.Api.actions.read)r.onRead(n,i,u,f);else r.onWrite(n,i,u,f,t)}},onRead:function(n,t,i,r){var u;try{u=t.reader.readRecords(i)}catch(f){this.fireEvent("loadexception",this,t,r,f);this.fireEvent("exception",this,"response",n,t,r,f);t.request.callback.call(t.request.scope,null,t.request.arg,!1);return}this.fireEvent("load",this,r,t.request.arg);t.request.callback.call(t.request.scope,u,t.request.arg,!0)},onWrite:function(n,t,i,r,u){var e=t.reader.extractData(t.reader.getRoot(i),!1),f=t.reader.getSuccess(i);f=f!==!1;f?this.fireEvent("write",this,n,e,r,u,t.request.arg):this.fireEvent("exception",this,"remote",n,t,i,u);t.request.callback.call(t.request.scope,e,r,f)}});Ext.data.DirectStore=Ext.extend(Ext.data.Store,{constructor:function(n){var t=Ext.apply({},{batchTransactions:!1},n);Ext.data.DirectStore.superclass.constructor.call(this,Ext.apply(t,{proxy:Ext.isDefined(t.proxy)?t.proxy:new Ext.data.DirectProxy(Ext.copyTo({},t,"paramOrder,paramsAsHash,directFn,api")),reader:!Ext.isDefined(t.reader)&&t.fields?new Ext.data.JsonReader(Ext.copyTo({},t,"totalProperty,root,idProperty"),t.fields):t.reader}))}});Ext.reg("directstore",Ext.data.DirectStore);Ext.Direct=Ext.extend(Ext.util.Observable,{exceptions:{TRANSPORT:"xhr",PARSE:"parse",LOGIN:"login",SERVER:"exception"},constructor:function(){this.addEvents("event","exception");this.transactions={};this.providers={}},addProvider:function(n){var i=arguments,t,r;if(i.length>1){for(t=0,r=i.length;t<r;t++)this.addProvider(i[t]);return}n.events||(n=new Ext.Direct.PROVIDERS[n.type](n));n.id=n.id||Ext.id();this.providers[n.id]=n;n.on("data",this.onProviderData,this);n.on("exception",this.onProviderException,this);return n.isConnected()||n.connect(),n},getProvider:function(n){return this.providers[n]},removeProvider:function(n){var t=n.id?n:this.providers[n];return t.un("data",this.onProviderData,this),t.un("exception",this.onProviderException,this),delete this.providers[t.id],t},addTransaction:function(n){return this.transactions[n.tid]=n,n},removeTransaction:function(n){return delete this.transactions[n.tid||n],n},getTransaction:function(n){return this.transactions[n.tid||n]},onProviderData:function(n,t){if(Ext.isArray(t)){for(var i=0,r=t.length;i<r;i++)this.onProviderData(n,t[i]);return}t.name&&t.name!="event"&&t.name!="exception"?this.fireEvent(t.name,t):t.type=="exception"&&this.fireEvent("exception",t);this.fireEvent("event",t,n)},createEvent:function(n,t){return new Ext.Direct.eventTypes[n.type](Ext.apply(n,t))}});Ext.Direct=new Ext.Direct;Ext.Direct.TID=1;Ext.Direct.PROVIDERS={};Ext.Direct.Transaction=function(n){Ext.apply(this,n);this.tid=++Ext.Direct.TID;this.retryCount=0};Ext.Direct.Transaction.prototype={send:function(){this.provider.queueTransaction(this)},retry:function(){this.retryCount++;this.send()},getProvider:function(){return this.provider}};Ext.Direct.Event=function(n){Ext.apply(this,n)};Ext.Direct.Event.prototype={status:!0,getData:function(){return this.data}};Ext.Direct.RemotingEvent=Ext.extend(Ext.Direct.Event,{type:"rpc",getTransaction:function(){return this.transaction||Ext.Direct.getTransaction(this.tid)}});Ext.Direct.ExceptionEvent=Ext.extend(Ext.Direct.RemotingEvent,{status:!1,type:"exception"});Ext.Direct.eventTypes={rpc:Ext.Direct.RemotingEvent,event:Ext.Direct.Event,exception:Ext.Direct.ExceptionEvent};Ext.direct.Provider=Ext.extend(Ext.util.Observable,{priority:1,constructor:function(n){Ext.apply(this,n);this.addEvents("connect","disconnect","data","exception");Ext.direct.Provider.superclass.constructor.call(this,n)},isConnected:function(){return!1},connect:Ext.emptyFn,disconnect:Ext.emptyFn});Ext.direct.JsonProvider=Ext.extend(Ext.direct.Provider,{parseResponse:function(n){return Ext.isEmpty(n.responseText)?null:typeof n.responseText=="object"?n.responseText:Ext.decode(n.responseText)},getEvents:function(n){var t=null,u,i,r,f;try{t=this.parseResponse(n)}catch(e){return u=new Ext.Direct.ExceptionEvent({data:e,xhr:n,code:Ext.Direct.exceptions.PARSE,message:"Error parsing json response: \n\n "+t}),[u]}if(i=[],Ext.isArray(t))for(r=0,f=t.length;r<f;r++)i.push(Ext.Direct.createEvent(t[r]));else i.push(Ext.Direct.createEvent(t));return i}});Ext.direct.PollingProvider=Ext.extend(Ext.direct.JsonProvider,{priority:3,interval:3e3,constructor:function(n){Ext.direct.PollingProvider.superclass.constructor.call(this,n);this.addEvents("beforepoll","poll")},isConnected:function(){return!!this.pollTask},connect:function(){if(this.url&&!this.pollTask)this.pollTask=Ext.TaskMgr.start({run:function(){this.fireEvent("beforepoll",this)!==!1&&(typeof this.url=="function"?this.url(this.baseParams):Ext.Ajax.request({url:this.url,callback:this.onData,scope:this,params:this.baseParams}))},interval:this.interval,scope:this}),this.fireEvent("connect",this);else if(!this.url)throw"Error initializing PollingProvider, no url configured.";},disconnect:function(){this.pollTask&&(Ext.TaskMgr.stop(this.pollTask),delete this.pollTask,this.fireEvent("disconnect",this))},onData:function(n,t,i){var f,u,e,r;if(t)for(f=this.getEvents(i),u=0,e=f.length;u<e;u++)r=f[u],this.fireEvent("data",this,r);else r=new Ext.Direct.ExceptionEvent({data:r,code:Ext.Direct.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:i}),this.fireEvent("data",this,r)}});Ext.Direct.PROVIDERS.polling=Ext.direct.PollingProvider;Ext.direct.RemotingProvider=Ext.extend(Ext.direct.JsonProvider,{enableBuffer:10,maxRetries:1,timeout:undefined,constructor:function(n){Ext.direct.RemotingProvider.superclass.constructor.call(this,n);this.addEvents("beforecall","call");this.namespace=Ext.isString(this.namespace)?Ext.ns(this.namespace):this.namespace||window;this.transactions={};this.callBuffer=[]},initAPI:function(){var u=this.actions,n,f,i,t,e,r;for(n in u)for(f=this.namespace[n]||(this.namespace[n]={}),i=u[n],t=0,e=i.length;t<e;t++)r=i[t],f[r.name]=this.createMethod(n,r)},isConnected:function(){return!!this.connected},connect:function(){if(this.url)this.initAPI(),this.connected=!0,this.fireEvent("connect",this);else if(!this.url)throw"Error initializing RemotingProvider, no url configured.";},disconnect:function(){this.connected&&(this.connected=!1,this.fireEvent("disconnect",this))},onData:function(n,t,i){var o,s,u,e,r,f;if(t)for(o=this.getEvents(i),u=0,e=o.length;u<e;u++)f=o[u],r=this.getTransaction(f),this.fireEvent("data",this,f),r&&(this.doCallback(r,f,!0),Ext.Direct.removeTransaction(r));else for(s=[].concat(n.ts),u=0,e=s.length;u<e;u++)r=this.getTransaction(s[u]),r&&r.retryCount<this.maxRetries?r.retry():(f=new Ext.Direct.ExceptionEvent({data:f,transaction:r,code:Ext.Direct.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:i}),this.fireEvent("data",this,f),r&&(this.doCallback(r,f,!1),Ext.Direct.removeTransaction(r)))},getCallData:function(n){return{action:n.action,method:n.method,data:n.data,type:"rpc",tid:n.tid}},doSend:function(n){var r={url:this.url,callback:this.onData,scope:this,ts:n,timeout:this.timeout},t,i,f,u;if(Ext.isArray(n))for(t=[],i=0,f=n.length;i<f;i++)t.push(this.getCallData(n[i]));else t=this.getCallData(n);this.enableUrlEncode?(u={},u[Ext.isString(this.enableUrlEncode)?this.enableUrlEncode:"data"]=Ext.encode(t),r.params=u):r.jsonData=t;Ext.Ajax.request(r)},combineAndSend:function(){var n=this.callBuffer.length;n>0&&(this.doSend(n==1?this.callBuffer[0]:this.callBuffer),this.callBuffer=[])},queueTransaction:function(n){if(n.form){this.processForm(n);return}this.callBuffer.push(n);this.enableBuffer?(this.callTask||(this.callTask=new Ext.util.DelayedTask(this.combineAndSend,this)),this.callTask.delay(Ext.isNumber(this.enableBuffer)?this.enableBuffer:10)):this.combineAndSend()},doCall:function(n,t,i){var f=null,u=i[t.len],e=i[t.len+1],r;t.len!==0&&(f=i.slice(0,t.len));r=new Ext.Direct.Transaction({provider:this,args:i,action:n,method:t.name,data:f,cb:e&&Ext.isFunction(u)?u.createDelegate(e):u});this.fireEvent("beforecall",this,r,t)!==!1&&(Ext.Direct.addTransaction(r),this.queueTransaction(r),this.fireEvent("call",this,r,t))},doForm:function(n,t,i,r,u){var f=new Ext.Direct.Transaction({provider:this,action:n,method:t.name,args:[i,r,u],cb:u&&Ext.isFunction(r)?r.createDelegate(u):r,isForm:!0}),e,o;this.fireEvent("beforecall",this,f,t)!==!1&&(Ext.Direct.addTransaction(f),e=String(i.getAttribute("enctype")).toLowerCase()=="multipart/form-data",o={extTID:f.tid,extAction:n,extMethod:t.name,extType:"rpc",extUpload:String(e)},Ext.apply(f,{form:Ext.getDom(i),isUpload:e,params:r&&Ext.isObject(r.params)?Ext.apply(o,r.params):o}),this.fireEvent("call",this,f,t),this.processForm(f))},processForm:function(n){Ext.Ajax.request({url:this.url,params:n.params,callback:this.onData,scope:this,form:n.form,isUpload:n.isUpload,ts:n})},createMethod:function(n,t){var i;return i=t.formHandler?function(i,r,u){this.doForm(n,t,i,r,u)}.createDelegate(this):function(){this.doCall(n,t,Array.prototype.slice.call(arguments,0))}.createDelegate(this),i.directCfg={action:n,method:t},i},getTransaction:function(n){return n&&n.tid?Ext.Direct.getTransaction(n.tid):null},doCallback:function(n,t){var u=t.status?"success":"failure",i,r;n&&n.cb&&(i=n.cb,r=Ext.isDefined(t.result)?t.result:t.data,Ext.isFunction(i)?i(r,t):(Ext.callback(i[u],i.scope,[r,t]),Ext.callback(i.callback,i.scope,[r,t])))}});Ext.Direct.PROVIDERS.remoting=Ext.direct.RemotingProvider;Ext.Resizable=Ext.extend(Ext.util.Observable,{constructor:function(n,t){var o,s,i,h,r,l,c;for(this.el=Ext.get(n),t&&t.wrap&&(t.resizeChild=this.el,this.el=this.el.wrap(typeof t.wrap=="object"?t.wrap:{cls:"xresizable-wrap"}),this.el.id=this.el.dom.id=t.resizeChild.id+"-rzwrap",this.el.setStyle("overflow","hidden"),this.el.setPositioning(t.resizeChild.getPositioning()),t.resizeChild.clearPositioning(),t.width&&t.height||(o=t.resizeChild.getSize(),this.el.setSize(o.width,o.height)),t.pinned&&!t.adjustments&&(t.adjustments="auto")),this.proxy=this.el.createProxy({tag:"div",cls:"x-resizable-proxy",id:this.el.id+"-rzproxy"},Ext.getBody()),this.proxy.unselectable(),this.proxy.enableDisplayMode("block"),Ext.apply(this,t),this.pinned&&(this.disableTrackOver=!0,this.el.addClass("x-resizable-pinned")),s=this.el.getStyle("position"),s!="absolute"&&s!="fixed"&&this.el.setStyle("position","relative"),this.handles||(this.handles="s,e,se",this.multiDirectional&&(this.handles+=",n,w")),this.handles=="all"&&(this.handles="n s e w ne nw se sw"),i=this.handles.split(/\s*?[,;]\s*?| /),h=Ext.Resizable.positions,r=0,l=i.length;r<l;r++)i[r]&&h[i[r]]&&(c=h[i[r]],this[c]=new Ext.Resizable.Handle(this,c,this.disableTrackOver,this.transparent,this.handleCls));if(this.corner=this.southeast,(this.handles.indexOf("n")!=-1||this.handles.indexOf("w")!=-1)&&(this.updateBox=!0),this.activeHandle=null,this.resizeChild&&(this.resizeChild=typeof this.resizeChild=="boolean"?Ext.get(this.el.dom.firstChild,!0):Ext.get(this.resizeChild,!0)),this.adjustments=="auto"){var e=this.resizeChild,u=this.west,a=this.east,f=this.north,i=this.south;e&&(u||f)&&(e.position("relative"),e.setLeft(u?u.el.getWidth():0),e.setTop(f?f.el.getHeight():0));this.adjustments=[(a?-a.el.getWidth():0)+(u?-u.el.getWidth():0),(f?-f.el.getHeight():0)+(i?-i.el.getHeight():0)-1]}this.draggable&&(this.dd=this.dynamic?this.el.initDD(null):this.el.initDDProxy(null,{dragElId:this.proxy.id}),this.dd.setHandleElId(this.resizeChild?this.resizeChild.id:this.el.id),this.constrainTo&&this.dd.constrainTo(this.constrainTo));this.addEvents("beforeresize","resize");this.width!==null&&this.height!==null?this.resizeTo(this.width,this.height):this.updateChildSize();Ext.isIE&&(this.el.dom.style.zoom=1);Ext.Resizable.superclass.constructor.call(this)},adjustments:[0,0],animate:!1,disableTrackOver:!1,draggable:!1,duration:.35,dynamic:!1,easing:"easeOutStrong",enabled:!0,handles:!1,multiDirectional:!1,height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:5,minWidth:5,maxHeight:1e4,maxWidth:1e4,minX:0,minY:0,pinned:!1,preserveRatio:!1,resizeChild:!1,transparent:!1,resizeTo:function(n,t){this.el.setSize(n,t);this.updateChildSize();this.fireEvent("resize",this,n,t,null)},startSizing:function(n,t){if(this.fireEvent("beforeresize",this,n),this.enabled){if(!this.overlay){this.overlay=this.el.createProxy({tag:"div",cls:"x-resizable-overlay",html:"&#160;"},Ext.getBody());this.overlay.unselectable();this.overlay.enableDisplayMode("block");this.overlay.on({scope:this,mousemove:this.onMouseMove,mouseup:this.onMouseUp})}if(this.overlay.setStyle("cursor",t.el.getStyle("cursor")),this.resizing=!0,this.startBox=this.el.getBox(),this.startPoint=n.getXY(),this.offsets=[this.startBox.x+this.startBox.width-this.startPoint[0],this.startBox.y+this.startBox.height-this.startPoint[1]],this.overlay.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.overlay.show(),this.constrainTo){var i=Ext.get(this.constrainTo);this.resizeRegion=i.getRegion().adjust(i.getFrameWidth("t"),i.getFrameWidth("l"),-i.getFrameWidth("b"),-i.getFrameWidth("r"))}this.proxy.setStyle("visibility","hidden");this.proxy.show();this.proxy.setBox(this.startBox);this.dynamic||this.proxy.setStyle("visibility","visible")}},onMouseDown:function(n,t){this.enabled&&(t.stopEvent(),this.activeHandle=n,this.startSizing(t,n))},onMouseUp:function(n){this.activeHandle=null;var t=this.resizeElement();this.resizing=!1;this.handleOut();this.overlay.hide();this.proxy.hide();this.fireEvent("resize",this,t.width,t.height,n)},updateChildSize:function(){var i;if(this.resizeChild){var n=this.el,r=this.resizeChild,t=this.adjustments;n.dom.offsetWidth&&(i=n.getSize(!0),r.setSize(i.width+t[0],i.height+t[1]));Ext.isIE9m&&setTimeout(function(){if(n.dom.offsetWidth){var i=n.getSize(!0);r.setSize(i.width+t[0],i.height+t[1])}},10)}},snap:function(n,t,i){if(!t||!n)return n;var u=n,r=n%t;return r>0&&(u=r>t/2?n+(t-r):n-r),Math.max(i,u)},resizeElement:function(){var n=this.proxy.getBox();return this.updateBox?this.el.setBox(n,!1,this.animate,this.duration,null,this.easing):this.el.setSize(n.width,n.height,this.animate,this.duration,null,this.easing),this.updateChildSize(),this.dynamic||this.proxy.hide(),this.draggable&&this.constrainTo&&(this.dd.resetConstraints(),this.dd.constrainTo(this.constrainTo)),n},constrain:function(n,t,i,r){return n-t<i?t=n-i:n-t>r&&(t=n-r),t},onMouseMove:function(n){var y,p;if(this.enabled&&this.activeHandle)try{if(this.resizeRegion&&!this.resizeRegion.contains(n.getPoint()))return;var k=this.curSize||this.startBox,o=this.startBox.x,h=this.startBox.y,tt=o,it=h,t=k.width,i=k.height,f=t,e=i,c=this.minWidth,s=this.minHeight,a=this.maxWidth,l=this.maxHeight,g=this.widthIncrement,nt=this.heightIncrement,d=n.getXY(),r=-(this.startPoint[0]-Math.max(this.minX,d[0])),u=-(this.startPoint[1]-Math.max(this.minY,d[1])),b=this.activeHandle.position,v,w;switch(b){case"east":t+=r;t=Math.min(Math.max(c,t),a);break;case"south":i+=u;i=Math.min(Math.max(s,i),l);break;case"southeast":t+=r;i+=u;t=Math.min(Math.max(c,t),a);i=Math.min(Math.max(s,i),l);break;case"north":u=this.constrain(i,u,s,l);h+=u;i-=u;break;case"west":r=this.constrain(t,r,c,a);o+=r;t-=r;break;case"northeast":t+=r;t=Math.min(Math.max(c,t),a);u=this.constrain(i,u,s,l);h+=u;i-=u;break;case"northwest":r=this.constrain(t,r,c,a);u=this.constrain(i,u,s,l);h+=u;i-=u;o+=r;t-=r;break;case"southwest":r=this.constrain(t,r,c,a);i+=u;i=Math.min(Math.max(s,i),l);o+=r;t-=r}if(y=this.snap(t,g,c),p=this.snap(i,nt,s),y!=t||p!=i){switch(b){case"northeast":h-=p-i;break;case"north":h-=p-i;break;case"southwest":o-=y-t;break;case"west":o-=y-t;break;case"northwest":o-=y-t;h-=p-i}t=y;i=p}if(this.preserveRatio)switch(b){case"southeast":case"east":i=e*(t/f);i=Math.min(Math.max(s,i),l);t=f*(i/e);break;case"south":t=f*(i/e);t=Math.min(Math.max(c,t),a);i=e*(t/f);break;case"northeast":t=f*(i/e);t=Math.min(Math.max(c,t),a);i=e*(t/f);break;case"north":v=t;t=f*(i/e);t=Math.min(Math.max(c,t),a);i=e*(t/f);o+=(v-t)/2;break;case"southwest":i=e*(t/f);i=Math.min(Math.max(s,i),l);v=t;t=f*(i/e);o+=v-t;break;case"west":w=i;i=e*(t/f);i=Math.min(Math.max(s,i),l);h+=(w-i)/2;v=t;t=f*(i/e);o+=v-t;break;case"northwest":v=t;w=i;i=e*(t/f);i=Math.min(Math.max(s,i),l);t=f*(i/e);h+=w-i;o+=v-t}this.proxy.setBounds(o,h,t,i);this.dynamic&&this.resizeElement()}catch(rt){}},handleOver:function(){this.enabled&&this.el.addClass("x-resizable-over")},handleOut:function(){this.resizing||this.el.removeClass("x-resizable-over")},getEl:function(){return this.el},getResizeChild:function(){return this.resizeChild},destroy:function(n){var t,i;Ext.destroy(this.dd,this.overlay,this.proxy);this.overlay=null;this.proxy=null;t=Ext.Resizable.positions;for(i in t)typeof t[i]!="function"&&this[t[i]]&&this[t[i]].destroy();n&&(this.el.update(""),Ext.destroy(this.el),this.el=null);this.purgeListeners()},syncHandleHeight:function(){var n=this.el.getHeight(!0);this.west&&this.west.el.setHeight(n);this.east&&this.east.el.setHeight(n)}});Ext.Resizable.positions={n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"};Ext.Resizable.Handle=Ext.extend(Object,{constructor:function(n,t,i,r,u){if(!this.tpl){var f=Ext.DomHelper.createTemplate({tag:"div",cls:"x-resizable-handle x-resizable-handle-{0}"});f.compile();Ext.Resizable.Handle.prototype.tpl=f}this.position=t;this.rz=n;this.el=this.tpl.append(n.el.dom,[this.position],!0);this.el.unselectable();r&&this.el.setOpacity(0);Ext.isEmpty(u)||this.el.addClass(u);this.el.on("mousedown",this.onMouseDown,this);if(!i)this.el.on({scope:this,mouseover:this.onMouseOver,mouseout:this.onMouseOut})},afterResize:function(){},onMouseDown:function(n){this.rz.onMouseDown(this,n)},onMouseOver:function(n){this.rz.handleOver(this,n)},onMouseOut:function(n){this.rz.handleOut(this,n)},destroy:function(){Ext.destroy(this.el);this.el=null}});Ext.Window=Ext.extend(Ext.Panel,{baseCls:"x-window",resizable:!0,draggable:!0,closable:!0,closeAction:"close",constrain:!1,constrainHeader:!1,plain:!1,minimizable:!1,maximizable:!1,minHeight:100,minWidth:200,expandOnShow:!0,showAnimDuration:.25,hideAnimDuration:.25,collapsible:!1,initHidden:undefined,hidden:!0,elements:"header,body",frame:!0,floating:!0,initComponent:function(){this.initTools();Ext.Window.superclass.initComponent.call(this);this.addEvents("resize","maximize","minimize","restore");Ext.isDefined(this.initHidden)&&(this.hidden=this.initHidden);this.hidden===!1&&(this.hidden=!0,this.show())},getState:function(){return Ext.apply(Ext.Window.superclass.getState.call(this)||{},this.getBox(!0))},onRender:function(n,t){Ext.Window.superclass.onRender.call(this,n,t);this.plain&&this.el.addClass("x-window-plain");this.focusEl=this.el.createChild({tag:"a",href:"#",cls:"x-dlg-focus",tabIndex:"-1",html:"&#160;"});this.focusEl.swallowEvent("click",!0);this.proxy=this.el.createProxy("x-window-proxy");this.proxy.enableDisplayMode("block");this.modal&&(this.mask=this.container.createChild({cls:"ext-el-mask"},this.el.dom),this.mask.enableDisplayMode("block"),this.mask.hide(),this.mon(this.mask,"click",this.focus,this));this.maximizable&&this.mon(this.header,"dblclick",this.toggleMaximize,this)},initEvents:function(){if(Ext.Window.superclass.initEvents.call(this),this.animateTarget&&this.setAnimateTarget(this.animateTarget),this.resizable&&(this.resizer=new Ext.Resizable(this.el,{minWidth:this.minWidth,minHeight:this.minHeight,handles:this.resizeHandles||"all",pinned:!0,resizeElement:this.resizerAction,handleCls:"x-window-handle"}),this.resizer.window=this,this.mon(this.resizer,"beforeresize",this.beforeResize,this)),this.draggable&&this.header.addClass("x-window-draggable"),this.mon(this.el,"mousedown",this.toFront,this),this.manager=this.manager||Ext.WindowMgr,this.manager.register(this),this.maximized&&(this.maximized=!1,this.maximize()),this.closable){var n=this.getKeyMap();n.on(27,this.onEsc,this);n.disable()}},initDraggable:function(){this.dd=new Ext.Window.DD(this)},onEsc:function(n,t){this.activeGhost&&this.unghost();t.stopEvent();this[this.closeAction]()},beforeDestroy:function(){this.rendered&&(this.hide(),this.clearAnchor(),Ext.destroy(this.focusEl,this.resizer,this.dd,this.proxy,this.mask));Ext.Window.superclass.beforeDestroy.call(this)},onDestroy:function(){this.manager&&this.manager.unregister(this);Ext.Window.superclass.onDestroy.call(this)},initTools:function(){this.minimizable&&this.addTool({id:"minimize",handler:this.minimize.createDelegate(this,[])});this.maximizable&&(this.addTool({id:"maximize",handler:this.maximize.createDelegate(this,[])}),this.addTool({id:"restore",handler:this.restore.createDelegate(this,[]),hidden:!0}));this.closable&&this.addTool({id:"close",handler:this[this.closeAction].createDelegate(this,[])})},resizerAction:function(){var n=this.proxy.getBox();return this.proxy.hide(),this.window.handleResize(n),n},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getFrameHeight()+40);this.resizer.minWidth=Math.max(this.minWidth,this.getFrameWidth()+40);this.resizeBox=this.el.getBox()},updateHandles:function(){Ext.isIE9m&&this.resizer&&(this.resizer.syncHandleHeight(),this.el.repaint())},handleResize:function(n){var t=this.resizeBox;t.x!=n.x||t.y!=n.y?this.updateBox(n):(this.setSize(n),Ext.isIE6&&Ext.isStrict&&this.doLayout());this.focus();this.updateHandles();this.saveState()},focus:function(){var t=this.focusEl,n=this.defaultButton,u=typeof n,r,i;Ext.isDefined(n)&&(t=Ext.isNumber(n)&&this.fbar?this.fbar.items.get(n):Ext.isString(n)?Ext.getCmp(n):n,r=t.getEl(),i=Ext.getDom(this.container),r&&i&&i!=document.body&&!Ext.lib.Region.getRegion(i).contains(Ext.lib.Region.getRegion(r.dom)))||(t=t||this.focusEl,t.focus.defer(10,t))},setAnimateTarget:function(n){n=Ext.get(n);this.animateTarget=n},beforeShow:function(){if(delete this.el.lastXY,delete this.el.lastLT,this.x===undefined||this.y===undefined){var n=this.el.getAlignToXY(this.container,"c-c"),t=this.el.translatePoints(n[0],n[1]);this.x=this.x===undefined?t.left:this.x;this.y=this.y===undefined?t.top:this.y}this.el.setLeftTop(this.x,this.y);this.expandOnShow&&this.expand(!1);this.modal&&(Ext.getBody().addClass("x-body-masked"),this.mask.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.mask.show())},show:function(n,t,i){if(this.rendered||this.render(Ext.getBody()),this.hidden===!1)return this.toFront(),this;if(this.fireEvent("beforeshow",this)===!1)return this;if(t)this.on("show",t,i,{single:!0});return this.hidden=!1,Ext.isDefined(n)&&this.setAnimateTarget(n),this.beforeShow(),this.animateTarget?this.animShow():this.afterShow(),this},afterShow:function(n){if(this.isDestroyed)return!1;if(this.proxy.hide(),this.el.setStyle("display","block"),this.el.show(),this.maximized&&this.fitContainer(),Ext.isMac&&Ext.isGecko2&&this.cascade(this.setAutoScroll),this.monitorResize||this.modal||this.constrain||this.constrainHeader)Ext.EventManager.onWindowResize(this.onWindowResize,this);if(this.doConstrain(),this.doLayout(),this.keyMap&&this.keyMap.enable(),this.toFront(),this.updateHandles(),n&&(Ext.isIE||Ext.isWebKit)){var t=this.getSize();this.onResize(t.width,t.height)}this.onShow();this.fireEvent("show",this)},animShow:function(){this.proxy.show();this.proxy.setBox(this.animateTarget.getBox());this.proxy.setOpacity(0);var n=this.getBox();this.el.setStyle("display","none");this.proxy.shift(Ext.apply(n,{callback:this.afterShow.createDelegate(this,[!0],!1),scope:this,easing:"easeNone",duration:this.showAnimDuration,opacity:.5}))},hide:function(n,t,i){if(this.hidden||this.fireEvent("beforehide",this)===!1)return this;if(t)this.on("hide",t,i,{single:!0});return this.hidden=!0,n!==undefined&&this.setAnimateTarget(n),this.modal&&(this.mask.hide(),Ext.getBody().removeClass("x-body-masked")),this.animateTarget?this.animHide():(this.el.hide(),this.afterHide()),this},afterHide:function(){this.proxy.hide();(this.monitorResize||this.modal||this.constrain||this.constrainHeader)&&Ext.EventManager.removeResizeListener(this.onWindowResize,this);this.keyMap&&this.keyMap.disable();this.onHide();this.fireEvent("hide",this)},animHide:function(){this.proxy.setOpacity(.5);this.proxy.show();var n=this.getBox(!1);this.proxy.setBox(n);this.el.hide();this.proxy.shift(Ext.apply(this.animateTarget.getBox(),{callback:this.afterHide,scope:this,duration:this.hideAnimDuration,easing:"easeNone",opacity:0}))},onShow:Ext.emptyFn,onHide:Ext.emptyFn,onWindowResize:function(){if(this.maximized&&this.fitContainer(),this.modal){this.mask.setSize("100%","100%");var n=this.mask.dom.offsetHeight;this.mask.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0))}this.doConstrain()},doConstrain:function(){var t,i,n;(this.constrain||this.constrainHeader)&&(this.constrain?t={right:this.el.shadowOffset,left:this.el.shadowOffset,bottom:this.el.shadowOffset}:(i=this.getSize(),t={right:-(i.width-100),bottom:-(i.height-25+this.el.getConstrainOffset())}),n=this.el.getConstrainToXY(this.container,!0,t),n&&this.setPosition(n[0],n[1]))},ghost:function(n){var t=this.createGhost(n),i=this.getBox(!0);return t.setLeftTop(i.x,i.y),t.setWidth(i.width),this.el.hide(),this.activeGhost=t,t},unghost:function(n,t){this.activeGhost&&(n!==!1&&(this.el.show(),this.focus.defer(10,this),Ext.isMac&&Ext.isGecko2&&this.cascade(this.setAutoScroll)),t!==!1&&this.setPosition(this.activeGhost.getLeft(!0),this.activeGhost.getTop(!0)),this.activeGhost.hide(),this.activeGhost.remove(),delete this.activeGhost)},minimize:function(){return this.fireEvent("minimize",this),this},close:function(){this.fireEvent("beforeclose",this)!==!1&&(this.hidden?this.doClose():this.hide(null,this.doClose,this))},doClose:function(){this.fireEvent("close",this);this.destroy()},maximize:function(){return this.maximized||(this.expand(!1),this.restoreSize=this.getSize(),this.restorePos=this.getPosition(!0),this.maximizable&&(this.tools.maximize.hide(),this.tools.restore.show()),this.maximized=!0,this.el.disableShadow(),this.dd&&this.dd.lock(),this.collapsible&&this.tools.toggle.hide(),this.el.addClass("x-window-maximized"),this.container.addClass("x-window-maximized-ct"),this.setPosition(0,0),this.fitContainer(),this.fireEvent("maximize",this)),this},restore:function(){if(this.maximized){var n=this.tools;this.el.removeClass("x-window-maximized");n.restore&&n.restore.hide();n.maximize&&n.maximize.show();this.setPosition(this.restorePos[0],this.restorePos[1]);this.setSize(this.restoreSize.width,this.restoreSize.height);delete this.restorePos;delete this.restoreSize;this.maximized=!1;this.el.enableShadow(!0);this.dd&&this.dd.unlock();this.collapsible&&n.toggle&&n.toggle.show();this.container.removeClass("x-window-maximized-ct");this.doConstrain();this.fireEvent("restore",this)}return this},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},fitContainer:function(){var n=this.container.getViewSize(!1);this.setSize(n.width,n.height)},setZIndex:function(n){this.modal&&this.mask.setStyle("z-index",n);this.el.setZIndex(++n);n+=5;this.resizer&&this.resizer.proxy.setStyle("z-index",++n);this.lastZIndex=n},alignTo:function(n,t,i){var r=this.el.getAlignToXY(n,t,i);return this.setPagePosition(r[0],r[1]),this},anchorTo:function(n,t,i,r){this.clearAnchor();this.anchorTarget={el:n,alignment:t,offsets:i};Ext.EventManager.onWindowResize(this.doAnchor,this);var u=typeof r;if(u!="undefined")Ext.EventManager.on(window,"scroll",this.doAnchor,this,{buffer:u=="number"?r:50});return this.doAnchor()},doAnchor:function(){var n=this.anchorTarget;return this.alignTo(n.el,n.alignment,n.offsets),this},clearAnchor:function(){return this.anchorTarget&&(Ext.EventManager.removeResizeListener(this.doAnchor,this),Ext.EventManager.un(window,"scroll",this.doAnchor,this),delete this.anchorTarget),this},toFront:function(n){return this.manager.bringToFront(this)&&(n&&n.getTarget().focus||this.focus()),this},setActive:function(n){n?(this.maximized||this.el.enableShadow(!0),this.fireEvent("activate",this)):(this.el.disableShadow(),this.fireEvent("deactivate",this))},toBack:function(){return this.manager.sendToBack(this),this},center:function(){var n=this.el.getAlignToXY(this.container,"c-c");return this.setPagePosition(n[0],n[1]),this}});Ext.reg("window",Ext.Window);Ext.Window.DD=Ext.extend(Ext.dd.DD,{constructor:function(n){this.win=n;Ext.Window.DD.superclass.constructor.call(this,n.el.id,"WindowDD-"+n.id);this.setHandleElId(n.header.id);this.scroll=!1},moveOnly:!0,headerOffsets:[100,25],startDrag:function(){var n=this.win,t,i;this.proxy=n.ghost(n.initialConfig.cls);n.constrain!==!1?(t=n.el.shadowOffset,this.constrainTo(n.container,{right:t,left:t,bottom:t})):n.constrainHeader!==!1&&(i=this.proxy.getSize(),this.constrainTo(n.container,{right:-(i.width-this.headerOffsets[0]),bottom:-(i.height-this.headerOffsets[1])}))},b4Drag:Ext.emptyFn,onDrag:function(n){this.alignElWithMouse(this.proxy,n.getPageX(),n.getPageY())},endDrag:function(){this.win.unghost();this.win.saveState()}});Ext.WindowGroup=function(){var n={},t=[],i=null,e=function(n,t){return!n._lastAccess||n._lastAccess<t._lastAccess?-1:1},u=function(){var i=t,f=i.length,o,n,u;if(f>0)for(i.sort(e),o=i[0].manager.zseed,n=0;n<f;n++)u=i[n],u&&!u.hidden&&u.setZIndex(o+n*10);r()},f=function(n){n!=i&&(i&&i.setActive(!1),i=n,n&&n.setActive(!0))},r=function(){for(var n=t.length-1;n>=0;--n)if(!t[n].hidden){f(t[n]);return}f(null)};return{zseed:9e3,register:function(i){i.manager&&i.manager.unregister(i);i.manager=this;n[i.id]=i;t.push(i);i.on("hide",r)},unregister:function(i){delete i.manager;delete n[i.id];i.un("hide",r);t.remove(i)},get:function(t){return typeof t=="object"?t:n[t]},bringToFront:function(n){return(n=this.get(n),n!=i)?(n._lastAccess=(new Date).getTime(),u(),!0):!1},sendToBack:function(n){return n=this.get(n),n._lastAccess=-(new Date).getTime(),u(),n},hideAll:function(){for(var t in n)n[t]&&typeof n[t]!="function"&&n[t].isVisible()&&n[t].hide()},getActive:function(){return i},getBy:function(n,i){for(var f=[],u,r=t.length-1;r>=0;--r)u=t[r],n.call(i||u,u)!==!1&&f.push(u);return f},each:function(t,i){for(var r in n)if(n[r]&&typeof n[r]!="function"&&t.call(i||n[r],n[r])===!1)return}}};Ext.WindowMgr=new Ext.WindowGroup;Ext.MessageBox=function(){var t,n,p,i,h,r,u,e,o,f,s,a,v="",c="",w=["ok","yes","no","cancel"],l=function(i){f[i].blur();t.isVisible()&&(t.hide(),y(),Ext.callback(n.fn,n.scope||window,[i,s.dom.value,n],1))},y=function(){n&&n.cls&&t.el.removeClass(n.cls);e.reset()},k=function(i,r,u){n&&n.closable!==!1&&(t.hide(),y());u&&u.stopEvent()},b=function(n){var r=0,i;return n?(t.footer.dom.style.display="",Ext.iterate(f,function(t,u){i=n[t];i?(u.show(),u.setText(Ext.isString(i)?i:Ext.MessageBox.buttonText[t]),r+=u.getEl().getWidth()+15):u.hide()}),r):(Ext.each(w,function(n){f[n].hide()}),r)};return{getDialog:function(s){var a,c;return t||(a=[],f={},Ext.each(w,function(n){a.push(f[n]=new Ext.Button({text:this.buttonText[n],handler:l.createCallback(n),hideMode:"offsets"}))},this),t=new Ext.Window({autoCreate:!0,title:s,resizable:!1,constrain:!0,constrainHeader:!0,minimizable:!1,maximizable:!1,stateful:!1,modal:!0,shim:!0,buttonAlign:"center",width:400,height:100,minHeight:80,plain:!0,footer:!0,closable:!0,close:function(){n&&n.buttons&&n.buttons.no&&!n.buttons.cancel?l("no"):l("cancel")},fbar:new Ext.Toolbar({items:a,enableOverflow:!1})}),t.render(document.body),t.getEl().addClass("x-window-dlg"),p=t.mask,i=t.body.createChild({html:'<div class="ext-mb-icon"><\/div><div class="ext-mb-content"><span class="ext-mb-text"><\/span><br /><div class="ext-mb-fix-cursor"><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"><\/textarea><\/div><\/div>'}),o=Ext.get(i.dom.firstChild),c=i.dom.childNodes[1],h=Ext.get(c.firstChild),r=Ext.get(c.childNodes[2].firstChild),r.enableDisplayMode(),r.addKeyListener([10,13],function(){t.isVisible()&&n&&n.buttons&&(n.buttons.ok?l("ok"):n.buttons.yes&&l("yes"))}),u=Ext.get(c.childNodes[2].childNodes[1]),u.enableDisplayMode(),e=new Ext.ProgressBar({renderTo:i}),i.createChild({cls:"x-clear"})),t},updateText:function(i){t.isVisible()||n.width||t.setSize(this.maxWidth,100);h.update(i?i+" ":"&#160;");var u=c!=""?o.getWidth()+o.getMargins("lr"):0,v=h.getWidth()+h.getMargins("lr"),f=t.getFrameWidth("lr"),l=t.body.getFrameWidth("lr"),r;return r=Math.max(Math.min(n.width||u+v+f+l,n.maxWidth||this.maxWidth),Math.max(n.minWidth||this.minWidth,a||0)),n.prompt===!0&&s.setWidth(r-u-f-l),(n.progress===!0||n.wait===!0)&&e.setSize(r-u-f-l),Ext.isIE9m&&r==a&&(r+=4),h.update(i||"&#160;"),t.setSize(r,"auto").center(),this},updateProgress:function(n,t,i){return e.updateProgress(n,t),i&&this.updateText(i),this},isVisible:function(){return t&&t.isVisible()},hide:function(){var n=t?t.activeGhost:null;return(this.isVisible()||n)&&(t.hide(),y(),n&&t.unghost(!1,!1)),this},show:function(i){var o,l,h,c;if(this.isVisible()&&this.hide(),n=i,o=this.getDialog(n.title||"&#160;"),o.setTitle(n.title||"&#160;"),l=n.closable!==!1&&n.progress!==!0&&n.wait!==!0,o.tools.close.setDisplayed(l),s=r,n.prompt=n.prompt||(n.multiline?!0:!1),n.prompt?n.multiline?(r.hide(),u.show(),u.setHeight(Ext.isNumber(n.multiline)?n.multiline:this.defaultTextHeight),s=u):(r.show(),u.hide()):(r.hide(),u.hide()),s.dom.value=n.value||"",n.prompt?o.focusEl=s:(h=n.buttons,c=null,h&&h.ok?c=f.ok:h&&h.yes&&(c=f.yes),c&&(o.focusEl=c)),Ext.isDefined(n.iconCls)&&o.setIconClass(n.iconCls),this.setIcon(Ext.isDefined(n.icon)?n.icon:v),a=b(n.buttons),e.setVisible(n.progress===!0||n.wait===!0),this.updateProgress(0,n.progressText),this.updateText(n.msg),n.cls&&o.el.addClass(n.cls),o.proxyDrag=n.proxyDrag===!0,o.modal=n.modal!==!1,o.mask=n.modal!==!1?p:!1,!o.isVisible()){document.body.appendChild(t.el.dom);o.setAnimateTarget(n.animEl);o.on("show",function(){l===!0?o.keyMap.enable():o.keyMap.disable()},this,{single:!0});o.show(n.animEl)}return n.wait===!0&&e.wait(n.waitConfig),this},setIcon:function(n){if(!t){v=n;return}return v=undefined,n&&n!=""?(o.removeClass("x-hidden"),o.replaceClass(c,n),i.addClass("x-dlg-icon"),c=n):(o.replaceClass(c,"x-hidden"),i.removeClass("x-dlg-icon"),c=""),this},progress:function(n,t,i){return this.show({title:n,msg:t,buttons:!1,progress:!0,closable:!1,minWidth:this.minProgressWidth,progressText:i}),this},wait:function(n,t,i){return this.show({title:t,msg:n,buttons:!1,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:i}),this},alert:function(n,t,i,r){return this.show({title:n,msg:t,buttons:this.OK,fn:i,scope:r,minWidth:this.minWidth}),this},confirm:function(n,t,i,r){return this.show({title:n,msg:t,buttons:this.YESNO,fn:i,scope:r,icon:this.QUESTION,minWidth:this.minWidth}),this},prompt:function(n,t,i,r,u,f){return this.show({title:n,msg:t,buttons:this.OKCANCEL,fn:i,minWidth:this.minPromptWidth,scope:r,prompt:!0,multiline:u,value:f}),this},OK:{ok:!0},CANCEL:{cancel:!0},OKCANCEL:{ok:!0,cancel:!0},YESNO:{yes:!0,no:!0},YESNOCANCEL:{yes:!0,no:!0,cancel:!0},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}}();Ext.Msg=Ext.MessageBox;Ext.dd.PanelProxy=Ext.extend(Object,{constructor:function(n,t){this.panel=n;this.id=this.panel.id+"-ddproxy";Ext.apply(this,t)},insertProxy:!0,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){this.ghost&&(this.proxy&&(this.proxy.remove(),delete this.proxy),this.panel.el.dom.style.display="",this.ghost.remove(),delete this.ghost)},show:function(){this.ghost||(this.ghost=this.panel.createGhost(this.panel.initialConfig.cls,undefined,Ext.getBody()),this.ghost.setXY(this.panel.el.getXY()),this.insertProxy&&(this.proxy=this.panel.el.insertSibling({cls:"x-panel-dd-spacer"}),this.proxy.setSize(this.panel.getSize())),this.panel.el.dom.style.display="none")},repair:function(n,t,i){this.hide();typeof t=="function"&&t.call(i||this)},moveProxy:function(n,t){this.proxy&&n.insertBefore(this.proxy.dom,t)}});Ext.Panel.DD=Ext.extend(Ext.dd.DragSource,{constructor:function(n,t){this.panel=n;this.dragData={panel:n};this.proxy=new Ext.dd.PanelProxy(n,t);Ext.Panel.DD.superclass.constructor.call(this,n.el,t);var i=n.header,r=n.body;i&&(this.setHandleElId(i.id),r=n.header);r.setStyle("cursor","move");this.scroll=!1},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(){this.proxy.show()},b4MouseDown:function(n){var t=n.getPageX(),i=n.getPageY();this.autoOffset(t,i)},onInitDrag:function(n,t){this.onStartDrag(n,t);return!0},createFrame:Ext.emptyFn,getDragEl:function(){return this.proxy.ghost.dom},endDrag:function(){this.proxy.hide();this.panel.saveState()},autoOffset:function(n,t){n-=this.startPageX;t-=this.startPageY;this.setDelta(n,t)}});Ext.state.Provider=Ext.extend(Ext.util.Observable,{constructor:function(){this.addEvents("statechange");this.state={};Ext.state.Provider.superclass.constructor.call(this)},get:function(n,t){return typeof this.state[n]=="undefined"?t:this.state[n]},clear:function(n){delete this.state[n];this.fireEvent("statechange",this,n,null)},set:function(n,t){this.state[n]=t;this.fireEvent("statechange",this,n,t)},decodeValue:function(n){var r=/^(a|n|d|b|s|o|e)\:(.*)$/.exec(unescape(n)),i,f,t,u;if(r&&r[1]){f=r[1];t=r[2];switch(f){case"e":return null;case"n":return parseFloat(t);case"d":return new Date(Date.parse(t));case"b":return t=="1";case"a":return i=[],t!=""&&Ext.each(t.split("^"),function(n){i.push(this.decodeValue(n))},this),i;case"o":return i={},t!=""&&Ext.each(t.split("^"),function(n){u=n.split("=");i[u[0]]=this.decodeValue(u[1])},this),i;default:return t}}},encodeValue:function(n){var t,i="",u=0,f,r;if(n==null)return"e:1";if(typeof n=="number")t="n:"+n;else if(typeof n=="boolean")t="b:"+(n?"1":"0");else if(Ext.isDate(n))t="d:"+n.toGMTString();else if(Ext.isArray(n)){for(f=n.length;u<f;u++)i+=this.encodeValue(n[u]),u!=f-1&&(i+="^");t="a:"+i}else if(typeof n=="object"){for(r in n)typeof n[r]!="function"&&n[r]!==undefined&&(i+=r+"="+this.encodeValue(n[r])+"^");t="o:"+i.substring(0,i.length-1)}else t="s:"+n;return escape(t)}});Ext.state.Manager=function(){var n=new Ext.state.Provider;return{setProvider:function(t){n=t},get:function(t,i){return n.get(t,i)},set:function(t,i){n.set(t,i)},clear:function(t){n.clear(t)},getProvider:function(){return n}}}();Ext.state.CookieProvider=Ext.extend(Ext.state.Provider,{constructor:function(n){Ext.state.CookieProvider.superclass.constructor.call(this);this.path="/";this.expires=new Date((new Date).getTime()+6048e5);this.domain=null;this.secure=!1;Ext.apply(this,n);this.state=this.readCookies()},set:function(n,t){if(typeof t=="undefined"||t===null){this.clear(n);return}this.setCookie(n,t);Ext.state.CookieProvider.superclass.set.call(this,n,t)},clear:function(n){this.clearCookie(n);Ext.state.CookieProvider.superclass.clear.call(this,n)},readCookies:function(){for(var i={},u=document.cookie+";",f=/\s?(.*?)=(.*?);/g,t,n,r;(t=f.exec(u))!=null;)n=t[1],r=t[2],n&&n.substring(0,3)=="ys-"&&(i[n.substr(3)]=this.decodeValue(r));return i},setCookie:function(n,t){document.cookie="ys-"+n+"="+this.encodeValue(t)+(this.expires==null?"":"; expires="+this.expires.toGMTString())+(this.path==null?"":"; path="+this.path)+(this.domain==null?"":"; domain="+this.domain)+(this.secure==!0?"; secure":"")},clearCookie:function(n){document.cookie="ys-"+n+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+(this.path==null?"":"; path="+this.path)+(this.domain==null?"":"; domain="+this.domain)+(this.secure==!0?"; secure":"")}});Ext.DataView=Ext.extend(Ext.BoxComponent,{selectedClass:"x-view-selected",emptyText:"",deferEmptyText:!0,trackOver:!1,blockRefresh:!1,last:!1,initComponent:function(){Ext.DataView.superclass.initComponent.call(this);(Ext.isString(this.tpl)||Ext.isArray(this.tpl))&&(this.tpl=new Ext.XTemplate(this.tpl));this.addEvents("beforeclick","click","mouseenter","mouseleave","containerclick","dblclick","contextmenu","containercontextmenu","selectionchange","beforeselect");this.store=Ext.StoreMgr.lookup(this.store);this.all=new Ext.CompositeElementLite;this.selected=new Ext.CompositeElementLite},afterRender:function(){Ext.DataView.superclass.afterRender.call(this);this.mon(this.getTemplateTarget(),{click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu,scope:this});(this.overClass||this.trackOver)&&this.mon(this.getTemplateTarget(),{mouseover:this.onMouseOver,mouseout:this.onMouseOut,scope:this});this.store&&this.bindStore(this.store,!0)},refresh:function(){this.clearSelections(!1,!0);var n=this.getTemplateTarget(),t=this.store.getRange();n.update("");t.length<1?((!this.deferEmptyText||this.hasSkippedEmptyText)&&n.update(this.emptyText),this.all.clear()):(this.tpl.overwrite(n,this.collectData(t,0)),this.all.fill(Ext.query(this.itemSelector,n.dom)),this.updateIndexes(0));this.hasSkippedEmptyText=!0},getTemplateTarget:function(){return this.el},prepareData:function(n){return n},collectData:function(n,t){for(var r=[],i=0,u=n.length;i<u;i++)r[r.length]=this.prepareData(n[i].data,t+i,n[i]);return r},bufferRender:function(n,t){var i=document.createElement("div");return this.tpl.overwrite(i,this.collectData(n,t)),Ext.query(this.itemSelector,i)},onUpdate:function(n,t){var i=this.store.indexOf(t);if(i>-1){var u=this.isSelected(i),f=this.all.elements[i],r=this.bufferRender([t],i)[0];this.all.replaceElement(i,r,!0);u&&(this.selected.replaceElement(f,r),this.all.item(i).addClass(this.selectedClass));this.updateIndexes(i,i)}},onAdd:function(n,t,i){if(this.all.getCount()===0){this.refresh();return}var r=this.bufferRender(t,i),f,u=this.all.elements;i<this.all.getCount()?(f=this.all.item(i).insertSibling(r,"before",!0),u.splice.apply(u,[i,0].concat(r))):(f=this.all.last().insertSibling(r,"after",!0),u.push.apply(u,r));this.updateIndexes(i)},onRemove:function(n,t,i){this.deselect(i);this.all.removeElement(i,!0);this.updateIndexes(i);this.store.getCount()===0&&this.refresh()},refreshNode:function(n){this.onUpdate(this.store,this.store.getAt(n))},updateIndexes:function(n,t){var r=this.all.elements,i;for(n=n||0,t=t||(t===0?0:r.length-1),i=n;i<=t;i++)r[i].viewIndex=i},getStore:function(){return this.store},bindStore:function(n,t){if(!t&&this.store&&(n!==this.store&&this.store.autoDestroy?this.store.destroy():(this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("datachanged",this.onDataChanged,this),this.store.un("add",this.onAdd,this),this.store.un("remove",this.onRemove,this),this.store.un("update",this.onUpdate,this),this.store.un("clear",this.refresh,this)),n||(this.store=null)),n){n=Ext.StoreMgr.lookup(n);n.on({scope:this,beforeload:this.onBeforeLoad,datachanged:this.onDataChanged,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.refresh})}this.store=n;n&&this.refresh()},onDataChanged:function(){this.blockRefresh!==!0&&this.refresh.apply(this,arguments)},findItemFromChild:function(n){return Ext.fly(n).findParent(this.itemSelector,this.getTemplateTarget())},onClick:function(n){var t=n.getTarget(this.itemSelector,this.getTemplateTarget()),i;if(t)i=this.indexOf(t),this.onItemClick(t,i,n)!==!1&&this.fireEvent("click",this,i,t,n);else if(this.fireEvent("containerclick",this,n)!==!1)this.onContainerClick(n)},onContainerClick:function(){this.clearSelections()},onContextMenu:function(n){var t=n.getTarget(this.itemSelector,this.getTemplateTarget());t?this.fireEvent("contextmenu",this,this.indexOf(t),t,n):this.fireEvent("containercontextmenu",this,n)},onDblClick:function(n){var t=n.getTarget(this.itemSelector,this.getTemplateTarget());t&&this.fireEvent("dblclick",this,this.indexOf(t),t,n)},onMouseOver:function(n){var t=n.getTarget(this.itemSelector,this.getTemplateTarget());t&&t!==this.lastItem&&(this.lastItem=t,Ext.fly(t).addClass(this.overClass),this.fireEvent("mouseenter",this,this.indexOf(t),t,n))},onMouseOut:function(n){this.lastItem&&(n.within(this.lastItem,!0,!0)||(Ext.fly(this.lastItem).removeClass(this.overClass),this.fireEvent("mouseleave",this,this.indexOf(this.lastItem),this.lastItem,n),delete this.lastItem))},onItemClick:function(n,t,i){return this.fireEvent("beforeclick",this,t,n,i)===!1?!1:(this.multiSelect?(this.doMultiSelection(n,t,i),i.preventDefault()):this.singleSelect&&(this.doSingleSelection(n,t,i),i.preventDefault()),!0)},doSingleSelection:function(n,t,i){i.ctrlKey&&this.isSelected(t)?this.deselect(t):this.select(t,!1)},doMultiSelection:function(n,t,i){if(i.shiftKey&&this.last!==!1){var r=this.last;this.selectRange(r,t,i.ctrlKey);this.last=r}else(i.ctrlKey||this.simpleSelect)&&this.isSelected(t)?this.deselect(t):this.select(t,i.ctrlKey||i.shiftKey||this.simpleSelect)},getSelectionCount:function(){return this.selected.getCount()},getSelectedNodes:function(){return this.selected.elements},getSelectedIndexes:function(){for(var t=[],i=this.selected.elements,n=0,r=i.length;n<r;n++)t.push(i[n].viewIndex);return t},getSelectedRecords:function(){return this.getRecords(this.selected.elements)},getRecords:function(n){for(var t=[],i=0,r=n.length;i<r;i++)t[t.length]=this.store.getAt(n[i].viewIndex);return t},getRecord:function(n){return this.store.getAt(n.viewIndex)},clearSelections:function(n,t){(this.multiSelect||this.singleSelect)&&this.selected.getCount()>0&&(t||this.selected.removeClass(this.selectedClass),this.selected.clear(),this.last=!1,n||this.fireEvent("selectionchange",this,this.selected.elements))},isSelected:function(n){return this.selected.contains(this.getNode(n))},deselect:function(n){this.isSelected(n)&&(n=this.getNode(n),this.selected.removeElement(n),this.last==n.viewIndex&&(this.last=!1),Ext.fly(n).removeClass(this.selectedClass),this.fireEvent("selectionchange",this,this.selected.elements))},select:function(n,t,i){var u,f,r;if(Ext.isArray(n)){for(t||this.clearSelections(!0),u=0,f=n.length;u<f;u++)this.select(n[u],!0,!0);i||this.fireEvent("selectionchange",this,this.selected.elements)}else r=this.getNode(n),t||this.clearSelections(!0),r&&!this.isSelected(r)&&this.fireEvent("beforeselect",this,r,this.selected.elements)!==!1&&(Ext.fly(r).addClass(this.selectedClass),this.selected.add(r),this.last=r.viewIndex,i||this.fireEvent("selectionchange",this,this.selected.elements))},selectRange:function(n,t,i){i||this.clearSelections(!0);this.select(this.getNodes(n,t),!0)},getNode:function(n){if(Ext.isString(n))return document.getElementById(n);if(Ext.isNumber(n))return this.all.elements[n];if(n instanceof Ext.data.Record){var t=this.store.indexOf(n);return this.all.elements[t]}return n},getNodes:function(n,t){var r=this.all.elements,u=[],i;if(n=n||0,t=Ext.isDefined(t)?t:Math.max(r.length-1,0),n<=t)for(i=n;i<=t&&r[i];i++)u.push(r[i]);else for(i=n;i>=t&&r[i];i--)u.push(r[i]);return u},indexOf:function(n){return(n=this.getNode(n),Ext.isNumber(n.viewIndex))?n.viewIndex:this.all.indexOf(n)},onBeforeLoad:function(){this.loadingText&&(this.clearSelections(!1,!0),this.getTemplateTarget().update('<div class="loading-indicator">'+this.loadingText+"<\/div>"),this.all.clear())},onDestroy:function(){this.all.clear();this.selected.clear();Ext.DataView.superclass.onDestroy.call(this);this.bindStore(null)}});Ext.DataView.prototype.setStore=Ext.DataView.prototype.bindStore;Ext.reg("dataview",Ext.DataView);Ext.list.ListView=Ext.extend(Ext.DataView,{itemSelector:"dl",selectedClass:"x-list-selected",overClass:"x-list-over",scrollOffset:undefined,columnResize:!0,columnSort:!0,maxColumnWidth:Ext.isIE9m?99:100,initComponent:function(){var u,s,h,f,n;this.columnResize&&(this.colResizer=new Ext.list.ColumnResizer(this.colResizer),this.colResizer.init(this));this.columnSort&&(this.colSorter=new Ext.list.Sorter(this.columnSort),this.colSorter.init(this));this.internalTpl||(this.internalTpl=new Ext.XTemplate('<div class="x-list-header"><div class="x-list-header-inner">','<tpl for="columns">','<div style="width:{[values.width*100]}%;text-align:{align};"><em class="x-unselectable" unselectable="on" id="',this.id,'-xlhd-{#}">',"{header}","<\/em><\/div>","<\/tpl>",'<div class="x-clear"><\/div>',"<\/div><\/div>",'<div class="x-list-body"><div class="x-list-body-inner">',"<\/div><\/div>"));this.tpl||(this.tpl=new Ext.XTemplate('<tpl for="rows">',"<dl>",'<tpl for="parent.columns">','<dt style="width:{[values.width*100]}%;text-align:{align};">','<em unselectable="on"<tpl if="cls"> class="{cls}<\/tpl>">',"{[values.tpl.apply(parent)]}","<\/em><\/dt>","<\/tpl>",'<div class="x-clear"><\/div>',"<\/dl>","<\/tpl>"));var i=this.columns,t=0,e=0,r=i.length,o=[];for(u=0;u<r;u++)n=i[u],n.isColumn||(n.xtype=n.xtype?/^lv/.test(n.xtype)?n.xtype:"lv"+n.xtype:"lvcolumn",n=Ext.create(n)),n.width&&(t+=n.width*100,t>this.maxColumnWidth&&(n.width-=(t-this.maxColumnWidth)/100),e++),o.push(n);if(i=this.columns=o,e<r&&(s=r-e,t<this.maxColumnWidth))for(h=(this.maxColumnWidth-t)/s/100,f=0;f<r;f++)n=i[f],n.width||(n.width=h);Ext.list.ListView.superclass.initComponent.call(this)},onRender:function(){this.autoEl={cls:"x-list-wrap"};Ext.list.ListView.superclass.onRender.apply(this,arguments);this.internalTpl.overwrite(this.el,{columns:this.columns});this.innerBody=Ext.get(this.el.dom.childNodes[1].firstChild);this.innerHd=Ext.get(this.el.dom.firstChild.firstChild);this.hideHeaders&&(this.el.dom.firstChild.style.display="none")},getTemplateTarget:function(){return this.innerBody},collectData:function(){var n=Ext.list.ListView.superclass.collectData.apply(this,arguments);return{columns:this.columns,rows:n}},verifyInternalSize:function(){if(this.lastSize)this.onResize(this.lastSize.width,this.lastSize.height)},onResize:function(n,t){var r=this.innerBody.dom,u=this.innerHd.dom,f=n-Ext.num(this.scrollOffset,Ext.getScrollBarWidth())+"px",i;r&&(i=r.parentNode,Ext.isNumber(n)&&(this.reserveScrollOffset||i.offsetWidth-i.clientWidth>10?(r.style.width=f,u.style.width=f):(r.style.width=n+"px",u.style.width=n+"px",setTimeout(function(){i.offsetWidth-i.clientWidth>10&&(r.style.width=f,u.style.width=f)},10))),Ext.isNumber(t)&&(i.style.height=Math.max(0,t-u.parentNode.offsetHeight)+"px"))},updateIndexes:function(){Ext.list.ListView.superclass.updateIndexes.apply(this,arguments);this.verifyInternalSize()},findHeaderIndex:function(n){n=n.dom||n;for(var i=n.parentNode,u=i.parentNode.childNodes,t=0,r;r=u[t];t++)if(r==i)return t;return-1},setHdWidths:function(){for(var i=this.innerHd.dom.getElementsByTagName("div"),n=0,t=this.columns,r=t.length;n<r;n++)i[n].style.width=t[n].width*100+"%"}});Ext.reg("listview",Ext.list.ListView);Ext.ListView=Ext.list.ListView;Ext.list.Column=Ext.extend(Object,{isColumn:!0,align:"left",header:"",width:null,cls:"",constructor:function(n){n.tpl?Ext.isString(n.tpl)&&(n.tpl=new Ext.XTemplate(n.tpl)):n.tpl=new Ext.XTemplate("{"+n.dataIndex+"}");Ext.apply(this,n)}});Ext.reg("lvcolumn",Ext.list.Column);Ext.list.NumberColumn=Ext.extend(Ext.list.Column,{format:"0,000.00",constructor:function(n){n.tpl=n.tpl||new Ext.XTemplate("{"+n.dataIndex+':number("'+(n.format||this.format)+'")}');Ext.list.NumberColumn.superclass.constructor.call(this,n)}});Ext.reg("lvnumbercolumn",Ext.list.NumberColumn);Ext.list.DateColumn=Ext.extend(Ext.list.Column,{format:"m/d/Y",constructor:function(n){n.tpl=n.tpl||new Ext.XTemplate("{"+n.dataIndex+':date("'+(n.format||this.format)+'")}');Ext.list.DateColumn.superclass.constructor.call(this,n)}});Ext.reg("lvdatecolumn",Ext.list.DateColumn);Ext.list.BooleanColumn=Ext.extend(Ext.list.Column,{trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(n){n.tpl=n.tpl||new Ext.XTemplate("{"+n.dataIndex+":this.format}");var t=this.trueText,i=this.falseText,r=this.undefinedText;n.tpl.format=function(n){return n===undefined?r:!n||n==="false"?i:t};Ext.list.DateColumn.superclass.constructor.call(this,n)}});Ext.reg("lvbooleancolumn",Ext.list.BooleanColumn);Ext.list.ColumnResizer=Ext.extend(Ext.util.Observable,{minPct:.05,constructor:function(n){Ext.apply(this,n);Ext.list.ColumnResizer.superclass.constructor.call(this)},init:function(n){this.view=n;n.on("render",this.initEvents,this)},initEvents:function(n){n.mon(n.innerHd,"mousemove",this.handleHdMove,this);this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeStart.createDelegate(this),onStart:this.onStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(n.innerHd);n.on("beforedestroy",this.tracker.destroy,this.tracker)},handleHdMove:function(n){var u=5,f=n.getPageX(),t=n.getTarget("em",3,!0);if(t){var e=t.getRegion(),r=t.dom.style,i=t.dom.parentNode;f-e.left<=u&&i!=i.parentNode.firstChild?(this.activeHd=Ext.get(i.previousSibling.firstChild),r.cursor=Ext.isWebKit?"e-resize":"col-resize"):e.right-f<=u&&i!=i.parentNode.lastChild.previousSibling?(this.activeHd=t,r.cursor=Ext.isWebKit?"w-resize":"col-resize"):(delete this.activeHd,r.cursor="")}},onBeforeStart:function(){return this.dragHd=this.activeHd,!!this.dragHd},onStart:function(){var n=this,t=n.view,i=n.dragHd,r=n.tracker.getXY()[0];n.proxy=t.el.createChild({cls:"x-list-resizer"});n.dragX=i.getX();n.headerIndex=t.findHeaderIndex(i);n.headersDisabled=t.disableHeaders;t.disableHeaders=!0;n.proxy.setHeight(t.el.getHeight());n.proxy.setX(n.dragX);n.proxy.setWidth(r-n.dragX);this.setBoundaries()},setBoundaries:function(n){var t=this.view,i=this.headerIndex,e=t.innerHd.getWidth(),n=t.innerHd.getX(),r=Math.ceil(e*this.minPct),c=e-r,o=t.columns.length,s=t.innerHd.select("em",!0),h=r+n,u=c+n,f;o==2?(this.minX=h,this.maxX=u):(f=s.item(i+2),this.minX=s.item(i).getX()+r,this.maxX=f?f.getX()-r:u,i==0?this.minX=h:i==o-2&&(this.maxX=u))},onDrag:function(){var n=this,t=n.tracker.getXY()[0].constrain(n.minX,n.maxX);n.proxy.setWidth(t-this.dragX)},onEnd:function(){var e=this.proxy.getWidth(),t=this.headerIndex,n=this.view,i=n.columns,o=n.innerHd.getWidth(),r=Math.ceil(e*n.maxColumnWidth/o)/100,s=this.headersDisabled,u=i[t],f=i[t+1],h=u.width+f.width;this.proxy.remove();u.width=r;f.width=h-r;delete this.dragHd;n.setHdWidths();n.refresh();setTimeout(function(){n.disableHeaders=s},100)}});Ext.ListView.ColumnResizer=Ext.list.ColumnResizer;Ext.list.Sorter=Ext.extend(Ext.util.Observable,{sortClasses:["sort-asc","sort-desc"],constructor:function(n){Ext.apply(this,n);Ext.list.Sorter.superclass.constructor.call(this)},init:function(n){this.view=n;n.on("render",this.initEvents,this)},initEvents:function(n){n.mon(n.innerHd,"click",this.onHdClick,this);n.innerHd.setStyle("cursor","pointer");n.mon(n.store,"datachanged",this.updateSortState,this);this.updateSortState.defer(10,this,[n.store])},updateSortState:function(n){var i=n.getSortState(),u,r,t,f,e;if(i){for(this.sortState=i,u=this.view.columns,r=-1,t=0,f=u.length;t<f;t++)if(u[t].dataIndex==i.field){r=t;break}r!=-1&&(e=i.direction,this.updateSortIcon(r,e))}},updateSortIcon:function(n,t){var i=this.sortClasses,r=this.view.innerHd.select("em").removeClass(i);r.item(n).addClass(i[t=="DESC"?1:0])},onHdClick:function(n){var t=n.getTarget("em",3),i;t&&!this.view.disableHeaders&&(i=this.view.findHeaderIndex(t),this.view.store.sort(this.view.columns[i].dataIndex))}});Ext.ListView.Sorter=Ext.list.Sorter;Ext.TabPanel=Ext.extend(Ext.Panel,{deferredRender:!0,tabWidth:120,minTabWidth:30,resizeTabs:!1,enableTabScroll:!1,scrollIncrement:0,scrollRepeatInterval:400,scrollDuration:.35,animScroll:!0,tabPosition:"top",baseCls:"x-tab-panel",autoTabs:!1,autoTabSelector:"div.x-tab",activeTab:undefined,tabMargin:2,plain:!1,wheelIncrement:20,idDelimiter:"__",itemCls:"x-tab-item",elements:"body",headerAsText:!1,frame:!1,hideBorders:!0,initComponent:function(){this.frame=!1;Ext.TabPanel.superclass.initComponent.call(this);this.addEvents("beforetabchange","tabchange","contextmenu");this.setLayout(new Ext.layout.CardLayout(Ext.apply({layoutOnCardChange:this.layoutOnTabChange,deferredRender:this.deferredRender},this.layoutConfig)));this.tabPosition=="top"?(this.elements+=",header",this.stripTarget="header"):(this.elements+=",footer",this.stripTarget="footer");this.stack||(this.stack=Ext.TabPanel.AccessStack());this.initItems()},onRender:function(n,t){var r,u,f,i;Ext.TabPanel.superclass.onRender.call(this,n,t);this.plain&&(r=this.tabPosition=="top"?"header":"footer",this[r].addClass("x-tab-panel-"+r+"-plain"));u=this[this.stripTarget];this.stripWrap=u.createChild({cls:"x-tab-strip-wrap",cn:{tag:"ul",cls:"x-tab-strip x-tab-strip-"+this.tabPosition}});f=this.tabPosition=="bottom"?this.stripWrap:null;u.createChild({cls:"x-tab-strip-spacer"},f);this.strip=new Ext.Element(this.stripWrap.dom.firstChild);this.edge=this.strip.createChild({tag:"li",cls:"x-tab-edge",cn:[{tag:"span",cls:"x-tab-strip-text",cn:"&#160;"}]});this.strip.createChild({cls:"x-clear"});this.body.addClass("x-tab-panel-body-"+this.tabPosition);this.itemTpl||(i=new Ext.Template('<li class="{cls}" id="{id}"><a class="x-tab-strip-close"><\/a>','<a class="x-tab-right" href="#"><em class="x-tab-left">','<span class="x-tab-strip-inner"><span class="x-tab-strip-text {iconCls}">{text}<\/span><\/span>',"<\/em><\/a><\/li>"),i.disableFormats=!0,i.compile(),Ext.TabPanel.prototype.itemTpl=i);this.items.each(this.initTab,this)},afterRender:function(){if(Ext.TabPanel.superclass.afterRender.call(this),this.autoTabs&&this.readTabs(!1),this.activeTab!==undefined){var n=Ext.isObject(this.activeTab)?this.activeTab:this.items.get(this.activeTab);delete this.activeTab;this.setActiveTab(n)}},initEvents:function(){Ext.TabPanel.superclass.initEvents.call(this);this.mon(this.strip,{scope:this,mousedown:this.onStripMouseDown,contextmenu:this.onStripContextMenu});this.enableTabScroll&&this.mon(this.strip,"mousewheel",this.onWheel,this)},findTargets:function(n){var t=null,i=n.getTarget("li:not(.x-tab-edge)",this.strip);return i&&(t=this.getComponent(i.id.split(this.idDelimiter)[1]),t.disabled)?{close:null,item:null,el:null}:{close:n.getTarget(".x-tab-strip-close",this.strip),item:t,el:i}},onStripMouseDown:function(n){if(n.button===0){n.preventDefault();var t=this.findTargets(n);if(t.close){t.item.fireEvent("beforeclose",t.item)!==!1&&(t.item.fireEvent("close",t.item),this.remove(t.item));return}t.item&&t.item!=this.activeTab&&this.setActiveTab(t.item)}},onStripContextMenu:function(n){n.preventDefault();var t=this.findTargets(n);t.item&&this.fireEvent("contextmenu",this,t.item,n)},readTabs:function(n){var r,t,u,i,f;for(n===!0&&this.items.each(function(n){this.remove(n)},this),r=this.el.query(this.autoTabSelector),t=0,u=r.length;t<u;t++)i=r[t],f=i.getAttribute("title"),i.removeAttribute("title"),this.add({title:f,contentEl:i})},initTab:function(n,t){var r=this.strip.dom.childNodes[t],u=this.getTemplateArgs(n),f=r?this.itemTpl.insertBefore(r,u):this.itemTpl.append(this.strip,u),e="x-tab-strip-over",i=Ext.get(f);i.hover(function(){n.disabled||i.addClass(e)},function(){i.removeClass(e)});n.tabTip&&(i.child("span.x-tab-strip-text",!0).qtip=n.tabTip);n.tabEl=f;i.select("a").on("click",function(n){if(!n.getPageX())this.onStripMouseDown(n)},this,{preventDefault:!0});n.on({scope:this,disable:this.onItemDisabled,enable:this.onItemEnabled,titlechange:this.onItemTitleChanged,iconchange:this.onItemIconChanged,beforeshow:this.onBeforeShowItem})},getTemplateArgs:function(n){var t=n.closable?"x-tab-strip-closable":"";return n.disabled&&(t+=" x-item-disabled"),n.iconCls&&(t+=" x-tab-with-icon"),n.tabCls&&(t+=" "+n.tabCls),{id:this.id+this.idDelimiter+n.getItemId(),text:n.title,cls:t,iconCls:n.iconCls||""}},onAdd:function(n){if(Ext.TabPanel.superclass.onAdd.call(this,n),this.rendered){var t=this.items;this.initTab(n,t.indexOf(n));this.delegateUpdates()}},onBeforeAdd:function(n){var i=n.events?this.items.containsKey(n.getItemId())?n:null:this.items.get(n),t;if(i)return this.setActiveTab(n),!1;Ext.TabPanel.superclass.onBeforeAdd.apply(this,arguments);t=n.elements;n.elements=t?t.replace(",header",""):t;n.border=n.border===!0},onRemove:function(n){var t=Ext.get(n.tabEl),i;t&&(t.select("a").removeAllListeners(),Ext.destroy(t));Ext.TabPanel.superclass.onRemove.call(this,n);this.stack.remove(n);delete n.tabEl;n.un("disable",this.onItemDisabled,this);n.un("enable",this.onItemEnabled,this);n.un("titlechange",this.onItemTitleChanged,this);n.un("iconchange",this.onItemIconChanged,this);n.un("beforeshow",this.onBeforeShowItem,this);n==this.activeTab&&(i=this.stack.next(),i?this.setActiveTab(i):this.items.getCount()>0?this.setActiveTab(0):this.setActiveTab(null));this.destroying||this.delegateUpdates()},onBeforeShowItem:function(n){if(n!=this.activeTab)return this.setActiveTab(n),!1},onItemDisabled:function(n){var t=this.getTabEl(n);t&&Ext.fly(t).addClass("x-item-disabled");this.stack.remove(n)},onItemEnabled:function(n){var t=this.getTabEl(n);t&&Ext.fly(t).removeClass("x-item-disabled")},onItemTitleChanged:function(n){var t=this.getTabEl(n);t&&(Ext.fly(t).child("span.x-tab-strip-text",!0).innerHTML=n.title,this.delegateUpdates())},onItemIconChanged:function(n,t,i){var r=this.getTabEl(n);r&&(r=Ext.get(r),r.child("span.x-tab-strip-text").replaceClass(i,t),r[Ext.isEmpty(t)?"removeClass":"addClass"]("x-tab-with-icon"),this.delegateUpdates())},getTabEl:function(n){var t=this.getComponent(n);return t?t.tabEl:null},onResize:function(){Ext.TabPanel.superclass.onResize.apply(this,arguments);this.delegateUpdates()},beginUpdate:function(){this.suspendUpdates=!0},endUpdate:function(){this.suspendUpdates=!1;this.delegateUpdates()},hideTabStripItem:function(n){n=this.getComponent(n);var t=this.getTabEl(n);t&&(t.style.display="none",this.delegateUpdates());this.stack.remove(n)},unhideTabStripItem:function(n){n=this.getComponent(n);var t=this.getTabEl(n);t&&(t.style.display="",this.delegateUpdates())},delegateUpdates:function(){var n=this.rendered;this.suspendUpdates||(this.resizeTabs&&n&&this.autoSizeTabs(),this.enableTabScroll&&n&&this.autoScrollTabs())},autoSizeTabs:function(){var r=this.items.length,u=this.tabPosition!="bottom"?"header":"footer",l=this[u].dom.offsetWidth,f=this[u].dom.clientWidth,t,i,n,e;if(this.resizeTabs&&!(r<1)&&f)for(t=Math.max(Math.min(Math.floor((f-4)/r)-this.tabMargin,this.tabWidth),this.minTabWidth),this.lastTabWidth=t,i=this.strip.query("li:not(.x-tab-edge)"),n=0,e=i.length;n<e;n++){var o=i[n],s=Ext.fly(o).child(".x-tab-strip-inner",!0),h=o.offsetWidth,c=s.offsetWidth;s.style.width=t-(h-c)+"px"}},adjustBodyWidth:function(n){return this.header&&this.header.setWidth(n),this.footer&&this.footer.setWidth(n),n},setActiveTab:function(n){var t,i;if(n=this.getComponent(n),this.fireEvent("beforetabchange",this,n,this.activeTab)!==!1){if(!this.rendered){this.activeTab=n;return}this.activeTab!=n&&(this.activeTab&&(t=this.getTabEl(this.activeTab),t&&Ext.fly(t).removeClass("x-tab-strip-active")),this.activeTab=n,n&&(i=this.getTabEl(n),Ext.fly(i).addClass("x-tab-strip-active"),this.stack.add(n),this.layout.setActiveItem(n),this.delegateUpdates(),this.scrolling&&this.scrollToTab(n,this.animScroll)),this.fireEvent("tabchange",this,n))}},getActiveTab:function(){return this.activeTab||null},getItem:function(n){return this.getComponent(n)},autoScrollTabs:function(){this.pos=this.tabPosition=="bottom"?this.footer:this.header;var f=this.items.length,o=this.pos.dom.offsetWidth,n=this.pos.dom.clientWidth,i=this.stripWrap,t=i.dom,e=t.offsetWidth,u=this.getScrollPos(),r=this.edge.getOffsetsTo(this.stripWrap)[0]+u;!this.enableTabScroll||e<20||(f==0||r<=n?(t.scrollLeft=0,i.setWidth(n),this.scrolling&&(this.scrolling=!1,this.pos.removeClass("x-tab-scrolling"),this.scrollLeft.hide(),this.scrollRight.hide(),(Ext.isAir||Ext.isWebKit)&&(t.style.marginLeft="",t.style.marginRight=""))):(this.scrolling||(this.pos.addClass("x-tab-scrolling"),(Ext.isAir||Ext.isWebKit)&&(t.style.marginLeft="18px",t.style.marginRight="18px")),n-=i.getMargins("lr"),i.setWidth(n>20?n:20),this.scrolling||(this.scrollLeft?(this.scrollLeft.show(),this.scrollRight.show()):this.createScrollers()),this.scrolling=!0,u>r-n?t.scrollLeft=r-n:this.scrollToTab(this.activeTab,!1),this.updateScrollButtons()))},createScrollers:function(){var i,n,t;this.pos.addClass("x-tab-scrolling-"+this.tabPosition);i=this.stripWrap.dom.offsetHeight;n=this.pos.insertFirst({cls:"x-tab-scroller-left"});n.setHeight(i);n.addClassOnOver("x-tab-scroller-left-over");this.leftRepeater=new Ext.util.ClickRepeater(n,{interval:this.scrollRepeatInterval,handler:this.onScrollLeft,scope:this});this.scrollLeft=n;t=this.pos.insertFirst({cls:"x-tab-scroller-right"});t.setHeight(i);t.addClassOnOver("x-tab-scroller-right-over");this.rightRepeater=new Ext.util.ClickRepeater(t,{interval:this.scrollRepeatInterval,handler:this.onScrollRight,scope:this});this.scrollRight=t},getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this.getScrollPos()},getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0},getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100)},scrollToTab:function(n,t){if(n){var u=this.getTabEl(n),i=this.getScrollPos(),f=this.getScrollArea(),r=Ext.fly(u).getOffsetsTo(this.stripWrap)[0]+i,e=r+u.offsetWidth;r<i?this.scrollTo(r,t):e>i+f&&this.scrollTo(e-f,t)}},scrollTo:function(n,t){this.stripWrap.scrollTo("left",n,t?this.getScrollAnim():!1);t||this.updateScrollButtons()},onWheel:function(n){var r=n.getWheelDelta()*this.wheelIncrement*-1;n.stopEvent();var t=this.getScrollPos(),u=t+r,f=this.getScrollWidth()-this.getScrollArea(),i=Math.max(0,Math.min(f,u));i!=t&&this.scrollTo(i,!1)},onScrollRight:function(){var i=this.getScrollWidth()-this.getScrollArea(),n=this.getScrollPos(),t=Math.min(i,n+this.getScrollIncrement());t!=n&&this.scrollTo(t,this.animScroll)},onScrollLeft:function(){var n=this.getScrollPos(),t=Math.max(0,n-this.getScrollIncrement());t!=n&&this.scrollTo(t,this.animScroll)},updateScrollButtons:function(){var n=this.getScrollPos();this.scrollLeft[n===0?"addClass":"removeClass"]("x-tab-scroller-left-disabled");this.scrollRight[n>=this.getScrollWidth()-this.getScrollArea()?"addClass":"removeClass"]("x-tab-scroller-right-disabled")},beforeDestroy:function(){Ext.destroy(this.leftRepeater,this.rightRepeater);this.deleteMembers("strip","edge","scrollLeft","scrollRight","stripWrap");this.activeTab=null;Ext.TabPanel.superclass.beforeDestroy.apply(this)}});Ext.reg("tabpanel",Ext.TabPanel);Ext.TabPanel.prototype.activate=Ext.TabPanel.prototype.setActiveTab;Ext.TabPanel.AccessStack=function(){var n=[];return{add:function(t){n.push(t);n.length>10&&n.shift()},remove:function(t){for(var r=[],i=0,u=n.length;i<u;i++)n[i]!=t&&r.push(n[i]);n=r},next:function(){return n.pop()}}};Ext.Button=Ext.extend(Ext.BoxComponent,{hidden:!1,disabled:!1,pressed:!1,enableToggle:!1,menuAlign:"tl-bl?",type:"button",menuClassTarget:"tr:nth(2)",clickEvent:"click",handleMouseEvents:!0,tooltipType:"qtip",buttonSelector:"button:first-child",scale:"small",iconAlign:"left",arrowAlign:"right",initComponent:function(){this.menu&&(Ext.isArray(this.menu)&&(this.menu={items:this.menu}),Ext.isObject(this.menu)&&(this.menu.ownerCt=this),this.menu=Ext.menu.MenuMgr.get(this.menu),this.menu.ownerCt=undefined);Ext.Button.superclass.initComponent.call(this);this.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout");Ext.isString(this.toggleGroup)&&(this.enableToggle=!0)},getTemplateArgs:function(){return[this.type,"x-btn-"+this.scale+" x-btn-icon-"+this.scale+"-"+this.iconAlign,this.getMenuClass(),this.cls,this.id]},setButtonClass:function(){this.useSetClass&&(Ext.isEmpty(this.oldCls)||this.el.removeClass([this.oldCls,"x-btn-pressed"]),this.oldCls=this.iconCls||this.icon?this.text?"x-btn-text-icon":"x-btn-icon":"x-btn-noicon",this.el.addClass([this.oldCls,this.pressed?"x-btn-pressed":null]))},getMenuClass:function(){return this.menu?this.arrowAlign!="bottom"?"x-btn-arrow":"x-btn-arrow-bottom":""},onRender:function(n,t){this.template||(Ext.Button.buttonTemplate||(Ext.Button.buttonTemplate=new Ext.Template('<table id="{4}" cellspacing="0" class="x-btn {3}"><tbody class="{1}">','<tr><td class="x-btn-tl"><i>&#160;<\/i><\/td><td class="x-btn-tc"><\/td><td class="x-btn-tr"><i>&#160;<\/i><\/td><\/tr>','<tr><td class="x-btn-ml"><i>&#160;<\/i><\/td><td class="x-btn-mc"><em class="{2} x-unselectable" unselectable="on"><button type="{0}"><\/button><\/em><\/td><td class="x-btn-mr"><i>&#160;<\/i><\/td><\/tr>','<tr><td class="x-btn-bl"><i>&#160;<\/i><\/td><td class="x-btn-bc"><\/td><td class="x-btn-br"><i>&#160;<\/i><\/td><\/tr>',"<\/tbody><\/table>"),Ext.Button.buttonTemplate.compile()),this.template=Ext.Button.buttonTemplate);var i,r=this.getTemplateArgs();i=t?this.template.insertBefore(t,r,!0):this.template.append(n,r,!0);this.btnEl=i.child(this.buttonSelector);this.mon(this.btnEl,{scope:this,focus:this.onFocus,blur:this.onBlur});this.initButtonEl(i,this.btnEl);Ext.ButtonToggleMgr.register(this)},initButtonEl:function(n,t){if(this.el=n,this.setIcon(this.icon),this.setText(this.text),this.setIconClass(this.iconCls),Ext.isDefined(this.tabIndex)&&(t.dom.tabIndex=this.tabIndex),this.tooltip&&this.setTooltip(this.tooltip,!0),this.handleMouseEvents&&this.mon(n,{scope:this,mouseover:this.onMouseOver,mousedown:this.onMouseDown}),this.menu&&this.mon(this.menu,{scope:this,show:this.onMenuShow,hide:this.onMenuHide}),this.repeat){var i=new Ext.util.ClickRepeater(n,Ext.isObject(this.repeat)?this.repeat:{});this.mon(i,"click",this.onRepeatClick,this)}else this.mon(n,this.clickEvent,this.onClick,this)},afterRender:function(){Ext.Button.superclass.afterRender.call(this);this.useSetClass=!0;this.setButtonClass();this.doc=Ext.getDoc();this.doAutoWidth()},setIconClass:function(n){return this.iconCls=n,this.el&&(this.btnEl.dom.className="",this.btnEl.addClass(["x-btn-text",n||""]),this.setButtonClass()),this},setTooltip:function(n,t){return this.rendered?(t||this.clearTip(),Ext.isObject(n)?(Ext.QuickTips.register(Ext.apply({target:this.btnEl.id},n)),this.tooltip=n):this.btnEl.dom[this.tooltipType]=n):this.tooltip=n,this},clearTip:function(){Ext.isObject(this.tooltip)&&Ext.QuickTips.unregister(this.btnEl)},beforeDestroy:function(){this.rendered&&this.clearTip();this.menu&&this.destroyMenu!==!1&&Ext.destroy(this.btnEl,this.menu);Ext.destroy(this.repeater)},onDestroy:function(){this.rendered&&(this.doc.un("mouseover",this.monitorMouseOver,this),this.doc.un("mouseup",this.onMouseUp,this),delete this.doc,delete this.btnEl,Ext.ButtonToggleMgr.unregister(this));Ext.Button.superclass.onDestroy.call(this)},doAutoWidth:function(){if(this.autoWidth!==!1&&this.el&&this.text&&this.width===undefined){if(this.el.setWidth("auto"),Ext.isIE7&&Ext.isStrict){var n=this.btnEl;n&&n.getWidth()>20&&(n.clip(),n.setWidth(Ext.util.TextMetrics.measure(n,this.text).width+n.getFrameWidth("lr")))}this.minWidth&&this.el.getWidth()<this.minWidth&&this.el.setWidth(this.minWidth)}},setHandler:function(n,t){return this.handler=n,this.scope=t,this},setText:function(n){return this.text=n,this.el&&(this.btnEl.update(n||"&#160;"),this.setButtonClass()),this.doAutoWidth(),this},setIcon:function(n){return this.icon=n,this.el&&(this.btnEl.setStyle("background-image",n?"url("+n+")":""),this.setButtonClass()),this},getText:function(){return this.text},toggle:function(n,t){return n=n===undefined?!this.pressed:!!n,n!=this.pressed&&(this.rendered&&this.el[n?"addClass":"removeClass"]("x-btn-pressed"),this.pressed=n,t||(this.fireEvent("toggle",this,n),this.toggleHandler&&this.toggleHandler.call(this.scope||this,this,n))),this},onDisable:function(){this.onDisableChange(!0)},onEnable:function(){this.onDisableChange(!1)},onDisableChange:function(n){this.el&&(Ext.isIE6&&this.text||this.el[n?"addClass":"removeClass"](this.disabledClass),this.el.dom.disabled=n);this.disabled=n},showMenu:function(){return this.rendered&&this.menu&&(this.tooltip&&Ext.QuickTips.getQuickTip().cancelShow(this.btnEl),this.menu.isVisible()&&this.menu.hide(),this.menu.ownerCt=this,this.menu.show(this.el,this.menuAlign)),this},hideMenu:function(){return this.hasVisibleMenu()&&this.menu.hide(),this},hasVisibleMenu:function(){return this.menu&&this.menu.ownerCt==this&&this.menu.isVisible()},onRepeatClick:function(n,t){this.onClick(t)},onClick:function(n){(n&&n.preventDefault(),n.button===0)&&(this.disabled||(this.doToggle(),!this.menu||this.hasVisibleMenu()||this.ignoreNextClick||this.showMenu(),this.fireEvent("click",this,n),this.handler&&this.handler.call(this.scope||this,this,n)))},doToggle:function(){this.enableToggle&&(this.allowDepress!==!1||!this.pressed)&&this.toggle()},isMenuTriggerOver:function(n,t){return this.menu&&!t},isMenuTriggerOut:function(n,t){return this.menu&&!t},onMouseOver:function(n){if(!this.disabled){var t=n.within(this.el,!0);if(!t){if(this.el.addClass("x-btn-over"),!this.monitoringMouseOver){this.doc.on("mouseover",this.monitorMouseOver,this);this.monitoringMouseOver=!0}this.fireEvent("mouseover",this,n)}this.isMenuTriggerOver(n,t)&&this.fireEvent("menutriggerover",this,this.menu,n)}},monitorMouseOver:function(n){if(n.target!=this.el.dom&&!n.within(this.el)){this.monitoringMouseOver&&(this.doc.un("mouseover",this.monitorMouseOver,this),this.monitoringMouseOver=!1);this.onMouseOut(n)}},onMouseOut:function(n){var t=n.within(this.el)&&n.target!=this.el.dom;this.el.removeClass("x-btn-over");this.fireEvent("mouseout",this,n);this.isMenuTriggerOut(n,t)&&this.fireEvent("menutriggerout",this,this.menu,n)},focus:function(){this.btnEl.focus()},blur:function(){this.btnEl.blur()},onFocus:function(){this.disabled||this.el.addClass("x-btn-focus")},onBlur:function(){this.el.removeClass("x-btn-focus")},getClickEl:function(){return this.el},onMouseDown:function(n){if(!this.disabled&&n.button===0){this.getClickEl(n).addClass("x-btn-click");this.doc.on("mouseup",this.onMouseUp,this)}},onMouseUp:function(n){n.button===0&&(this.getClickEl(n,!0).removeClass("x-btn-click"),this.doc.un("mouseup",this.onMouseUp,this))},onMenuShow:function(){this.menu.ownerCt==this&&(this.menu.ownerCt=this,this.ignoreNextClick=0,this.el.addClass("x-btn-menu-active"),this.fireEvent("menushow",this,this.menu))},onMenuHide:function(){this.menu.ownerCt==this&&(this.el.removeClass("x-btn-menu-active"),this.ignoreNextClick=this.restoreClick.defer(250,this),this.fireEvent("menuhide",this,this.menu),delete this.menu.ownerCt)},restoreClick:function(){this.ignoreNextClick=0}});Ext.reg("button",Ext.Button);Ext.ButtonToggleMgr=function(){function t(t,i){var u,r,f;if(i)for(u=n[t.toggleGroup],r=0,f=u.length;r<f;r++)u[r]!=t&&u[r].toggle(!1)}var n={};return{register:function(i){if(i.toggleGroup){var r=n[i.toggleGroup];r||(r=n[i.toggleGroup]=[]);r.push(i);i.on("toggle",t)}},unregister:function(i){if(i.toggleGroup){var r=n[i.toggleGroup];r&&(r.remove(i),i.un("toggle",t))}},getPressed:function(t){var r=n[t],i,u;if(r)for(i=0,u=r.length;i<u;i++)if(r[i].pressed===!0)return r[i];return null}}}();Ext.SplitButton=Ext.extend(Ext.Button,{arrowSelector:"em",split:!0,initComponent:function(){Ext.SplitButton.superclass.initComponent.call(this);this.addEvents("arrowclick")},onRender:function(){Ext.SplitButton.superclass.onRender.apply(this,arguments);this.arrowTooltip&&(this.el.child(this.arrowSelector).dom[this.tooltipType]=this.arrowTooltip)},setArrowHandler:function(n,t){this.arrowHandler=n;this.scope=t},getMenuClass:function(){return"x-btn-split"+(this.arrowAlign=="bottom"?"-bottom":"")},isClickOnArrow:function(n){if(this.arrowAlign!="bottom"){var t=this.el.child("em.x-btn-split"),i=t.getRegion().right-t.getPadding("r");return n.getPageX()>i}return n.getPageY()>this.btnEl.getRegion().bottom},onClick:function(n){n.preventDefault();this.disabled||(this.isClickOnArrow(n)?(!this.menu||this.menu.isVisible()||this.ignoreNextClick||this.showMenu(),this.fireEvent("arrowclick",this,n),this.arrowHandler&&this.arrowHandler.call(this.scope||this,this,n)):(this.doToggle(),this.fireEvent("click",this,n),this.handler&&this.handler.call(this.scope||this,this,n)))},isMenuTriggerOver:function(n){return this.menu&&n.target.tagName==this.arrowSelector},isMenuTriggerOut:function(n){return this.menu&&n.target.tagName!=this.arrowSelector}});Ext.reg("splitbutton",Ext.SplitButton);Ext.CycleButton=Ext.extend(Ext.SplitButton,{getItemText:function(n){if(n&&this.showText===!0){var t="";return this.prependText&&(t+=this.prependText),t+n.text}return undefined},setActiveItem:function(n,t){if(Ext.isObject(n)||(n=this.menu.getComponent(n)),n){if(this.rendered){var i=this.getItemText(n);i&&this.setText(i);this.setIconClass(n.iconCls)}else this.text=this.getItemText(n),this.iconCls=n.iconCls;this.activeItem=n;n.checked||n.setChecked(!0,t);this.forceIcon&&this.setIconClass(this.forceIcon);t||this.fireEvent("change",this,n)}},getActiveItem:function(){return this.activeItem},initComponent:function(){if(this.addEvents("change"),this.changeHandler){this.on("change",this.changeHandler,this.scope||this);delete this.changeHandler}this.itemCount=this.items.length;this.menu={cls:"x-cycle-menu",items:[]};var n=0;Ext.each(this.items,function(t,i){Ext.apply(t,{group:t.group||this.id,itemIndex:i,checkHandler:this.checkHandler,scope:this,checked:t.checked||!1});this.menu.items.push(t);t.checked&&(n=i)},this);Ext.CycleButton.superclass.initComponent.call(this);this.on("click",this.toggleSelected,this);this.setActiveItem(n,!0)},checkHandler:function(n,t){t&&this.setActiveItem(n)},toggleSelected:function(){var n=this.menu,r,i,t;for(n.render(),n.hasLayout||n.doLayout(),t=1;t<this.itemCount;t++)if(r=(this.activeItem.itemIndex+t)%this.itemCount,i=n.items.itemAt(r),!i.disabled){i.setChecked(!0);break}}});Ext.reg("cycle",Ext.CycleButton);Ext.Toolbar=function(n){Ext.isArray(n)?n={items:n,layout:"toolbar"}:(n=Ext.apply({layout:"toolbar"},n),n.buttons&&(n.items=n.buttons));Ext.Toolbar.superclass.constructor.call(this,n)},function(){var n=Ext.Toolbar;Ext.extend(n,Ext.Container,{defaultType:"button",enableOverflow:!1,trackMenus:!0,internalDefaults:{removeMode:"container",hideParent:!0},toolbarCls:"x-toolbar",initComponent:function(){n.superclass.initComponent.call(this);this.addEvents("overflowchange")},onRender:function(n,t){this.el||(this.autoCreate||(this.autoCreate={cls:this.toolbarCls+" x-small-editor"}),this.el=n.createChild(Ext.apply({id:this.id},this.autoCreate),t),Ext.Toolbar.superclass.onRender.apply(this,arguments))},lookupComponent:function(t){return Ext.isString(t)?(t=t=="-"?new n.Separator:t==" "?new n.Spacer:t=="->"?new n.Fill:new n.TextItem(t),this.applyDefaults(t)):t.isFormField||t.render?t=this.createComponent(t):t.tag?t=new n.Item({autoEl:t}):t.tagName?t=new n.Item({el:t}):Ext.isObject(t)&&(t=t.xtype?this.createComponent(t):this.constructButton(t)),t},applyDefaults:function(n){if(!Ext.isString(n)){n=Ext.Toolbar.superclass.applyDefaults.call(this,n);var t=this.internalDefaults;n.events?(Ext.applyIf(n.initialConfig,t),Ext.apply(n,t)):Ext.applyIf(n,t)}return n},addSeparator:function(){return this.add(new n.Separator)},addSpacer:function(){return this.add(new n.Spacer)},addFill:function(){this.add(new n.Fill)},addElement:function(t){return this.addItem(new n.Item({el:t}))},addItem:function(){return this.add.apply(this,arguments)},addButton:function(n){var i,t,r;if(Ext.isArray(n)){for(i=[],t=0,r=n.length;t<r;t++)i.push(this.addButton(n[t]));return i}return this.add(this.constructButton(n))},addText:function(t){return this.addItem(new n.TextItem(t))},addDom:function(t){return this.add(new n.Item({autoEl:t}))},addField:function(n){return this.add(n)},insertButton:function(n,t){var r,i,u;if(Ext.isArray(t)){for(r=[],i=0,u=t.length;i<u;i++)r.push(this.insertButton(n+i,t[i]));return r}return Ext.Toolbar.superclass.insert.call(this,n,t)},trackMenu:function(n,t){if(this.trackMenus&&n.menu){var i=t?"mun":"mon";this[i](n,"menutriggerover",this.onButtonTriggerOver,this);this[i](n,"menushow",this.onButtonMenuShow,this);this[i](n,"menuhide",this.onButtonMenuHide,this)}},constructButton:function(n){return n.events?n:this.createComponent(n,n.split?"splitbutton":this.defaultType)},onAdd:function(n){Ext.Toolbar.superclass.onAdd.call(this);this.trackMenu(n);this.disabled&&n.disable()},onRemove:function(n){Ext.Toolbar.superclass.onRemove.call(this);n==this.activeMenuBtn&&delete this.activeMenuBtn;this.trackMenu(n,!0)},onDisable:function(){this.items.each(function(n){n.disable&&n.disable()})},onEnable:function(){this.items.each(function(n){n.enable&&n.enable()})},onButtonTriggerOver:function(n){this.activeMenuBtn&&this.activeMenuBtn!=n&&(this.activeMenuBtn.hideMenu(),n.showMenu(),this.activeMenuBtn=n)},onButtonMenuShow:function(n){this.activeMenuBtn=n},onButtonMenuHide:function(){delete this.activeMenuBtn}});Ext.reg("toolbar",Ext.Toolbar);n.Item=Ext.extend(Ext.BoxComponent,{hideParent:!0,enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbitem",n.Item);n.Separator=Ext.extend(n.Item,{onRender:function(n,t){this.el=n.createChild({tag:"span",cls:"xtb-sep"},t)}});Ext.reg("tbseparator",n.Separator);n.Spacer=Ext.extend(n.Item,{onRender:function(n,t){this.el=n.createChild({tag:"div",cls:"xtb-spacer",style:this.width?"width:"+this.width+"px":""},t)}});Ext.reg("tbspacer",n.Spacer);n.Fill=Ext.extend(n.Item,{render:Ext.emptyFn,isFill:!0});Ext.reg("tbfill",n.Fill);n.TextItem=Ext.extend(n.Item,{constructor:function(t){n.TextItem.superclass.constructor.call(this,Ext.isString(t)?{text:t}:t)},onRender:function(t,i){this.autoEl={cls:"xtb-text",html:this.text||""};n.TextItem.superclass.onRender.call(this,t,i)},setText:function(n){this.rendered?this.el.update(n):this.text=n}});Ext.reg("tbtext",n.TextItem);n.Button=Ext.extend(Ext.Button,{});n.SplitButton=Ext.extend(Ext.SplitButton,{});Ext.reg("tbbutton",n.Button);Ext.reg("tbsplit",n.SplitButton)}();Ext.ButtonGroup=Ext.extend(Ext.Panel,{baseCls:"x-btn-group",layout:"table",defaultType:"button",frame:!0,internalDefaults:{removeMode:"container",hideParent:!0},initComponent:function(){this.layoutConfig=this.layoutConfig||{};Ext.applyIf(this.layoutConfig,{columns:this.columns});this.title||this.addClass("x-btn-group-notitle");this.on("afterlayout",this.onAfterLayout,this);Ext.ButtonGroup.superclass.initComponent.call(this)},applyDefaults:function(n){n=Ext.ButtonGroup.superclass.applyDefaults.call(this,n);var t=this.internalDefaults;return n.events?(Ext.applyIf(n.initialConfig,t),Ext.apply(n,t)):Ext.applyIf(n,t),n},onAfterLayout:function(){var n=this.body.getFrameWidth("lr")+this.body.dom.firstChild.offsetWidth;this.body.setWidth(n);this.el.setWidth(n+this.getFrameWidth())}});Ext.reg("buttongroup",Ext.ButtonGroup),function(){var n=Ext.Toolbar;Ext.PagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",initComponent:function(){var t=[this.first=new n.Button({tooltip:this.firstText,overflowText:this.firstText,iconCls:"x-tbar-page-first",disabled:!0,handler:this.moveFirst,scope:this}),this.prev=new n.Button({tooltip:this.prevText,overflowText:this.prevText,iconCls:"x-tbar-page-prev",disabled:!0,handler:this.movePrevious,scope:this}),"-",this.beforePageText,this.inputItem=new Ext.form.NumberField({cls:"x-tbar-page-number",allowDecimals:!1,allowNegative:!1,enableKeyEvents:!0,selectOnFocus:!0,submitValue:!1,listeners:{scope:this,keydown:this.onPagingKeyDown,blur:this.onPagingBlur}}),this.afterTextItem=new n.TextItem({text:String.format(this.afterPageText,1)}),"-",this.next=new n.Button({tooltip:this.nextText,overflowText:this.nextText,iconCls:"x-tbar-page-next",disabled:!0,handler:this.moveNext,scope:this}),this.last=new n.Button({tooltip:this.lastText,overflowText:this.lastText,iconCls:"x-tbar-page-last",disabled:!0,handler:this.moveLast,scope:this}),"-",this.refresh=new n.Button({tooltip:this.refreshText,overflowText:this.refreshText,iconCls:"x-tbar-loading",handler:this.doRefresh,scope:this})],i=this.items||this.buttons||[];this.items=this.prependButtons?i.concat(t):t.concat(i);delete this.buttons;this.displayInfo&&(this.items.push("->"),this.items.push(this.displayItem=new n.TextItem({})));Ext.PagingToolbar.superclass.initComponent.call(this);this.addEvents("change","beforechange");this.on("afterlayout",this.onFirstLayout,this,{single:!0});this.cursor=0;this.bindStore(this.store,!0)},onFirstLayout:function(){this.dsLoaded&&this.onLoad.apply(this,this.dsLoaded)},updateInfo:function(){if(this.displayItem){var n=this.store.getCount(),t=n==0?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+n,this.store.getTotalCount());this.displayItem.setText(t)}},onLoad:function(n,t,i){var f;if(!this.rendered){this.dsLoaded=[n,t,i];return}f=this.getParams();this.cursor=i.params&&i.params[f.start]?i.params[f.start]:0;var u=this.getPageData(),r=u.activePage,e=u.pages;this.afterTextItem.setText(String.format(this.afterPageText,u.pages));this.inputItem.setValue(r);this.first.setDisabled(r==1);this.prev.setDisabled(r==1);this.next.setDisabled(r==e);this.last.setDisabled(r==e);this.refresh.enable();this.updateInfo();this.fireEvent("change",this,u)},getPageData:function(){var n=this.store.getTotalCount();return{total:n,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:n<this.pageSize?1:Math.ceil(n/this.pageSize)}},changePage:function(n){this.doLoad(((n-1)*this.pageSize).constrain(0,this.store.getTotalCount()))},onLoadError:function(){this.rendered&&this.refresh.enable()},readPage:function(n){var t=this.inputItem.getValue(),i;return!t||isNaN(i=parseInt(t,10))?(this.inputItem.setValue(n.activePage),!1):i},onPagingFocus:function(){this.inputItem.select()},onPagingBlur:function(){this.inputItem.setValue(this.getPageData().activePage)},onPagingKeyDown:function(n,t){var r=t.getKey(),u=this.getPageData(),i,f;r==t.RETURN?(t.stopEvent(),i=this.readPage(u),i!==!1&&(i=Math.min(Math.max(1,i),u.pages)-1,this.doLoad(i*this.pageSize))):r==t.HOME||r==t.END?(t.stopEvent(),i=r==t.HOME?1:u.pages,n.setValue(i)):(r==t.UP||r==t.PAGEUP||r==t.DOWN||r==t.PAGEDOWN)&&(t.stopEvent(),(i=this.readPage(u))&&(f=t.shiftKey?10:1,(r==t.DOWN||r==t.PAGEDOWN)&&(f*=-1),i+=f,i>=1&i<=u.pages&&n.setValue(i)))},getParams:function(){return this.paramNames||this.store.paramNames},beforeLoad:function(){this.rendered&&this.refresh&&this.refresh.disable()},doLoad:function(n){var t={},i=this.getParams();t[i.start]=n;t[i.limit]=this.pageSize;this.fireEvent("beforechange",this,t)!==!1&&this.store.load({params:t})},moveFirst:function(){this.doLoad(0)},movePrevious:function(){this.doLoad(Math.max(0,this.cursor-this.pageSize))},moveNext:function(){this.doLoad(this.cursor+this.pageSize)},moveLast:function(){var n=this.store.getTotalCount(),t=n%this.pageSize;this.doLoad(t?n-t:n-this.pageSize)},doRefresh:function(){this.doLoad(this.cursor)},bindStore:function(n,t){var i;if(!t&&this.store&&(n!==this.store&&this.store.autoDestroy?this.store.destroy():(this.store.un("beforeload",this.beforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("exception",this.onLoadError,this)),n||(this.store=null)),n){n=Ext.StoreMgr.lookup(n);n.on({scope:this,beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError});i=!0}if(this.store=n,i)this.onLoad(n,null,{})},unbind:function(){this.bindStore(null)},bind:function(n){this.bindStore(n)},onDestroy:function(){this.bindStore(null);Ext.PagingToolbar.superclass.onDestroy.call(this)}})}();Ext.reg("paging",Ext.PagingToolbar);Ext.History=function(){function t(){var t=location.href,i=t.indexOf("#"),n=i>=0?t.substr(i+1):null;return Ext.isGecko&&(n=decodeURIComponent(n)),n}function f(){i.value=u}function e(n){u=n;Ext.History.fireEvent("change",n)}function o(t){var r=['<html><body><div id="state">',Ext.util.Format.htmlEncode(t),"<\/div><\/body><\/html>"].join(""),i;try{return i=n.contentWindow.document,i.open(),i.write(r),i.close(),!0}catch(u){return!1}}function s(){if(!n.contentWindow||!n.contentWindow.document){setTimeout(s,10);return}var h=n.contentWindow.document,i=h.getElementById("state"),u=i?i.innerText:null,c=t();setInterval(function(){h=n.contentWindow.document;i=h.getElementById("state");var s=i?i.innerText:null,r=t();s!==u?(u=s,e(u),location.hash=u,c=u,f()):r!==c&&(c=r,o(r))},50);r=!0;Ext.History.fireEvent("ready",Ext.History)}function h(){if(u=i.value?i.value:t(),Ext.isIE)s();else{var n=t();setInterval(function(){var i=t();i!==n&&(n=i,e(n),f())},50);r=!0;Ext.History.fireEvent("ready",Ext.History)}}var n,i,r=!1,u;return{fieldId:"x-history-field",iframeId:"x-history-frame",events:{},init:function(t,u){if(r){Ext.callback(t,u,[this]);return}if(!Ext.isReady){Ext.onReady(function(){Ext.History.init(t,u)});return}if(i=Ext.getDom(Ext.History.fieldId),Ext.isIE&&(n=Ext.getDom(Ext.History.iframeId)),this.addEvents("ready","change"),t)this.on("ready",t,u,{single:!0});h()},add:function(n,t){return t!==!1&&this.getToken()==n?!0:Ext.isIE?o(n):(location.hash=n,!0)},back:function(){history.go(-1)},forward:function(){history.go(1)},getToken:function(){return r?u:t()}}}();Ext.apply(Ext.History,new Ext.util.Observable);Ext.Tip=Ext.extend(Ext.Panel,{minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",autoRender:!0,quickShowInterval:250,frame:!0,hidden:!0,baseCls:"x-tip",floating:{shadow:!0,shim:!0,useDisplay:!0,constrain:!1},autoHeight:!0,closeAction:"hide",initComponent:function(){Ext.Tip.superclass.initComponent.call(this);this.closable&&!this.title&&(this.elements+=",header")},afterRender:function(){Ext.Tip.superclass.afterRender.call(this);this.closable&&this.addTool({id:"close",handler:this[this.closeAction],scope:this})},showAt:function(n){Ext.Tip.superclass.show.call(this);this.measureWidth===!1||this.initialConfig&&typeof this.initialConfig.width=="number"||this.doAutoWidth();this.constrainPosition&&(n=this.el.adjustForConstraints(n));this.setPagePosition(n[0],n[1])},doAutoWidth:function(n){n=n||0;var t=this.body.getTextWidth();this.title&&(t=Math.max(t,this.header.child("span").getTextWidth(this.title)));t+=this.getFrameWidth()+(this.closable?20:0)+this.body.getPadding("lr")+n;this.setWidth(t.constrain(this.minWidth,this.maxWidth));Ext.isIE7&&!this.repainted&&(this.el.repaint(),this.repainted=!0)},showBy:function(n,t){this.rendered||this.render(Ext.getBody());this.showAt(this.el.getAlignToXY(n,t||this.defaultAlign))},initDraggable:function(){this.dd=new Ext.Tip.DD(this,typeof this.draggable=="boolean"?null:this.draggable);this.header.addClass("x-tip-draggable")}});Ext.reg("tip",Ext.Tip);Ext.Tip.DD=function(n,t){Ext.apply(this,t);this.tip=n;Ext.Tip.DD.superclass.constructor.call(this,n.el.id,"WindowDD-"+n.id);this.setHandleElId(n.header.id);this.scroll=!1};Ext.extend(Ext.Tip.DD,Ext.dd.DD,{moveOnly:!0,scroll:!1,headerOffsets:[100,25],startDrag:function(){this.tip.el.disableShadow()},endDrag:function(){this.tip.el.enableShadow(!0)}});Ext.ToolTip=Ext.extend(Ext.Tip,{showDelay:500,hideDelay:200,dismissDelay:5e3,trackMouse:!1,anchorToTarget:!0,anchorOffset:0,targetCounter:0,constrainPosition:!1,initComponent:function(){Ext.ToolTip.superclass.initComponent.call(this);this.lastActive=new Date;this.initTarget(this.target);this.origAnchor=this.anchor},onRender:function(n,t){Ext.ToolTip.superclass.onRender.call(this,n,t);this.anchorCls="x-tip-anchor-"+this.getAnchorPosition();this.anchorEl=this.el.createChild({cls:"x-tip-anchor "+this.anchorCls})},afterRender:function(){Ext.ToolTip.superclass.afterRender.call(this);this.anchorEl.setStyle("z-index",this.el.getZIndex()+1).setVisibilityMode(Ext.Element.DISPLAY)},initTarget:function(n){var i,t;(i=Ext.get(n))&&(this.target&&(t=Ext.get(this.target),this.mun(t,"mouseover",this.onTargetOver,this),this.mun(t,"mouseout",this.onTargetOut,this),this.mun(t,"mousemove",this.onMouseMove,this)),this.mon(i,{mouseover:this.onTargetOver,mouseout:this.onTargetOut,mousemove:this.onMouseMove,scope:this}),this.target=i);this.anchor&&(this.anchorTarget=this.target)},onMouseMove:function(n){var t=this.delegate?n.getTarget(this.delegate):this.triggerElement=!0;if(t)if(this.targetXY=n.getXY(),t===this.triggerElement)!this.hidden&&this.trackMouse&&this.setPagePosition(this.getTargetXY());else{this.hide();this.lastActive=new Date(0);this.onTargetOver(n)}else!this.closable&&this.isVisible()&&this.hide()},getTargetXY:function(){var t;if(this.delegate&&(this.anchorTarget=this.triggerElement),this.anchor){this.targetCounter++;var i=this.getOffsets(),r=this.anchorToTarget&&!this.trackMouse?this.el.getAlignToXY(this.anchorTarget,this.getAnchorAlign()):this.targetXY,o=Ext.lib.Dom.getViewWidth()-5,s=Ext.lib.Dom.getViewHeight()-5,u=document.documentElement,f=document.body,h=(u.scrollLeft||f.scrollLeft||0)+5,c=(u.scrollTop||f.scrollTop||0)+5,n=[r[0]+i[0],r[1]+i[1]],e=this.getSize();if(this.anchorEl.removeClass(this.anchorCls),this.targetCounter<2){if(n[0]<h)return this.anchorToTarget&&(this.defaultAlign="l-r",this.mouseOffset&&(this.mouseOffset[0]*=-1)),this.anchor="left",this.getTargetXY();if(n[0]+e.width>o)return this.anchorToTarget&&(this.defaultAlign="r-l",this.mouseOffset&&(this.mouseOffset[0]*=-1)),this.anchor="right",this.getTargetXY();if(n[1]<c)return this.anchorToTarget&&(this.defaultAlign="t-b",this.mouseOffset&&(this.mouseOffset[1]*=-1)),this.anchor="top",this.getTargetXY();if(n[1]+e.height>s)return this.anchorToTarget&&(this.defaultAlign="b-t",this.mouseOffset&&(this.mouseOffset[1]*=-1)),this.anchor="bottom",this.getTargetXY()}return this.anchorCls="x-tip-anchor-"+this.getAnchorPosition(),this.anchorEl.addClass(this.anchorCls),this.targetCounter=0,n}return t=this.getMouseOffset(),[this.targetXY[0]+t[0],this.targetXY[1]+t[1]]},getMouseOffset:function(){var n=this.anchor?[0,0]:[15,18];return this.mouseOffset&&(n[0]+=this.mouseOffset[0],n[1]+=this.mouseOffset[1]),n},getAnchorPosition:function(){if(this.anchor)this.tipAnchor=this.anchor.charAt(0);else{var n=this.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!n)throw"AnchorTip.defaultAlign is invalid";this.tipAnchor=n[1].charAt(0)}switch(this.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var n,i=this.getAnchorPosition().charAt(0),t;if(this.anchorToTarget&&!this.trackMouse)switch(i){case"t":n=[0,9];break;case"b":n=[0,-13];break;case"r":n=[-13,0];break;default:n=[9,0]}else switch(i){case"t":n=[-15-this.anchorOffset,30];break;case"b":n=[-19-this.anchorOffset,-13-this.el.dom.offsetHeight];break;case"r":n=[-15-this.el.dom.offsetWidth,-13-this.anchorOffset];break;default:n=[25,-13-this.anchorOffset]}return t=this.getMouseOffset(),n[0]+=t[0],n[1]+=t[1],n},onTargetOver:function(n){if(!this.disabled&&!n.within(this.target.dom,!0)){var t=n.getTarget(this.delegate);t&&(this.triggerElement=t,this.clearTimer("hide"),this.targetXY=n.getXY(),this.delayShow())}},delayShow:function(){this.hidden&&!this.showTimer?this.lastActive.getElapsed()<this.quickShowInterval?this.show():this.showTimer=this.show.defer(this.showDelay,this):this.hidden||this.autoHide===!1||this.show()},onTargetOut:function(n){this.disabled||n.within(this.target.dom,!0)||(this.clearTimer("show"),this.autoHide!==!1&&this.delayHide())},delayHide:function(){this.hidden||this.hideTimer||(this.hideTimer=this.hide.defer(this.hideDelay,this))},hide:function(){this.clearTimer("dismiss");this.lastActive=new Date;this.anchorEl&&this.anchorEl.hide();Ext.ToolTip.superclass.hide.call(this);delete this.triggerElement},show:function(){this.anchor&&(this.showAt([-1e3,-1e3]),this.origConstrainPosition=this.constrainPosition,this.constrainPosition=!1,this.anchor=this.origAnchor);this.showAt(this.getTargetXY());this.anchor?(this.anchorEl.show(),this.syncAnchor(),this.constrainPosition=this.origConstrainPosition):this.anchorEl.hide()},showAt:function(n){this.lastActive=new Date;this.clearTimers();Ext.ToolTip.superclass.showAt.call(this,n);this.dismissDelay&&this.autoHide!==!1&&(this.dismissTimer=this.hide.defer(this.dismissDelay,this));this.anchor&&!this.anchorEl.isVisible()?(this.syncAnchor(),this.anchorEl.show()):this.anchorEl.hide()},syncAnchor:function(){var n,t,i;switch(this.tipAnchor.charAt(0)){case"t":n="b";t="tl";i=[20+this.anchorOffset,2];break;case"r":n="l";t="tr";i=[-2,11+this.anchorOffset];break;case"b":n="t";t="bl";i=[20+this.anchorOffset,-2];break;default:n="r";t="tl";i=[2,11+this.anchorOffset]}this.anchorEl.alignTo(this.el,n+"-"+t,i)},setPagePosition:function(n,t){Ext.ToolTip.superclass.setPagePosition.call(this,n,t);this.anchor&&this.syncAnchor()},clearTimer:function(n){n=n+"Timer";clearTimeout(this[n]);delete this[n]},clearTimers:function(){this.clearTimer("show");this.clearTimer("dismiss");this.clearTimer("hide")},onShow:function(){Ext.ToolTip.superclass.onShow.call(this);Ext.getDoc().on("mousedown",this.onDocMouseDown,this)},onHide:function(){Ext.ToolTip.superclass.onHide.call(this);Ext.getDoc().un("mousedown",this.onDocMouseDown,this)},onDocMouseDown:function(n){this.autoHide===!0||this.closable||n.within(this.el.dom)||(this.disable(),this.doEnable.defer(100,this))},doEnable:function(){this.isDestroyed||this.enable()},onDisable:function(){this.clearTimers();this.hide()},adjustPosition:function(n,t){if(this.constrainPosition){var i=this.targetXY[1],r=this.getSize().height;t<=i&&t+r>=i&&(t=i-r-5)}return{x:n,y:t}},beforeDestroy:function(){this.clearTimers();Ext.destroy(this.anchorEl);delete this.anchorEl;delete this.target;delete this.anchorTarget;delete this.triggerElement;Ext.ToolTip.superclass.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);Ext.ToolTip.superclass.onDestroy.call(this)}});Ext.reg("tooltip",Ext.ToolTip);Ext.QuickTip=Ext.extend(Ext.ToolTip,{interceptTitles:!1,tagConfig:{namespace:"ext",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor"},initComponent:function(){this.target=this.target||Ext.getDoc();this.targets=this.targets||{};Ext.QuickTip.superclass.initComponent.call(this)},register:function(n){for(var f=Ext.isArray(n)?n:arguments,r,t,u,o,i=0,e=f.length;i<e;i++)if(r=f[i],t=r.target,t)if(Ext.isArray(t))for(u=0,o=t.length;u<o;u++)this.targets[Ext.id(t[u])]=r;else this.targets[Ext.id(t)]=r},unregister:function(n){delete this.targets[Ext.id(n)]},cancelShow:function(n){var t=this.activeTarget;n=Ext.get(n).dom;this.isVisible()?t&&t.el==n&&this.hide():t&&t.el==n&&this.clearTimer("show")},getTipCfg:function(n){var t=n.getTarget(),i,r;return this.interceptTitles&&t.title&&Ext.isString(t.title)?(i=t.title,t.qtip=i,t.removeAttribute("title"),n.preventDefault()):(r=this.tagConfig,i=t.qtip||Ext.fly(t).getAttribute(r.attribute,r.namespace)),i},onTargetOver:function(n){var t,f;if(!this.disabled&&(this.targetXY=n.getXY(),t=n.getTarget(),t&&t.nodeType===1&&t!=document&&t!=document.body)){if(this.activeTarget&&(t==this.activeTarget.el||Ext.fly(this.activeTarget.el).contains(t))){this.clearTimer("hide");this.show();return}if(t&&this.targets[t.id]){this.activeTarget=this.targets[t.id];this.activeTarget.el=t;this.anchor=this.activeTarget.anchor;this.anchor&&(this.anchorTarget=t);this.delayShow();return}var e,r=Ext.fly(t),i=this.tagConfig,u=i.namespace;(e=this.getTipCfg(n))&&(f=r.getAttribute(i.hide,u),this.activeTarget={el:t,text:e,width:r.getAttribute(i.width,u),autoHide:f!="user"&&f!=="false",title:r.getAttribute(i.title,u),cls:r.getAttribute(i.cls,u),align:r.getAttribute(i.align,u)},this.anchor=r.getAttribute(i.anchor,u),this.anchor&&(this.anchorTarget=t),this.delayShow())}},onTargetOut:function(n){this.activeTarget&&n.within(this.activeTarget.el)&&!this.getTipCfg(n)||(this.clearTimer("show"),this.autoHide!==!1&&this.delayHide())},showAt:function(n){var t=this.activeTarget;t&&(this.rendered||(this.render(Ext.getBody()),this.activeTarget=t),t.width?(this.setWidth(t.width),this.body.setWidth(this.adjustBodyWidth(t.width-this.getFrameWidth())),this.measureWidth=!1):this.measureWidth=!0,this.setTitle(t.title||""),this.body.update(t.text),this.autoHide=t.autoHide,this.dismissDelay=t.dismissDelay||this.dismissDelay,this.lastCls&&(this.el.removeClass(this.lastCls),delete this.lastCls),t.cls&&(this.el.addClass(t.cls),this.lastCls=t.cls),this.anchor?this.constrainPosition=!1:t.align?(n=this.el.getAlignToXY(t.el,t.align),this.constrainPosition=!1):this.constrainPosition=!0);Ext.QuickTip.superclass.showAt.call(this,n)},hide:function(){delete this.activeTarget;Ext.QuickTip.superclass.hide.call(this)}});Ext.reg("quicktip",Ext.QuickTip);Ext.QuickTips=function(){var n,t=!1;return{init:function(i){if(!n){if(!Ext.isReady){Ext.onReady(function(){Ext.QuickTips.init(i)});return}n=new Ext.QuickTip({elements:"header,body",disabled:t});i!==!1&&n.render(Ext.getBody())}},ddDisable:function(){n&&!t&&n.disable()},ddEnable:function(){n&&!t&&n.enable()},enable:function(){n&&n.enable();t=!1},disable:function(){n&&n.disable();t=!0},isEnabled:function(){return n!==undefined&&!n.disabled},getQuickTip:function(){return n},register:function(){n.register.apply(n,arguments)},unregister:function(){n.unregister.apply(n,arguments)},tips:function(){n.register.apply(n,arguments)}}}();Ext.slider.Tip=Ext.extend(Ext.Tip,{minWidth:10,offsets:[0,-10],init:function(n){n.on({scope:this,dragstart:this.onSlide,drag:this.onSlide,dragend:this.hide,destroy:this.destroy})},onSlide:function(n,t,i){this.show();this.body.update(this.getText(i));this.doAutoWidth();this.el.alignTo(i.el,"b-t?",this.offsets)},getText:function(n){return String(n.value)}});Ext.ux.SliderTip=Ext.slider.Tip;Ext.tree.TreePanel=Ext.extend(Ext.Panel,{rootVisible:!0,animate:Ext.enableFx,lines:!0,enableDD:!1,hlDrop:Ext.enableFx,pathSeparator:"/",bubbleEvents:[],initComponent:function(){var n,t;if(Ext.tree.TreePanel.superclass.initComponent.call(this),this.eventModel||(this.eventModel=new Ext.tree.TreeEventModel(this)),n=this.loader,n?Ext.isObject(n)&&!n.load&&(n=new Ext.tree.TreeLoader(n)):n=new Ext.tree.TreeLoader({dataUrl:this.dataUrl,requestMethod:this.requestMethod}),this.loader=n,this.nodeHash={},this.root&&(t=this.root,delete this.root,this.setRootNode(t)),this.addEvents("append","remove","movenode","insert","beforeappend","beforeremove","beforemovenode","beforeinsert","beforeload","load","textchange","beforeexpandnode","beforecollapsenode","expandnode","disabledchange","collapsenode","beforeclick","click","containerclick","checkchange","beforedblclick","dblclick","containerdblclick","contextmenu","containercontextmenu","beforechildrenrendered","startdrag","enddrag","dragdrop","beforenodedrop","nodedrop","nodedragover"),this.singleExpand)this.on("beforeexpandnode",this.restrictExpand,this)},proxyNodeEvent:function(n,t,i,r,u,f,e){return(n=="collapse"||n=="expand"||n=="beforecollapse"||n=="beforeexpand"||n=="move"||n=="beforemove")&&(n=n+"node"),this.fireEvent(n,t,i,r,u,f,e)},getRootNode:function(){return this.root},setRootNode:function(n){if(this.destroyRoot(),n.render||(n=this.loader.createNode(n)),this.root=n,n.ownerTree=this,n.isRoot=!0,this.registerNode(n),!this.rootVisible){var t=n.attributes.uiProvider;n.ui=t?new t(n):new Ext.tree.RootTreeNodeUI(n)}return this.innerCt&&(this.clearInnerCt(),this.renderRoot()),n},clearInnerCt:function(){this.innerCt.update("")},renderRoot:function(){this.root.render();this.rootVisible||this.root.renderChildren()},getNodeById:function(n){return this.nodeHash[n]},registerNode:function(n){this.nodeHash[n.id]=n},unregisterNode:function(n){delete this.nodeHash[n.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"},restrictExpand:function(n){var t=n.parentNode;t&&(t.expandedChild&&t.expandedChild.parentNode==t&&t.expandedChild.collapse(),t.expandedChild=n)},getChecked:function(n,t){t=t||this.root;var i=[],r=function(){this.attributes.checked&&i.push(n?n=="id"?this.id:this.attributes[n]:this)};return t.cascade(r),i},getLoader:function(){return this.loader},expandAll:function(){this.root.expand(!0)},collapseAll:function(){this.root.collapse(!0)},getSelectionModel:function(){return this.selModel||(this.selModel=new Ext.tree.DefaultSelectionModel),this.selModel},expandPath:function(n,t,i){var u,r,f,e;if(Ext.isEmpty(n)){i&&i(!1,undefined);return}if(t=t||"id",u=n.split(this.pathSeparator),r=this.root,r.attributes[t]!=u[1]){i&&i(!1,null);return}f=1;e=function(){if(++f==u.length){i&&i(!0,r);return}var n=r.findChild(t,u[f]);if(!n){i&&i(!1,r);return}r=n;n.expand(!1,!1,e)};r.expand(!1,!1,e)},selectPath:function(n,t,i){var r,u,f;if(Ext.isEmpty(n)){i&&i(!1,undefined);return}t=t||"id";r=n.split(this.pathSeparator);u=r.pop();r.length>1?(f=function(n,r){if(n&&r){var f=r.findChild(t,u);f?(f.select(),i&&i(!0,f)):i&&i(!1,f)}else i&&i(!1,f)},this.expandPath(r.join(this.pathSeparator),t,f)):(this.root.select(),i&&i(!0,this.root))},getTreeEl:function(){return this.body},onRender:function(n,t){Ext.tree.TreePanel.superclass.onRender.call(this,n,t);this.el.addClass("x-tree");this.innerCt=this.body.createChild({tag:"ul",cls:"x-tree-root-ct "+(this.useArrows?"x-tree-arrows":this.lines?"x-tree-lines":"x-tree-no-lines")})},initEvents:function(){Ext.tree.TreePanel.superclass.initEvents.call(this);this.containerScroll&&Ext.dd.ScrollManager.register(this.body);(this.enableDD||this.enableDrop)&&!this.dropZone&&(this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.ddAppendOnly===!0}));(this.enableDD||this.enableDrag)&&!this.dragZone&&(this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||"TreeDD",scroll:this.ddScroll}));this.getSelectionModel().init(this)},afterRender:function(){Ext.tree.TreePanel.superclass.afterRender.call(this);this.renderRoot()},beforeDestroy:function(){this.rendered&&(Ext.dd.ScrollManager.unregister(this.body),Ext.destroy(this.dropZone,this.dragZone));this.destroyRoot();Ext.destroy(this.loader);this.nodeHash=this.root=this.loader=null;Ext.tree.TreePanel.superclass.beforeDestroy.call(this)},destroyRoot:function(){this.root&&this.root.destroy&&this.root.destroy(!0)}});Ext.tree.TreePanel.nodeTypes={};Ext.reg("treepanel",Ext.tree.TreePanel);Ext.tree.TreeEventModel=function(n){this.tree=n;this.tree.on("render",this.initEvents,this)};Ext.tree.TreeEventModel.prototype={initEvents:function(){var n=this.tree;n.trackMouseOver!==!1&&n.mon(n.innerCt,{scope:this,mouseover:this.delegateOver,mouseout:this.delegateOut});n.mon(n.getTreeEl(),{scope:this,click:this.delegateClick,dblclick:this.delegateDblClick,contextmenu:this.delegateContextMenu})},getNode:function(n){var i,t;return(i=n.getTarget(".x-tree-node-el",10))&&(t=Ext.fly(i,"_treeEvents").getAttribute("tree-node-id","ext"),t)?this.tree.getNodeById(t):null},getNodeTarget:function(n){var t=n.getTarget(".x-tree-node-icon",1);return t||(t=n.getTarget(".x-tree-node-el",6)),t},delegateOut:function(n,t){if(this.beforeEvent(n)){if(n.getTarget(".x-tree-ec-icon",1)){var i=this.getNode(n);this.onIconOut(n,i);i==this.lastEcOver&&delete this.lastEcOver}if((t=this.getNodeTarget(n))&&!n.within(t,!0))this.onNodeOut(n,this.getNode(n))}},delegateOver:function(n,t){if(this.beforeEvent(n)){if(Ext.isGecko&&!this.trackingDoc){Ext.getBody().on("mouseover",this.trackExit,this);this.trackingDoc=!0}if(this.lastEcOver){this.onIconOut(n,this.lastEcOver);delete this.lastEcOver}if(n.getTarget(".x-tree-ec-icon",1)){this.lastEcOver=this.getNode(n);this.onIconOver(n,this.lastEcOver)}if(t=this.getNodeTarget(n))this.onNodeOver(n,this.getNode(n))}},trackExit:function(n){if(this.lastOverNode){if(this.lastOverNode.ui&&!n.within(this.lastOverNode.ui.getEl()))this.onNodeOut(n,this.lastOverNode);delete this.lastOverNode;Ext.getBody().un("mouseover",this.trackExit,this);this.trackingDoc=!1}},delegateClick:function(n){if(this.beforeEvent(n)){if(n.getTarget("input[type=checkbox]",1))this.onCheckboxClick(n,this.getNode(n));else if(n.getTarget(".x-tree-ec-icon",1))this.onIconClick(n,this.getNode(n));else if(this.getNodeTarget(n))this.onNodeClick(n,this.getNode(n))}else this.checkContainerEvent(n,"click")},delegateDblClick:function(n){if(this.beforeEvent(n)){if(this.getNodeTarget(n))this.onNodeDblClick(n,this.getNode(n))}else this.checkContainerEvent(n,"dblclick")},delegateContextMenu:function(n){if(this.beforeEvent(n)){if(this.getNodeTarget(n))this.onNodeContextMenu(n,this.getNode(n))}else this.checkContainerEvent(n,"contextmenu")},checkContainerEvent:function(n,t){if(this.disabled)return n.stopEvent(),!1;this.onContainerEvent(n,t)},onContainerEvent:function(n,t){this.tree.fireEvent("container"+t,this.tree,n)},onNodeClick:function(n,t){t.ui.onClick(n)},onNodeOver:function(n,t){this.lastOverNode=t;t.ui.onOver(n)},onNodeOut:function(n,t){t.ui.onOut(n)},onIconOver:function(n,t){t.ui.addClass("x-tree-ec-over")},onIconOut:function(n,t){t.ui.removeClass("x-tree-ec-over")},onIconClick:function(n,t){t.ui.ecClick(n)},onCheckboxClick:function(n,t){t.ui.onCheckChange(n)},onNodeDblClick:function(n,t){t.ui.onDblClick(n)},onNodeContextMenu:function(n,t){t.ui.onContextMenu(n)},beforeEvent:function(n){var t=this.getNode(n);return this.disabled||!t||!t.ui?(n.stopEvent(),!1):!0},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}};Ext.tree.DefaultSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(n){this.selNode=null;this.addEvents("selectionchange","beforeselect");Ext.apply(this,n);Ext.tree.DefaultSelectionModel.superclass.constructor.call(this)},init:function(n){this.tree=n;n.mon(n.getTreeEl(),"keydown",this.onKeyDown,this);n.on("click",this.onNodeClick,this)},onNodeClick:function(n){this.select(n)},select:function(n,t){if(!Ext.fly(n.ui.wrap).isVisible()&&t)return t.call(this,n);var i=this.selNode;if(n==i)n.ui.onSelectedChange(!0);else if(this.fireEvent("beforeselect",this,n,i)!==!1){if(i&&i.ui)i.ui.onSelectedChange(!1);this.selNode=n;n.ui.onSelectedChange(!0);this.fireEvent("selectionchange",this,n,i)}return n},unselect:function(n,t){this.selNode==n&&this.clearSelections(t)},clearSelections:function(n){var t=this.selNode;if(t){t.ui.onSelectedChange(!1);this.selNode=null;n!==!0&&this.fireEvent("selectionchange",this,null)}return t},getSelectedNode:function(){return this.selNode},isSelected:function(n){return this.selNode==n},selectPrevious:function(n){var i,t;if(!(n=n||this.selNode||this.lastSelNode))return null;if(i=n.previousSibling,i){if(!i.isExpanded()||i.childNodes.length<1)return this.select(i,this.selectPrevious);for(t=i.lastChild;t&&t.isExpanded()&&Ext.fly(t.ui.wrap).isVisible()&&t.childNodes.length>0;)t=t.lastChild;return this.select(t,this.selectPrevious)}return n.parentNode&&(this.tree.rootVisible||!n.parentNode.isRoot)?this.select(n.parentNode,this.selectPrevious):null},selectNext:function(n){if(!(n=n||this.selNode||this.lastSelNode))return null;if(n.firstChild&&n.isExpanded()&&Ext.fly(n.ui.wrap).isVisible())return this.select(n.firstChild,this.selectNext);if(n.nextSibling)return this.select(n.nextSibling,this.selectNext);if(n.parentNode){var t=null;return n.parentNode.bubble(function(){if(this.nextSibling)return t=this.getOwnerTree().selModel.select(this.nextSibling,this.selectNext),!1}),t}return null},onKeyDown:function(n){var t=this.selNode||this.lastSelNode,r=this,i;if(t){i=n.getKey();switch(i){case n.DOWN:n.stopEvent();this.selectNext();break;case n.UP:n.stopEvent();this.selectPrevious();break;case n.RIGHT:n.preventDefault();t.hasChildNodes()&&(t.isExpanded()?t.firstChild&&this.select(t.firstChild,n):t.expand());break;case n.LEFT:n.preventDefault();t.hasChildNodes()&&t.isExpanded()?t.collapse():t.parentNode&&(this.tree.rootVisible||t.parentNode!=this.tree.getRootNode())&&this.select(t.parentNode,n)}}}});Ext.tree.MultiSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(n){this.selNodes=[];this.selMap={};this.addEvents("selectionchange");Ext.apply(this,n);Ext.tree.MultiSelectionModel.superclass.constructor.call(this)},init:function(n){this.tree=n;n.mon(n.getTreeEl(),"keydown",this.onKeyDown,this);n.on("click",this.onNodeClick,this)},onNodeClick:function(n,t){t.ctrlKey&&this.isSelected(n)?this.unselect(n):this.select(n,t,t.ctrlKey)},select:function(n,t,i){if(i!==!0&&this.clearSelections(!0),this.isSelected(n))return this.lastSelNode=n,n;this.selNodes.push(n);this.selMap[n.id]=n;this.lastSelNode=n;n.ui.onSelectedChange(!0);return this.fireEvent("selectionchange",this,this.selNodes),n},unselect:function(n){if(this.selMap[n.id]){n.ui.onSelectedChange(!1);var i=this.selNodes,t=i.indexOf(n);t!=-1&&this.selNodes.splice(t,1);delete this.selMap[n.id];this.fireEvent("selectionchange",this,this.selNodes)}},clearSelections:function(n){var i=this.selNodes,t,r;if(i.length>0){for(t=0,r=i.length;t<r;t++)i[t].ui.onSelectedChange(!1);this.selNodes=[];this.selMap={};n!==!0&&this.fireEvent("selectionchange",this,this.selNodes)}},isSelected:function(n){return this.selMap[n.id]?!0:!1},getSelectedNodes:function(){return this.selNodes.concat([])},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown,selectNext:Ext.tree.DefaultSelectionModel.prototype.selectNext,selectPrevious:Ext.tree.DefaultSelectionModel.prototype.selectPrevious});Ext.data.Tree=Ext.extend(Ext.util.Observable,{constructor:function(n){this.nodeHash={};this.root=null;n&&this.setRootNode(n);this.addEvents("append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert");Ext.data.Tree.superclass.constructor.call(this)},pathSeparator:"/",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(n){return this.root=n,n.ownerTree=this,n.isRoot=!0,this.registerNode(n),n},getNodeById:function(n){return this.nodeHash[n]},registerNode:function(n){this.nodeHash[n.id]=n},unregisterNode:function(n){delete this.nodeHash[n.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"}});Ext.data.Node=Ext.extend(Ext.util.Observable,{constructor:function(n){this.attributes=n||{};this.leaf=this.attributes.leaf;this.id=this.attributes.id;this.id||(this.id=Ext.id(null,"xnode-"),this.attributes.id=this.id);this.childNodes=[];this.parentNode=null;this.firstChild=null;this.lastChild=null;this.previousSibling=null;this.nextSibling=null;this.addEvents({append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0});this.listeners=this.attributes.listeners;Ext.data.Node.superclass.constructor.call(this)},fireEvent:function(){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===!1)return!1;var n=this.getOwnerTree();return n&&n.proxyNodeEvent.apply(n,arguments)===!1?!1:!0},isLeaf:function(){return this.leaf===!0},setFirstChild:function(n){this.firstChild=n},setLastChild:function(n){this.lastChild=n},isLast:function(){return this.parentNode?this.parentNode.lastChild==this:!0},isFirst:function(){return this.parentNode?this.parentNode.firstChild==this:!0},hasChildNodes:function(){return!this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){return this.attributes.expandable||this.hasChildNodes()},appendChild:function(n){var r=!1,u,e,t,i,f;if(Ext.isArray(n)?r=n:arguments.length>1&&(r=arguments),r)for(u=0,e=r.length;u<e;u++)this.appendChild(r[u]);else{if(this.fireEvent("beforeappend",this.ownerTree,this,n)===!1)return!1;if(t=this.childNodes.length,i=n.parentNode,i){if(n.fireEvent("beforemove",n.getOwnerTree(),n,i,this,t)===!1)return!1;i.removeChild(n)}return t=this.childNodes.length,t===0&&this.setFirstChild(n),this.childNodes.push(n),n.parentNode=this,f=this.childNodes[t-1],f?(n.previousSibling=f,f.nextSibling=n):n.previousSibling=null,n.nextSibling=null,this.setLastChild(n),n.setOwnerTree(this.getOwnerTree()),this.fireEvent("append",this.ownerTree,this,n,t),i&&n.fireEvent("move",this.ownerTree,n,i,this,t),n}},removeChild:function(n,t){var i=this.childNodes.indexOf(n);return i==-1?!1:this.fireEvent("beforeremove",this.ownerTree,this,n)===!1?!1:(this.childNodes.splice(i,1),n.previousSibling&&(n.previousSibling.nextSibling=n.nextSibling),n.nextSibling&&(n.nextSibling.previousSibling=n.previousSibling),this.firstChild==n&&this.setFirstChild(n.nextSibling),this.lastChild==n&&this.setLastChild(n.previousSibling),this.fireEvent("remove",this.ownerTree,this,n),t?n.destroy(!0):n.clear(),n)},clear:function(n){this.setOwnerTree(null,n);this.parentNode=this.previousSibling=this.nextSibling=null;n&&(this.firstChild=this.lastChild=null)},destroy:function(n){n===!0?(this.purgeListeners(),this.clear(!0),Ext.each(this.childNodes,function(n){n.destroy(!0)}),this.childNodes=null):this.remove(!0)},insertBefore:function(n,t){var u;if(!t)return this.appendChild(n);if(n==t||this.fireEvent("beforeinsert",this.ownerTree,this,n,t)===!1)return!1;var f=this.childNodes.indexOf(t),i=n.parentNode,r=f;if(i==this&&this.childNodes.indexOf(n)<f&&r--,i){if(n.fireEvent("beforemove",n.getOwnerTree(),n,i,this,f,t)===!1)return!1;i.removeChild(n)}return r===0&&this.setFirstChild(n),this.childNodes.splice(r,0,n),n.parentNode=this,u=this.childNodes[r-1],u?(n.previousSibling=u,u.nextSibling=n):n.previousSibling=null,n.nextSibling=t,t.previousSibling=n,n.setOwnerTree(this.getOwnerTree()),this.fireEvent("insert",this.ownerTree,this,n,t),i&&n.fireEvent("move",this.ownerTree,n,i,this,r,t),n},remove:function(n){return this.parentNode&&this.parentNode.removeChild(this,n),this},removeAll:function(n){for(var i=this.childNodes,t;t=i[0];)this.removeChild(t,n);return this},item:function(n){return this.childNodes[n]},replaceChild:function(n,t){var i=t?t.nextSibling:null;return this.removeChild(t),this.insertBefore(n,i),t},indexOf:function(n){return this.childNodes.indexOf(n)},getOwnerTree:function(){if(!this.ownerTree)for(var n=this;n;){if(n.ownerTree){this.ownerTree=n.ownerTree;break}n=n.parentNode}return this.ownerTree},getDepth:function(){for(var t=0,n=this;n.parentNode;)++t,n=n.parentNode;return t},setOwnerTree:function(n,t){n!=this.ownerTree&&(this.ownerTree&&this.ownerTree.unregisterNode(this),this.ownerTree=n,t!==!0&&Ext.each(this.childNodes,function(t){t.setOwnerTree(n)}),n&&n.registerNode(this))},setId:function(n){if(n!==this.id){var t=this.ownerTree;t&&t.unregisterNode(this);this.id=this.attributes.id=n;t&&t.registerNode(this);this.onIdChange(n)}},onIdChange:Ext.emptyFn,getPath:function(n){var t,i,r;for(n=n||"id",t=this.parentNode,i=[this.attributes[n]];t;)i.unshift(t.attributes[n]),t=t.parentNode;return r=this.getOwnerTree().pathSeparator,r+i.join(r)},bubble:function(n,t,i){for(var r=this;r;){if(n.apply(t||r,i||[r])===!1)break;r=r.parentNode}},cascade:function(n,t,i){var u,r,f;if(n.apply(t||this,i||[this])!==!1)for(u=this.childNodes,r=0,f=u.length;r<f;r++)u[r].cascade(n,t,i)},eachChild:function(n,t,i){for(var u=this.childNodes,r=0,f=u.length;r<f;r++)if(n.apply(t||u[r],i||[u[r]])===!1)break},findChild:function(n,t,i){return this.findChildBy(function(){return this.attributes[n]==t},null,i)},findChildBy:function(n,t,i){for(var e=this.childNodes,o=e.length,u=0,r,f;u<o;u++){if(r=e[u],n.call(t||r,r)===!0)return r;if(i&&(f=r.findChildBy(n,t,i),f!=null))return f}return null},sort:function(n,t){var r=this.childNodes,f=r.length,e,i,u;if(f>0)for(e=t?function(){n.apply(t,arguments)}:n,r.sort(e),i=0;i<f;i++)u=r[i],u.previousSibling=r[i-1],u.nextSibling=r[i+1],i===0&&this.setFirstChild(u),i==f-1&&this.setLastChild(u)},contains:function(n){return n.isAncestor(this)},isAncestor:function(n){for(var t=this.parentNode;t;){if(t==n)return!0;t=t.parentNode}return!1},toString:function(){return"[Node"+(this.id?" "+this.id:"")+"]"}});Ext.tree.TreeNode=Ext.extend(Ext.data.Node,{constructor:function(n){n=n||{};Ext.isString(n)&&(n={text:n});this.childrenRendered=!1;this.rendered=!1;Ext.tree.TreeNode.superclass.constructor.call(this,n);this.expanded=n.expanded===!0;this.isTarget=n.isTarget!==!1;this.draggable=n.draggable!==!1&&n.allowDrag!==!1;this.allowChildren=n.allowChildren!==!1&&n.allowDrop!==!1;this.text=n.text;this.disabled=n.disabled===!0;this.hidden=n.hidden===!0;this.addEvents("textchange","beforeexpand","beforecollapse","expand","disabledchange","collapse","beforeclick","click","checkchange","beforedblclick","dblclick","contextmenu","beforechildrenrendered");var t=this.attributes.uiProvider||this.defaultUI||Ext.tree.TreeNodeUI;this.ui=new t(this)},preventHScroll:!0,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},getLoader:function(){var n;return this.loader||((n=this.getOwnerTree())&&n.loader?n.loader:this.loader=new Ext.tree.TreeLoader)},setFirstChild:function(n){var t=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,n);this.childrenRendered&&t&&n!=t&&t.renderIndent(!0,!0);this.rendered&&this.renderIndent(!0,!0)},setLastChild:function(n){var t=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,n);this.childrenRendered&&t&&n!=t&&t.renderIndent(!0,!0);this.rendered&&this.renderIndent(!0,!0)},appendChild:function(n){n.render||Ext.isArray(n)||(n=this.getLoader().createNode(n));var t=Ext.tree.TreeNode.superclass.appendChild.call(this,n);return t&&this.childrenRendered&&t.render(),this.ui.updateExpandIcon(),t},removeChild:function(n,t){if(this.ownerTree.getSelectionModel().unselect(n),Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments),!t){var i=n.ui.rendered;i&&n.ui.remove();i&&this.childNodes.length<1?this.collapse(!1,!1):this.ui.updateExpandIcon();this.firstChild||this.isHiddenRoot()||(this.childrenRendered=!1)}return n},insertBefore:function(n,t){n.render||(n=this.getLoader().createNode(n));var i=Ext.tree.TreeNode.superclass.insertBefore.call(this,n,t);return i&&t&&this.childrenRendered&&n.render(),this.ui.updateExpandIcon(),i},setText:function(n){var t=this.text;if(this.text=this.attributes.text=n,this.rendered)this.ui.onTextChange(this,n,t);this.fireEvent("textchange",this,n,t)},setIconCls:function(n){var t=this.attributes.iconCls;if(this.attributes.iconCls=n,this.rendered)this.ui.onIconClsChange(this,n,t)},setTooltip:function(n,t){if(this.attributes.qtip=n,this.attributes.qtipTitle=t,this.rendered)this.ui.onTipChange(this,n,t)},setIcon:function(n){if(this.attributes.icon=n,this.rendered)this.ui.onIconChange(this,n)},setHref:function(n,t){if(this.attributes.href=n,this.attributes.hrefTarget=t,this.rendered)this.ui.onHrefChange(this,n,t)},setCls:function(n){var t=this.attributes.cls;if(this.attributes.cls=n,this.rendered)this.ui.onClsChange(this,n,t)},select:function(){var n=this.getOwnerTree();n&&n.getSelectionModel().select(this)},unselect:function(n){var t=this.getOwnerTree();t&&t.getSelectionModel().unselect(this,n)},isSelected:function(){var n=this.getOwnerTree();return n?n.getSelectionModel().isSelected(this):!1},expand:function(n,t,i,r){if(this.expanded)this.runCallback(i,r||this,[this]);else{if(this.fireEvent("beforeexpand",this,n,t)===!1)return;if(this.childrenRendered||this.renderChildren(),this.expanded=!0,!this.isHiddenRoot()&&this.getOwnerTree().animate&&t!==!1||t){this.ui.animExpand(function(){this.fireEvent("expand",this);this.runCallback(i,r||this,[this]);n===!0&&this.expandChildNodes(!0,!0)}.createDelegate(this));return}this.ui.expand();this.fireEvent("expand",this);this.runCallback(i,r||this,[this])}n===!0&&this.expandChildNodes(!0)},runCallback:function(n,t,i){Ext.isFunction(n)&&n.apply(t,i)},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(n,t,i,r){var f,u,e;if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent("beforecollapse",this,n,t)===!1)return;if(this.expanded=!1,this.getOwnerTree().animate&&t!==!1||t){this.ui.animCollapse(function(){this.fireEvent("collapse",this);this.runCallback(i,r||this,[this]);n===!0&&this.collapseChildNodes(!0)}.createDelegate(this));return}this.ui.collapse();this.fireEvent("collapse",this);this.runCallback(i,r||this,[this])}else this.expanded||this.runCallback(i,r||this,[this]);if(n===!0)for(f=this.childNodes,u=0,e=f.length;u<e;u++)f[u].collapse(!0,!1)},delayedExpand:function(n){this.expandProcId||(this.expandProcId=this.expand.defer(n,this))},cancelExpand:function(){this.expandProcId&&clearTimeout(this.expandProcId);this.expandProcId=!1},toggle:function(){this.expanded?this.collapse():this.expand()},ensureVisible:function(n,t){var i=this.getOwnerTree();i.expandPath(this.parentNode?this.parentNode.getPath():this.getPath(),!1,function(){var r=i.getNodeById(this.id);i.getTreeEl().scrollChildIntoView(r.ui.anchor);this.runCallback(n,t||this,[this])}.createDelegate(this))},expandChildNodes:function(n,t){for(var r=this.childNodes,u=r.length,i=0;i<u;i++)r[i].expand(n,t)},collapseChildNodes:function(n){for(var i=this.childNodes,t=0,r=i.length;t<r;t++)i[t].collapse(n)},disable:function(){if(this.disabled=!0,this.unselect(),this.rendered&&this.ui.onDisableChange)this.ui.onDisableChange(this,!0);this.fireEvent("disabledchange",this,!0)},enable:function(){if(this.disabled=!1,this.rendered&&this.ui.onDisableChange)this.ui.onDisableChange(this,!1);this.fireEvent("disabledchange",this,!1)},renderChildren:function(n){var i,t,r;for(n!==!1&&this.fireEvent("beforechildrenrendered",this),i=this.childNodes,t=0,r=i.length;t<r;t++)i[t].render(!0);this.childrenRendered=!0},sort:function(){var t,n,i;if(Ext.tree.TreeNode.superclass.sort.apply(this,arguments),this.childrenRendered)for(t=this.childNodes,n=0,i=t.length;n<i;n++)t[n].render(!0)},render:function(n){this.ui.render(n);this.rendered||(this.getOwnerTree().registerNode(this),this.rendered=!0,this.expanded&&(this.expanded=!1,this.expand(!1,!1)))},renderIndent:function(n,t){var r,i,u;if(t&&(this.ui.childIndent=null),this.ui.renderIndent(),n===!0&&this.childrenRendered)for(r=this.childNodes,i=0,u=r.length;i<u;i++)r[i].renderIndent(!0,t)},beginUpdate:function(){this.childrenRendered=!1},endUpdate:function(){this.expanded&&this.rendered&&this.renderChildren()},destroy:function(n){n===!0&&this.unselect(!0);Ext.tree.TreeNode.superclass.destroy.call(this,n);Ext.destroy(this.ui,this.loader);this.ui=this.loader=null},onIdChange:function(n){this.ui.onIdChange(n)}});Ext.tree.TreePanel.nodeTypes.node=Ext.tree.TreeNode;Ext.tree.AsyncTreeNode=function(n){this.loaded=n&&n.loaded===!0;this.loading=!1;Ext.tree.AsyncTreeNode.superclass.constructor.apply(this,arguments);this.addEvents("beforeload","load")};Ext.extend(Ext.tree.AsyncTreeNode,Ext.tree.TreeNode,{expand:function(n,t,i,r){var f,e,u;if(this.loading){e=function(){this.loading||(clearInterval(f),this.expand(n,t,i,r))}.createDelegate(this);f=setInterval(e,200);return}if(!this.loaded){if(this.fireEvent("beforeload",this)===!1)return;if(this.loading=!0,this.ui.beforeLoad(this),u=this.loader||this.attributes.loader||this.getOwnerTree().getLoader(),u){u.load(this,this.loadComplete.createDelegate(this,[n,t,i,r]),this);return}}Ext.tree.AsyncTreeNode.superclass.expand.call(this,n,t,i,r)},isLoading:function(){return this.loading},loadComplete:function(n,t,i,r){this.loading=!1;this.loaded=!0;this.ui.afterLoad(this);this.fireEvent("load",this);this.expand(n,t,i,r)},isLoaded:function(){return this.loaded},hasChildNodes:function(){return this.isLeaf()||this.loaded?Ext.tree.AsyncTreeNode.superclass.hasChildNodes.call(this):!0},reload:function(n,t){for(this.collapse(!1,!1);this.firstChild;)this.removeChild(this.firstChild).destroy();this.childrenRendered=!1;this.loaded=!1;this.isHiddenRoot()&&(this.expanded=!1);this.expand(!1,!1,n,t)}});Ext.tree.TreePanel.nodeTypes.async=Ext.tree.AsyncTreeNode;Ext.tree.TreeNodeUI=Ext.extend(Object,{constructor:function(n){Ext.apply(this,{node:n,rendered:!1,animating:!1,wasLeaf:!0,ecc:"x-tree-ec-icon x-tree-elbow",emptyIcon:Ext.BLANK_IMAGE_URL})},removeChild:function(n){this.rendered&&this.ctNode.removeChild(n.ui.getEl())},beforeLoad:function(){this.addClass("x-tree-node-loading")},afterLoad:function(){this.removeClass("x-tree-node-loading")},onTextChange:function(n,t){this.rendered&&(this.textNode.innerHTML=t)},onIconClsChange:function(n,t,i){this.rendered&&Ext.fly(this.iconNode).replaceClass(i,t)},onIconChange:function(n,t){if(this.rendered){var i=Ext.isEmpty(t);this.iconNode.src=i?this.emptyIcon:t;Ext.fly(this.iconNode)[i?"removeClass":"addClass"]("x-tree-node-inline-icon")}},onTipChange:function(n,t,i){if(this.rendered){var r=Ext.isDefined(i);this.textNode.setAttributeNS?(this.textNode.setAttributeNS("ext","qtip",t),r&&this.textNode.setAttributeNS("ext","qtitle",i)):(this.textNode.setAttribute("ext:qtip",t),r&&this.textNode.setAttribute("ext:qtitle",i))}},onHrefChange:function(n,t,i){this.rendered&&(this.anchor.href=this.getHref(t),Ext.isDefined(i)&&(this.anchor.target=i))},onClsChange:function(n,t,i){this.rendered&&Ext.fly(this.elNode).replaceClass(i,t)},onDisableChange:function(n,t){this.disabled=t;this.checkbox&&(this.checkbox.disabled=t);this[t?"addClass":"removeClass"]("x-tree-node-disabled")},onSelectedChange:function(n){n?(this.focus(),this.addClass("x-tree-selected")):this.removeClass("x-tree-selected")},onMove:function(n,t,i,r,u,f){var e,o;if(this.childIndent=null,this.rendered){if(e=r.ui.getContainer(),!e){this.holder=document.createElement("div");this.holder.appendChild(this.wrap);return}o=f?f.ui.getEl():null;o?e.insertBefore(this.wrap,o):e.appendChild(this.wrap);this.node.renderIndent(!0,i!=r)}},addClass:function(n){this.elNode&&Ext.fly(this.elNode).addClass(n)},removeClass:function(n){this.elNode&&Ext.fly(this.elNode).removeClass(n)},remove:function(){this.rendered&&(this.holder=document.createElement("div"),this.holder.appendChild(this.wrap))},fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments)},initEvents:function(){this.node.on("move",this.onMove,this);if(this.node.disabled)this.onDisableChange(this.node,!0);this.node.hidden&&this.hide();var n=this.node.getOwnerTree(),t=n.enableDD||n.enableDrag||n.enableDrop;t&&(!this.node.isRoot||n.rootVisible)&&Ext.dd.Registry.register(this.elNode,{node:this.node,handles:this.getDDHandles(),isHandle:!1})},getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode]},hide:function(){this.node.hidden=!0;this.wrap&&(this.wrap.style.display="none")},show:function(){this.node.hidden=!1;this.wrap&&(this.wrap.style.display="")},onContextMenu:function(n){(this.node.hasListener("contextmenu")||this.node.getOwnerTree().hasListener("contextmenu"))&&(n.preventDefault(),this.focus(),this.fireEvent("contextmenu",this.node,n))},onClick:function(n){if(this.dropping){n.stopEvent();return}if(this.fireEvent("beforeclick",this.node,n)!==!1){var t=n.getTarget("a");if(!this.disabled&&this.node.attributes.href&&t){this.fireEvent("click",this.node,n);return}if(t&&n.ctrlKey&&n.stopEvent(),n.preventDefault(),this.disabled)return;this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()&&this.node.toggle();this.fireEvent("click",this.node,n)}else n.stopEvent()},onDblClick:function(n){(n.preventDefault(),this.disabled)||this.fireEvent("beforedblclick",this.node,n)!==!1&&(this.checkbox&&this.toggleCheck(),!this.animating&&this.node.isExpandable()&&this.node.toggle(),this.fireEvent("dblclick",this.node,n))},onOver:function(){this.addClass("x-tree-node-over")},onOut:function(){this.removeClass("x-tree-node-over")},onCheckChange:function(){var n=this.checkbox.checked;this.checkbox.defaultChecked=n;this.node.attributes.checked=n;this.fireEvent("checkchange",this.node,n)},ecClick:function(){!this.animating&&this.node.isExpandable()&&this.node.toggle()},startDrop:function(){this.dropping=!0},endDrop:function(){setTimeout(function(){this.dropping=!1}.createDelegate(this),50)},expand:function(){this.updateExpandIcon();this.ctNode.style.display=""},focus:function(){if(this.node.preventHScroll)try{var n=this.node.getOwnerTree().getTreeEl().dom,t=n.scrollLeft;this.anchor.focus();n.scrollLeft=t}catch(i){}else try{this.anchor.focus()}catch(i){}},toggleCheck:function(n){var t=this.checkbox;t&&(t.checked=n===undefined?!t.checked:n,this.onCheckChange())},blur:function(){try{this.anchor.blur()}catch(n){}},animExpand:function(n){var t=Ext.get(this.ctNode);if(t.stopFx(),!this.node.isExpandable()){this.updateExpandIcon();this.ctNode.style.display="";Ext.callback(n);return}this.animating=!0;this.updateExpandIcon();t.slideIn("t",{callback:function(){this.animating=!1;Ext.callback(n)},scope:this,duration:this.node.ownerTree.duration||.25})},highlight:function(){var n=this.node.getOwnerTree();Ext.fly(this.wrap).highlight(n.hlColor||"C3DAF9",{endColor:n.hlBaseColor})},collapse:function(){this.updateExpandIcon();this.ctNode.style.display="none"},animCollapse:function(n){var t=Ext.get(this.ctNode);t.enableDisplayMode("block");t.stopFx();this.animating=!0;this.updateExpandIcon();t.slideOut("t",{callback:function(){this.animating=!1;Ext.callback(n)},scope:this,duration:this.node.ownerTree.duration||.25})},getContainer:function(){return this.ctNode},getEl:function(){return this.wrap},appendDDGhost:function(n){n.appendChild(this.elNode.cloneNode(!0))},getDDRepairXY:function(){return Ext.lib.Dom.getXY(this.iconNode)},onRender:function(){this.render()},render:function(n){var i=this.node,t=i.attributes,r=i.parentNode?i.parentNode.ui.getContainer():i.ownerTree.innerCt.dom;if(this.rendered)n===!0&&r.appendChild(this.wrap);else{if(this.rendered=!0,this.renderElements(i,t,r,n),t.qtip)this.onTipChange(i,t.qtip,t.qtipTitle);else t.qtipCfg&&(t.qtipCfg.target=Ext.id(this.textNode),Ext.QuickTips.register(t.qtipCfg));this.initEvents();this.node.expanded||this.updateExpandIcon(!0)}},renderElements:function(n,t,i,r){var u,f;this.indentMarkup=n.parentNode?n.parentNode.ui.getChildIndent():"";var e=Ext.isBoolean(t.checked),o,h=this.getHref(t.href),s=['<li class="x-tree-node"><div ext:tree-node-id="',n.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',t.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"<\/span>",'<img alt="" src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img alt="" src="',t.icon||this.emptyIcon,'" class="x-tree-node-icon',t.icon?" x-tree-node-inline-icon":"",t.iconCls?" "+t.iconCls:"",'" unselectable="on" />',e?'<input class="x-tree-node-cb" type="checkbox" '+(t.checked?'checked="checked" />':"/>"):"",'<a hidefocus="on" class="x-tree-node-anchor" href="',h,'" tabIndex="1" ',t.hrefTarget?' target="'+t.hrefTarget+'"':"",'><span unselectable="on">',n.text,"<\/span><\/a><\/div>",'<ul class="x-tree-node-ct" style="display:none;"><\/ul>',"<\/li>"].join("");this.wrap=r!==!0&&n.nextSibling&&(o=n.nextSibling.ui.getEl())?Ext.DomHelper.insertHtml("beforeBegin",o,s):Ext.DomHelper.insertHtml("beforeEnd",i,s);this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];u=this.elNode.childNodes;this.indentNode=u[0];this.ecNode=u[1];this.iconNode=u[2];f=3;e&&(this.checkbox=u[3],this.checkbox.defaultChecked=this.checkbox.checked,f++);this.anchor=u[f];this.textNode=u[f].firstChild},getHref:function(n){return Ext.isEmpty(n)?Ext.isGecko?"":"#":n},getAnchor:function(){return this.anchor},getTextEl:function(){return this.textNode},getIconEl:function(){return this.iconNode},isChecked:function(){return this.checkbox?this.checkbox.checked:!1},updateExpandIcon:function(){var r;if(this.rendered){var i=this.node,n,t,u=i.isLast()?"x-tree-elbow-end":"x-tree-elbow",f=i.hasChildNodes();f||i.attributes.expandable?(i.expanded?(u+="-minus",n="x-tree-node-collapsed",t="x-tree-node-expanded"):(u+="-plus",n="x-tree-node-expanded",t="x-tree-node-collapsed"),this.wasLeaf&&(this.removeClass("x-tree-node-leaf"),this.wasLeaf=!1),(this.c1!=n||this.c2!=t)&&(Ext.fly(this.elNode).replaceClass(n,t),this.c1=n,this.c2=t)):this.wasLeaf||(Ext.fly(this.elNode).replaceClass("x-tree-node-expanded","x-tree-node-collapsed"),delete this.c1,delete this.c2,this.wasLeaf=!0);r="x-tree-ec-icon "+u;this.ecc!=r&&(this.ecNode.className=r,this.ecc=r)}},onIdChange:function(n){this.rendered&&this.elNode.setAttribute("ext:tree-node-id",n)},getChildIndent:function(){if(!this.childIndent){for(var t=[],n=this.node;n;)(!n.isRoot||n.isRoot&&n.ownerTree.rootVisible)&&(n.isLast()?t.unshift('<img alt="" src="'+this.emptyIcon+'" class="x-tree-icon" />'):t.unshift('<img alt="" src="'+this.emptyIcon+'" class="x-tree-elbow-line" />')),n=n.parentNode;this.childIndent=t.join("")}return this.childIndent},renderIndent:function(){if(this.rendered){var n="",t=this.node.parentNode;t&&(n=t.ui.getChildIndent());this.indentMarkup!=n&&(this.indentNode.innerHTML=n,this.indentMarkup=n);this.updateExpandIcon()}},destroy:function(){this.elNode&&Ext.dd.Registry.unregister(this.elNode.id);Ext.each(["textnode","anchor","checkbox","indentNode","ecNode","iconNode","elNode","ctNode","wrap","holder"],function(n){this[n]&&(Ext.fly(this[n]).remove(),delete this[n])},this);delete this.node}});Ext.tree.RootTreeNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{render:function(){if(!this.rendered){var n=this.node.ownerTree.innerCt.dom;this.node.expanded=!0;n.innerHTML='<div class="x-tree-root-node"><\/div>';this.wrap=this.ctNode=n.firstChild}},collapse:Ext.emptyFn,expand:Ext.emptyFn});Ext.tree.TreeLoader=function(n){this.baseParams={};Ext.apply(this,n);this.addEvents("beforeload","load","loadexception");Ext.tree.TreeLoader.superclass.constructor.call(this);Ext.isString(this.paramOrder)&&(this.paramOrder=this.paramOrder.split(/[\s,|]/))};Ext.extend(Ext.tree.TreeLoader,Ext.util.Observable,{uiProviders:{},clearOnLoad:!0,paramOrder:undefined,paramsAsHash:!1,nodeParameter:"node",directFn:undefined,load:function(n,t,i){if(this.clearOnLoad)while(n.firstChild)n.removeChild(n.firstChild);this.doPreload(n)?this.runCallback(t,i||n,[n]):(this.directFn||this.dataUrl||this.url)&&this.requestData(n,t,i||n)},doPreload:function(n){var i,t,r,u;if(n.attributes.children){if(n.childNodes.length<1){for(i=n.attributes.children,n.beginUpdate(),t=0,r=i.length;t<r;t++)u=n.appendChild(this.createNode(i[t])),this.preloadChildren&&this.doPreload(u);n.endUpdate()}return!0}return!1},getParams:function(n){var i=Ext.apply({},this.baseParams),r=this.nodeParameter,u=this.paramOrder,t,f,e;if(r&&(i[r]=n.id),this.directFn){if(t=[n.id],u)for(r&&u.indexOf(r)>-1&&(t=[]),f=0,e=u.length;f<e;f++)t.push(i[u[f]]);else this.paramsAsHash&&(t=[i]);return t}return i},requestData:function(n,t,i){if(this.fireEvent("beforeload",this,n,t)!==!1)if(this.directFn){var r=this.getParams(n);r.push(this.processDirectResponse.createDelegate(this,[{callback:t,node:n,scope:i}],!0));this.directFn.apply(window,r)}else this.transId=Ext.Ajax.request({method:this.requestMethod,url:this.dataUrl||this.url,success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{callback:t,node:n,scope:i},params:this.getParams(n)});else this.runCallback(t,i||n,[])},processDirectResponse:function(n,t,i){t.status?this.handleResponse({responseData:Ext.isArray(n)?n:null,responseText:n,argument:i}):this.handleFailure({argument:i})},runCallback:function(n,t,i){Ext.isFunction(n)&&n.apply(t,i)},isLoading:function(){return!!this.transId},abort:function(){this.isLoading()&&Ext.Ajax.abort(this.transId)},createNode:function(attr){return this.baseAttrs&&Ext.applyIf(attr,this.baseAttrs),this.applyLoader===!1||attr.loader||(attr.loader=this),Ext.isString(attr.uiProvider)&&(attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)),attr.nodeType?new Ext.tree.TreePanel.nodeTypes[attr.nodeType](attr):attr.leaf?new Ext.tree.TreeNode(attr):new Ext.tree.AsyncTreeNode(attr)},processResponse:function(n,t,i,r){var s=n.responseText,f,u,o,e;try{for(f=n.responseData||Ext.decode(s),t.beginUpdate(),u=0,o=f.length;u<o;u++)e=this.createNode(f[u]),e&&t.appendChild(e);t.endUpdate();this.runCallback(i,r||t,[t])}catch(h){this.handleFailure(n)}},handleResponse:function(n){this.transId=!1;var t=n.argument;this.processResponse(n,t.node,t.callback,t.scope);this.fireEvent("load",this,t.node,n)},handleFailure:function(n){this.transId=!1;var t=n.argument;this.fireEvent("loadexception",this,t.node,n);this.runCallback(t.callback,t.scope||t.node,[t.node])},destroy:function(){this.abort();this.purgeListeners()}});Ext.tree.TreeFilter=function(n,t){this.tree=n;this.filtered={};Ext.apply(this,t)};Ext.tree.TreeFilter.prototype={clearBlank:!1,reverse:!1,autoClear:!1,remove:!1,filter:function(n,t,i){var r,u;if(t=t||"text",typeof n=="string"){if(u=n.length,u==0&&this.clearBlank){this.clear();return}n=n.toLowerCase();r=function(i){return i.attributes[t].substr(0,u).toLowerCase()==n}}else if(n.exec)r=function(i){return n.test(i.attributes[t])};else throw"Illegal filter type, must be string or regex";this.filterBy(r,null,i)},filterBy:function(n,t,i){var f,r;i=i||this.tree.root;this.autoClear&&this.clear();var u=this.filtered,e=this.reverse,o=function(r){if(r==i)return!0;if(u[r.id])return!1;var f=n.call(t||r,r);return!f||e?(u[r.id]=r,r.ui.hide(),!1):!0};if(i.cascade(o),this.remove)for(f in u)typeof f!="function"&&(r=u[f],r&&r.parentNode&&r.parentNode.removeChild(r))},clear:function(){var r=this.tree,i=this.filtered,n,t;for(n in i)typeof n!="function"&&(t=i[n],t&&t.ui.show());this.filtered={}}};Ext.tree.TreeSorter=Ext.extend(Object,{constructor:function(n,t){Ext.apply(this,t);n.on({scope:this,beforechildrenrendered:this.doSort,append:this.updateSort,insert:this.updateSort,textchange:this.updateSortParent});var u=this.dir&&this.dir.toLowerCase()=="desc",f=this.property||"text",i=this.sortType,o=this.folderSort,e=this.caseSensitive===!0,r=this.leafAttr||"leaf";Ext.isString(i)&&(i=Ext.data.SortTypes[i]);this.sortFn=function(n,t){var s=n.attributes,h=t.attributes;if(o){if(s[r]&&!h[r])return 1;if(!s[r]&&h[r])return-1}var c=s[f],l=h[f],a=i?i(c,n):e?c:c.toUpperCase(),v=i?i(l,t):e?l:l.toUpperCase();return a<v?u?1:-1:a>v?u?-1:1:0}},doSort:function(n){n.sort(this.sortFn)},updateSort:function(n,t){t.childrenRendered&&this.doSort.defer(1,this,[t])},updateSortParent:function(n){var t=n.parentNode;t&&t.childrenRendered&&this.doSort.defer(1,this,[t])}});Ext.dd.DropZone&&(Ext.tree.TreeDropZone=function(n,t){this.allowParentInsert=t.allowParentInsert||!1;this.allowContainerDrop=t.allowContainerDrop||!1;this.appendOnly=t.appendOnly||!1;Ext.tree.TreeDropZone.superclass.constructor.call(this,n.getTreeEl(),t);this.tree=n;this.dragOverData={};this.lastInsertClass="x-tree-no-status"},Ext.extend(Ext.tree.TreeDropZone,Ext.dd.DropZone,{ddGroup:"TreeDD",expandDelay:1e3,expandNode:function(n){n.hasChildNodes()&&!n.isExpanded()&&n.expand(!1,null,this.triggerCacheRefresh.createDelegate(this))},queueExpand:function(n){this.expandProcId=this.expandNode.defer(this.expandDelay,this,[n])},cancelExpand:function(){this.expandProcId&&(clearTimeout(this.expandProcId),this.expandProcId=!1)},isValidDropPoint:function(n,t,i,r,u){var e,o,f,s;return!n||!u?!1:(e=n.node,o=u.node,!(e&&e.isTarget&&t))?!1:t=="append"&&e.allowChildren===!1?!1:(t=="above"||t=="below")&&e.parentNode&&e.parentNode.allowChildren===!1?!1:o&&(e==o||o.contains(e))?!1:(f=this.dragOverData,f.tree=this.tree,f.target=e,f.data=u,f.point=t,f.source=i,f.rawEvent=r,f.dropNode=o,f.cancel=!1,s=this.tree.fireEvent("nodedragover",f),f.cancel===!1&&s!==!1)},getDropPoint:function(n,t){var i=t.node,o,s;if(i.isRoot)return i.allowChildren!==!1?"append":!1;var h=t.ddel,r=Ext.lib.Dom.getY(h),f=r+h.offsetHeight,u=Ext.lib.Event.getPageY(n),e=i.allowChildren===!1||i.isLeaf();return this.appendOnly||i.parentNode.allowChildren===!1?e?!1:"append":(o=!1,this.allowParentInsert||(o=i.hasChildNodes()&&i.isExpanded()),s=(f-r)/(e?2:3),u>=r&&u<r+s?"above":!o&&(e||u>=f-s&&u<=f)?"below":"append")},onNodeEnter:function(){this.cancelExpand()},onContainerOver:function(n,t,i){return this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",n,t,i)?this.dropAllowed:this.dropNotAllowed},onNodeOver:function(n,t,i,r){var u=this.getDropPoint(i,n,t),o=n.node,e,s,f;return this.expandProcId||u!="append"||!o.hasChildNodes()||n.node.isExpanded()?u!="append"&&this.cancelExpand():this.queueExpand(o),e=this.dropNotAllowed,this.isValidDropPoint(n,u,t,i,r)&&u&&(s=n.ddel,u=="above"?(e=n.node.isFirst()?"x-tree-drop-ok-above":"x-tree-drop-ok-between",f="x-tree-drag-insert-above"):u=="below"?(e=n.node.isLast()?"x-tree-drop-ok-below":"x-tree-drop-ok-between",f="x-tree-drag-insert-below"):(e="x-tree-drop-ok-append",f="x-tree-drag-append"),this.lastInsertClass!=f&&(Ext.fly(s).replaceClass(this.lastInsertClass,f),this.lastInsertClass=f)),e},onNodeOut:function(n){this.cancelExpand();this.removeDropIndicators(n)},onNodeDrop:function(n,t,i,r){var f=this.getDropPoint(i,n,t),u=n.node,e;return(u.ui.startDrop(),!this.isValidDropPoint(n,f,t,i,r))?(u.ui.endDrop(),!1):(e=r.node||(t.getTreeNode?t.getTreeNode(r,u,f,i):null),this.processDrop(u,r,f,t,i,e))},onContainerDrop:function(n,t,i){var r,u;return this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",n,t,i)?(r=this.tree.getRootNode(),r.ui.startDrop(),u=i.node||(n.getTreeNode?n.getTreeNode(i,r,"append",t):null),this.processDrop(r,i,"append",n,t,u)):!1},processDrop:function(n,t,i,r,u,f){var e={tree:this.tree,target:n,data:t,point:i,source:r,rawEvent:u,dropNode:f,cancel:!f,dropStatus:!1},o=this.tree.fireEvent("beforenodedrop",e);return o===!1||e.cancel===!0||!e.dropNode?(n.ui.endDrop(),e.dropStatus):(n=e.target,i!="append"||n.isExpanded()?this.completeDrop(e):n.expand(!1,null,function(){this.completeDrop(e)}.createDelegate(this)),!0)},completeDrop:function(n){var r=n.dropNode,f=n.point,t=n.target,i,u,e;for(Ext.isArray(r)||(r=[r]),u=0,e=r.length;u<e;u++)i=r[u],f=="above"?t.parentNode.insertBefore(i,t):f=="below"?t.parentNode.insertBefore(i,t.nextSibling):t.appendChild(i);i.ui.focus();Ext.enableFx&&this.tree.hlDrop&&i.ui.highlight();t.ui.endDrop();this.tree.fireEvent("nodedrop",n)},afterNodeMoved:function(n,t,i,r,u){Ext.enableFx&&this.tree.hlDrop&&(u.ui.focus(),u.ui.highlight());this.tree.fireEvent("nodedrop",this.tree,r,t,n,i)},getTree:function(){return this.tree},removeDropIndicators:function(n){if(n&&n.ddel){var t=n.ddel;Ext.fly(t).removeClass(["x-tree-drag-insert-above","x-tree-drag-insert-below","x-tree-drag-append"]);this.lastInsertClass="_noclass"}},beforeDragDrop:function(){return this.cancelExpand(),!0},afterRepair:function(n){n&&Ext.enableFx&&n.node.ui.highlight();this.hideProxy()}}));Ext.dd.DragZone&&(Ext.tree.TreeDragZone=function(n,t){Ext.tree.TreeDragZone.superclass.constructor.call(this,n.innerCt,t);this.tree=n},Ext.extend(Ext.tree.TreeDragZone,Ext.dd.DragZone,{ddGroup:"TreeDD",onBeforeDrag:function(n){var t=n.node;return t&&t.draggable&&!t.disabled},onInitDrag:function(n){var t=this.dragData;this.tree.getSelectionModel().select(t.node);this.tree.eventModel.disable();this.proxy.update("");t.node.ui.appendDDGhost(this.proxy.ghost.dom);this.tree.fireEvent("startdrag",this.tree,t.node,n)},getRepairXY:function(n,t){return t.node.ui.getDDRepairXY()},onEndDrag:function(n,t){this.tree.eventModel.enable.defer(100,this.tree.eventModel);this.tree.fireEvent("enddrag",this.tree,n.node,t)},onValidDrop:function(n,t){this.tree.fireEvent("dragdrop",this.tree,this.dragData.node,n,t);this.hideProxy()},beforeInvalidDrop:function(){var n=this.tree.getSelectionModel();n.clearSelections();n.select(this.dragData.node)},afterRepair:function(){Ext.enableFx&&this.tree.hlDrop&&Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9");this.dragging=!1}}));Ext.tree.TreeEditor=function(n,t,i){t=t||{};var r=t.events?t:new Ext.form.TextField(t);if(Ext.tree.TreeEditor.superclass.constructor.call(this,r,i),this.tree=n,n.rendered)this.initEditor(n);else n.on("render",this.initEditor,this)};Ext.extend(Ext.tree.TreeEditor,Ext.Editor,{alignment:"l-l",autoSize:!1,hideEl:!1,cls:"x-small-editor x-tree-editor",shim:!1,shadow:"frame",maxWidth:250,editDelay:350,initEditor:function(n){n.on({scope:this,beforeclick:this.beforeNodeClick,dblclick:this.onNodeDblClick});this.on({scope:this,complete:this.updateNode,beforestartedit:this.fitToTree,specialkey:this.onSpecialKey});this.on("startedit",this.bindScroll,this,{delay:10})},fitToTree:function(n,t){var i=this.tree.getTreeEl().dom,r=t.dom,u;i.scrollLeft>r.offsetLeft&&(i.scrollLeft=r.offsetLeft);u=Math.min(this.maxWidth,(i.clientWidth>20?i.clientWidth:i.offsetWidth)-Math.max(0,r.offsetLeft-i.scrollLeft)-5);this.setSize(u,"")},triggerEdit:function(n){if(this.completeEdit(),n.attributes.editable!==!1){this.editNode=n;this.tree.autoScroll&&Ext.fly(n.ui.getEl()).scrollIntoView(this.tree.body);var t=n.text||"";return!Ext.isGecko&&Ext.isEmpty(n.text)&&n.setText("&#160;"),this.autoEditTimer=this.startEdit.defer(this.editDelay,this,[n.ui.textNode,t]),!1}},bindScroll:function(){this.tree.getTreeEl().on("scroll",this.cancelEdit,this)},beforeNodeClick:function(n,t){return clearTimeout(this.autoEditTimer),this.tree.getSelectionModel().isSelected(n)?(t.stopEvent(),this.triggerEdit(n)):void 0},onNodeDblClick:function(){clearTimeout(this.autoEditTimer)},updateNode:function(n,t){this.tree.getTreeEl().un("scroll",this.cancelEdit,this);this.editNode.setText(t)},onHide:function(){Ext.tree.TreeEditor.superclass.onHide.call(this);this.editNode&&this.editNode.ui.focus.defer(50,this.editNode.ui)},onSpecialKey:function(n,t){var i=t.getKey();i==t.ESC?(t.stopEvent(),this.cancelEdit()):i!=t.ENTER||t.hasModifier()||(t.stopEvent(),this.completeEdit())},onDestroy:function(){clearTimeout(this.autoEditTimer);Ext.tree.TreeEditor.superclass.onDestroy.call(this);var n=this.tree;n.un("beforeclick",this.beforeNodeClick,this);n.un("dblclick",this.onNodeDblClick,this)}});swfobject=function(){function v(){var i,r,n;if(!c){try{i=t.getElementsByTagName("body")[0].appendChild(h("span"));i.parentNode.removeChild(i)}catch(u){return}for(c=!0,r=w.length,n=0;n<r;n++)w[n]()}}function yt(n){c?n():w[w.length]=n}function pt(n){if(typeof r.addEventListener!=i)r.addEventListener("load",n,!1);else if(typeof t.addEventListener!=i)t.addEventListener("load",n,!1);else if(typeof r.attachEvent!=i)ui(r,"onload",n);else if(typeof r.onload=="function"){var u=r.onload;r.onload=function(){u();n()}}else r.onload=n}function gt(){lt?ni():it()}function ni(){var o=t.getElementsByTagName("body")[0],u=h(f),r,e;u.setAttribute("type",p);r=o.appendChild(u);r?(e=0,function(){if(typeof r.GetVariable!=i){var t=r.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),n.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(e<10){e++;setTimeout(arguments.callee,10);return}o.removeChild(u);r=null;it()}()):it()}function it(){var y=s.length,r,t,h,c,v;if(y>0)for(r=0;r<y;r++){var f=s[r].id,e=s[r].callbackFn,o={success:!1,id:f};if(n.pv[0]>0){if(t=u(f),t)if(!g(s[r].swfVersion)||n.wk&&n.wk<312)if(s[r].expressInstall&&ut()){h={};h.data=s[r].expressInstall;h.width=t.getAttribute("width")||"0";h.height=t.getAttribute("height")||"0";t.getAttribute("class")&&(h.styleclass=t.getAttribute("class"));t.getAttribute("align")&&(h.align=t.getAttribute("align"));var p={},a=t.getElementsByTagName("param"),w=a.length;for(c=0;c<w;c++)a[c].getAttribute("name").toLowerCase()!="movie"&&(p[a[c].getAttribute("name")]=a[c].getAttribute("value"));ft(h,p,f,e)}else ti(t),e&&e(o);else l(f,!0),e&&(o.success=!0,o.ref=rt(f),e(o))}else l(f,!0),e&&(v=rt(f),v&&typeof v.SetVariable!=i&&(o.success=!0,o.ref=v),e(o))}}function rt(n){var r=null,t=u(n),e;return t&&t.nodeName=="OBJECT"&&(typeof t.SetVariable!=i?r=t:(e=t.getElementsByTagName(f)[0],e&&(r=e))),r}function ut(){return!d&&g("6.0.65")&&(n.win||n.mac)&&!(n.wk&&n.wk<312)}function ft(f,e,o,s){var c,v,l,a;d=!0;nt=s||null;at={success:!1,id:o};c=u(o);c&&(c.nodeName=="OBJECT"?(y=et(c),k=null):(y=c,k=o),f.id=ht,(typeof f.width==i||!/%$/.test(f.width)&&parseInt(f.width,10)<310)&&(f.width="310"),(typeof f.height==i||!/%$/.test(f.height)&&parseInt(f.height,10)<137)&&(f.height="137"),t.title=t.title.slice(0,47)+" - Flash Player Installation",v=n.ie&&n.win?"ActiveX":"PlugIn",l="MMredirectURL="+r.location.toString().replace(/&/g,"%26")+"&MMplayerType="+v+"&MMdoctitle="+t.title,typeof e.flashvars!=i?e.flashvars+="&"+l:e.flashvars=l,n.ie&&n.win&&c.readyState!=4&&(a=h("div"),o+="SWFObjectNew",a.setAttribute("id",o),c.parentNode.insertBefore(a,c),c.style.display="none",function(){c.readyState==4?c.parentNode.removeChild(c):setTimeout(arguments.callee,10)}()),ot(f,e,o))}function ti(t){if(n.ie&&n.win&&t.readyState!=4){var i=h("div");t.parentNode.insertBefore(i,t);i.parentNode.replaceChild(et(t),i);t.style.display="none",function(){t.readyState==4?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(et(t),t)}function et(t){var u=h("div"),e,i,o,r;if(n.win&&n.ie)u.innerHTML=t.innerHTML;else if(e=t.getElementsByTagName(f)[0],e&&(i=e.childNodes,i))for(o=i.length,r=0;r<o;r++)i[r].nodeType==1&&i[r].nodeName=="PARAM"||i[r].nodeType==8||u.appendChild(i[r].cloneNode(!0));return u}function ot(t,r,e){var v,y=u(e),w,o,k,a,c,s,l;if(n.wk&&n.wk<312)return v;if(y)if(typeof t.id==i&&(t.id=e),n.ie&&n.win){w="";for(o in t)t[o]!=Object.prototype[o]&&(o.toLowerCase()=="data"?r.movie=t[o]:o.toLowerCase()=="styleclass"?w+=' class="'+t[o]+'"':o.toLowerCase()!="classid"&&(w+=" "+o+'="'+t[o]+'"'));k="";for(a in r)r[a]!=Object.prototype[a]&&(k+='<param name="'+a+'" value="'+r[a]+'" />');y.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+w+">"+k+"<\/object>";b[b.length]=t.id;v=u(t.id)}else{c=h(f);c.setAttribute("type",p);for(s in t)t[s]!=Object.prototype[s]&&(s.toLowerCase()=="styleclass"?c.setAttribute("class",t[s]):s.toLowerCase()!="classid"&&c.setAttribute(s,t[s]));for(l in r)r[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"&&ii(c,l,r[l]);y.parentNode.replaceChild(c,y);v=c}return v}function ii(n,t,i){var r=h("param");r.setAttribute("name",t);r.setAttribute("value",i);n.appendChild(r)}function wt(t){var i=u(t);i&&i.nodeName=="OBJECT"&&(n.ie&&n.win?(i.style.display="none",function(){i.readyState==4?ri(t):setTimeout(arguments.callee,10)}()):i.parentNode.removeChild(i))}function ri(n){var t=u(n),i;if(t){for(i in t)typeof t[i]=="function"&&(t[i]=null);t.parentNode.removeChild(t)}}function u(n){var i=null;try{i=t.getElementById(n)}catch(r){}return i}function h(n){return t.createElement(n)}function ui(n,t,i){n.attachEvent(t,i);a[a.length]=[n,t,i]}function g(t){var r=n.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,r[0]>i[0]||r[0]==i[0]&&r[1]>i[1]||r[0]==i[0]&&r[1]==i[1]&&r[2]>=i[2]?!0:!1}function bt(r,u,o,s){var a,c,l;n.ie&&n.mac||(a=t.getElementsByTagName("head")[0],a)&&(c=o&&typeof o=="string"?o:"screen",s&&(e=null,tt=null),e&&tt==c||(l=h("style"),l.setAttribute("type","text/css"),l.setAttribute("media",c),e=a.appendChild(l),n.ie&&n.win&&typeof t.styleSheets!=i&&t.styleSheets.length>0&&(e=t.styleSheets[t.styleSheets.length-1]),tt=c),n.ie&&n.win?e&&typeof e.addRule==f&&e.addRule(r,u):e&&typeof t.createTextNode!=i&&e.appendChild(t.createTextNode(r+" {"+u+"}")))}function l(n,t){if(vt){var i=t?"visible":"hidden";c&&u(n)?u(n).style.visibility=i:bt("#"+n,"visibility:"+i)}}function kt(n){var t=/[\\\"<>\.;]/.exec(n)!=null;return t&&typeof encodeURIComponent!=i?encodeURIComponent(n):n}var i="undefined",f="object",st="Shockwave Flash",dt="ShockwaveFlash.ShockwaveFlash",p="application/x-shockwave-flash",ht="SWFObjectExprInst",ct="onreadystatechange",r=window,t=document,o=navigator,lt=!1,w=[gt],s=[],b=[],a=[],y,k,nt,at,c=!1,d=!1,e,tt,vt=!0,n=function(){var l=typeof t.getElementById!=i&&typeof t.getElementsByTagName!=i&&typeof t.createElement!=i,e=o.userAgent.toLowerCase(),s=o.platform.toLowerCase(),a=s?/win/.test(s):/win/.test(e),v=s?/mac/.test(s):/mac/.test(e),y=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,h=!+"\v1",u=[0,0,0],n=null,c;if(typeof o.plugins!=i&&typeof o.plugins[st]==f)n=o.plugins[st].description,!n||typeof o.mimeTypes!=i&&o.mimeTypes[p]&&!o.mimeTypes[p].enabledPlugin||(lt=!0,h=!1,n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),u[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),u[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof r.ActiveXObject!=i)try{c=new ActiveXObject(dt);c&&(n=c.GetVariable("$version"),n&&(h=!0,n=n.split(" ")[1].split(","),u=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]))}catch(w){}return{w3:l,pv:u,wk:y,ie:h,win:a,mac:v}}(),fi=function(){n.w3&&((typeof t.readyState!=i&&t.readyState=="complete"||typeof t.readyState==i&&(t.getElementsByTagName("body")[0]||t.body))&&v(),c||(typeof t.addEventListener!=i&&t.addEventListener("DOMContentLoaded",v,!1),n.ie&&n.win&&(t.attachEvent(ct,function(){t.readyState=="complete"&&(t.detachEvent(ct,arguments.callee),v())}),r==top&&function(){if(!c){try{t.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,0);return}v()}}()),n.wk&&function(){if(!c){if(!/loaded|complete/.test(t.readyState)){setTimeout(arguments.callee,0);return}v()}}(),pt(v)))}(),ei=function(){n.ie&&n.win&&window.attachEvent("onunload",function(){for(var e=a.length,r,i,u,f,t=0;t<e;t++)a[t][0].detachEvent(a[t][1],a[t][2]);for(r=b.length,i=0;i<r;i++)wt(b[i]);for(u in n)n[u]=null;n=null;for(f in swfobject)swfobject[f]=null;swfobject=null;window.detachEvent("onunload",arguments.callee)})}();return{registerObject:function(t,i,r,u){if(n.w3&&t&&i){var f={};f.id=t;f.swfVersion=i;f.expressInstall=r;f.callbackFn=u;s[s.length]=f;l(t,!1)}else u&&u({success:!1,id:t})},getObjectById:function(t){if(n.w3)return rt(t)},embedSWF:function(t,r,u,e,o,s,h,c,a,v){var y={success:!1,id:r};n.w3&&!(n.wk&&n.wk<312)&&t&&r&&u&&e&&o?(l(r,!1),yt(function(){var n,b,p,k,w,d;if(u+="",e+="",n={},a&&typeof a===f)for(b in a)n[b]=a[b];if(n.data=t,n.width=u,n.height=e,p={},c&&typeof c===f)for(k in c)p[k]=c[k];if(h&&typeof h===f)for(w in h)typeof p.flashvars!=i?p.flashvars+="&"+w+"="+h[w]:p.flashvars=w+"="+h[w];if(g(o))d=ot(n,p,r),n.id==r&&l(r,!0),y.success=!0,y.ref=d;else{if(s&&ut()){n.data=s;ft(n,p,r,v);return}l(r,!0)}v&&v(y)})):v&&v(y)},switchOffAutoHideShow:function(){vt=!1},ua:n,getFlashPlayerVersion:function(){return{major:n.pv[0],minor:n.pv[1],release:n.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(t,i,r){return n.w3?ot(t,i,r):undefined},showExpressInstall:function(t,i,r,u){n.w3&&ut()&&ft(t,i,r,u)},removeSWF:function(t){n.w3&&wt(t)},createCSS:function(t,i,r,u){n.w3&&bt(t,i,r,u)},addDomLoadEvent:yt,addLoadEvent:pt,getQueryParamValue:function(n){var r=t.location.search||t.location.hash,u,i;if(r){if(/\?/.test(r)&&(r=r.split("?")[1]),n==null)return kt(r);for(u=r.split("&"),i=0;i<u.length;i++)if(u[i].substring(0,u[i].indexOf("="))==n)return kt(u[i].substring(u[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(d){var t=u(ht);t&&y&&(t.parentNode.replaceChild(y,t),k&&(l(k,!0),n.ie&&n.win&&(y.style.display="block")),nt&&nt(at));d=!1}}}}();Ext.FlashComponent=Ext.extend(Ext.BoxComponent,{flashVersion:"9.0.115",backgroundColor:"#ffffff",wmode:"opaque",flashVars:undefined,flashParams:undefined,url:undefined,swfId:undefined,swfWidth:"100%",swfHeight:"100%",expressInstall:!1,initComponent:function(){Ext.FlashComponent.superclass.initComponent.call(this);this.addEvents("initialize")},onRender:function(){Ext.FlashComponent.superclass.onRender.apply(this,arguments);var n=Ext.apply({allowScriptAccess:"always",bgcolor:this.backgroundColor,wmode:this.wmode},this.flashParams),t=Ext.apply({allowedDomain:document.location.hostname,YUISwfId:this.getId(),YUIBridgeCallback:"Ext.FlashEventProxy.onEvent"},this.flashVars);new swfobject.embedSWF(this.url,this.id,this.swfWidth,this.swfHeight,this.flashVersion,this.expressInstall?Ext.FlashComponent.EXPRESS_INSTALL_URL:undefined,t,n);this.swf=Ext.getDom(this.id);this.el=Ext.get(this.swf)},getSwfId:function(){return this.swfId||(this.swfId="extswf"+ ++Ext.Component.AUTO_ID)},getId:function(){return this.id||(this.id="extflashcmp"+ ++Ext.Component.AUTO_ID)},onFlashEvent:function(n){switch(n.type){case"swfReady":this.initSwf();return;case"log":return}n.component=this;this.fireEvent(n.type.toLowerCase().replace(/event$/,""),n)},initSwf:function(){this.onSwfReady(!!this.isInitialized);this.isInitialized=!0;this.fireEvent("initialize",this)},beforeDestroy:function(){this.rendered&&swfobject.removeSWF(this.swf.id);Ext.FlashComponent.superclass.beforeDestroy.call(this)},onSwfReady:Ext.emptyFn});Ext.FlashComponent.EXPRESS_INSTALL_URL="http://swfobject.googlecode.com/svn/trunk/swfobject/expressInstall.swf";Ext.reg("flash",Ext.FlashComponent);Ext.FlashEventProxy={onEvent:function(n,t){var i=Ext.getCmp(n);if(i)i.onFlashEvent(t);else arguments.callee.defer(10,this,[n,t])}};Ext.chart.Chart=Ext.extend(Ext.FlashComponent,{refreshBuffer:100,chartStyle:{padding:10,animationEnabled:!0,font:{name:"Tahoma",color:4473924,size:11},dataTip:{padding:5,border:{color:10075112,size:1},background:{color:14346230,alpha:.9},font:{name:"Tahoma",color:1393291,size:10,bold:!0}}},extraStyle:null,seriesStyles:null,disableCaching:Ext.isIE||Ext.isOpera,disableCacheParam:"_dc",initComponent:function(){Ext.chart.Chart.superclass.initComponent.call(this);this.url||(this.url=Ext.chart.Chart.CHART_URL);this.disableCaching&&(this.url=Ext.urlAppend(this.url,String.format("{0}={1}",this.disableCacheParam,(new Date).getTime())));this.addEvents("itemmouseover","itemmouseout","itemclick","itemdoubleclick","itemdragstart","itemdrag","itemdragend","beforerefresh","refresh");this.store=Ext.StoreMgr.lookup(this.store)},setStyle:function(n,t){this.swf.setStyle(n,Ext.encode(t))},setStyles:function(n){this.swf.setStyles(Ext.encode(n))},setSeriesStyles:function(n){this.seriesStyles=n;var t=[];Ext.each(n,function(n){t.push(Ext.encode(n))});this.swf.setSeriesStyles(t)},setCategoryNames:function(n){this.swf.setCategoryNames(n)},setLegendRenderer:function(n,t){var i=this;t=t||i;i.removeFnProxy(i.legendFnName);i.legendFnName=i.createFnProxy(function(i){return n.call(t,i)});i.swf.setLegendLabelFunction(i.legendFnName)},setTipRenderer:function(n,t){var i=this;t=t||i;i.removeFnProxy(i.tipFnName);i.tipFnName=i.createFnProxy(function(r,u,f){var e=i.store.getAt(u);return n.call(t,i,e,u,f)});i.swf.setDataTipFunction(i.tipFnName)},setSeries:function(n){this.series=n;this.refresh()},bindStore:function(n,t){if(!t&&this.store&&(n!==this.store&&this.store.autoDestroy?this.store.destroy():(this.store.un("datachanged",this.refresh,this),this.store.un("add",this.delayRefresh,this),this.store.un("remove",this.delayRefresh,this),this.store.un("update",this.delayRefresh,this),this.store.un("clear",this.refresh,this))),n){n=Ext.StoreMgr.lookup(n);n.on({scope:this,datachanged:this.refresh,add:this.delayRefresh,remove:this.delayRefresh,update:this.delayRefresh,clear:this.refresh})}this.store=n;n&&!t&&this.refresh()},onSwfReady:function(n){Ext.chart.Chart.superclass.onSwfReady.call(this,n);var t;this.swf.setType(this.type);this.chartStyle&&this.setStyles(Ext.apply({},this.extraStyle,this.chartStyle));this.categoryNames&&this.setCategoryNames(this.categoryNames);this.tipRenderer&&(t=this.getFunctionRef(this.tipRenderer),this.setTipRenderer(t.fn,t.scope));this.legendRenderer&&(t=this.getFunctionRef(this.legendRenderer),this.setLegendRenderer(t.fn,t.scope));n||this.bindStore(this.store,!0);this.refresh.defer(10,this)},delayRefresh:function(){this.refreshTask||(this.refreshTask=new Ext.util.DelayedTask(this.refresh,this));this.refreshTask.delay(this.refreshBuffer)},refresh:function(){var i,h,f,e;if(this.fireEvent("beforerefresh",this)!==!1){var c=!1,o=[],s=this.store.data.items;for(i=0,h=s.length;i<h;i++)o[i]=s[i].data;var r=[],u=0,n=null,t=0;if(this.series)for(u=this.series.length,t=0;t<u;t++){n=this.series[t];f={};for(e in n)e=="style"&&n.style!==null?(f.style=Ext.encode(n.style),c=!0):f[e]=n[e];r.push(f)}if(u>0)for(t=0;t<u;t++)n=r[t],n.type||(n.type=this.type),n.dataProvider=o;else r.push({type:this.type,dataProvider:o});this.swf.setDataProvider(r);this.seriesStyles&&this.setSeriesStyles(this.seriesStyles);this.fireEvent("refresh",this)}},createFnProxy:function(n){var t="extFnProxy"+ ++Ext.chart.Chart.PROXY_FN_ID;return Ext.chart.Chart.proxyFunction[t]=n,"Ext.chart.Chart.proxyFunction."+t},removeFnProxy:function(n){Ext.isEmpty(n)||(n=n.replace("Ext.chart.Chart.proxyFunction.",""),delete Ext.chart.Chart.proxyFunction[n])},getFunctionRef:function(n){return Ext.isFunction(n)?{fn:n,scope:this}:{fn:n.fn,scope:n.scope||this}},onDestroy:function(){this.refreshTask&&this.refreshTask.cancel&&this.refreshTask.cancel();Ext.chart.Chart.superclass.onDestroy.call(this);this.bindStore(null);this.removeFnProxy(this.tipFnName);this.removeFnProxy(this.legendFnName)}});Ext.reg("chart",Ext.chart.Chart);Ext.chart.Chart.PROXY_FN_ID=0;Ext.chart.Chart.proxyFunction={};Ext.chart.Chart.CHART_URL="http://yui.yahooapis.com/2.8.2/build/charts/assets/charts.swf";Ext.chart.PieChart=Ext.extend(Ext.chart.Chart,{type:"pie",onSwfReady:function(n){Ext.chart.PieChart.superclass.onSwfReady.call(this,n);this.setDataField(this.dataField);this.setCategoryField(this.categoryField)},setDataField:function(n){this.dataField=n;this.swf.setDataField(n)},setCategoryField:function(n){this.categoryField=n;this.swf.setCategoryField(n)}});Ext.reg("piechart",Ext.chart.PieChart);Ext.chart.CartesianChart=Ext.extend(Ext.chart.Chart,{onSwfReady:function(n){Ext.chart.CartesianChart.superclass.onSwfReady.call(this,n);this.labelFn=[];this.xField&&this.setXField(this.xField);this.yField&&this.setYField(this.yField);this.xAxis&&this.setXAxis(this.xAxis);this.xAxes&&this.setXAxes(this.xAxes);this.yAxis&&this.setYAxis(this.yAxis);this.yAxes&&this.setYAxes(this.yAxes);Ext.isDefined(this.constrainViewport)&&this.swf.setConstrainViewport(this.constrainViewport)},setXField:function(n){this.xField=n;this.swf.setHorizontalField(n)},setYField:function(n){this.yField=n;this.swf.setVerticalField(n)},setXAxis:function(n){this.xAxis=this.createAxis("xAxis",n);this.swf.setHorizontalAxis(this.xAxis)},setXAxes:function(n){for(var i,t=0;t<n.length;t++)i=this.createAxis("xAxis"+t,n[t]),this.swf.setHorizontalAxis(i)},setYAxis:function(n){this.yAxis=this.createAxis("yAxis",n);this.swf.setVerticalAxis(this.yAxis)},setYAxes:function(n){for(var i,t=0;t<n.length;t++)i=this.createAxis("yAxis"+t,n[t]),this.swf.setVerticalAxis(i)},createAxis:function(n,t){var i=Ext.apply({},t),r,u;return this[n]&&(u=this[n].labelFunction,this.removeFnProxy(u),this.labelFn.remove(u)),i.labelRenderer&&(r=this.getFunctionRef(i.labelRenderer),i.labelFunction=this.createFnProxy(function(n){return r.fn.call(r.scope,n)}),delete i.labelRenderer,this.labelFn.push(i.labelFunction)),n.indexOf("xAxis")>-1&&i.position=="left"&&(i.position="bottom"),i},onDestroy:function(){Ext.chart.CartesianChart.superclass.onDestroy.call(this);Ext.each(this.labelFn,function(n){this.removeFnProxy(n)},this)}});Ext.reg("cartesianchart",Ext.chart.CartesianChart);Ext.chart.LineChart=Ext.extend(Ext.chart.CartesianChart,{type:"line"});Ext.reg("linechart",Ext.chart.LineChart);Ext.chart.ColumnChart=Ext.extend(Ext.chart.CartesianChart,{type:"column"});Ext.reg("columnchart",Ext.chart.ColumnChart);Ext.chart.StackedColumnChart=Ext.extend(Ext.chart.CartesianChart,{type:"stackcolumn"});Ext.reg("stackedcolumnchart",Ext.chart.StackedColumnChart);Ext.chart.BarChart=Ext.extend(Ext.chart.CartesianChart,{type:"bar"});Ext.reg("barchart",Ext.chart.BarChart);Ext.chart.StackedBarChart=Ext.extend(Ext.chart.CartesianChart,{type:"stackbar"});Ext.reg("stackedbarchart",Ext.chart.StackedBarChart);Ext.chart.Axis=function(n){Ext.apply(this,n)};Ext.chart.Axis.prototype={type:null,orientation:"horizontal",reverse:!1,labelFunction:null,hideOverlappingLabels:!0,labelSpacing:2};Ext.chart.NumericAxis=Ext.extend(Ext.chart.Axis,{type:"numeric",minimum:NaN,maximum:NaN,majorUnit:NaN,minorUnit:NaN,snapToUnits:!0,alwaysShowZero:!0,scale:"linear",roundMajorUnit:!0,calculateByLabelSize:!0,position:"left",adjustMaximumByMajorUnit:!0,adjustMinimumByMajorUnit:!0});Ext.chart.TimeAxis=Ext.extend(Ext.chart.Axis,{type:"time",minimum:null,maximum:null,majorUnit:NaN,majorTimeUnit:null,minorUnit:NaN,minorTimeUnit:null,snapToUnits:!0,stackingEnabled:!1,calculateByLabelSize:!0});Ext.chart.CategoryAxis=Ext.extend(Ext.chart.Axis,{type:"category",categoryNames:null,calculateCategoryCount:!1});Ext.chart.Series=function(n){Ext.apply(this,n)};Ext.chart.Series.prototype={type:null,displayName:null};Ext.chart.CartesianSeries=Ext.extend(Ext.chart.Series,{xField:null,yField:null,showInLegend:!0,axis:"primary"});Ext.chart.ColumnSeries=Ext.extend(Ext.chart.CartesianSeries,{type:"column"});Ext.chart.LineSeries=Ext.extend(Ext.chart.CartesianSeries,{type:"line"});Ext.chart.BarSeries=Ext.extend(Ext.chart.CartesianSeries,{type:"bar"});Ext.chart.PieSeries=Ext.extend(Ext.chart.Series,{type:"pie",dataField:null,categoryField:null});Ext.menu.Menu=Ext.extend(Ext.Container,{minWidth:120,shadow:"sides",subMenuAlign:"tl-tr?",defaultAlign:"tl-bl?",allowOtherMenus:!1,ignoreParentClicks:!1,enableScrolling:!0,maxHeight:null,scrollIncrement:24,showSeparator:!0,defaultOffsets:[0,0],plain:!1,floating:!0,zIndex:15e3,hidden:!0,layout:"menu",hideMode:"offsets",scrollerHeight:8,autoLayout:!0,defaultType:"menuitem",bufferResize:!1,initComponent:function(){if(Ext.isArray(this.initialConfig)&&Ext.apply(this,{items:this.initialConfig}),this.addEvents("click","mouseover","mouseout","itemclick"),Ext.menu.MenuMgr.register(this),this.floating)Ext.EventManager.onWindowResize(this.hide,this);else this.initialConfig.hidden!==!1&&(this.hidden=!1),this.internalDefaults={hideOnClick:!1};if(Ext.menu.Menu.superclass.initComponent.call(this),this.autoLayout){var n=this.doLayout.createDelegate(this,[]);this.on({add:n,remove:n})}},getLayoutTarget:function(){return this.ul},onRender:function(n,t){n||(n=Ext.getBody());var i={id:this.getId(),cls:"x-menu "+(this.floating?"x-menu-floating x-layer ":"")+(this.cls||"")+(this.plain?" x-menu-plain":"")+(this.showSeparator?"":" x-menu-nosep"),style:this.style,cn:[{tag:"a",cls:"x-menu-focus",href:"#",onclick:"return false;",tabIndex:"-1"},{tag:"ul",cls:"x-menu-list"}]};this.el=this.floating?new Ext.Layer({shadow:this.shadow,dh:i,constrain:!1,parentEl:n,zindex:this.zIndex}):n.createChild(i);Ext.menu.Menu.superclass.onRender.call(this,n,t);this.keyNav||(this.keyNav=new Ext.menu.MenuNav(this));this.focusEl=this.el.child("a.x-menu-focus");this.ul=this.el.child("ul.x-menu-list");this.mon(this.ul,{scope:this,click:this.onClick,mouseover:this.onMouseOver,mouseout:this.onMouseOut});this.enableScrolling&&this.mon(this.el,{scope:this,delegate:".x-menu-scroller",click:this.onScroll,mouseover:this.deactivateActive})},findTargetItem:function(n){var t=n.getTarget(".x-menu-list-item",this.ul,!0);if(t&&t.menuItemId)return this.items.get(t.menuItemId)},onClick:function(n){var t=this.findTargetItem(n);if(t)if(t.isFormField)this.setActiveItem(t);else if(t instanceof Ext.menu.BaseItem)if(t.menu&&this.ignoreParentClicks)t.expandMenu(),n.preventDefault();else if(t.onClick){t.onClick(n);this.fireEvent("click",this,t,n)}},setActiveItem:function(n,t){n!=this.activeItem?(this.deactivateActive(),(this.activeItem=n).isFormField?n.focus():n.activate(t)):t&&n.expandMenu()},deactivateActive:function(){var n=this.activeItem;n&&(n.isFormField?n.collapse&&n.collapse():n.deactivate(),delete this.activeItem)},tryActivate:function(n,t){for(var u=this.items,i,r=n,f=u.length;r>=0&&r<f;r+=t)if(i=u.get(r),i.isVisible()&&!i.disabled&&(i.canActivate||i.isFormField))return this.setActiveItem(i,!1),i;return!1},onMouseOver:function(n){var t=this.findTargetItem(n);t&&t.canActivate&&!t.disabled&&this.setActiveItem(t,!0);this.over=!0;this.fireEvent("mouseover",this,n,t)},onMouseOut:function(n){var t=this.findTargetItem(n);t&&t==this.activeItem&&t.shouldDeactivate&&t.shouldDeactivate(n)&&(this.activeItem.deactivate(),delete this.activeItem);this.over=!1;this.fireEvent("mouseout",this,n,t)},onScroll:function(n,t){n&&n.stopEvent();var i=this.ul.dom,r=Ext.fly(t).is(".x-menu-scroller-top");if(i.scrollTop+=this.scrollIncrement*(r?-1:1),r?i.scrollTop<=0:i.scrollTop+this.activeMax>=i.scrollHeight)this.onScrollerOut(null,t)},onScrollerIn:function(n,t){var i=this.ul.dom,r=Ext.fly(t).is(".x-menu-scroller-top");(r?i.scrollTop>0:i.scrollTop+this.activeMax<i.scrollHeight)&&Ext.fly(t).addClass(["x-menu-item-active","x-menu-scroller-active"])},onScrollerOut:function(n,t){Ext.fly(t).removeClass(["x-menu-item-active","x-menu-scroller-active"])},show:function(n,t,i){this.floating?(this.parentMenu=i,this.el||(this.render(),this.doLayout(!1,!0)),this.showAt(this.el.getAlignToXY(n,t||this.defaultAlign,this.defaultOffsets),i)):Ext.menu.Menu.superclass.show.call(this)},showAt:function(n,t){this.fireEvent("beforeshow",this)!==!1&&(this.parentMenu=t,this.el||this.render(),this.enableScrolling?(this.el.setXY(n),n[1]=this.constrainScroll(n[1]),n=[this.el.adjustForConstraints(n)[0],n[1]]):n=this.el.adjustForConstraints(n),this.el.setXY(n),this.el.show(),Ext.menu.Menu.superclass.onShow.call(this),Ext.isIE9m&&(this.fireEvent("autosize",this),Ext.isIE8||this.el.repaint()),this.hidden=!1,this.focus(),this.fireEvent("show",this))},constrainScroll:function(n){var t,i=this.ul.setHeight("auto").getHeight(),u=n,f,e,o,r;return this.floating?(e=Ext.fly(this.el.dom.parentNode),o=e.getScroll().top,r=e.getViewSize().height,f=n-o,t=this.maxHeight?this.maxHeight:r-f,i>r?(t=r,u=n-f):t<i&&(u=n-(i-t),t=i)):t=this.getHeight(),this.maxHeight&&(t=Math.min(this.maxHeight,t)),i>t&&t>0?(this.activeMax=t-this.scrollerHeight*2-this.el.getFrameWidth("tb")-Ext.num(this.el.shadowOffset,0),this.ul.setHeight(this.activeMax),this.createScrollers(),this.el.select(".x-menu-scroller").setDisplayed("")):(this.ul.setHeight(i),this.el.select(".x-menu-scroller").setDisplayed("none")),this.ul.dom.scrollTop=0,u},createScrollers:function(){this.scroller||(this.scroller={pos:0,top:this.el.insertFirst({tag:"div",cls:"x-menu-scroller x-menu-scroller-top",html:"&#160;"}),bottom:this.el.createChild({tag:"div",cls:"x-menu-scroller x-menu-scroller-bottom",html:"&#160;"})},this.scroller.top.hover(this.onScrollerIn,this.onScrollerOut,this),this.scroller.topRepeater=new Ext.util.ClickRepeater(this.scroller.top,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.top],!1)}}),this.scroller.bottom.hover(this.onScrollerIn,this.onScrollerOut,this),this.scroller.bottomRepeater=new Ext.util.ClickRepeater(this.scroller.bottom,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.bottom],!1)}}))},onLayout:function(){this.isVisible()&&(this.enableScrolling&&this.constrainScroll(this.el.getTop()),this.floating&&this.el.sync())},focus:function(){this.hidden||this.doFocus.defer(50,this)},doFocus:function(){this.hidden||this.focusEl.focus()},hide:function(n){this.isDestroyed||(this.deepHide=n,Ext.menu.Menu.superclass.hide.call(this),delete this.deepHide)},onHide:function(){Ext.menu.Menu.superclass.onHide.call(this);this.deactivateActive();this.el&&this.floating&&this.el.hide();var n=this.parentMenu;this.deepHide===!0&&n&&(n.floating?n.hide(!0):n.deactivateActive())},lookupComponent:function(n){return Ext.isString(n)?(n=n=="separator"||n=="-"?new Ext.menu.Separator:new Ext.menu.TextItem(n),this.applyDefaults(n)):Ext.isObject(n)?n=this.getMenuItem(n):(n.tagName||n.el)&&(n=new Ext.BoxComponent({el:n})),n},applyDefaults:function(n){if(!Ext.isString(n)){n=Ext.menu.Menu.superclass.applyDefaults.call(this,n);var t=this.internalDefaults;t&&(n.events?(Ext.applyIf(n.initialConfig,t),Ext.apply(n,t)):Ext.applyIf(n,t))}return n},getMenuItem:function(n){return(n.ownerCt=this,!n.isXType)?!n.xtype&&Ext.isBoolean(n.checked)?new Ext.menu.CheckItem(n):Ext.create(n,this.defaultType):n},addSeparator:function(){return this.add(new Ext.menu.Separator)},addElement:function(n){return this.add(new Ext.menu.BaseItem({el:n}))},addItem:function(n){return this.add(n)},addMenuItem:function(n){return this.add(this.getMenuItem(n))},addText:function(n){return this.add(new Ext.menu.TextItem(n))},onDestroy:function(){var t,n;Ext.EventManager.removeResizeListener(this.hide,this);t=this.parentMenu;t&&t.activeChild==this&&delete t.activeChild;delete this.parentMenu;Ext.menu.Menu.superclass.onDestroy.call(this);Ext.menu.MenuMgr.unregister(this);this.keyNav&&this.keyNav.disable();n=this.scroller;n&&Ext.destroy(n.topRepeater,n.bottomRepeater,n.top,n.bottom);Ext.destroy(this.el,this.focusEl,this.ul)}});Ext.reg("menu",Ext.menu.Menu);Ext.menu.MenuNav=Ext.extend(Ext.KeyNav,function(){function n(n,t){t.tryActivate(t.items.indexOf(t.activeItem)-1,-1)||t.tryActivate(t.items.length-1,-1)}function t(n,t){t.tryActivate(t.items.indexOf(t.activeItem)+1,1)||t.tryActivate(0,1)}return{constructor:function(n){Ext.menu.MenuNav.superclass.constructor.call(this,n.el);this.scope=this.menu=n},doRelay:function(n,t){var i=n.getKey();return this.menu.activeItem&&this.menu.activeItem.isFormField&&i!=n.TAB?!1:!this.menu.activeItem&&n.isNavKeyPress()&&i!=n.SPACE&&i!=n.RETURN?(this.menu.tryActivate(0,1),!1):t.call(this.scope||this,n,this.menu)},tab:function(i,r){i.stopEvent();i.shiftKey?n(i,r):t(i,r)},up:n,down:t,right:function(n,t){t.activeItem&&t.activeItem.expandMenu(!0)},left:function(n,t){t.hide();t.parentMenu&&t.parentMenu.activeItem&&t.parentMenu.activeItem.activate()},enter:function(n,t){if(t.activeItem){n.stopPropagation();t.activeItem.onClick(n);return t.fireEvent("click",this,t.activeItem),!0}}}}());Ext.menu.MenuMgr=function(){function a(){i={};n=new Ext.util.MixedCollection;r=Ext.getDoc().addKeyListener(27,u);r.disable()}function u(){if(n&&n.length>0){var t=n.clone();return t.each(function(n){n.hide()}),!0}return!1}function o(t){n.remove(t);n.length<1&&(r.disable(),Ext.getDoc().un("mousedown",l),f=!1)}function s(t){var i=n.last();if(e=new Date,n.add(t),!f){r.enable();Ext.getDoc().on("mousedown",l);f=!0}t.parentMenu?(t.getEl().setZIndex(parseInt(t.parentMenu.getEl().getStyle("z-index"),10)+3),t.parentMenu.activeChild=t):i&&!i.isDestroyed&&i.isVisible()&&t.getEl().setZIndex(parseInt(i.getEl().getStyle("z-index"),10)+3)}function h(n){n.activeChild&&n.activeChild.hide();n.autoHideTimer&&(clearTimeout(n.autoHideTimer),delete n.autoHideTimer)}function c(n){var t=n.parentMenu;t||n.allowOtherMenus?t&&t.activeChild&&t.activeChild.hide():u()}function l(t){e.getElapsed()>50&&n.length>0&&!t.getTarget(".x-menu")&&u()}var i,n,r,t={},f=!1,e=new Date;return{hideAll:function(){return u()},register:function(n){i||a();i[n.id]=n;n.on({beforehide:h,hide:o,beforeshow:c,show:s})},get:function(n){return typeof n=="string"?i?i[n]:null:n.events?n:typeof n.length=="number"?new Ext.menu.Menu({items:n}):Ext.create(n,"menu")},unregister:function(n){delete i[n.id];n.un("beforehide",h);n.un("hide",o);n.un("beforeshow",c);n.un("show",s)},registerCheckable:function(n){var i=n.group;i&&(t[i]||(t[i]=[]),t[i].push(n))},unregisterCheckable:function(n){var i=n.group;i&&t[i].remove(n)},onCheckChange:function(n,i){if(n.group&&i)for(var f=t[n.group],r=0,e=f.length,u;r<e;r++)u=f[r],u!=n&&u.setChecked(!1)},getCheckedItem:function(n){var r=t[n],i,u;if(r)for(i=0,u=r.length;i<u;i++)if(r[i].checked)return r[i];return null},setCheckedItem:function(n,i){var u=t[n],r,f;if(u)for(r=0,f=u.length;r<f;r++)u[r].id==i&&u[r].setChecked(!0);return null}}}();Ext.menu.BaseItem=Ext.extend(Ext.Component,{canActivate:!1,activeClass:"x-menu-item-active",hideOnClick:!0,clickHideDelay:1,ctype:"Ext.menu.BaseItem",actionMode:"container",initComponent:function(){if(Ext.menu.BaseItem.superclass.initComponent.call(this),this.addEvents("click","activate","deactivate"),this.handler)this.on("click",this.handler,this.scope)},onRender:function(){Ext.menu.BaseItem.superclass.onRender.apply(this,arguments);this.ownerCt&&this.ownerCt instanceof Ext.menu.Menu?this.parentMenu=this.ownerCt:(this.container.addClass("x-menu-list-item"),this.mon(this.el,{scope:this,click:this.onClick,mouseenter:this.activate,mouseleave:this.deactivate}))},setHandler:function(n,t){this.handler&&this.un("click",this.handler,this.scope);this.on("click",this.handler=n,this.scope=t)},onClick:function(n){!this.disabled&&this.fireEvent("click",this,n)!==!1&&this.parentMenu&&this.parentMenu.fireEvent("itemclick",this,n)!==!1?this.handleClick(n):n.stopEvent()},activate:function(){if(this.disabled)return!1;var n=this.container;return n.addClass(this.activeClass),this.region=n.getRegion().adjust(2,2,-2,-2),this.fireEvent("activate",this),!0},deactivate:function(){this.container.removeClass(this.activeClass);this.fireEvent("deactivate",this)},shouldDeactivate:function(n){return!this.region||!this.region.contains(n.getPoint())},handleClick:function(){var n=this.parentMenu;this.hideOnClick&&(n.floating?this.clickHideDelayTimer=n.hide.defer(this.clickHideDelay,n,[!0]):n.deactivateActive())},beforeDestroy:function(){clearTimeout(this.clickHideDelayTimer);Ext.menu.BaseItem.superclass.beforeDestroy.call(this)},expandMenu:Ext.emptyFn,hideMenu:Ext.emptyFn});Ext.reg("menubaseitem",Ext.menu.BaseItem);Ext.menu.TextItem=Ext.extend(Ext.menu.BaseItem,{hideOnClick:!1,itemCls:"x-menu-text",constructor:function(n){typeof n=="string"&&(n={text:n});Ext.menu.TextItem.superclass.constructor.call(this,n)},onRender:function(){var n=document.createElement("span");n.className=this.itemCls;n.innerHTML=this.text;this.el=n;Ext.menu.TextItem.superclass.onRender.apply(this,arguments)}});Ext.reg("menutextitem",Ext.menu.TextItem);Ext.menu.Separator=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-sep",hideOnClick:!1,activeClass:"",onRender:function(n){var t=document.createElement("span");t.className=this.itemCls;t.innerHTML="&#160;";this.el=t;n.addClass("x-menu-sep-li");Ext.menu.Separator.superclass.onRender.apply(this,arguments)}});Ext.reg("menuseparator",Ext.menu.Separator);Ext.menu.Item=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-item",canActivate:!0,showDelay:200,altText:"",hideDelay:200,ctype:"Ext.menu.Item",initComponent:function(){Ext.menu.Item.superclass.initComponent.call(this);this.menu&&(Ext.isArray(this.menu)&&(this.menu={items:this.menu}),Ext.isObject(this.menu)&&(this.menu.ownerCt=this),this.menu=Ext.menu.MenuMgr.get(this.menu),this.menu.ownerCt=undefined)},onRender:function(n,t){this.itemTpl||(this.itemTpl=Ext.menu.Item.prototype.itemTpl=new Ext.XTemplate('<a id="{id}" class="{cls} x-unselectable" hidefocus="true" unselectable="on" href="{href}"','<tpl if="hrefTarget">',' target="{hrefTarget}"',"<\/tpl>",">",'<img alt="{altText}" src="{icon}" class="x-menu-item-icon {iconCls}"/>','<span class="x-menu-item-text">{text}<\/span>',"<\/a>"));var i=this.getTemplateArgs();this.el=t?this.itemTpl.insertBefore(t,i,!0):this.itemTpl.append(n,i,!0);this.iconEl=this.el.child("img.x-menu-item-icon");this.textEl=this.el.child(".x-menu-item-text");this.href||this.mon(this.el,"click",Ext.emptyFn,null,{preventDefault:!0});Ext.menu.Item.superclass.onRender.call(this,n,t)},getTemplateArgs:function(){return{id:this.id,cls:this.itemCls+(this.menu?" x-menu-item-arrow":"")+(this.cls?" "+this.cls:""),href:this.href||"#",hrefTarget:this.hrefTarget,icon:this.icon||Ext.BLANK_IMAGE_URL,iconCls:this.iconCls||"",text:this.itemText||this.text||"&#160;",altText:this.altText||""}},setText:function(n){this.text=n||"&#160;";this.rendered&&(this.textEl.update(this.text),this.parentMenu.layout.doAutoSize())},setIconClass:function(n){var t=this.iconCls;this.iconCls=n;this.rendered&&this.iconEl.replaceClass(t,this.iconCls)},beforeDestroy:function(){clearTimeout(this.showTimer);clearTimeout(this.hideTimer);this.menu&&(delete this.menu.ownerCt,this.menu.destroy());Ext.menu.Item.superclass.beforeDestroy.call(this)},handleClick:function(n){this.href||n.stopEvent();Ext.menu.Item.superclass.handleClick.apply(this,arguments)},activate:function(n){return Ext.menu.Item.superclass.activate.apply(this,arguments)&&(this.focus(),n&&this.expandMenu()),!0},shouldDeactivate:function(n){return Ext.menu.Item.superclass.shouldDeactivate.call(this,n)?this.menu&&this.menu.isVisible()?!this.menu.getEl().getRegion().contains(n.getPoint()):!0:!1},deactivate:function(){Ext.menu.Item.superclass.deactivate.apply(this,arguments);this.hideMenu()},expandMenu:function(n){!this.disabled&&this.menu&&(clearTimeout(this.hideTimer),delete this.hideTimer,this.menu.isVisible()||this.showTimer?this.menu.isVisible()&&n&&this.menu.tryActivate(0,1):this.showTimer=this.deferExpand.defer(this.showDelay,this,[n]))},deferExpand:function(n){delete this.showTimer;this.menu.show(this.container,this.parentMenu.subMenuAlign||"tl-tr?",this.parentMenu);n&&this.menu.tryActivate(0,1)},hideMenu:function(){clearTimeout(this.showTimer);delete this.showTimer;!this.hideTimer&&this.menu&&this.menu.isVisible()&&(this.hideTimer=this.deferHide.defer(this.hideDelay,this))},deferHide:function(){delete this.hideTimer;this.menu.over?this.parentMenu.setActiveItem(this,!1):this.menu.hide()}});Ext.reg("menuitem",Ext.menu.Item);Ext.menu.CheckItem=Ext.extend(Ext.menu.Item,{itemCls:"x-menu-item x-menu-check-item",groupClass:"x-menu-group-item",checked:!1,ctype:"Ext.menu.CheckItem",initComponent:function(){if(Ext.menu.CheckItem.superclass.initComponent.call(this),this.addEvents("beforecheckchange","checkchange"),this.checkHandler)this.on("checkchange",this.checkHandler,this.scope);Ext.menu.MenuMgr.registerCheckable(this)},onRender:function(){Ext.menu.CheckItem.superclass.onRender.apply(this,arguments);this.group&&this.el.addClass(this.groupClass);this.checked&&(this.checked=!1,this.setChecked(!0,!0))},destroy:function(){Ext.menu.MenuMgr.unregisterCheckable(this);Ext.menu.CheckItem.superclass.destroy.apply(this,arguments)},setChecked:function(n,t){var i=t===!0;if(this.checked!=n&&(i||this.fireEvent("beforecheckchange",this,n)!==!1)){Ext.menu.MenuMgr.onCheckChange(this,n);this.container&&this.container[n?"addClass":"removeClass"]("x-menu-item-checked");this.checked=n;i||this.fireEvent("checkchange",this,n)}},handleClick:function(){this.disabled||this.checked&&this.group||this.setChecked(!this.checked);Ext.menu.CheckItem.superclass.handleClick.apply(this,arguments)}});Ext.reg("menucheckitem",Ext.menu.CheckItem);Ext.menu.DateMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:!1,hideOnClick:!0,pickerId:null,cls:"x-date-menu",initComponent:function(){this.on("beforeshow",this.onBeforeShow,this);if(this.strict=Ext.isIE7&&Ext.isStrict)this.on("show",this.onShow,this,{single:!0,delay:20});Ext.apply(this,{plain:!0,showSeparator:!1,items:this.picker=new Ext.DatePicker(Ext.applyIf({internalRender:this.strict||!Ext.isIE9m,ctCls:"x-menu-date-item",id:this.pickerId},this.initialConfig))});this.picker.purgeListeners();Ext.menu.DateMenu.superclass.initComponent.call(this);this.relayEvents(this.picker,["select"]);this.on("show",this.picker.focus,this.picker);this.on("select",this.menuHide,this);if(this.handler)this.on("select",this.handler,this.scope||this)},menuHide:function(){this.hideOnClick&&this.hide(!0)},onBeforeShow:function(){this.picker&&this.picker.hideMonthPicker(!0)},onShow:function(){var n=this.picker.getEl();n.setWidth(n.getWidth())}});Ext.reg("datemenu",Ext.menu.DateMenu);Ext.menu.ColorMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:!1,hideOnClick:!0,cls:"x-color-menu",paletteId:null,initComponent:function(){Ext.apply(this,{plain:!0,showSeparator:!1,items:this.palette=new Ext.ColorPalette(Ext.applyIf({id:this.paletteId},this.initialConfig))});this.palette.purgeListeners();Ext.menu.ColorMenu.superclass.initComponent.call(this);this.relayEvents(this.palette,["select"]);this.on("select",this.menuHide,this);if(this.handler)this.on("select",this.handler,this.scope||this)},menuHide:function(){this.hideOnClick&&this.hide(!0)}});Ext.reg("colormenu",Ext.menu.ColorMenu);Ext.form.Field=Ext.extend(Ext.BoxComponent,{invalidClass:"x-form-invalid",invalidText:"The value in this field is invalid",focusClass:"x-form-focus",validationEvent:"keyup",validateOnBlur:!0,validationDelay:250,defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"x-form-field",msgTarget:"qtip",msgFx:"normal",readOnly:!1,disabled:!1,submitValue:!0,isFormField:!0,msgDisplay:"",hasFocus:!1,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this);this.addEvents("focus","blur","specialkey","change","invalid","valid")},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:this.name||this.id||""},onRender:function(n,t){var i,r;this.el||(i=this.getAutoCreate(),i.name||(i.name=this.name||this.id),this.inputType&&(i.type=this.inputType),this.autoEl=i);Ext.form.Field.superclass.onRender.call(this,n,t);this.submitValue===!1&&this.el.dom.removeAttribute("name");r=this.el.dom.type;r&&(r=="password"&&(r="text"),this.el.addClass("x-form-"+r));this.readOnly&&this.setReadOnly(!0);this.tabIndex!==undefined&&this.el.dom.setAttribute("tabIndex",this.tabIndex);this.el.addClass([this.fieldClass,this.cls])},getItemCt:function(){return this.itemCt},initValue:function(){this.value!==undefined?this.setValue(this.value):Ext.isEmpty(this.el.dom.value)||this.el.dom.value==this.emptyText||this.setValue(this.el.dom.value);this.originalValue=this.getValue()},isDirty:function(){return this.disabled||!this.rendered?!1:String(this.getValue())!==String(this.originalValue)},setReadOnly:function(n){this.rendered&&(this.el.dom.readOnly=n);this.readOnly=n},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this);this.initEvents();this.initValue()},fireKey:function(n){n.isSpecialKey()&&this.fireEvent("specialkey",this,n)},reset:function(){this.setValue(this.originalValue);this.clearInvalid()},initEvents:function(){this.mon(this.el,Ext.EventManager.getKeyEvent(),this.fireKey,this);this.mon(this.el,"focus",this.onFocus,this);this.mon(this.el,"blur",this.onBlur,this,this.inEditor?{buffer:10}:null)},preFocus:Ext.emptyFn,onFocus:function(){this.preFocus();this.focusClass&&this.el.addClass(this.focusClass);this.hasFocus||(this.hasFocus=!0,this.startValue=this.getValue(),this.fireEvent("focus",this))},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur();this.focusClass&&this.el.removeClass(this.focusClass);this.hasFocus=!1;this.validationEvent!==!1&&(this.validateOnBlur||this.validationEvent=="blur")&&this.validate();var n=this.getValue();String(n)!==String(this.startValue)&&this.fireEvent("change",this,n,this.startValue);this.fireEvent("blur",this);this.postBlur()},postBlur:Ext.emptyFn,isValid:function(n){var t,i;return this.disabled?!0:(t=this.preventMark,this.preventMark=n===!0,i=this.validateValue(this.processValue(this.getRawValue()),n),this.preventMark=t,i)},validate:function(){return this.disabled||this.validateValue(this.processValue(this.getRawValue()))?(this.clearInvalid(),!0):!1},processValue:function(n){return n},validateValue:function(n){var t=this.getErrors(n)[0];return t==undefined?!0:(this.markInvalid(t),!1)},getErrors:function(){return[]},getActiveError:function(){return this.activeError||""},markInvalid:function(n){var i,t;this.rendered&&!this.preventMark&&(n=n||this.invalidText,i=this.getMessageHandler(),i?i.mark(this,n):this.msgTarget&&(this.el.addClass(this.invalidClass),t=Ext.getDom(this.msgTarget),t&&(t.innerHTML=n,t.style.display=this.msgDisplay)));this.setActiveError(n)},clearInvalid:function(){var t,n;this.rendered&&!this.preventMark&&(this.el.removeClass(this.invalidClass),t=this.getMessageHandler(),t?t.clear(this):this.msgTarget&&(this.el.removeClass(this.invalidClass),n=Ext.getDom(this.msgTarget),n&&(n.innerHTML="",n.style.display="none")));this.unsetActiveError()},setActiveError:function(n,t){this.activeError=n;t!==!0&&this.fireEvent("invalid",this,n)},unsetActiveError:function(n){delete this.activeError;n!==!0&&this.fireEvent("valid",this)},getMessageHandler:function(){return Ext.form.MessageTargets[this.msgTarget]},getErrorCt:function(){return this.el.findParent(".x-form-element",5,!0)||this.el.findParent(".x-form-field-wrap",5,!0)},alignErrorEl:function(){this.errorEl.setWidth(this.getErrorCt().getWidth(!0)-20)},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tl-tr",[2,0])},getRawValue:function(){var n=this.rendered?this.el.getValue():Ext.value(this.value,"");return n===this.emptyText&&(n=""),n},getValue:function(){if(!this.rendered)return this.value;var n=this.el.getValue();return(n===this.emptyText||n===undefined)&&(n=""),n},setRawValue:function(n){return this.rendered?this.el.dom.value=Ext.isEmpty(n)?"":n:""},setValue:function(n){return this.value=n,this.rendered&&(this.el.dom.value=Ext.isEmpty(n)?"":n,this.validate()),this},append:function(n){this.setValue([this.getValue(),n].join(""))}});Ext.form.MessageTargets={qtip:{mark:function(n,t){n.el.addClass(n.invalidClass);n.el.dom.qtip=t;n.el.dom.qclass="x-form-invalid-tip";Ext.QuickTips&&Ext.QuickTips.enable()},clear:function(n){n.el.removeClass(n.invalidClass);n.el.dom.qtip=""}},title:{mark:function(n,t){n.el.addClass(n.invalidClass);n.el.dom.title=t},clear:function(n){n.el.dom.title=""}},under:{mark:function(n,t){if(n.el.addClass(n.invalidClass),!n.errorEl){var i=n.getErrorCt();if(!i){n.el.dom.title=t;return}n.errorEl=i.createChild({cls:"x-form-invalid-msg"});n.on("resize",n.alignErrorEl,n);n.on("destroy",function(){Ext.destroy(this.errorEl)},n)}n.alignErrorEl();n.errorEl.update(t);Ext.form.Field.msgFx[n.msgFx].show(n.errorEl,n)},clear:function(n){n.el.removeClass(n.invalidClass);n.errorEl?Ext.form.Field.msgFx[n.msgFx].hide(n.errorEl,n):n.el.dom.title=""}},side:{mark:function(n,t){if(n.el.addClass(n.invalidClass),!n.errorIcon){var i=n.getErrorCt();if(!i){n.el.dom.title=t;return}if(n.errorIcon=i.createChild({cls:"x-form-invalid-icon"}),n.ownerCt){n.ownerCt.on("afterlayout",n.alignErrorIcon,n);n.ownerCt.on("expand",n.alignErrorIcon,n)}n.on("resize",n.alignErrorIcon,n);n.on("destroy",function(){Ext.destroy(this.errorIcon)},n)}n.alignErrorIcon();n.errorIcon.dom.qtip=t;n.errorIcon.dom.qclass="x-form-invalid-tip";n.errorIcon.show()},clear:function(n){n.el.removeClass(n.invalidClass);n.errorIcon?(n.errorIcon.dom.qtip="",n.errorIcon.hide()):n.el.dom.title=""}}};Ext.form.Field.msgFx={normal:{show:function(n){n.setDisplayed("block")},hide:function(n){n.setDisplayed(!1).update("")}},slide:{show:function(n){n.slideIn("t",{stopFx:!0})},hide:function(n){n.slideOut("t",{stopFx:!0,useDisplay:!0})}},slideRight:{show:function(n,t){n.fixDisplay();n.alignTo(t.el,"tl-tr");n.slideIn("l",{stopFx:!0})},hide:function(n){n.slideOut("l",{stopFx:!0,useDisplay:!0})}}};Ext.reg("field",Ext.form.Field);Ext.form.TextField=Ext.extend(Ext.form.Field,{grow:!1,growMin:30,growMax:800,vtype:null,maskRe:null,disableKeyFilter:!1,allowBlank:!0,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",selectOnFocus:!1,blankText:"This field is required",validator:null,regex:null,regexText:"",emptyText:null,emptyClass:"x-form-empty-field",initComponent:function(){Ext.form.TextField.superclass.initComponent.call(this);this.addEvents("autosize","keydown","keyup","keypress")},initEvents:function(){Ext.form.TextField.superclass.initEvents.call(this);this.validationEvent=="keyup"?(this.validationTask=new Ext.util.DelayedTask(this.validate,this),this.mon(this.el,"keyup",this.filterValidation,this)):this.validationEvent!==!1&&this.validationEvent!="blur"&&this.mon(this.el,this.validationEvent,this.validate,this,{buffer:this.validationDelay});(this.selectOnFocus||this.emptyText)&&(this.mon(this.el,"mousedown",this.onMouseDown,this),this.emptyText&&this.applyEmptyText());(this.maskRe||this.vtype&&this.disableKeyFilter!==!0&&(this.maskRe=Ext.form.VTypes[this.vtype+"Mask"]))&&this.mon(this.el,"keypress",this.filterKeys,this);this.grow&&(this.mon(this.el,"keyup",this.onKeyUpBuffered,this,{buffer:50}),this.mon(this.el,"click",this.autoSize,this));this.enableKeyEvents&&this.mon(this.el,{scope:this,keyup:this.onKeyUp,keydown:this.onKeyDown,keypress:this.onKeyPress})},onMouseDown:function(){this.hasFocus||this.mon(this.el,"mouseup",Ext.emptyFn,this,{single:!0,preventDefault:!0})},processValue:function(n){if(this.stripCharsRe){var t=n.replace(this.stripCharsRe,"");if(t!==n)return this.setRawValue(t),t}return n},filterValidation:function(n){n.isNavKeyPress()||this.validationTask.delay(this.validationDelay)},onDisable:function(){Ext.form.TextField.superclass.onDisable.call(this);Ext.isIE&&(this.el.dom.unselectable="on")},onEnable:function(){Ext.form.TextField.superclass.onEnable.call(this);Ext.isIE&&(this.el.dom.unselectable="")},onKeyUpBuffered:function(n){this.doAutoSize(n)&&this.autoSize()},doAutoSize:function(n){return!n.isNavKeyPress()},onKeyUp:function(n){this.fireEvent("keyup",this,n)},onKeyDown:function(n){this.fireEvent("keydown",this,n)},onKeyPress:function(n){this.fireEvent("keypress",this,n)},reset:function(){Ext.form.TextField.superclass.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){this.rendered&&this.emptyText&&this.getRawValue().length<1&&!this.hasFocus&&(this.setRawValue(this.emptyText),this.el.addClass(this.emptyClass))},preFocus:function(){var n=this.el,t;this.emptyText&&(n.dom.value==this.emptyText&&(this.setRawValue(""),t=!0),n.removeClass(this.emptyClass));(this.selectOnFocus||t)&&n.dom.select()},postBlur:function(){this.applyEmptyText()},filterKeys:function(n){var t,i;n.ctrlKey||(t=n.getKey(),Ext.isGecko&&(n.isNavKeyPress()||t==n.BACKSPACE||t==n.DELETE&&n.button==-1))||(i=String.fromCharCode(n.getCharCode()),Ext.isGecko||!n.isSpecialKey()||i)&&(this.maskRe.test(i)||n.stopEvent())},setValue:function(n){return this.emptyText&&this.el&&!Ext.isEmpty(n)&&this.el.removeClass(this.emptyClass),Ext.form.TextField.superclass.setValue.apply(this,arguments),this.applyEmptyText(),this.autoSize(),this},getErrors:function(n){var t=Ext.form.TextField.superclass.getErrors.apply(this,arguments),i,r;if(n=Ext.isDefined(n)?n:this.processValue(this.getRawValue()),Ext.isFunction(this.validator)&&(i=this.validator(n),i!==!0&&t.push(i)),n.length<1||n===this.emptyText){if(this.allowBlank)return t;t.push(this.blankText)}return!this.allowBlank&&(n.length<1||n===this.emptyText)&&t.push(this.blankText),n.length<this.minLength&&t.push(String.format(this.minLengthText,this.minLength)),n.length>this.maxLength&&t.push(String.format(this.maxLengthText,this.maxLength)),this.vtype&&(r=Ext.form.VTypes,r[this.vtype](n,this)||t.push(this.vtypeText||r[this.vtype+"Text"])),this.regex&&!this.regex.test(n)&&t.push(this.regexText),t},selectText:function(n,t){var u=this.getRawValue(),f=!1,i,r;u.length>0?(n=n===undefined?0:n,t=t===undefined?u.length:t,i=this.el.dom,i.setSelectionRange?i.setSelectionRange(n,t):i.createTextRange&&(r=i.createTextRange(),r.moveStart("character",n),r.moveEnd("character",t-u.length),r.select()),f=Ext.isGecko||Ext.isOpera):f=!0;f&&this.focus()},autoSize:function(){var i;if(this.grow&&this.rendered){this.metrics||(this.metrics=Ext.util.TextMetrics.createInstance(this.el));var r=this.el,n=r.dom.value,t=document.createElement("div");t.appendChild(document.createTextNode(n));n=t.innerHTML;Ext.removeNode(t);t=null;n+="&#160;";i=Math.min(this.growMax,Math.max(this.metrics.getWidth(n)+10,this.growMin));this.el.setWidth(i);this.fireEvent("autosize",this,i)}},onDestroy:function(){this.validationTask&&(this.validationTask.cancel(),this.validationTask=null);Ext.form.TextField.superclass.onDestroy.call(this)}});Ext.reg("textfield",Ext.form.TextField);Ext.form.TriggerField=Ext.extend(Ext.form.TextField,{defaultAutoCreate:{tag:"input",type:"text",size:"16",autocomplete:"off"},hideTrigger:!1,editable:!0,readOnly:!1,wrapFocusClass:"x-trigger-wrap-focus",autoSize:Ext.emptyFn,monitorTab:!0,deferHeight:!0,mimicing:!1,actionMode:"wrap",defaultTriggerWidth:17,onResize:function(n,t){Ext.form.TriggerField.superclass.onResize.call(this,n,t);var i=this.getTriggerWidth();Ext.isNumber(n)&&this.el.setWidth(n-i);this.wrap.setWidth(this.el.getWidth()+i)},getTriggerWidth:function(){var n=this.trigger.getWidth();return this.hideTrigger||this.readOnly||n!==0||(n=this.defaultTriggerWidth),n},alignErrorIcon:function(){this.wrap&&this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])},onRender:function(n,t){this.doc=Ext.isIE?Ext.getBody():Ext.getDoc();Ext.form.TriggerField.superclass.onRender.call(this,n,t);this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-field-trigger-wrap"});this.trigger=this.wrap.createChild(this.triggerConfig||{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.triggerClass});this.initTrigger();this.width||this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth());this.resizeEl=this.positionEl=this.wrap},getWidth:function(){return this.el.getWidth()+this.trigger.getWidth()},updateEditState:function(){if(this.rendered){this.readOnly?(this.el.dom.readOnly=!0,this.el.addClass("x-trigger-noedit"),this.mun(this.el,"click",this.onTriggerClick,this),this.trigger.setDisplayed(!1)):(this.editable?(this.el.dom.readOnly=!1,this.el.removeClass("x-trigger-noedit"),this.mun(this.el,"click",this.onTriggerClick,this)):(this.el.dom.readOnly=!0,this.el.addClass("x-trigger-noedit"),this.mon(this.el,"click",this.onTriggerClick,this)),this.trigger.setDisplayed(!this.hideTrigger));this.onResize(this.width||this.wrap.getWidth())}},setHideTrigger:function(n){n!=this.hideTrigger&&(this.hideTrigger=n,this.updateEditState())},setEditable:function(n){n!=this.editable&&(this.editable=n,this.updateEditState())},setReadOnly:function(n){n!=this.readOnly&&(this.readOnly=n,this.updateEditState())},afterRender:function(){Ext.form.TriggerField.superclass.afterRender.call(this);this.updateEditState()},initTrigger:function(){this.mon(this.trigger,"click",this.onTriggerClick,this,{preventDefault:!0});this.trigger.addClassOnOver("x-form-trigger-over");this.trigger.addClassOnClick("x-form-trigger-click")},onDestroy:function(){Ext.destroy(this.trigger,this.wrap);this.mimicing&&this.doc.un("mousedown",this.mimicBlur,this);delete this.doc;Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){if(Ext.form.TriggerField.superclass.onFocus.call(this),!this.mimicing){this.wrap.addClass(this.wrapFocusClass);this.mimicing=!0;this.doc.on("mousedown",this.mimicBlur,this,{delay:10});if(this.monitorTab)this.on("specialkey",this.checkTab,this)}},checkTab:function(n,t){t.getKey()==t.TAB&&this.triggerBlur()},onBlur:Ext.emptyFn,mimicBlur:function(n){this.isDestroyed||this.wrap.contains(n.target)||!this.validateBlur(n)||this.triggerBlur()},triggerBlur:function(){this.mimicing=!1;this.doc.un("mousedown",this.mimicBlur,this);this.monitorTab&&this.el&&this.un("specialkey",this.checkTab,this);Ext.form.TriggerField.superclass.onBlur.call(this);this.wrap&&this.wrap.removeClass(this.wrapFocusClass)},beforeBlur:Ext.emptyFn,validateBlur:function(){return!0},onTriggerClick:Ext.emptyFn});Ext.form.TwinTriggerField=Ext.extend(Ext.form.TriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this);this.triggerConfig={tag:"span",cls:"x-form-twin-triggers",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.trigger1Class},{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.trigger2Class}]}},getTrigger:function(n){return this.triggers[n]},afterRender:function(){Ext.form.TwinTriggerField.superclass.afterRender.call(this);for(var t=this.triggers,n=0,i=t.length;n<i;++n)this["hideTrigger"+(n+1)]&&t[n].hide()},initTrigger:function(){var t=this.trigger.select(".x-form-trigger",!0),n=this;t.each(function(t,i,r){var u="Trigger"+(r+1);t.hide=function(){var t=n.wrap.getWidth();this.dom.style.display="none";n.el.setWidth(t-n.trigger.getWidth());n["hidden"+u]=!0};t.show=function(){var t=n.wrap.getWidth();this.dom.style.display="";n.el.setWidth(t-n.trigger.getWidth());n["hidden"+u]=!1};this.mon(t,"click",this["on"+u+"Click"],this,{preventDefault:!0});t.addClassOnOver("x-form-trigger-over");t.addClassOnClick("x-form-trigger-click")},this);this.triggers=t.elements},getTriggerWidth:function(){var n=0;return Ext.each(this.triggers,function(t,i){var u="Trigger"+(i+1),r=t.getWidth();n+=r!==0||this["hidden"+u]?r:this.defaultTriggerWidth},this),n},onDestroy:function(){Ext.destroy(this.triggers);Ext.form.TwinTriggerField.superclass.onDestroy.call(this)},onTrigger1Click:Ext.emptyFn,onTrigger2Click:Ext.emptyFn});Ext.reg("trigger",Ext.form.TriggerField);Ext.reg("twintrigger",Ext.form.TwinTriggerField);Ext.form.TextArea=Ext.extend(Ext.form.TextField,{growMin:60,growMax:1e3,growAppend:"&#160;\n&#160;",enterIsSpecial:!1,preventScrollbars:!1,onRender:function(n,t){this.el||(this.defaultAutoCreate={tag:"textarea",style:"width:100px;height:60px;",autocomplete:"off"});Ext.form.TextArea.superclass.onRender.call(this,n,t);this.grow&&(this.textSizeEl=Ext.DomHelper.append(document.body,{tag:"pre",cls:"x-form-grow-sizer"}),this.preventScrollbars&&this.el.setStyle("overflow","hidden"),this.el.setHeight(this.growMin))},onDestroy:function(){Ext.removeNode(this.textSizeEl);Ext.form.TextArea.superclass.onDestroy.call(this)},fireKey:function(n){n.isSpecialKey()&&(this.enterIsSpecial||n.getKey()!=n.ENTER||n.hasModifier())&&this.fireEvent("specialkey",this,n)},doAutoSize:function(n){return!n.isNavKeyPress()||n.getKey()==n.ENTER},filterValidation:function(n){n.isNavKeyPress()&&(this.enterIsSpecial||n.keyCode!=n.ENTER)||this.validationTask.delay(this.validationDelay)},autoSize:function(){if(this.grow&&this.textSizeEl){var r=this.el,n=Ext.util.Format.htmlEncode(r.dom.value),i=this.textSizeEl,t;Ext.fly(i).setWidth(this.el.getWidth());n.length<1?n="&#160;&#160;":(n+=this.growAppend,Ext.isIE&&(n=n.replace(/\n/g,"&#160;<br />")));i.innerHTML=n;t=Math.min(this.growMax,Math.max(i.offsetHeight,this.growMin));t!=this.lastHeight&&(this.lastHeight=t,this.el.setHeight(t),this.fireEvent("autosize",this,t))}}});Ext.reg("textarea",Ext.form.TextArea);Ext.form.NumberField=Ext.extend(Ext.form.TextField,{fieldClass:"x-form-field x-form-num-field",allowDecimals:!0,decimalSeparator:".",decimalPrecision:2,allowNegative:!0,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",baseChars:"0123456789",autoStripChars:!1,initEvents:function(){var n=this.baseChars+"";this.allowDecimals&&(n+=this.decimalSeparator);this.allowNegative&&(n+="-");n=Ext.escapeRe(n);this.maskRe=new RegExp("["+n+"]");this.autoStripChars&&(this.stripCharsRe=new RegExp("[^"+n+"]","gi"));Ext.form.NumberField.superclass.initEvents.call(this)},getErrors:function(n){var t=Ext.form.NumberField.superclass.getErrors.apply(this,arguments),i;return(n=Ext.isDefined(n)?n:this.processValue(this.getRawValue()),n.length<1)?t:(n=String(n).replace(this.decimalSeparator,"."),isNaN(n)&&t.push(String.format(this.nanText,n)),i=this.parseValue(n),i<this.minValue&&t.push(String.format(this.minText,this.minValue)),i>this.maxValue&&t.push(String.format(this.maxText,this.maxValue)),t)},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},setValue:function(n){return n=Ext.isNumber(n)?n:parseFloat(String(n).replace(this.decimalSeparator,".")),n=this.fixPrecision(n),n=isNaN(n)?"":String(n).replace(".",this.decimalSeparator),Ext.form.NumberField.superclass.setValue.call(this,n)},setMinValue:function(n){this.minValue=Ext.num(n,Number.NEGATIVE_INFINITY)},setMaxValue:function(n){this.maxValue=Ext.num(n,Number.MAX_VALUE)},parseValue:function(n){return n=parseFloat(String(n).replace(this.decimalSeparator,".")),isNaN(n)?"":n},fixPrecision:function(n){var t=isNaN(n);return!this.allowDecimals||this.decimalPrecision==-1||t||!n?t?"":n:parseFloat(parseFloat(n).toFixed(this.decimalPrecision))},beforeBlur:function(){var n=this.parseValue(this.getRawValue());Ext.isEmpty(n)||this.setValue(n)}});Ext.reg("numberfield",Ext.form.NumberField);Ext.form.DateField=Ext.extend(Ext.form.TriggerField,{format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerClass:"x-form-date-trigger",showToday:!0,startDay:0,defaultAutoCreate:{tag:"input",type:"text",size:"10",autocomplete:"off"},initTime:"12",initTimeFormat:"H",safeParse:function(n,t){if(Date.formatContainsHourInfo(t))return Date.parseDate(n,t);var i=Date.parseDate(n+" "+this.initTime,t+" "+this.initTimeFormat);if(i)return i.clearTime()},initComponent:function(){Ext.form.DateField.superclass.initComponent.call(this);this.addEvents("select");Ext.isString(this.minValue)&&(this.minValue=this.parseDate(this.minValue));Ext.isString(this.maxValue)&&(this.maxValue=this.parseDate(this.maxValue));this.disabledDatesRE=null;this.initDisabledDays()},initEvents:function(){Ext.form.DateField.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{down:function(){this.onTriggerClick()},scope:this,forceKeyDown:!0})},initDisabledDays:function(){if(this.disabledDates){var n=this.disabledDates,i=n.length-1,t="(?:";Ext.each(n,function(r,u){t+=Ext.isDate(r)?"^"+Ext.escapeRe(r.dateFormat(this.format))+"$":n[u];u!=i&&(t+="|")},this);this.disabledDatesRE=new RegExp(t+")")}},setDisabledDates:function(n){this.disabledDates=n;this.initDisabledDays();this.menu&&this.menu.picker.setDisabledDates(this.disabledDatesRE)},setDisabledDays:function(n){this.disabledDays=n;this.menu&&this.menu.picker.setDisabledDays(n)},setMinValue:function(n){this.minValue=Ext.isString(n)?this.parseDate(n):n;this.menu&&this.menu.picker.setMinDate(this.minValue)},setMaxValue:function(n){this.maxValue=Ext.isString(n)?this.parseDate(n):n;this.menu&&this.menu.picker.setMaxDate(this.maxValue)},getErrors:function(n){var t=Ext.form.DateField.superclass.getErrors.apply(this,arguments),f,r,e,i,u;if(n=this.formatDate(n||this.processValue(this.getRawValue())),n.length<1)return t;if(f=n,n=this.parseDate(n),!n)return t.push(String.format(this.invalidText,f,this.format)),t;if(r=n.getTime(),this.minValue&&r<this.minValue.clearTime().getTime()&&t.push(String.format(this.minText,this.formatDate(this.minValue))),this.maxValue&&r>this.maxValue.clearTime().getTime()&&t.push(String.format(this.maxText,this.formatDate(this.maxValue))),this.disabledDays)for(e=n.getDay(),i=0;i<this.disabledDays.length;i++)if(e===this.disabledDays[i]){t.push(this.disabledDaysText);break}return u=this.formatDate(n),this.disabledDatesRE&&this.disabledDatesRE.test(u)&&t.push(String.format(this.disabledDatesText,u)),t},validateBlur:function(){return!this.menu||!this.menu.isVisible()},getValue:function(){return this.parseDate(Ext.form.DateField.superclass.getValue.call(this))||""},setValue:function(n){return Ext.form.DateField.superclass.setValue.call(this,this.formatDate(this.parseDate(n)))},parseDate:function(n){var r,f;if(!n||Ext.isDate(n))return n;var t=this.safeParse(n,this.format),u=this.altFormats,i=this.altFormatsArray;if(!t&&u)for(i=i||u.split("|"),r=0,f=i.length;r<f&&!t;r++)t=this.safeParse(n,i[r]);return t},onDestroy:function(){Ext.destroy(this.menu,this.keyNav);Ext.form.DateField.superclass.onDestroy.call(this)},formatDate:function(n){return Ext.isDate(n)?n.dateFormat(this.format):n},onTriggerClick:function(){this.disabled||(this.menu==null&&(this.menu=new Ext.menu.DateMenu({hideOnClick:!1,focusOnSelect:!1})),this.onFocus(),Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,startDay:this.startDay,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue))}),this.menu.picker.setValue(this.getValue()||new Date),this.menu.show(this.el,"tl-bl?"),this.menuEvents("on"))},menuEvents:function(n){this.menu[n]("select",this.onSelect,this);this.menu[n]("hide",this.onMenuHide,this);this.menu[n]("show",this.onFocus,this)},onSelect:function(n,t){this.setValue(t);this.fireEvent("select",this,t);this.menu.hide()},onMenuHide:function(){this.focus(!1,60);this.menuEvents("un")},beforeBlur:function(){var n=this.parseDate(this.getRawValue());n&&this.setValue(n)}});Ext.reg("datefield",Ext.form.DateField);Ext.form.DisplayField=Ext.extend(Ext.form.Field,{validationEvent:!1,validateOnBlur:!1,defaultAutoCreate:{tag:"div"},fieldClass:"x-form-display-field",htmlEncode:!1,initEvents:Ext.emptyFn,isValid:function(){return!0},validate:function(){return!0},getRawValue:function(){var n=this.rendered?this.el.dom.innerHTML:Ext.value(this.value,"");return n===this.emptyText&&(n=""),this.htmlEncode&&(n=Ext.util.Format.htmlDecode(n)),n},getValue:function(){return this.getRawValue()},getName:function(){return this.name},setRawValue:function(n){return this.htmlEncode&&(n=Ext.util.Format.htmlEncode(n)),this.rendered?this.el.dom.innerHTML=Ext.isEmpty(n)?"":n:this.value=n},setValue:function(n){return this.setRawValue(n),this}});Ext.reg("displayfield",Ext.form.DisplayField);Ext.form.ComboBox=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24",autocomplete:"off"},listClass:"",selectedClass:"x-combo-selected",listEmptyText:"",triggerClass:"x-form-arrow-trigger",shadow:"sides",listAlign:"tl-bl?",maxHeight:300,minHeight:90,triggerAction:"query",minChars:4,autoSelect:!0,typeAhead:!1,queryDelay:500,pageSize:0,selectOnFocus:!1,queryParam:"query",loadingText:"Loading...",resizable:!1,handleHeight:8,allQuery:"",mode:"remote",minListWidth:70,forceSelection:!1,typeAheadDelay:250,lazyInit:!0,clearFilterOnReset:!0,submitValue:undefined,initComponent:function(){var t,r,u,i,e,n,f;if(Ext.form.ComboBox.superclass.initComponent.call(this),this.addEvents("expand","collapse","beforeselect","select","beforequery"),this.transform){if(t=Ext.getDom(this.transform),this.hiddenName||(this.hiddenName=t.name),!this.store){for(this.mode="local",r=[],u=t.options,i=0,e=u.length;i<e;i++)n=u[i],f=(n.hasAttribute?n.hasAttribute("value"):n.getAttributeNode("value").specified)?n.value:n.text,n.selected&&Ext.isEmpty(this.value,!0)&&(this.value=f),r.push([f,n.text]);this.store=new Ext.data.ArrayStore({idIndex:0,fields:["value","text"],data:r,autoDestroy:!0});this.valueField="value";this.displayField="text"}t.name=Ext.id();this.lazyRender||(this.target=!0,this.el=Ext.DomHelper.insertBefore(t,this.autoCreate||this.defaultAutoCreate),this.render(this.el.parentNode,t));Ext.removeNode(t)}else this.store&&(this.store=Ext.StoreMgr.lookup(this.store),this.store.autoCreated&&(this.displayField=this.valueField="field1",this.store.expandData||(this.displayField="field2"),this.mode="local"));this.selectedIndex=-1;this.mode=="local"&&(Ext.isDefined(this.initialConfig.queryDelay)||(this.queryDelay=10),Ext.isDefined(this.initialConfig.minChars)||(this.minChars=0))},onRender:function(n,t){if(this.hiddenName&&!Ext.isDefined(this.submitValue)&&(this.submitValue=!1),Ext.form.ComboBox.superclass.onRender.call(this,n,t),this.hiddenName&&(this.hiddenField=this.el.insertSibling({tag:"input",type:"hidden",name:this.hiddenName,id:this.hiddenId||Ext.id()},"before",!0)),Ext.isGecko&&this.el.dom.setAttribute("autocomplete","off"),this.lazyInit)this.on("focus",this.initList,this,{single:!0});else this.initList()},initValue:function(){Ext.form.ComboBox.superclass.initValue.call(this);this.hiddenField&&(this.hiddenField.value=Ext.value(Ext.isDefined(this.hiddenValue)?this.hiddenValue:this.value,""))},getParentZIndex:function(){var n;return this.ownerCt&&this.findParentBy(function(t){return n=parseInt(t.getPositionEl().getStyle("z-index"),10),!!n}),n},getZIndex:function(n){n=n||Ext.getDom(this.getListParent()||Ext.getBody());var t=parseInt(Ext.fly(n).getStyle("z-index"),10);return t||(t=this.getParentZIndex()),(t||12e3)+5},initList:function(){var n,t,i;this.list||(n="x-combo-list",t=Ext.getDom(this.getListParent()||Ext.getBody()),this.list=new Ext.Layer({parentEl:t,shadow:this.shadow,cls:[n,this.listClass].join(" "),constrain:!1,zindex:this.getZIndex(t)}),i=this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth),this.list.setSize(i,0),this.list.swallowEvent("mousewheel"),this.assetHeight=0,this.syncFont!==!1&&this.list.setStyle("font-size",this.el.getStyle("font-size")),this.title&&(this.header=this.list.createChild({cls:n+"-hd",html:this.title}),this.assetHeight+=this.header.getHeight()),this.innerList=this.list.createChild({cls:n+"-inner"}),this.mon(this.innerList,"mouseover",this.onViewOver,this),this.mon(this.innerList,"mousemove",this.onViewMove,this),this.innerList.setWidth(i-this.list.getFrameWidth("lr")),this.pageSize&&(this.footer=this.list.createChild({cls:n+"-ft"}),this.pageTb=new Ext.PagingToolbar({store:this.store,pageSize:this.pageSize,renderTo:this.footer}),this.assetHeight+=this.footer.getHeight()),this.tpl||(this.tpl='<tpl for="."><div class="'+n+'-item">{'+this.displayField+"}<\/div><\/tpl>"),this.view=new Ext.DataView({applyTo:this.innerList,tpl:this.tpl,singleSelect:!0,selectedClass:this.selectedClass,itemSelector:this.itemSelector||"."+n+"-item",emptyText:this.listEmptyText,deferEmptyText:!1}),this.mon(this.view,{containerclick:this.onViewClick,click:this.onViewClick,scope:this}),this.bindStore(this.store,!0),this.resizable&&(this.resizer=new Ext.Resizable(this.list,{pinned:!0,handles:"se"}),this.mon(this.resizer,"resize",function(n,t,i){this.maxHeight=i-this.handleHeight-this.list.getFrameWidth("tb")-this.assetHeight;this.listWidth=t;this.innerList.setWidth(t-this.list.getFrameWidth("lr"));this.restrictHeight()},this),this[this.pageSize?"footer":"innerList"].setStyle("margin-bottom",this.handleHeight+"px")))},getListParent:function(){return document.body},getStore:function(){return this.store},bindStore:function(n,t){if(this.store&&!t&&(this.store!==n&&this.store.autoDestroy?this.store.destroy():(this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("exception",this.collapse,this)),n||(this.store=null,this.view&&this.view.bindStore(null),this.pageTb&&this.pageTb.bindStore(null))),n){t||(this.lastQuery=null,this.pageTb&&this.pageTb.bindStore(n));this.store=Ext.StoreMgr.lookup(n);this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.collapse});this.view&&this.view.bindStore(n)}},reset:function(){this.clearFilterOnReset&&this.mode=="local"&&this.store.clearFilter();Ext.form.ComboBox.superclass.reset.call(this)},initEvents:function(){Ext.form.ComboBox.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{up:function(){this.inKeyMode=!0;this.selectPrev()},down:function(){this.isExpanded()?(this.inKeyMode=!0,this.selectNext()):this.onTriggerClick()},enter:function(){this.onViewClick()},esc:function(){this.collapse()},tab:function(){if(this.forceSelection===!0)this.collapse();else this.onViewClick(!1);return!0},scope:this,doRelay:function(n,t,i){if(i=="down"||this.scope.isExpanded()){var r=Ext.KeyNav.prototype.doRelay.apply(this,arguments);return(Ext.isIE9&&Ext.isStrict||Ext.isIE10p||!Ext.isIE)&&Ext.EventManager.useKeydown&&this.scope.fireKey(n),r}return!0},forceKeyDown:!0,defaultEventAction:"stopEvent"});this.queryDelay=Math.max(this.queryDelay||10,this.mode=="local"?10:250);this.dqTask=new Ext.util.DelayedTask(this.initQuery,this);this.typeAhead&&(this.taTask=new Ext.util.DelayedTask(this.onTypeAhead,this));this.enableKeyEvents||this.mon(this.el,"keyup",this.onKeyUp,this)},onDestroy:function(){this.dqTask&&(this.dqTask.cancel(),this.dqTask=null);this.bindStore(null);Ext.destroy(this.resizer,this.view,this.pageTb,this.list);Ext.destroyMembers(this,"hiddenField");Ext.form.ComboBox.superclass.onDestroy.call(this)},fireKey:function(n){this.isExpanded()||Ext.form.ComboBox.superclass.fireKey.call(this,n)},onResize:function(n){Ext.form.ComboBox.superclass.onResize.apply(this,arguments);!isNaN(n)&&this.isVisible()&&this.list?this.doResize(n):this.bufferSize=n},doResize:function(n){if(!Ext.isDefined(this.listWidth)){var t=Math.max(n,this.minListWidth);this.list.setWidth(t);this.innerList.setWidth(t-this.list.getFrameWidth("lr"))}},onEnable:function(){Ext.form.ComboBox.superclass.onEnable.apply(this,arguments);this.hiddenField&&(this.hiddenField.disabled=!1)},onDisable:function(){Ext.form.ComboBox.superclass.onDisable.apply(this,arguments);this.hiddenField&&(this.hiddenField.disabled=!0)},onBeforeLoad:function(){this.hasFocus&&(this.innerList.update(this.loadingText?'<div class="loading-indicator">'+this.loadingText+"<\/div>":""),this.restrictHeight(),this.selectedIndex=-1)},onLoad:function(){this.hasFocus&&(this.store.getCount()>0||this.listEmptyText?(this.expand(),this.restrictHeight(),this.lastQuery==this.allQuery?(this.editable&&this.el.dom.select(),this.autoSelect===!1||this.selectByValue(this.value,!0)||this.select(0,!0)):(this.autoSelect!==!1&&this.selectNext(),this.typeAhead&&this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE&&this.taTask.delay(this.typeAheadDelay))):this.collapse())},onTypeAhead:function(){if(this.store.getCount()>0){var i=this.store.getAt(0),n=i.data[this.displayField],r=n.length,t=this.getRawValue().length;t!=r&&(this.setRawValue(n),this.selectText(t,n.length))}},assertValue:function(){var n=this.getRawValue(),t;if(this.valueField&&Ext.isDefined(this.value)&&(t=this.findRecord(this.valueField,this.value)),t&&t.get(this.displayField)==n||(t=this.findRecord(this.displayField,n)),!t&&this.forceSelection)n.length>0&&n!=this.emptyText?(this.el.dom.value=Ext.value(this.lastSelectionText,""),this.applyEmptyText()):this.clearValue();else{if(t&&this.valueField){if(this.value==n)return;n=t.get(this.valueField||this.displayField)}this.setValue(n)}},onSelect:function(n,t){this.fireEvent("beforeselect",this,n,t)!==!1&&(this.setValue(n.data[this.valueField||this.displayField]),this.collapse(),this.fireEvent("select",this,n,t))},getName:function(){var n=this.hiddenField;return n&&n.name?n.name:this.hiddenName||Ext.form.ComboBox.superclass.getName.call(this)},getValue:function(){return this.valueField?Ext.isDefined(this.value)?this.value:"":Ext.form.ComboBox.superclass.getValue.call(this)},clearValue:function(){this.hiddenField&&(this.hiddenField.value="");this.setRawValue("");this.lastSelectionText="";this.applyEmptyText();this.value=""},setValue:function(n){var t=n,i;return this.valueField&&(i=this.findRecord(this.valueField,n),i?t=i.data[this.displayField]:Ext.isDefined(this.valueNotFoundText)&&(t=this.valueNotFoundText)),this.lastSelectionText=t,this.hiddenField&&(this.hiddenField.value=Ext.value(n,"")),Ext.form.ComboBox.superclass.setValue.call(this,t),this.value=n,this},findRecord:function(n,t){var i;return this.store.getCount()>0&&this.store.each(function(r){if(r.data[n]==t)return i=r,!1}),i},onViewMove:function(){this.inKeyMode=!1},onViewOver:function(n,t){var i,r;this.inKeyMode||(i=this.view.findItemFromChild(t),i&&(r=this.view.indexOf(i),this.select(r,!1)))},onViewClick:function(n){var t=this.view.getSelectedIndexes()[0],r=this.store,i=r.getAt(t);if(i)this.onSelect(i,t);else this.collapse();n!==!1&&this.el.focus()},restrictHeight:function(){this.innerList.dom.style.height="";var t=this.innerList.dom,i=this.list.getFrameWidth("tb")+(this.resizable?this.handleHeight:0)+this.assetHeight,n=Math.max(t.clientHeight,t.offsetHeight,t.scrollHeight),r=this.getPosition()[1]-Ext.getBody().getScroll().top,u=Ext.lib.Dom.getViewHeight()-r-this.getSize().height,f=Math.max(r,u,this.minHeight||0)-this.list.shadowOffset-i-5;n=Math.min(n,f,this.maxHeight);this.innerList.setHeight(n);this.list.beginUpdate();this.list.setHeight(n+i);this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.endUpdate()},isExpanded:function(){return this.list&&this.list.isVisible()},selectByValue:function(n,t){if(!Ext.isEmpty(n,!0)){var i=this.findRecord(this.valueField||this.displayField,n);if(i)return this.select(this.store.indexOf(i),t),!0}return!1},select:function(n,t){if(this.selectedIndex=n,this.view.select(n),t!==!1){var i=this.view.getNode(n);i&&this.innerList.scrollChildIntoView(i,!1)}},selectNext:function(){var n=this.store.getCount();n>0&&(this.selectedIndex==-1?this.select(0):this.selectedIndex<n-1&&this.select(this.selectedIndex+1))},selectPrev:function(){var n=this.store.getCount();n>0&&(this.selectedIndex==-1?this.select(0):this.selectedIndex!==0&&this.select(this.selectedIndex-1))},onKeyUp:function(n){var t=n.getKey();this.editable===!1||this.readOnly===!0||t!=n.BACKSPACE&&n.isSpecialKey()||(this.lastKey=t,this.dqTask.delay(this.queryDelay));Ext.form.ComboBox.superclass.onKeyUp.call(this,n)},validateBlur:function(){return!this.list||!this.list.isVisible()},initQuery:function(){this.doQuery(this.getRawValue())},beforeBlur:function(){this.assertValue()},postBlur:function(){Ext.form.ComboBox.superclass.postBlur.call(this);this.collapse();this.inKeyMode=!1},doQuery:function(n,t){n=Ext.isEmpty(n)?"":n;var i={query:n,forceAll:t,combo:this,cancel:!1};if(this.fireEvent("beforequery",i)===!1||i.cancel)return!1;n=i.query;t=i.forceAll;(t===!0||n.length>=this.minChars)&&(this.lastQuery!==n?(this.lastQuery=n,this.mode=="local"?(this.selectedIndex=-1,t?this.store.clearFilter():this.store.filter(this.displayField,n),this.onLoad()):(this.store.baseParams[this.queryParam]=n,this.store.load({params:this.getParams(n)}),this.expand())):(this.selectedIndex=-1,this.onLoad()))},getParams:function(){var n={},t=this.store.paramNames;return this.pageSize&&(n[t.start]=0,n[t.limit]=this.pageSize),n},collapse:function(){this.isExpanded()&&(this.list.hide(),Ext.getDoc().un("mousewheel",this.collapseIf,this),Ext.getDoc().un("mousedown",this.collapseIf,this),this.fireEvent("collapse",this))},collapseIf:function(n){this.isDestroyed||n.within(this.wrap)||n.within(this.list)||this.collapse()},expand:function(){!this.isExpanded()&&this.hasFocus&&((this.title||this.pageSize)&&(this.assetHeight=0,this.title&&(this.assetHeight+=this.header.getHeight()),this.pageSize&&(this.assetHeight+=this.footer.getHeight())),this.bufferSize&&(this.doResize(this.bufferSize),delete this.bufferSize),this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign)),this.list.setZIndex(this.getZIndex()),this.list.show(),Ext.isGecko2&&this.innerList.setOverflow("auto"),this.mon(Ext.getDoc(),{scope:this,mousewheel:this.collapseIf,mousedown:this.collapseIf}),this.fireEvent("expand",this))},onTriggerClick:function(){if(!this.readOnly&&!this.disabled)if(this.isExpanded())this.collapse(),this.el.focus();else{this.onFocus({});this.triggerAction=="all"?this.doQuery(this.allQuery,!0):this.doQuery(this.getRawValue());this.el.focus()}}});Ext.reg("combo",Ext.form.ComboBox);Ext.form.Checkbox=Ext.extend(Ext.form.Field,{focusClass:undefined,fieldClass:"x-form-field",checked:!1,boxLabel:"&#160;",defaultAutoCreate:{tag:"input",type:"checkbox",autocomplete:"off"},actionMode:"wrap",initComponent:function(){Ext.form.Checkbox.superclass.initComponent.call(this);this.addEvents("check")},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments);this.boxLabel||this.fieldLabel||this.el.alignTo(this.wrap,"c-c")},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this);this.mon(this.el,{scope:this,click:this.onClick,change:this.onClick})},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,onRender:function(n,t){Ext.form.Checkbox.superclass.onRender.call(this,n,t);this.inputValue!==undefined&&(this.el.dom.value=this.inputValue);this.wrap=this.el.wrap({cls:"x-form-check-wrap"});this.boxLabel&&this.wrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel});this.checked?this.setValue(!0):this.checked=this.el.dom.checked;Ext.isIEQuirks&&this.wrap.repaint();this.resizeEl=this.positionEl=this.wrap},onDestroy:function(){Ext.destroy(this.wrap);Ext.form.Checkbox.superclass.onDestroy.call(this)},initValue:function(){this.originalValue=this.getValue()},getValue:function(){return this.rendered?this.el.dom.checked:this.checked},onClick:function(){this.el.dom.checked!=this.checked&&this.setValue(this.el.dom.checked)},setValue:function(n){var i=this.checked,t=this.inputValue;return this.checked=n===!1?!1:n===!0||n==="true"||n=="1"||(t?n==t:String(n).toLowerCase()=="on"),this.rendered&&(this.el.dom.checked=this.checked,this.el.dom.defaultChecked=this.checked),i!=this.checked&&(this.fireEvent("check",this,this.checked),this.handler&&this.handler.call(this.scope||this,this,this.checked)),this}});Ext.reg("checkbox",Ext.form.Checkbox);Ext.form.CheckboxGroup=Ext.extend(Ext.form.Field,{columns:"auto",vertical:!1,allowBlank:!0,blankText:"You must select at least one item in this group",defaultType:"checkbox",groupCls:"x-form-check-group",initComponent:function(){this.addEvents("change");this.on("change",this.validate,this);Ext.form.CheckboxGroup.superclass.initComponent.call(this)},onRender:function(n,t){var o,s,u,f,h,e,a,c,i,r,v,l,y;if(!this.el){if(o={autoEl:{id:this.id},cls:this.groupCls,layout:"column",renderTo:n,bufferResize:!1},s={xtype:"container",defaultType:this.defaultType,layout:"form",defaults:{hideLabel:!0,anchor:"100%"}},this.items[0].items)for(Ext.apply(o,{layoutConfig:{columns:this.items.length},defaults:this.defaults,items:this.items}),i=0,r=this.items.length;i<r;i++)Ext.applyIf(this.items[i],s);else{if(f=[],typeof this.columns=="string"&&(this.columns=this.items.length),!Ext.isArray(this.columns)){for(h=[],i=0;i<this.columns;i++)h.push(100/this.columns*.01);this.columns=h}for(u=this.columns.length,i=0;i<u;i++)e=Ext.apply({items:[]},s),e[this.columns[i]<=1?"columnWidth":"width"]=this.columns[i],this.defaults&&(e.defaults=Ext.apply(e.defaults||{},this.defaults)),f.push(e);if(this.vertical)for(a=Math.ceil(this.items.length/u),c=0,i=0,r=this.items.length;i<r;i++)i>0&&i%a==0&&c++,this.items[i].fieldLabel&&(this.items[i].hideLabel=!1),f[c].items.push(this.items[i]);else for(i=0,r=this.items.length;i<r;i++)v=i%u,this.items[i].fieldLabel&&(this.items[i].hideLabel=!1),f[v].items.push(this.items[i]);Ext.apply(o,{layoutConfig:{columns:u},items:f})}this.panel=new Ext.Container(o);this.panel.ownerCt=this;this.el=this.panel.getEl();this.forId&&this.itemCls&&(l=this.el.up(this.itemCls).child("label",!0),l&&l.setAttribute("htmlFor",this.forId));y=this.panel.findBy(function(n){return n.isFormField},this);this.items=new Ext.util.MixedCollection;this.items.addAll(y)}Ext.form.CheckboxGroup.superclass.onRender.call(this,n,t)},initValue:function(){this.value&&(this.setValue.apply(this,this.buffered?this.value:[this.value]),delete this.buffered,delete this.value)},afterRender:function(){Ext.form.CheckboxGroup.superclass.afterRender.call(this);this.eachItem(function(n){n.on("check",this.fireChecked,this);n.inGroup=!0})},doLayout:function(){this.rendered&&(this.panel.forceLayout=this.ownerCt.forceLayout,this.panel.doLayout())},fireChecked:function(){var n=[];this.eachItem(function(t){t.checked&&n.push(t)});this.fireEvent("change",this,n)},getErrors:function(){var t=Ext.form.CheckboxGroup.superclass.getErrors.apply(this,arguments),n;return this.allowBlank||(n=!0,this.eachItem(function(t){if(t.checked)return n=!1}),n&&t.push(this.blankText)),t},isDirty:function(){if(this.disabled||!this.rendered)return!1;var n=!1;return this.eachItem(function(t){if(t.isDirty())return n=!0,!1}),n},setReadOnly:function(n){this.rendered&&this.eachItem(function(t){t.setReadOnly(n)});this.readOnly=n},onDisable:function(){this.eachItem(function(n){n.disable()})},onEnable:function(){this.eachItem(function(n){n.enable()})},onResize:function(n,t){this.panel.setSize(n,t);this.panel.doLayout()},reset:function(){this.originalValue?(this.eachItem(function(n){n.setValue&&(n.setValue(!1),n.originalValue=n.getValue())}),this.resetOriginal=!0,this.setValue(this.originalValue),delete this.resetOriginal):this.eachItem(function(n){n.reset&&n.reset()}),function(){this.clearInvalid()}.defer(50,this)},setValue:function(){return this.rendered?this.onSetValue.apply(this,arguments):(this.buffered=!0,this.value=arguments),this},onSetValue:function(n,t){var r,i;if(arguments.length==1)if(Ext.isArray(n))Ext.each(n,function(n,t){if(Ext.isObject(n)&&n.setValue)n.setValue(!0),this.resetOriginal===!0&&(n.originalValue=n.getValue());else{var i=this.items.itemAt(t);i&&i.setValue(n)}},this);else if(Ext.isObject(n))for(r in n)i=this.getBox(r),i&&i.setValue(n[r]);else this.setValueForItem(n);else i=this.getBox(n),i&&i.setValue(t)},beforeDestroy:function(){Ext.destroy(this.panel);this.rendered||Ext.destroy(this.items);Ext.form.CheckboxGroup.superclass.beforeDestroy.call(this)},setValueForItem:function(n){n=String(n).split(",");this.eachItem(function(t){n.indexOf(t.inputValue)>-1&&t.setValue(!0)})},getBox:function(n){var t=null;return this.eachItem(function(i){if(n==i||i.dataIndex==n||i.id==n||i.getName()==n)return t=i,!1}),t},getValue:function(){var n=[];return this.eachItem(function(t){t.checked&&n.push(t)}),n},eachItem:function(n,t){this.items&&this.items.each&&this.items.each(n,t||this)},getRawValue:Ext.emptyFn,setRawValue:Ext.emptyFn});Ext.reg("checkboxgroup",Ext.form.CheckboxGroup);Ext.form.CompositeField=Ext.extend(Ext.form.Field,{defaultMargins:"0 5 0 0",skipLastItemMargin:!0,isComposite:!0,combineErrors:!0,labelConnector:", ",initComponent:function(){for(var r=[],u=this.items,n,f,t=0,i=u.length;t<i;t++)n=u[t],Ext.isEmpty(n.ref)||(n.ref="../"+n.ref),r.push(n.fieldLabel),Ext.applyIf(n,this.defaults),t==i-1&&this.skipLastItemMargin||Ext.applyIf(n,{margins:this.defaultMargins});this.fieldLabel=this.fieldLabel||this.buildLabel(r);this.fieldErrors=new Ext.util.MixedCollection(!0,function(n){return n.field});this.fieldErrors.on({scope:this,add:this.updateInvalidMark,remove:this.updateInvalidMark,replace:this.updateInvalidMark});Ext.form.CompositeField.superclass.initComponent.apply(this,arguments);this.innerCt=new Ext.Container({layout:"hbox",items:this.items,cls:"x-form-composite",defaultMargins:"0 3 0 0",ownerCt:this});delete this.innerCt.ownerCt;f=this.innerCt.findBy(function(n){return n.isFormField},this);this.items=new Ext.util.MixedCollection;this.items.addAll(f)},onRender:function(n){var t,i;this.el||(t=this.innerCt,t.render(n),this.innerCt.ownerCt=this,this.el=t.getEl(),this.combineErrors&&this.eachItem(function(n){Ext.apply(n,{markInvalid:this.onFieldMarkInvalid.createDelegate(this,[n],0),clearInvalid:this.onFieldClearInvalid.createDelegate(this,[n],0)})}),i=this.el.parent().parent().child("label",!0),i&&i.setAttribute("for",this.items.items[0].id));Ext.form.CompositeField.superclass.onRender.apply(this,arguments)},onFieldMarkInvalid:function(n,t){var i=n.getName(),r={field:i,errorName:n.fieldLabel||i,error:t};this.fieldErrors.replace(i,r);n.preventMark||n.el.addClass(n.invalidClass)},onFieldClearInvalid:function(n){this.fieldErrors.removeKey(n.getName());n.el.removeClass(n.invalidClass)},updateInvalidMark:function(){var t=Ext.isIE6&&Ext.isStrict,n;this.fieldErrors.length==0?(this.clearInvalid(),t&&this.clearInvalid.defer(50,this)):(n=this.buildCombinedErrorMessage(this.fieldErrors.items),this.sortErrors(),this.markInvalid(n),t&&this.markInvalid(n))},validateValue:function(n,t){var i=!0;return this.eachItem(function(n){n.isValid(t)||(i=!1)}),i},buildCombinedErrorMessage:function(n){for(var r=[],i,t=0,u=n.length;t<u;t++)i=n[t],r.push(String.format("{0}: {1}",i.errorName,i.error));return r.join("<br />")},sortErrors:function(){var n=this.items;this.fieldErrors.sort("ASC",function(t,i){var r=function(n){return function(t){return t.getName()==n}},u=n.findIndexBy(r(t.field)),f=n.findIndexBy(r(i.field));return u<f?-1:1})},reset:function(){this.eachItem(function(n){n.reset()}),function(){this.clearInvalid()}.defer(50,this)},clearInvalidChildren:function(){this.eachItem(function(n){n.clearInvalid()})},buildLabel:function(n){return Ext.clean(n).join(this.labelConnector)},isDirty:function(){if(this.disabled||!this.rendered)return!1;var n=!1;return this.eachItem(function(t){if(t.isDirty())return n=!0,!1}),n},eachItem:function(n,t){this.items&&this.items.each&&this.items.each(n,t||this)},onResize:function(n,t){var i=this.innerCt;this.rendered&&i.rendered&&i.setSize(n,t);Ext.form.CompositeField.superclass.onResize.apply(this,arguments)},doLayout:function(n,t){if(this.rendered){var i=this.innerCt;i.forceLayout=this.ownerCt.forceLayout;i.doLayout(n,t)}},beforeDestroy:function(){Ext.destroy(this.innerCt);Ext.form.CompositeField.superclass.beforeDestroy.call(this)},setReadOnly:function(n){n==undefined&&(n=!0);n=!!n;this.rendered&&this.eachItem(function(t){t.setReadOnly(n)});this.readOnly=n},onShow:function(){Ext.form.CompositeField.superclass.onShow.call(this);this.doLayout()},onDisable:function(){this.eachItem(function(n){n.disable()})},onEnable:function(){this.eachItem(function(n){n.enable()})}});Ext.reg("compositefield",Ext.form.CompositeField);Ext.form.Radio=Ext.extend(Ext.form.Checkbox,{inputType:"radio",markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,getGroupValue:function(){var t=this.el.up("form")||Ext.getBody(),n=t.child('input[name="'+this.el.dom.name+'"]:checked',!0);return n?n.value:null},setValue:function(n){var t,r,i;return typeof n=="boolean"?Ext.form.Radio.superclass.setValue.call(this,n):this.rendered&&(t=this.getCheckEl(),i=t.child('input[name="'+this.el.dom.name+'"][value="'+n+'"]',!0),i&&Ext.getCmp(i.id).setValue(!0)),this.rendered&&this.checked&&(t=t||this.getCheckEl(),r=this.getCheckEl().select('input[name="'+this.el.dom.name+'"]'),r.each(function(n){n.dom.id!=this.id&&Ext.getCmp(n.dom.id).setValue(!1)},this)),this},getCheckEl:function(){return this.inGroup?this.el.up(".x-form-radio-group"):this.el.up("form")||Ext.getBody()}});Ext.reg("radio",Ext.form.Radio);Ext.form.RadioGroup=Ext.extend(Ext.form.CheckboxGroup,{allowBlank:!0,blankText:"You must select one item in this group",defaultType:"radio",groupCls:"x-form-radio-group",getValue:function(){var n=null;return this.eachItem(function(t){if(t.checked)return n=t,!1}),n},onSetValue:function(n,t){if(arguments.length>1){var i=this.getBox(n);i&&(i.setValue(t),i.checked&&this.eachItem(function(n){n!==i&&n.setValue(!1)}))}else this.setValueForItem(n)},setValueForItem:function(n){n=String(n).split(",")[0];this.eachItem(function(t){t.setValue(n==t.inputValue)})},fireChecked:function(){this.checkTask||(this.checkTask=new Ext.util.DelayedTask(this.bufferChecked,this));this.checkTask.delay(10)},bufferChecked:function(){var n=null;this.eachItem(function(t){if(t.checked)return n=t,!1});this.fireEvent("change",this,n)},onDestroy:function(){this.checkTask&&(this.checkTask.cancel(),this.checkTask=null);Ext.form.RadioGroup.superclass.onDestroy.call(this)}});Ext.reg("radiogroup",Ext.form.RadioGroup);Ext.form.Hidden=Ext.extend(Ext.form.Field,{inputType:"hidden",shouldLayout:!1,onRender:function(){Ext.form.Hidden.superclass.onRender.apply(this,arguments)},initEvents:function(){this.originalValue=this.getValue()},setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.reg("hidden",Ext.form.Hidden);Ext.form.BasicForm=Ext.extend(Ext.util.Observable,{constructor:function(n,t){Ext.apply(this,t);Ext.isString(this.paramOrder)&&(this.paramOrder=this.paramOrder.split(/[\s,|]/));this.items=new Ext.util.MixedCollection(!1,function(n){return n.getItemId()});this.addEvents("beforeaction","actionfailed","actioncomplete");n&&this.initEl(n);Ext.form.BasicForm.superclass.constructor.call(this)},timeout:30,paramOrder:undefined,paramsAsHash:!1,waitTitle:"Please Wait...",activeAction:null,trackResetOnLoad:!1,initEl:function(n){if(this.el=Ext.get(n),this.id=this.el.id||Ext.id(),!this.standardSubmit)this.el.on("submit",this.onSubmit,this);this.el.addClass("x-form")},getEl:function(){return this.el},onSubmit:function(n){n.stopEvent()},destroy:function(n){n!==!0&&(this.items.each(function(n){Ext.destroy(n)}),Ext.destroy(this.el));this.items.clear();this.purgeListeners()},isValid:function(){var n=!0;return this.items.each(function(t){t.validate()||(n=!1)}),n},isDirty:function(){var n=!1;return this.items.each(function(t){if(t.isDirty())return n=!0,!1}),n},doAction:function(n,t){return Ext.isString(n)&&(n=new Ext.form.Action.ACTION_TYPES[n](this,t)),this.fireEvent("beforeaction",this,n)!==!1&&(this.beforeAction(n),n.run.defer(100,n)),this},submit:function(n){var i,t,r;return(n=n||{},this.standardSubmit)?(i=n.clientValidation===!1||this.isValid(),i&&(t=this.el.dom,this.url&&Ext.isEmpty(t.action)&&(t.action=this.url),t.submit()),i):(r=String.format("{0}submit",this.api?"direct":""),this.doAction(r,n),this)},load:function(n){var t=String.format("{0}load",this.api?"direct":"");return this.doAction(t,n),this},updateRecord:function(n){n.beginEdit();var r=n.fields,i,t;return r.each(function(r){i=this.findField(r.name);i&&(t=i.getValue(),Ext.type(t)!==!1&&t.getGroupValue?t=t.getGroupValue():i.eachItem&&(t=[],i.eachItem(function(n){t.push(n.getValue())})),n.set(r.name,t))},this),n.endEdit(),this},loadRecord:function(n){return this.setValues(n.data),this},beforeAction:function(n){this.items.each(function(n){n.isFormField&&n.syncValue&&n.syncValue()});var t=n.options;t.waitMsg&&(this.waitMsgTarget===!0?this.el.mask(t.waitMsg,"x-mask-loading"):this.waitMsgTarget?(this.waitMsgTarget=Ext.get(this.waitMsgTarget),this.waitMsgTarget.mask(t.waitMsg,"x-mask-loading")):Ext.MessageBox.wait(t.waitMsg,t.waitTitle||this.waitTitle))},afterAction:function(n,t){this.activeAction=null;var i=n.options;i.waitMsg&&(this.waitMsgTarget===!0?this.el.unmask():this.waitMsgTarget?this.waitMsgTarget.unmask():(Ext.MessageBox.updateProgress(1),Ext.MessageBox.hide()));t?(i.reset&&this.reset(),Ext.callback(i.success,i.scope,[this,n]),this.fireEvent("actioncomplete",this,n)):(Ext.callback(i.failure,i.scope,[this,n]),this.fireEvent("actionfailed",this,n))},findField:function(n){var i=this.items.get(n),t;return Ext.isObject(i)||(t=function(r){if(r.isFormField){if(r.dataIndex==n||r.id==n||r.getName()==n)return i=r,!1;if(r.isComposite)return r.items.each(t);if(r instanceof Ext.form.CheckboxGroup&&r.rendered)return r.eachItem(t)}},this.items.each(t)),i||null},markInvalid:function(n){var t,f,r,u,e,i;if(Ext.isArray(n))for(t=0,f=n.length;t<f;t++)r=n[t],u=this.findField(r.id),u&&u.markInvalid(r.msg);else for(i in n)!Ext.isFunction(n[i])&&(e=this.findField(i))&&e.markInvalid(n[i]);return this},setValues:function(n){var i,e,f,t,r,u;if(Ext.isArray(n))for(i=0,e=n.length;i<e;i++)f=n[i],t=this.findField(f.id),t&&(t.setValue(f.value),this.trackResetOnLoad&&(t.originalValue=t.getValue()));else for(u in n)!Ext.isFunction(n[u])&&(r=this.findField(u))&&(r.setValue(n[u]),this.trackResetOnLoad&&(r.originalValue=r.getValue()));return this},getValues:function(n){var t=Ext.lib.Ajax.serializeForm(this.el.dom);return n===!0?t:Ext.urlDecode(t)},getFieldValues:function(n){var t={},i,r,u;return this.items.each(function(f){!f.disabled&&(n!==!0||f.isDirty())&&(i=f.getName(),r=t[i],u=f.getValue(),Ext.isDefined(r)?Ext.isArray(r)?t[i].push(u):t[i]=[r,u]:t[i]=u)}),t},clearInvalid:function(){return this.items.each(function(n){n.clearInvalid()}),this},reset:function(){return this.items.each(function(n){n.reset()}),this},add:function(){return this.items.addAll(Array.prototype.slice.call(arguments,0)),this},remove:function(n){return this.items.remove(n),this},cleanDestroyed:function(){this.items.filterBy(function(n){return!!n.isDestroyed}).each(this.remove,this)},render:function(){return this.items.each(function(n){n.isFormField&&!n.rendered&&document.getElementById(n.id)&&n.applyToMarkup(n.id)}),this},applyToFields:function(n){return this.items.each(function(t){Ext.apply(t,n)}),this},applyIfToFields:function(n){return this.items.each(function(t){Ext.applyIf(t,n)}),this},callFieldMethod:function(n,t){return t=t||[],this.items.each(function(i){Ext.isFunction(i[n])&&i[n].apply(i,t)}),this}});Ext.BasicForm=Ext.form.BasicForm;Ext.FormPanel=Ext.extend(Ext.Panel,{minButtonWidth:75,labelAlign:"left",monitorValid:!1,monitorPoll:200,layout:"form",initComponent:function(){this.form=this.createForm();Ext.FormPanel.superclass.initComponent.call(this);this.bodyCfg={tag:"form",cls:this.baseCls+"-body",method:this.method||"POST",id:this.formId||Ext.id()};this.fileUpload&&(this.bodyCfg.enctype="multipart/form-data");this.initItems();this.addEvents("clientvalidation");this.relayEvents(this.form,["beforeaction","actionfailed","actioncomplete"])},createForm:function(){var n=Ext.applyIf({listeners:{}},this.initialConfig);return new Ext.form.BasicForm(null,n)},initFields:function(){var i=this.form,n=this,t=function(r){n.isField(r)?i.add(r):r.findBy&&r!=n&&(n.applySettings(r),r.items&&r.items.each&&r.items.each(t,this))};this.items.each(t,this)},applySettings:function(n){var t=n.ownerCt;Ext.applyIf(n,{labelAlign:t.labelAlign,labelWidth:t.labelWidth,itemCls:t.itemCls})},getLayoutTarget:function(){return this.form.el},getForm:function(){return this.form},onRender:function(n,t){this.initFields();Ext.FormPanel.superclass.onRender.call(this,n,t);this.form.initEl(this.body)},beforeDestroy:function(){this.stopMonitoring();this.form.destroy(!0);Ext.FormPanel.superclass.beforeDestroy.call(this)},isField:function(n){return!!n.setValue&&!!n.getValue&&!!n.markInvalid&&!!n.clearInvalid},initEvents:function(){Ext.FormPanel.superclass.initEvents.call(this);this.on({scope:this,add:this.onAddEvent,remove:this.onRemoveEvent});this.monitorValid&&this.startMonitoring()},onAdd:function(n){Ext.FormPanel.superclass.onAdd.call(this,n);this.processAdd(n)},onAddEvent:function(n,t){n!==this&&this.processAdd(t)},processAdd:function(n){this.isField(n)?this.form.add(n):n.findBy&&(this.applySettings(n),this.form.add.apply(this.form,n.findBy(this.isField)))},onRemove:function(n){Ext.FormPanel.superclass.onRemove.call(this,n);this.processRemove(n)},onRemoveEvent:function(n,t){n!==this&&this.processRemove(t)},processRemove:function(n){this.destroying||(this.isField(n)?this.form.remove(n):n.findBy&&(Ext.each(n.findBy(this.isField),this.form.remove,this.form),this.form.cleanDestroyed()))},startMonitoring:function(){this.validTask||(this.validTask=new Ext.util.TaskRunner,this.validTask.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this}))},stopMonitoring:function(){this.validTask&&(this.validTask.stopAll(),this.validTask=null)},load:function(){this.form.load.apply(this.form,arguments)},onDisable:function(){Ext.FormPanel.superclass.onDisable.call(this);this.form&&this.form.items.each(function(){this.disable()})},onEnable:function(){Ext.FormPanel.superclass.onEnable.call(this);this.form&&this.form.items.each(function(){this.enable()})},bindHandler:function(){var n=!0,r,t,u,i;if(this.form.items.each(function(t){if(!t.isValid(!0))return n=!1,!1}),this.fbar)for(r=this.fbar.items.items,t=0,u=r.length;t<u;t++)i=r[t],i.formBind===!0&&i.disabled===n&&i.setDisabled(!n);this.fireEvent("clientvalidation",this,n)}});Ext.reg("form",Ext.FormPanel);Ext.form.FormPanel=Ext.FormPanel;Ext.form.FieldSet=Ext.extend(Ext.Panel,{baseCls:"x-fieldset",layout:"form",animCollapse:!1,onRender:function(n,t){if(this.el||(this.el=document.createElement("fieldset"),this.el.id=this.id,(this.title||this.header||this.checkboxToggle)&&(this.el.appendChild(document.createElement("legend")).className=this.baseCls+"-header")),Ext.form.FieldSet.superclass.onRender.call(this,n,t),this.checkboxToggle){var i=typeof this.checkboxToggle=="object"?this.checkboxToggle:{tag:"input",type:"checkbox",name:this.checkboxName||this.id+"-checkbox"};this.checkbox=this.header.insertFirst(i);this.checkbox.dom.checked=!this.collapsed;this.mon(this.checkbox,"click",this.onCheckClick,this)}},onCollapse:function(n,t){this.checkbox&&(this.checkbox.dom.checked=!1);Ext.form.FieldSet.superclass.onCollapse.call(this,n,t)},onExpand:function(n,t){this.checkbox&&(this.checkbox.dom.checked=!0);Ext.form.FieldSet.superclass.onExpand.call(this,n,t)},onCheckClick:function(){this[this.checkbox.dom.checked?"expand":"collapse"]()}});Ext.reg("fieldset",Ext.form.FieldSet);Ext.form.HtmlEditor=Ext.extend(Ext.form.Field,{enableFormat:!0,enableFontSize:!0,enableColors:!0,enableAlignments:!0,enableLists:!0,enableSourceEdit:!0,enableLinks:!0,enableFont:!0,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",defaultValue:Ext.isOpera||Ext.isIE6?"&#160;":"&#8203;",actionMode:"wrap",validationEvent:!1,deferHeight:!0,initialized:!1,activated:!1,sourceEditMode:!1,onFocus:Ext.emptyFn,iframePad:3,hideMode:"offsets",defaultAutoCreate:{tag:"textarea",style:"width:500px;height:300px;",autocomplete:"off"},initComponent:function(){this.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange");Ext.form.HtmlEditor.superclass.initComponent.call(this)},createFontOptions:function(){for(var r=[],u=this.fontFamilies,n,i,t=0,f=u.length;t<f;t++)n=u[t],i=n.toLowerCase(),r.push('<option value="',i,'" style="font-family:',n,';"',this.defaultFont==i?' selected="true">':">",n,"<\/option>");return r.join("")},createToolbar:function(n){function t(t,i,r){return{itemId:t,cls:"x-btn-icon",iconCls:"x-edit-"+t,enableToggle:i!==!1,scope:n,handler:r||n.relayBtnCmd,clickEvent:"mousedown",tooltip:u?n.buttonTips[t]||undefined:undefined,overflowText:n.buttonTips[t].title||undefined,tabIndex:-1}}var i=[],u=Ext.QuickTips&&Ext.QuickTips.isEnabled(),r,f;this.enableFont&&!Ext.isSafari2&&(r=new Ext.Toolbar.Item({autoEl:{tag:"select",cls:"x-font-select",html:this.createFontOptions()}}),i.push(r,"-"));this.enableFormat&&i.push(t("bold"),t("italic"),t("underline"));this.enableFontSize&&i.push("-",t("increasefontsize",!1,this.adjustFont),t("decreasefontsize",!1,this.adjustFont));this.enableColors&&i.push("-",{itemId:"forecolor",cls:"x-btn-icon",iconCls:"x-edit-forecolor",clickEvent:"mousedown",tooltip:u?n.buttonTips.forecolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({allowReselect:!0,focus:Ext.emptyFn,value:"000000",plain:!0,listeners:{scope:this,select:function(n,t){this.execCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+t:t);this.deferFocus()}},clickEvent:"mousedown"})},{itemId:"backcolor",cls:"x-btn-icon",iconCls:"x-edit-backcolor",clickEvent:"mousedown",tooltip:u?n.buttonTips.backcolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({focus:Ext.emptyFn,value:"FFFFFF",plain:!0,allowReselect:!0,listeners:{scope:this,select:function(n,t){Ext.isGecko?(this.execCmd("useCSS",!1),this.execCmd("hilitecolor",t),this.execCmd("useCSS",!0),this.deferFocus()):(this.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE?"#"+t:t),this.deferFocus())}},clickEvent:"mousedown"})});this.enableAlignments&&i.push("-",t("justifyleft"),t("justifycenter"),t("justifyright"));Ext.isSafari2||(this.enableLinks&&i.push("-",t("createlink",!1,this.createLink)),this.enableLists&&i.push("-",t("insertorderedlist"),t("insertunorderedlist")),this.enableSourceEdit&&i.push("-",t("sourceedit",!0,function(){this.toggleSourceEdit(!this.sourceEditMode)})));f=new Ext.Toolbar({renderTo:this.wrap.dom.firstChild,items:i});r&&(this.fontSelect=r.el,this.mon(this.fontSelect,"change",function(){var n=this.fontSelect.dom.value;this.relayCmd("fontname",n);this.deferFocus()},this));this.mon(f.el,"click",function(n){n.preventDefault()});this.tb=f;this.tb.doLayout()},onDisable:function(){this.wrap.mask();Ext.form.HtmlEditor.superclass.onDisable.call(this)},onEnable:function(){this.wrap.unmask();Ext.form.HtmlEditor.superclass.onEnable.call(this)},setReadOnly:function(n){if(Ext.form.HtmlEditor.superclass.setReadOnly.call(this,n),this.initialized){Ext.isIE?this.getEditorBody().contentEditable=!n:this.setDesignMode(!n);var t=this.getEditorBody();t&&(t.style.cursor=this.readOnly?"default":"text");this.disableItems(n)}},getDocMarkup:function(){var n=Ext.fly(this.iframe).getHeight()-this.iframePad*2;return String.format('<html><head><style type="text/css">body{border: 0; margin: 0; padding: {0}px; height: {1}px; cursor: text}<\/style><\/head><body><\/body><\/html>',this.iframePad,n)},getEditorBody:function(){var n=this.getDoc();return n.body||n.documentElement},getDoc:function(){return Ext.isIE?this.getWin().document:this.iframe.contentDocument||this.getWin().document},getWin:function(){return Ext.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},onRender:function(n,t){if(Ext.form.HtmlEditor.superclass.onRender.call(this,n,t),this.el.dom.style.border="0 none",this.el.dom.setAttribute("tabIndex",-1),this.el.addClass("x-hidden"),Ext.isIE&&this.el.applyStyles("margin-top:-1px;margin-bottom:-1px;"),this.wrap=this.el.wrap({cls:"x-html-editor-wrap",cn:{cls:"x-html-editor-tb"}}),this.createToolbar(this),this.disableItems(!0),this.tb.doLayout(),this.createIFrame(),!this.width){var i=this.el.getSize();this.setSize(i.width,this.height||i.height)}this.resizeEl=this.positionEl=this.wrap},createIFrame:function(){var n=document.createElement("iframe");n.name=Ext.id();n.frameBorder="0";n.style.overflow="auto";n.src=Ext.SSL_SECURE_URL;this.wrap.dom.appendChild(n);this.iframe=n;this.monitorTask=Ext.TaskMgr.start({run:this.checkDesignMode,scope:this,interval:100})},initFrame:function(){Ext.TaskMgr.stop(this.monitorTask);var n=this.getDoc();this.win=this.getWin();n.open();n.write(this.getDocMarkup());n.close();this.readyTask={run:function(){var n=this.getDoc();(n.body||n.readyState=="complete")&&(Ext.TaskMgr.stop(this.readyTask),this.setDesignMode(!0),this.initEditor.defer(10,this))},interval:10,duration:1e4,scope:this};Ext.TaskMgr.start(this.readyTask)},checkDesignMode:function(){if(this.wrap&&this.wrap.dom.offsetWidth){var n=this.getDoc();if(!n)return;n.editorInitialized&&this.getDesignMode()=="on"||this.initFrame()}},setDesignMode:function(n){var t=this.getDoc();t&&(this.readOnly&&(n=!1),t.designMode=/on|true/i.test(String(n).toLowerCase())?"on":"off")},getDesignMode:function(){var n=this.getDoc();return n?String(n.designMode).toLowerCase():""},disableItems:function(n){this.fontSelect&&(this.fontSelect.dom.disabled=n);this.tb.items.each(function(t){t.getItemId()!="sourceedit"&&t.setDisabled(n)})},onResize:function(n,t){var i,r,u;Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments);this.el&&this.iframe&&(Ext.isNumber(n)&&(i=n-this.wrap.getFrameWidth("lr"),this.el.setWidth(i),this.tb.setWidth(i),this.iframe.style.width=Math.max(i,0)+"px"),Ext.isNumber(t)&&(r=t-this.wrap.getFrameWidth("tb")-this.tb.el.getHeight(),this.el.setHeight(r),this.iframe.style.height=Math.max(r,0)+"px",u=this.getEditorBody(),u&&(u.style.height=Math.max(r-this.iframePad*2,0)+"px")))},toggleSourceEdit:function(n){var i,r,t;(n===undefined&&(n=!this.sourceEditMode),this.sourceEditMode=n===!0,t=this.tb.getComponent("sourceedit"),t.pressed===this.sourceEditMode||(t.toggle(this.sourceEditMode),t.xtbHidden))&&(this.sourceEditMode?(this.previousSize=this.getSize(),i=Ext.get(this.iframe).getHeight(),this.disableItems(!0),this.syncValue(),this.iframe.className="x-hidden",this.el.removeClass("x-hidden"),this.el.dom.removeAttribute("tabIndex"),this.el.focus(),this.el.dom.style.height=i+"px"):(r=parseInt(this.el.dom.style.height,10),this.initialized&&this.disableItems(this.readOnly),this.pushValue(),this.iframe.className="",this.el.addClass("x-hidden"),this.el.dom.setAttribute("tabIndex",-1),this.deferFocus(),this.setSize(this.previousSize),delete this.previousSize,this.iframe.style.height=r+"px"),this.fireEvent("editmodechange",this,this.sourceEditMode))},createLink:function(){var n=prompt(this.createLinkText,this.defaultLinkValue);n&&n!="http://"&&this.relayCmd("createlink",n)},initEvents:function(){this.originalValue=this.getValue()},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,setValue:function(n){return Ext.form.HtmlEditor.superclass.setValue.call(this,n),this.pushValue(),this},cleanHtml:function(n){return n=String(n),Ext.isWebKit&&(n=n.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"")),n.charCodeAt(0)==this.defaultValue.replace(/\D/g,"")&&(n=n.substring(1)),n},syncValue:function(){var i,n,r,t;this.initialized&&(i=this.getEditorBody(),n=i.innerHTML,Ext.isWebKit&&(r=i.getAttribute("style"),t=r.match(/text-align:(.*?);/i),t&&t[1]&&(n='<div style="'+t[0]+'">'+n+"<\/div>")),n=this.cleanHtml(n),this.fireEvent("beforesync",this,n)!==!1&&(this.el.dom.value=n,this.fireEvent("sync",this,n)))},getValue:function(){return this[this.sourceEditMode?"pushValue":"syncValue"](),Ext.form.HtmlEditor.superclass.getValue.call(this)},pushValue:function(){if(this.initialized){var n=this.el.dom.value;!this.activated&&n.length<1&&(n=this.defaultValue);this.fireEvent("beforepush",this,n)!==!1&&(this.getEditorBody().innerHTML=n,Ext.isGecko&&(this.setDesignMode(!1),this.setDesignMode(!0)),this.fireEvent("push",this,n))}},deferFocus:function(){this.focus.defer(10,this)},focus:function(){this.win&&!this.sourceEditMode?this.win.focus():this.el.focus()},initEditor:function(){try{var i=this.getEditorBody(),r=this.el.getStyles("font-size","font-family","background-image","background-repeat","background-color","color"),n,t;if(r["background-attachment"]="fixed",i.bgProperties="fixed",Ext.DomHelper.applyStyles(i,r),n=this.getDoc(),n)try{Ext.EventManager.removeAll(n)}catch(u){}t=this.onEditorEvent.createDelegate(this);Ext.EventManager.on(n,{mousedown:t,dblclick:t,click:t,keyup:t,buffer:100});if(Ext.isGecko)Ext.EventManager.on(n,"keypress",this.applyCommand,this);if(Ext.isIE||Ext.isWebKit||Ext.isOpera)Ext.EventManager.on(n,"keydown",this.fixKeys,this);n.editorInitialized=!0;this.initialized=!0;this.pushValue();this.setReadOnly(this.readOnly);this.fireEvent("initialize",this)}catch(u){}},beforeDestroy:function(){var n,t;if(this.monitorTask&&Ext.TaskMgr.stop(this.monitorTask),this.readyTask&&Ext.TaskMgr.stop(this.readyTask),this.rendered){if(Ext.destroy(this.tb),n=this.getDoc(),Ext.EventManager.removeFromSpecialCache(n),n)try{Ext.EventManager.removeAll(n);for(t in n)delete n[t]}catch(i){}this.wrap&&(this.wrap.dom.innerHTML="",this.wrap.remove())}Ext.form.HtmlEditor.superclass.beforeDestroy.call(this)},onFirstFocus:function(){var n,t;if(this.activated=!0,this.disableItems(this.readOnly),Ext.isGecko){this.win.focus();n=this.win.getSelection();n.focusNode&&n.focusNode.nodeType==3||(t=n.getRangeAt(0),t.selectNodeContents(this.getEditorBody()),t.collapse(!0),this.deferFocus());try{this.execCmd("useCSS",!0);this.execCmd("styleWithCSS",!1)}catch(i){}}this.fireEvent("activate",this)},adjustFont:function(n){var i=n.getItemId()=="increasefontsize"?1:-1,r=this.getDoc(),t=parseInt(r.queryCommandValue("FontSize")||2,10);Ext.isSafari&&!Ext.isSafari2||Ext.isChrome||Ext.isAir?(t=t<=10?1+i:t<=13?2+i:t<=16?3+i:t<=18?4+i:t<=24?5+i:6+i,t=t.constrain(1,6)):(Ext.isSafari&&(i*=2),t=Math.max(1,t+i)+(Ext.isSafari?"px":0));this.execCmd("FontSize",t)},onEditorEvent:function(){this.updateToolbar()},updateToolbar:function(){var t,n,i;if(!this.readOnly){if(!this.activated){this.onFirstFocus();return}t=this.tb.items.map;n=this.getDoc();this.enableFont&&!Ext.isSafari2&&(i=(n.queryCommandValue("FontName")||this.defaultFont).toLowerCase(),i!=this.fontSelect.dom.value&&(this.fontSelect.dom.value=i));this.enableFormat&&(t.bold.toggle(n.queryCommandState("bold")),t.italic.toggle(n.queryCommandState("italic")),t.underline.toggle(n.queryCommandState("underline")));this.enableAlignments&&(t.justifyleft.toggle(n.queryCommandState("justifyleft")),t.justifycenter.toggle(n.queryCommandState("justifycenter")),t.justifyright.toggle(n.queryCommandState("justifyright")));!Ext.isSafari2&&this.enableLists&&(t.insertorderedlist.toggle(n.queryCommandState("insertorderedlist")),t.insertunorderedlist.toggle(n.queryCommandState("insertunorderedlist")));Ext.menu.MenuMgr.hideAll();this.syncValue()}},relayBtnCmd:function(n){this.relayCmd(n.getItemId())},relayCmd:function(n,t){(function(){this.focus();this.execCmd(n,t);this.updateToolbar()}).defer(10,this)},execCmd:function(n,t){var i=this.getDoc();i.execCommand(n,!1,t===undefined?null:t);this.syncValue()},applyCommand:function(n){if(n.ctrlKey){var i=n.getCharCode(),t;if(i>0){i=String.fromCharCode(i);switch(i){case"b":t="bold";break;case"i":t="italic";break;case"u":t="underline"}t&&(this.win.focus(),this.execCmd(t),this.deferFocus(),n.preventDefault())}}},insertAtCursor:function(n){if(this.activated)if(Ext.isIE){this.win.focus();var i=this.getDoc(),t=i.selection.createRange();t&&(t.pasteHTML(n),this.syncValue(),this.deferFocus())}else this.win.focus(),this.execCmd("InsertHTML",n),this.deferFocus()},fixKeys:function(){return Ext.isIE?function(n){var r=n.getKey(),u=this.getDoc(),t,i;r==n.TAB?(n.stopEvent(),t=u.selection.createRange(),t&&(t.collapse(!0),t.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;"),this.deferFocus())):r==n.ENTER&&(t=u.selection.createRange(),t&&(i=t.parentElement(),i&&i.tagName.toLowerCase()=="li"||(n.stopEvent(),t.pasteHTML("<br />"),t.collapse(!1),t.select())))}:Ext.isOpera?function(n){var t=n.getKey();t==n.TAB&&(n.stopEvent(),this.win.focus(),this.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;"),this.deferFocus())}:Ext.isWebKit?function(n){var t=n.getKey();t==n.TAB?(n.stopEvent(),this.execCmd("InsertText","\t"),this.deferFocus()):t==n.ENTER&&(n.stopEvent(),this.execCmd("InsertHtml","<br /><br />"),this.deferFocus())}:void 0}(),getToolbar:function(){return this.tb},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}}});Ext.reg("htmleditor",Ext.form.HtmlEditor);Ext.form.TimeField=Ext.extend(Ext.form.ComboBox,{minValue:undefined,maxValue:undefined,minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,mode:"local",triggerAction:"all",typeAhead:!1,initDate:"1/1/2008",initDateFormat:"j/n/Y",initComponent:function(){Ext.isDefined(this.minValue)&&this.setMinValue(this.minValue,!0);Ext.isDefined(this.maxValue)&&this.setMaxValue(this.maxValue,!0);this.store||this.generateStore(!0);Ext.form.TimeField.superclass.initComponent.call(this)},setMinValue:function(n,t){return this.setLimit(n,!0,t),this},setMaxValue:function(n,t){return this.setLimit(n,!1,t),this},generateStore:function(n){for(var t=this.minValue||new Date(this.initDate).clearTime(),r=this.maxValue||new Date(this.initDate).clearTime().add("mi",1439),i=[];t<=r;)i.push(t.dateFormat(this.format)),t=t.add("mi",this.increment);this.bindStore(i,n)},setLimit:function(n,t,i){var r,u;Ext.isString(n)?r=this.parseDate(n):Ext.isDate(n)&&(r=n);r&&(u=new Date(this.initDate).clearTime(),u.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),this[t?"minValue":"maxValue"]=u,i||this.generateStore())},getValue:function(){var n=Ext.form.TimeField.superclass.getValue.call(this);return this.formatDate(this.parseDate(n))||""},setValue:function(n){return Ext.form.TimeField.superclass.setValue.call(this,this.formatDate(this.parseDate(n)))},validateValue:Ext.form.DateField.prototype.validateValue,formatDate:Ext.form.DateField.prototype.formatDate,parseDate:function(n){if(!n||Ext.isDate(n))return n;var r=this.initDate+" ",u=this.initDateFormat+" ",t=Date.parseDate(r+n,u+this.format),f=this.altFormats;if(!t&&f){this.altFormatsArray||(this.altFormatsArray=f.split("|"));for(var i=0,e=this.altFormatsArray,o=e.length;i<o&&!t;i++)t=Date.parseDate(r+n,u+e[i])}return t}});Ext.reg("timefield",Ext.form.TimeField);Ext.form.SliderField=Ext.extend(Ext.form.Field,{useTips:!0,tipText:null,actionMode:"wrap",initComponent:function(){var n=Ext.copyTo({id:this.id+"-slider"},this.initialConfig,["vertical","minValue","maxValue","decimalPrecision","keyIncrement","increment","clickToChange","animate"]),t;this.useTips&&(t=this.tipText?{getText:this.tipText}:{},n.plugins=[new Ext.slider.Tip(t)]);this.slider=new Ext.Slider(n);Ext.form.SliderField.superclass.initComponent.call(this)},onRender:function(n,t){this.autoCreate={id:this.id,name:this.name,type:"hidden",tag:"input"};Ext.form.SliderField.superclass.onRender.call(this,n,t);this.wrap=this.el.wrap({cls:"x-form-field-wrap"});this.resizeEl=this.positionEl=this.wrap;this.slider.render(this.wrap)},onResize:function(n,t,i,r){Ext.form.SliderField.superclass.onResize.call(this,n,t,i,r);this.slider.setSize(n,t)},initEvents:function(){Ext.form.SliderField.superclass.initEvents.call(this);this.slider.on("change",this.onChange,this)},onChange:function(n,t){this.setValue(t,undefined,!0)},onEnable:function(){Ext.form.SliderField.superclass.onEnable.call(this);this.slider.enable()},onDisable:function(){Ext.form.SliderField.superclass.onDisable.call(this);this.slider.disable()},beforeDestroy:function(){Ext.destroy(this.slider);Ext.form.SliderField.superclass.beforeDestroy.call(this)},alignErrorIcon:function(){this.errorIcon.alignTo(this.slider.el,"tl-tr",[2,0])},setMinValue:function(n){return this.slider.setMinValue(n),this},setMaxValue:function(n){return this.slider.setMaxValue(n),this},setValue:function(n,t,i){return i||this.slider.setValue(n,t),Ext.form.SliderField.superclass.setValue.call(this,this.slider.getValue())},getValue:function(){return this.slider.getValue()}});Ext.reg("sliderfield",Ext.form.SliderField);Ext.form.Label=Ext.extend(Ext.BoxComponent,{onRender:function(n,t){this.el||(this.el=document.createElement("label"),this.el.id=this.getId(),this.el.innerHTML=this.text?Ext.util.Format.htmlEncode(this.text):this.html||"",this.forId&&this.el.setAttribute("for",this.forId));Ext.form.Label.superclass.onRender.call(this,n,t)},setText:function(n,t){var i=t===!1;return this[i?"html":"text"]=n,delete this[i?"text":"html"],this.rendered&&(this.el.dom.innerHTML=t!==!1?Ext.util.Format.htmlEncode(n):n),this}});Ext.reg("label",Ext.form.Label);Ext.form.Action=function(n,t){this.form=n;this.options=t||{}};Ext.form.Action.CLIENT_INVALID="client";Ext.form.Action.SERVER_INVALID="server";Ext.form.Action.CONNECT_FAILURE="connect";Ext.form.Action.LOAD_FAILURE="load";Ext.form.Action.prototype={type:"default",run:function(){},success:function(){},handleResponse:function(){},failure:function(n){this.response=n;this.failureType=Ext.form.Action.CONNECT_FAILURE;this.form.afterAction(this,!1)},processResponse:function(n){return(this.response=n,!n.responseText&&!n.responseXML)?!0:(this.result=this.handleResponse(n),this.result)},decodeResponse:function(n){try{return Ext.decode(n.responseText)}catch(t){return!1}},getUrl:function(n){var t=this.options.url||this.form.url||this.form.el.dom.action,i;return n&&(i=this.getParams(),i&&(t=Ext.urlAppend(t,i))),t},getMethod:function(){return(this.options.method||this.form.method||this.form.el.dom.method||"POST").toUpperCase()},getParams:function(){var t=this.form.baseParams,n=this.options.params;return n?typeof n=="object"?n=Ext.urlEncode(Ext.applyIf(n,t)):typeof n=="string"&&t&&(n+="&"+Ext.urlEncode(t)):t&&(n=Ext.urlEncode(t)),n},createCallback:function(n){var n=n||{};return{success:this.success,failure:this.failure,scope:this,timeout:n.timeout*1e3||this.form.timeout*1e3,upload:this.form.fileUpload?this.success:undefined}}};Ext.form.Action.Submit=function(n,t){Ext.form.Action.Submit.superclass.constructor.call(this,n,t)};Ext.extend(Ext.form.Action.Submit,Ext.form.Action,{type:"submit",run:function(){var n=this.options,t=this.getMethod(),i=t=="GET";if(n.clientValidation===!1||this.form.isValid()){if(n.submitEmptyText===!1){var f=this.form.items,r=[],u=function(n){n.el.getValue()==n.emptyText&&(r.push(n),n.el.dom.value="");n.isComposite&&n.rendered&&n.items.each(u)};f.each(u)}Ext.Ajax.request(Ext.apply(this.createCallback(n),{form:this.form.el.dom,url:this.getUrl(i),method:t,headers:n.headers,params:i?null:this.getParams(),isUpload:this.form.fileUpload}));n.submitEmptyText===!1&&Ext.each(r,function(n){n.applyEmptyText&&n.applyEmptyText()})}else n.clientValidation!==!1&&(this.failureType=Ext.form.Action.CLIENT_INVALID,this.form.afterAction(this,!1))},success:function(n){var t=this.processResponse(n);if(t===!0||t.success){this.form.afterAction(this,!0);return}t.errors&&this.form.markInvalid(t.errors);this.failureType=Ext.form.Action.SERVER_INVALID;this.form.afterAction(this,!1)},handleResponse:function(n){var t,i,r,u,f;if(this.form.errorReader){if(t=this.form.errorReader.read(n),i=[],t.records)for(r=0,u=t.records.length;r<u;r++)f=t.records[r],i[r]=f.data;return i.length<1&&(i=null),{success:t.success,errors:i}}return this.decodeResponse(n)}});Ext.form.Action.Load=function(n,t){Ext.form.Action.Load.superclass.constructor.call(this,n,t);this.reader=this.form.reader};Ext.extend(Ext.form.Action.Load,Ext.form.Action,{type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(this.options),{method:this.getMethod(),url:this.getUrl(!1),headers:this.options.headers,params:this.getParams()}))},success:function(n){var t=this.processResponse(n);if(t===!0||!t.success||!t.data){this.failureType=Ext.form.Action.LOAD_FAILURE;this.form.afterAction(this,!1);return}this.form.clearInvalid();this.form.setValues(t.data);this.form.afterAction(this,!0)},handleResponse:function(n){if(this.form.reader){var t=this.form.reader.read(n),i=t.records&&t.records[0]?t.records[0].data:null;return{success:t.success,data:i}}return this.decodeResponse(n)}});Ext.form.Action.DirectLoad=Ext.extend(Ext.form.Action.Load,{constructor:function(n,t){Ext.form.Action.DirectLoad.superclass.constructor.call(this,n,t)},type:"directload",run:function(){var n=this.getParams();n.push(this.success,this);this.form.api.load.apply(window,n)},getParams:function(){var i=[],r={},f=this.form.baseParams,e=this.options.params,n,t,u;if(Ext.apply(r,e,f),n=this.form.paramOrder,n)for(t=0,u=n.length;t<u;t++)i.push(r[n[t]]);else this.form.paramsAsHash&&i.push(r);return i},processResponse:function(n){return this.result=n,n},success:function(n,t){t.type==Ext.Direct.exceptions.SERVER&&(n={});Ext.form.Action.DirectLoad.superclass.success.call(this,n)}});Ext.form.Action.DirectSubmit=Ext.extend(Ext.form.Action.Submit,{constructor:function(n,t){Ext.form.Action.DirectSubmit.superclass.constructor.call(this,n,t)},type:"directsubmit",run:function(){var n=this.options;n.clientValidation===!1||this.form.isValid()?(this.success.params=this.getParams(),this.form.api.submit(this.form.el.dom,this.success,this)):n.clientValidation!==!1&&(this.failureType=Ext.form.Action.CLIENT_INVALID,this.form.afterAction(this,!1))},getParams:function(){var n={},t=this.form.baseParams,i=this.options.params;return Ext.apply(n,i,t),n},processResponse:function(n){return this.result=n,n},success:function(n,t){t.type==Ext.Direct.exceptions.SERVER&&(n={});Ext.form.Action.DirectSubmit.superclass.success.call(this,n)}});Ext.form.Action.ACTION_TYPES={load:Ext.form.Action.Load,submit:Ext.form.Action.Submit,directload:Ext.form.Action.DirectLoad,directsubmit:Ext.form.Action.DirectSubmit};Ext.form.VTypes=function(){var n=/^[a-zA-Z_]+$/,t=/^[a-zA-Z0-9_]+$/,i=/^(\w+)([\-+.\'][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,r=/(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{email:function(n){return i.test(n)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[a-z0-9_\.\-\+\'@]/i,url:function(n){return r.test(n)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(t){return n.test(t)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(n){return t.test(n)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}();Ext.grid.GridPanel=Ext.extend(Ext.Panel,{autoExpandColumn:!1,autoExpandMax:1e3,autoExpandMin:50,columnLines:!1,ddText:"{0} selected row{1}",deferRowRender:!0,enableColumnHide:!0,enableColumnMove:!0,enableDragDrop:!1,enableHdMenu:!0,loadMask:!1,minColumnWidth:25,stripeRows:!1,trackMouseOver:!0,stateEvents:["columnmove","columnresize","sortchange","groupchange"],view:null,bubbleEvents:[],rendered:!1,viewReady:!1,initComponent:function(){Ext.grid.GridPanel.superclass.initComponent.call(this);this.columnLines&&(this.cls=(this.cls||"")+" x-grid-with-col-lines");this.autoScroll=!1;this.autoWidth=!1;Ext.isArray(this.columns)&&(this.colModel=new Ext.grid.ColumnModel(this.columns),delete this.columns);this.ds&&(this.store=this.ds,delete this.ds);this.cm&&(this.colModel=this.cm,delete this.cm);this.sm&&(this.selModel=this.sm,delete this.sm);this.store=Ext.StoreMgr.lookup(this.store);this.addEvents("click","dblclick","contextmenu","mousedown","mouseup","mouseover","mouseout","keypress","keydown","cellmousedown","rowmousedown","headermousedown","groupmousedown","rowbodymousedown","containermousedown","cellclick","celldblclick","rowclick","rowdblclick","headerclick","headerdblclick","groupclick","groupdblclick","containerclick","containerdblclick","rowbodyclick","rowbodydblclick","rowcontextmenu","cellcontextmenu","headercontextmenu","groupcontextmenu","containercontextmenu","rowbodycontextmenu","bodyscroll","columnresize","columnmove","sortchange","groupchange","reconfigure","viewready")},onRender:function(){var n,t;Ext.grid.GridPanel.superclass.onRender.apply(this,arguments);n=this.getGridEl();this.el.addClass("x-grid-panel");this.mon(n,{scope:this,mousedown:this.onMouseDown,click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu});this.relayEvents(n,["mousedown","mouseup","mouseover","mouseout","keypress","keydown"]);t=this.getView();t.init(this);t.render();this.getSelectionModel().init(this)},initEvents:function(){Ext.grid.GridPanel.superclass.initEvents.call(this);this.loadMask&&(this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:this.store},this.loadMask)))},initStateEvents:function(){Ext.grid.GridPanel.superclass.initStateEvents.call(this);this.mon(this.colModel,"hiddenchange",this.saveState,this,{delay:100})},applyState:function(n){var u=this.colModel,s=n.columns,i=this.store,t,f,e,r,h,o;if(s)for(r=0,h=s.length;r<h;r++)t=s[r],f=u.getColumnById(t.id),f&&(e=u.getIndexById(t.id),u.setState(e,{hidden:t.hidden,width:t.width,sortable:f.sortable,editable:f.editable}),e!=r&&u.moveColumn(e,r));i&&(t=n.sort,t&&i[i.remoteSort?"setDefaultSort":"sort"](t.field,t.direction),t=n.group,i.groupBy&&(t?i.groupBy(t):i.clearGrouping()));o=Ext.apply({},n);delete o.columns;delete o.sort;Ext.grid.GridPanel.superclass.applyState.call(this,o)},getState:function(){for(var n={columns:[]},i=this.store,u,f,r,t=0;r=this.colModel.config[t];t++)n.columns[t]={id:r.id,width:r.width},r.hidden&&(n.columns[t].hidden=!0);return i&&(u=i.getSortState(),u&&(n.sort=u),i.getGroupState&&(f=i.getGroupState(),f&&(n.group=f))),n},afterRender:function(){Ext.grid.GridPanel.superclass.afterRender.call(this);var n=this.view;this.on("bodyresize",n.layout,n);n.layout(!0);this.deferRowRender?(this.deferRowRenderTask||(this.deferRowRenderTask=new Ext.util.DelayedTask(n.afterRender,this.view)),this.deferRowRenderTask.delay(10)):n.afterRender();this.viewReady=!0},reconfigure:function(n,t){var i=this.rendered;i&&this.loadMask&&(this.loadMask.destroy(),this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({},{store:n},this.initialConfig.loadMask)));this.view&&this.view.initData(n,t);this.store=n;this.colModel=t;i&&this.view.refresh(!0);this.fireEvent("reconfigure",this,n,t)},onDestroy:function(){this.deferRowRenderTask&&this.deferRowRenderTask.cancel&&this.deferRowRenderTask.cancel();this.rendered?Ext.destroy(this.view,this.loadMask):this.store&&this.store.autoDestroy&&this.store.destroy();Ext.destroy(this.colModel,this.selModel);this.store=this.selModel=this.colModel=this.view=this.loadMask=null;Ext.grid.GridPanel.superclass.onDestroy.call(this)},processEvent:function(n,t){this.view.processEvent(n,t)},onClick:function(n){this.processEvent("click",n)},onMouseDown:function(n){this.processEvent("mousedown",n)},onContextMenu:function(n){this.processEvent("contextmenu",n)},onDblClick:function(n){this.processEvent("dblclick",n)},walkCells:function(n,t,i,r,u){var e=this.colModel,o=e.getColumnCount(),s=this.store,h=s.getCount(),f=!0;if(i<0)for(t<0&&(n--,f=!1);n>=0;){for(f||(t=o-1),f=!1;t>=0;){if(r.call(u||this,n,t,e)===!0)return[n,t];t--}n--}else for(t>=o&&(n++,f=!1);n<h;){for(f||(t=0),f=!1;t<o;){if(r.call(u||this,n,t,e)===!0)return[n,t];t++}n++}return null},getGridEl:function(){return this.body},stopEditing:Ext.emptyFn,getSelectionModel:function(){return this.selModel||(this.selModel=new Ext.grid.RowSelectionModel(this.disableSelection?{selectRow:Ext.emptyFn}:null)),this.selModel},getStore:function(){return this.store},getColumnModel:function(){return this.colModel},getView:function(){return this.view||(this.view=new Ext.grid.GridView(this.viewConfig)),this.view},getDragDropText:function(){var n=this.selModel.getCount?this.selModel.getCount():1;return String.format(this.ddText,n,n==1?"":"s")}});Ext.reg("grid",Ext.grid.GridPanel);Ext.grid.PivotGrid=Ext.extend(Ext.grid.GridPanel,{aggregator:"sum",renderer:undefined,initComponent:function(){Ext.grid.PivotGrid.superclass.initComponent.apply(this,arguments);this.initAxes();this.enableColumnResize=!1;this.viewConfig=Ext.apply(this.viewConfig||{},{forceFit:!0});this.colModel=new Ext.grid.ColumnModel({})},getAggregator:function(){return typeof this.aggregator=="string"?Ext.grid.PivotAggregatorMgr.types[this.aggregator]:this.aggregator},setAggregator:function(n){this.aggregator=n},setMeasure:function(n){this.measure=n},setLeftAxis:function(n,t){this.leftAxis=n;t&&this.view.refresh()},setTopAxis:function(n,t){this.topAxis=n;t&&this.view.refresh()},initAxes:function(){var n=Ext.grid.PivotAxis;this.leftAxis instanceof n||this.setLeftAxis(new n({orientation:"vertical",dimensions:this.leftAxis||[],store:this.store}));this.topAxis instanceof n||this.setTopAxis(new n({orientation:"horizontal",dimensions:this.topAxis||[],store:this.store}))},extractData:function(){var f=this.store.data.items,e=f.length,t=[],u,i,n,r,h,c,l;if(e==0)return[];var o=this.leftAxis.getTuples(),a=o.length,s=this.topAxis.getTuples(),v=s.length,y=this.getAggregator();for(i=0;i<e;i++)for(u=f[i],n=0;n<a;n++)if(t[n]=t[n]||[],o[n].matcher(u)===!0)for(r=0;r<v;r++)t[n][r]=t[n][r]||[],s[r].matcher(u)&&t[n][r].push(u);for(h=t.length,i=0;i<h;i++)for(l=t[i],c=l.length,n=0;n<c;n++)t[i][n]=y(t[i][n],this.measure);return t},getView:function(){return this.view||(this.view=new Ext.grid.PivotGridView(this.viewConfig)),this.view}});Ext.reg("pivotgrid",Ext.grid.PivotGrid);Ext.grid.PivotAggregatorMgr=new Ext.AbstractManager;Ext.grid.PivotAggregatorMgr.registerType("sum",function(n,t){for(var u=n.length,r=0,i=0;i<u;i++)r+=n[i].get(t);return r});Ext.grid.PivotAggregatorMgr.registerType("avg",function(n,t){for(var r=n.length,u=0,i=0;i<r;i++)u+=n[i].get(t);return u/r||"n/a"});Ext.grid.PivotAggregatorMgr.registerType("min",function(n,t){for(var r=[],u=n.length,i=0;i<u;i++)r.push(n[i].get(t));return Math.min.apply(this,r)||"n/a"});Ext.grid.PivotAggregatorMgr.registerType("max",function(n,t){for(var r=[],u=n.length,i=0;i<u;i++)r.push(n[i].get(t));return Math.max.apply(this,r)||"n/a"});Ext.grid.PivotAggregatorMgr.registerType("count",function(n){return n.length});Ext.grid.GridView=Ext.extend(Ext.util.Observable,{deferEmptyText:!0,scrollOffset:undefined,autoFill:!1,forceFit:!1,sortClasses:["sort-asc","sort-desc"],sortAscText:"Sort Ascending",sortDescText:"Sort Descending",hideSortIcons:!1,columnsText:"Columns",selectedRowClass:"x-grid3-row-selected",borderWidth:2,tdClass:"x-grid3-cell",hdCls:"x-grid3-hd",markDirty:!0,cellSelectorDepth:4,rowSelectorDepth:10,rowBodySelectorDepth:10,cellSelector:"td.x-grid3-cell",rowSelector:"div.x-grid3-row",rowBodySelector:"div.x-grid3-row-body",firstRowCls:"x-grid3-row-first",lastRowCls:"x-grid3-row-last",rowClsRe:/(?:^|\s+)x-grid3-row-(first|last|alt)(?:\s+|$)/g,headerMenuOpenCls:"x-grid3-hd-menu-open",rowOverCls:"x-grid3-row-over",constructor:function(n){Ext.apply(this,n);this.addEvents("beforerowremoved","beforerowsinserted","beforerefresh","rowremoved","rowsinserted","rowupdated","refresh");Ext.grid.GridView.superclass.constructor.call(this)},masterTpl:new Ext.Template('<div class="x-grid3" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header">','<div class="x-grid3-header-inner">','<div class="x-grid3-header-offset" style="{ostyle}">{header}<\/div>',"<\/div>",'<div class="x-clear"><\/div>',"<\/div>",'<div class="x-grid3-scroller">','<div class="x-grid3-body" style="{bstyle}">{body}<\/div>','<a href="#" class="x-grid3-focus" tabIndex="-1"><\/a>',"<\/div>","<\/div>",'<div class="x-grid3-resize-marker">&#160;<\/div>','<div class="x-grid3-resize-proxy">&#160;<\/div>',"<\/div>"),headerTpl:new Ext.Template('<table border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<thead>",'<tr class="x-grid3-hd-row">{cells}<\/tr>',"<\/thead>","<\/table>"),bodyTpl:new Ext.Template("{rows}"),cellTpl:new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}" tabIndex="0" {cellAttr}>','<div class="x-grid3-cell-inner x-grid3-col-{id} x-unselectable" unselectable="on" {attr}>{value}<\/div>',"<\/td>"),initTemplates:function(){var t=this.templates||{},n,i,u=new Ext.Template('<td class="x-grid3-hd x-grid3-cell x-grid3-td-{id} {css}" style="{style}">','<div {tooltip} {attr} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"><\/a>':"","{value}",'<img alt="" class="x-grid3-sort-icon" src="',Ext.BLANK_IMAGE_URL,'" />',"<\/div>","<\/td>"),f='<tr class="x-grid3-row-body-tr" style="{bodyStyle}"><td colspan="{cols}" class="x-grid3-body-cell" tabIndex="0" hidefocus="on"><div class="x-grid3-row-body">{body}<\/div><\/td><\/tr>',r=['<table class="x-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody>","<tr>{cells}<\/tr>",this.enableRowBody?f:"","<\/tbody>","<\/table>"].join("");Ext.applyIf(t,{hcell:u,cell:this.cellTpl,body:this.bodyTpl,header:this.headerTpl,master:this.masterTpl,row:new Ext.Template('<div class="x-grid3-row {alt}" style="{tstyle}">'+r+"<\/div>"),rowInner:new Ext.Template(r)});for(i in t)n=t[i],n&&Ext.isFunction(n.compile)&&!n.compiled&&(n.disableFormats=!0,n.compile());this.templates=t;this.colRe=new RegExp("x-grid3-td-([^\\s]+)","")},fly:function(n){return this._flyweight||(this._flyweight=new Ext.Element.Flyweight(document.body)),this._flyweight.dom=n,this._flyweight},getEditorParent:function(){return this.scroller.dom},initElements:function(){var n=Ext.Element,t=Ext.get(this.grid.getGridEl().dom.firstChild),r=new n(t.child("div.x-grid3-viewport")),u=new n(r.child("div.x-grid3-header")),i=new n(r.child("div.x-grid3-scroller"));this.grid.hideHeaders&&u.setDisplayed(!1);this.forceFit&&i.setStyle("overflow-x","hidden");Ext.apply(this,{el:t,mainWrap:r,scroller:i,mainHd:u,innerHd:u.child("div.x-grid3-header-inner").dom,mainBody:new n(n.fly(i).child("div.x-grid3-body")),focusEl:new n(n.fly(i).child("a")),resizeMarker:new n(t.child("div.x-grid3-resize-marker")),resizeProxy:new n(t.child("div.x-grid3-resize-proxy"))});this.focusEl.swallowEvent("click",!0)},getRows:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},findCell:function(n){return n?this.fly(n).findParent(this.cellSelector,this.cellSelectorDepth):!1},findCellIndex:function(n,t){var i=this.findCell(n),r;return i&&(r=this.fly(i).hasClass(t),!t||r)?this.getCellIndex(i):!1},getCellIndex:function(n){if(n){var t=n.className.match(this.colRe);if(t&&t[1])return this.cm.getIndexById(t[1])}return!1},findHeaderCell:function(n){var t=this.findCell(n);return t&&this.fly(t).hasClass(this.hdCls)?t:null},findHeaderIndex:function(n){return this.findCellIndex(n,this.hdCls)},findRow:function(n){return n?this.fly(n).findParent(this.rowSelector,this.rowSelectorDepth):!1},findRowIndex:function(n){var t=this.findRow(n);return t?t.rowIndex:!1},findRowBody:function(n){return n?this.fly(n).findParent(this.rowBodySelector,this.rowBodySelectorDepth):!1},getRow:function(n){return this.getRows()[n]},getCell:function(n,t){return Ext.fly(this.getRow(n)).query(this.cellSelector)[t]},getHeaderCell:function(n){return this.mainHd.dom.getElementsByTagName("td")[n]},addRowClass:function(n,t){var i=this.getRow(n);i&&this.fly(i).addClass(t)},removeRowClass:function(n,t){var i=this.getRow(n);i&&this.fly(i).removeClass(t)},removeRow:function(n){Ext.removeNode(this.getRow(n));this.syncFocusEl(n)},removeRows:function(n,t){for(var r=this.mainBody.dom,i=n;i<=t;i++)Ext.removeNode(r.childNodes[n]);this.syncFocusEl(n)},getScrollState:function(){var n=this.scroller.dom;return{left:n.scrollLeft,top:n.scrollTop}},restoreScroll:function(n){var t=this.scroller.dom;t.scrollLeft=n.left;t.scrollTop=n.top},scrollToTop:function(){var n=this.scroller.dom;n.scrollTop=0;n.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var n=this.scroller.dom;this.grid.fireEvent("bodyscroll",n.scrollLeft,n.scrollTop)},syncHeaderScroll:function(){var n=this.innerHd,t=this.scroller.dom.scrollLeft;n.scrollLeft=t;n.scrollLeft=t},updateSortIcon:function(n,t){var i=this.sortClasses,r=i[t=="DESC"?1:0],u=this.mainHd.select("td").removeClass(i);u.item(n).addClass(r)},updateAllColumnWidths:function(){for(var u=this.getTotalWidth(),e=this.cm.getColumnCount(),o=this.getRows(),h=o.length,i=[],f,r,s,t,n=0;n<e;n++)i[n]=this.getColumnWidth(n),this.getHeaderCell(n).style.width=i[n];for(this.updateHeaderWidth(),n=0;n<h;n++)if(f=o[n],f.style.width=u,r=f.firstChild,r)for(r.style.width=u,s=r.rows[0],t=0;t<e;t++)s.childNodes[t].style.width=i[t];this.onAllColumnWidthsUpdated(i,u)},updateColumnWidth:function(n){var r=this.getColumnWidth(n),u=this.getTotalWidth(),o=this.getHeaderCell(n),e=this.getRows(),s=e.length,f,t,i;for(this.updateHeaderWidth(),o.style.width=r,t=0;t<s;t++)f=e[t],i=f.firstChild,f.style.width=u,i&&(i.style.width=u,i.rows[0].childNodes[n].style.width=r);this.onColumnWidthUpdated(n,r,u)},updateColumnHidden:function(n,t){var u=this.getTotalWidth(),e=t?"none":"",s=this.getHeaderCell(n),o=this.getRows(),h=o.length,f,i,r;for(this.updateHeaderWidth(),s.style.display=e,r=0;r<h;r++)f=o[r],f.style.width=u,i=f.firstChild,i&&(i.style.width=u,i.rows[0].childNodes[n].style.display=e);this.onColumnHiddenUpdated(n,t,u);delete this.lastViewWidth;this.layout()},doRender:function(n,t,i,r,u,f){for(var w=this.templates,b=w.cell,k=w.row,d=u-1,g="width:"+this.getTotalWidth()+";",p=[],v=[],c={tstyle:g},e={},nt=t.length,l,o,s,h,y,a=0;a<nt;a++){for(s=t[a],v=[],y=a+r,h=0;h<u;h++)o=n[h],e.id=o.id,e.css=h===0?"x-grid3-cell-first ":h==d?"x-grid3-cell-last ":"",e.attr=e.cellAttr="",e.style=o.style,e.value=o.renderer.call(o.scope,s.data[o.name],e,s,y,h,i),Ext.isEmpty(e.value)&&(e.value="&#160;"),this.markDirty&&s.dirty&&typeof s.modified[o.name]!="undefined"&&(e.css+=" x-grid3-dirty-cell"),v[v.length]=b.apply(e);l=[];f&&(y+1)%2==0&&(l[0]="x-grid3-row-alt");s.dirty&&(l[1]=" x-grid3-dirty-row");c.cols=u;this.getRowClass&&(l[2]=this.getRowClass(s,y,c,i));c.alt=l.join(" ");c.cells=v.join("");p[p.length]=k.apply(c)}return p.join("")},processRows:function(n,t){if(this.ds&&!(this.ds.getCount()<1)){var u=this.getRows(),f=u.length,i,r;for(t=t||!this.grid.stripeRows,n=n||0,r=0;r<f;r++)i=u[r],i&&(i.rowIndex=r,t||(i.className=i.className.replace(this.rowClsRe," "),(r+1)%2==0&&(i.className+=" x-grid3-row-alt")));n===0&&Ext.fly(u[0]).addClass(this.firstRowCls);Ext.fly(u[f-1]).addClass(this.lastRowCls)}},afterRender:function(){this.ds&&this.cm&&(this.mainBody.dom.innerHTML=this.renderBody()||"&#160;",this.processRows(0,!0),this.deferEmptyText!==!0&&this.applyEmptyText(),this.grid.fireEvent("viewready",this.grid))},afterRenderUI:function(){var n=this.grid;this.initElements();Ext.fly(this.innerHd).on("click",this.handleHdDown,this);this.mainHd.on({scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut,mousemove:this.handleHdMove});this.scroller.on("scroll",this.syncScroll,this);if(n.enableColumnResize!==!1&&(this.splitZone=new Ext.grid.GridView.SplitDragZone(n,this.mainHd.dom)),n.enableColumnMove&&(this.columnDrag=new Ext.grid.GridView.ColumnDragZone(n,this.innerHd),this.columnDrop=new Ext.grid.HeaderDropZone(n,this.mainHd.dom)),n.enableHdMenu!==!1){if(this.hmenu=new Ext.menu.Menu({id:n.id+"-hctx"}),this.hmenu.add({itemId:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{itemId:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"}),n.enableColumnHide!==!1){this.colMenu=new Ext.menu.Menu({id:n.id+"-hcols-menu"});this.colMenu.on({scope:this,beforeshow:this.beforeColMenuShow,itemclick:this.handleHdMenuClick});this.hmenu.add({itemId:"sortSep",xtype:"menuseparator"},{itemId:"columns",hideOnClick:!1,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"})}this.hmenu.on("itemclick",this.handleHdMenuClick,this)}if(n.trackMouseOver)this.mainBody.on({scope:this,mouseover:this.onRowOver,mouseout:this.onRowOut});(n.enableDragDrop||n.enableDrag)&&(this.dragZone=new Ext.grid.GridDragZone(n,{ddGroup:n.ddGroup||"GridDD"}));this.updateHeaderSortState()},renderUI:function(){var n=this.templates;return n.master.apply({body:n.body.apply({rows:"&#160;"}),header:this.renderHeaders(),ostyle:"width:"+this.getOffsetWidth()+";",bstyle:"width:"+this.getTotalWidth()+";"})},processEvent:function(n,t){var f=t.getTarget(),i=this.grid,o=this.findHeaderIndex(f),r,u,e,s;i.fireEvent(n,t);o!==!1?i.fireEvent("header"+n,i,o,t):(r=this.findRowIndex(f),r!==!1?(u=this.findCellIndex(f),u!==!1?(e=i.colModel.getColumnAt(u),i.fireEvent("cell"+n,i,r,u,t)!==!1&&(!e||e.processEvent&&e.processEvent(n,t,i,r,u)!==!1)&&i.fireEvent("row"+n,i,r,t)):i.fireEvent("row"+n,i,r,t)!==!1&&(s=this.findRowBody(f))&&i.fireEvent("rowbody"+n,i,r,t)):i.fireEvent("container"+n,i,t))},layout:function(n){if(this.mainBody){var f=this.grid,h=f.getGridEl(),e=h.getSize(!0),t=e.width,i=e.height,o=this.scroller,r,s,u;if(!(t<20)&&!(i<20)){f.autoHeight?(r=o.dom.style,r.overflow="visible",Ext.isWebKit&&(r.position="static")):(this.el.setSize(t,i),s=this.mainHd.getHeight(),u=i-s,o.setSize(t,u),this.innerHd&&(this.innerHd.style.width=t+"px"));this.forceFit||n===!0&&this.autoFill?this.lastViewWidth!=t&&(this.fitColumns(!1,!1),this.lastViewWidth=t):(this.autoExpand(),this.syncHeaderScroll());this.onLayout(t,u)}}},onLayout:function(){},onColumnWidthUpdated:function(){},onAllColumnWidthsUpdated:function(){},onColumnHiddenUpdated:function(){},updateColumnText:function(){},afterMove:function(){},init:function(n){this.grid=n;this.initTemplates();this.initData(n.store,n.colModel);this.initUI(n)},getColumnId:function(n){return this.cm.getColumnId(n)},getOffsetWidth:function(){return this.cm.getTotalWidth()+this.getScrollOffset()+"px"},getScrollOffset:function(){return Ext.num(this.scrollOffset,Ext.getScrollBarWidth())},renderHeaders:function(){for(var t=this.cm,r=this.templates,o=r.hcell,i={},u=t.getColumnCount(),s=u-1,f=[],e,n=0;n<u;n++)e=n==0?"x-grid3-cell-first ":n==s?"x-grid3-cell-last ":"",i={id:t.getColumnId(n),value:t.getColumnHeader(n)||"",style:this.getColumnStyle(n,!0),css:e,tooltip:this.getColumnTooltip(n)},t.config[n].align=="right"?i.istyle="padding-right: 16px;":delete i.istyle,f[n]=o.apply(i);return r.header.apply({cells:f.join(""),tstyle:String.format("width: {0};",this.getTotalWidth())})},getColumnTooltip:function(n){var t=this.cm.getColumnTooltip(n);return t?Ext.QuickTips.isEnabled()?'ext:qtip="'+t+'"':'title="'+t+'"':""},beforeUpdate:function(){this.grid.stopEditing(!0)},updateHeaders:function(){this.innerHd.firstChild.innerHTML=this.renderHeaders();this.updateHeaderWidth(!1)},updateHeaderWidth:function(n){var t=this.innerHd.firstChild,i=this.getTotalWidth();t.style.width=this.getOffsetWidth();t.firstChild.style.width=i;n!==!1&&(this.mainBody.dom.style.width=i)},focusRow:function(n){this.focusCell(n,0,!1)},focusCell:function(n,t,i){this.syncFocusEl(this.ensureVisible(n,t,i));var r=this.focusEl;Ext.isGecko?r.focus():r.focus.defer(1,r)},resolveCell:function(n,t,i){if((Ext.isNumber(n)||(n=n.rowIndex),!this.ds)||n<0||n>=this.ds.getCount())return null;t=t!==undefined?t:0;var f=this.getRow(n),r=this.cm,e=r.getColumnCount(),u;if(!(i===!1&&t===0)){while(t<e&&r.isHidden(t))t++;u=this.getCell(n,t)}return{row:f,cell:u}},getResolvedXY:function(n){if(!n)return null;var t=n.cell,i=n.row;return t?Ext.fly(t).getXY():[this.el.getX(),Ext.fly(i).getY()]},syncFocusEl:function(n,t,i){var r=n;if(!Ext.isArray(r)){if(n=Math.min(n,Math.max(0,this.getRows().length-1)),isNaN(n))return;r=this.getResolvedXY(this.resolveCell(n,t,i))}this.focusEl.setXY(r||this.scroller.getXY())},ensureVisible:function(n,t,i){var u=this.resolveCell(n,t,i);if(!u||!u.row)return null;for(var h=u.row,c=u.cell,r=this.scroller.dom,f=h,e=0,o=this.el.dom;f&&f!=o;)e+=f.offsetTop,f=f.offsetParent;e-=this.mainHd.dom.offsetHeight;o=parseInt(r.scrollTop,10);var l=e+h.offsetHeight,a=r.clientHeight,p=o+a;if(e<o?r.scrollTop=e:l>p&&(r.scrollTop=l-a),i!==!1){var s=parseInt(c.offsetLeft,10),v=s+c.offsetWidth,y=parseInt(r.scrollLeft,10),w=y+r.clientWidth;s<y?r.scrollLeft=s:v>w&&(r.scrollLeft=v-r.clientWidth)}return this.getResolvedXY(u)},insertRows:function(n,t,i,r){var u=n.getCount()-1,f,e,o;!r&&t===0&&i>=u?(this.fireEvent("beforerowsinserted",this,t,i),this.refresh(),this.fireEvent("rowsinserted",this,t,i)):(r||this.fireEvent("beforerowsinserted",this,t,i),f=this.renderRows(t,i),e=this.getRow(t),e?(t===0&&Ext.fly(this.getRow(0)).removeClass(this.firstRowCls),Ext.DomHelper.insertHtml("beforeBegin",e,f)):(o=this.getRow(u-1),o&&Ext.fly(o).removeClass(this.lastRowCls),Ext.DomHelper.insertHtml("beforeEnd",this.mainBody.dom,f)),r?(t===0||t>=u)&&Ext.fly(this.getRow(t)).addClass(t===0?this.firstRowCls:this.lastRowCls):(this.processRows(t),this.fireEvent("rowsinserted",this,t,i)));this.syncFocusEl(t)},deleteRows:function(n,t,i){n.getRowCount()<1?this.refresh():(this.fireEvent("beforerowsdeleted",this,t,i),this.removeRows(t,i),this.processRows(t),this.fireEvent("rowsdeleted",this,t,i))},getColumnStyle:function(n,t){var r=this.cm,u=r.config,i=t?"":u[n].css||"",f=u[n].align;return i+=String.format("width: {0};",this.getColumnWidth(n)),r.isHidden(n)&&(i+="display: none; "),f&&(i+=String.format("text-align: {0};",f)),i},getColumnWidth:function(n){var t=this.cm.getColumnWidth(n),i=this.borderWidth;return Ext.isNumber(t)?Ext.isBorderBox?t+"px":Math.max(t-i,0)+"px":t},getTotalWidth:function(){return this.cm.getTotalWidth()+"px"},fitColumns:function(n,t,i){var w=this.grid,r=this.cm,o=r.getTotalWidth(!1),e=this.getGridInnerWidth(),b=e-o,s=[],l=0,a=0,f,v,u,c,p;if(e<20||b===0)return!1;var y=r.getColumnCount(!0),k=r.getColumnCount(!1),h=y-(Ext.isNumber(i)?1:0);for(h===0&&(h=1,i=undefined),u=0;u<k;u++)r.isFixed(u)||u===i||(f=r.getColumnWidth(u),s.push(u,f),r.isHidden(u)||(l=u,a+=f));for(v=(e-r.getTotalWidth())/a;s.length;)f=s.pop(),u=s.pop(),r.setColumnWidth(u,Math.max(w.minColumnWidth,Math.floor(f+f*v)),!0);return o=r.getTotalWidth(!1),o>e&&(c=h==y?l:i,p=Math.max(1,r.getColumnWidth(c)-(o-e)),r.setColumnWidth(c,p,!0)),n!==!0&&this.updateAllColumnWidths(),!0},autoExpand:function(n){var i=this.grid,t=this.cm,f=this.getGridInnerWidth(),e=t.getTotalWidth(!1),o=i.autoExpandColumn;if(!this.userResized&&o&&f!=e){var r=t.getIndexById(o),s=t.getColumnWidth(r),h=f-e+s,u=Math.min(Math.max(h,i.autoExpandMin),i.autoExpandMax);s!=u&&(t.setColumnWidth(r,u,!0),n!==!0&&this.updateColumnWidth(r,u))}},getGridInnerWidth:function(){return this.grid.getGridEl().getWidth(!0)-this.getScrollOffset()},getColumnData:function(){for(var r=[],t=this.cm,f=t.getColumnCount(),u=this.ds.fields,i,n=0;n<f;n++)i=t.getDataIndex(n),r[n]={name:Ext.isDefined(i)?i:u.get(n)?u.get(n).name:undefined,renderer:t.getRenderer(n),scope:t.getRendererScope(n),id:t.getColumnId(n),style:this.getColumnStyle(n)};return r},renderRows:function(n,t){var i=this.grid,r=i.store,e=i.stripeRows,o=i.colModel,s=o.getColumnCount(),u=r.getCount(),f;return u<1?"":(n=n||0,t=Ext.isDefined(t)?t:u-1,f=r.getRange(n,t),this.doRender(this.getColumnData(),f,r,n,s,e))},renderBody:function(){var n=this.renderRows()||"&#160;";return this.templates.body.apply({rows:n})},refreshRow:function(n){var e=this.ds,s=this.cm.getColumnCount(),a=this.getColumnData(),v=s-1,h=["x-grid3-row"],f={tstyle:String.format("width: {0};",this.getTotalWidth())},c=[],y=this.templates.cell,t,o,r,u,l,i;if(Ext.isNumber(n)?(t=n,n=e.getAt(t)):t=e.indexOf(n),n&&!(t<0)){for(i=0;i<s;i++)r=a[i],l=i==0?"x-grid3-cell-first":i==v?"x-grid3-cell-last ":"",u={id:r.id,style:r.style,css:l,attr:"",cellAttr:""},u.value=r.renderer.call(r.scope,n.data[r.name],u,n,t,i,e),Ext.isEmpty(u.value)&&(u.value="&#160;"),this.markDirty&&n.dirty&&typeof n.modified[r.name]!="undefined"&&(u.css+=" x-grid3-dirty-cell"),c[i]=y.apply(u);o=this.getRow(t);o.className="";this.grid.stripeRows&&(t+1)%2==0&&h.push("x-grid3-row-alt");this.getRowClass&&(f.cols=s,h.push(this.getRowClass(n,t,f,e)));this.fly(o).addClass(h).setStyle(f.tstyle);f.cells=c.join("");o.innerHTML=this.templates.rowInner.apply(f);this.fireEvent("rowupdated",this,t,n)}},refresh:function(n){this.fireEvent("beforerefresh",this);this.grid.stopEditing(!0);var t=this.renderBody();this.mainBody.update(t).setWidth(this.getTotalWidth());n===!0&&(this.updateHeaders(),this.updateHeaderSortState());this.processRows(0,!0);this.layout();this.applyEmptyText();this.fireEvent("refresh",this)},applyEmptyText:function(){this.emptyText&&!this.hasRows()&&this.mainBody.update('<div class="x-grid-empty">'+this.emptyText+"<\/div>")},updateHeaderSortState:function(){var n=this.ds.getSortState(),t,i;n&&(this.sortState&&this.sortState.field==n.field&&this.sortState.direction==n.direction||this.grid.fireEvent("sortchange",this.grid,n),this.sortState=n,t=this.cm.findColumnIndex(n.field),t!=-1&&(i=n.direction,this.updateSortIcon(t,i)))},clearHeaderSortState:function(){this.sortState&&(this.grid.fireEvent("sortchange",this.grid,null),this.mainHd.select("td").removeClass(this.sortClasses),delete this.sortState)},destroy:function(){var n=this,e=n.grid,o=e.getGridEl(),s=n.dragZone,f=n.splitZone,i=n.columnDrag,t=n.columnDrop,h=n.scrollToTopTask,u,r;h&&h.cancel&&h.cancel();Ext.destroyMembers(n,"colMenu","hmenu");n.initData(null,null);n.purgeListeners();Ext.fly(n.innerHd).un("click",n.handleHdDown,n);e.enableColumnMove&&(u=i.dragData,r=i.proxy,Ext.destroy(i.el,r.ghost,r.el,t.el,t.proxyTop,t.proxyBottom,u.ddel,u.header),r.anim&&Ext.destroy(r.anim),delete r.ghost,delete u.ddel,delete u.header,i.destroy(),delete Ext.dd.DDM.locationCache[i.id],delete i._domRef,delete t.proxyTop,delete t.proxyBottom,t.destroy(),delete Ext.dd.DDM.locationCache["gridHeader"+o.id],delete t._domRef,delete Ext.dd.DDM.ids[t.ddGroup]);f&&(f.destroy(),delete f._domRef,delete Ext.dd.DDM.ids["gridSplitters"+o.id]);Ext.fly(n.innerHd).removeAllListeners();Ext.removeNode(n.innerHd);delete n.innerHd;Ext.destroy(n.el,n.mainWrap,n.mainHd,n.scroller,n.mainBody,n.focusEl,n.resizeMarker,n.resizeProxy,n.activeHdBtn,n._flyweight,s,f);delete e.container;s&&s.destroy();Ext.dd.DDM.currentTarget=null;delete Ext.dd.DDM.locationCache[o.id];Ext.EventManager.removeResizeListener(n.onWindowResize,n)},onDenyColumnHide:function(){},render:function(){if(this.autoFill){var n=this.grid.ownerCt;if(n&&n.getLayout())n.on("afterlayout",function(){this.fitColumns(!0,!0);this.updateHeaders();this.updateHeaderSortState()},this,{single:!0})}else this.forceFit?this.fitColumns(!0,!1):this.grid.autoExpandColumn&&this.autoExpand(!0);this.grid.getGridEl().dom.innerHTML=this.renderUI();this.afterRenderUI()},initData:function(n,t){var i=this,r,u;if(i.ds&&(r=i.ds,r.un("add",i.onAdd,i),r.un("load",i.onLoad,i),r.un("clear",i.onClear,i),r.un("remove",i.onRemove,i),r.un("update",i.onUpdate,i),r.un("datachanged",i.onDataChange,i),r!==n&&r.autoDestroy&&r.destroy()),n)n.on({scope:i,load:i.onLoad,add:i.onAdd,remove:i.onRemove,update:i.onUpdate,clear:i.onClear,datachanged:i.onDataChange});if(i.cm&&(u=i.cm,u.un("configchange",i.onColConfigChange,i),u.un("widthchange",i.onColWidthChange,i),u.un("headerchange",i.onHeaderChange,i),u.un("hiddenchange",i.onHiddenChange,i),u.un("columnmoved",i.onColumnMove,i)),t){delete i.lastViewWidth;t.on({scope:i,configchange:i.onColConfigChange,widthchange:i.onColWidthChange,headerchange:i.onHeaderChange,hiddenchange:i.onHiddenChange,columnmoved:i.onColumnMove})}i.ds=n;i.cm=t},onDataChange:function(){this.refresh(!0);this.updateHeaderSortState();this.syncFocusEl(0)},onClear:function(){this.refresh();this.syncFocusEl(0)},onUpdate:function(n,t){this.refreshRow(t)},onAdd:function(n,t,i){this.insertRows(n,i,i+(t.length-1))},onRemove:function(n,t,i,r){r!==!0&&this.fireEvent("beforerowremoved",this,i,t);this.removeRow(i);r!==!0&&(this.processRows(i),this.applyEmptyText(),this.fireEvent("rowremoved",this,i,t))},onLoad:function(){Ext.isGecko?(this.scrollToTopTask||(this.scrollToTopTask=new Ext.util.DelayedTask(this.scrollToTop,this)),this.scrollToTopTask.delay(1)):this.scrollToTop()},onColWidthChange:function(n,t,i){this.updateColumnWidth(t,i)},onHeaderChange:function(){this.updateHeaders()},onHiddenChange:function(n,t,i){this.updateColumnHidden(t,i)},onColumnMove:function(n,t,i){this.indexMap=null;this.refresh(!0);this.restoreScroll(this.getScrollState());this.afterMove(i);this.grid.fireEvent("columnmove",t,i)},onColConfigChange:function(){delete this.lastViewWidth;this.indexMap=null;this.refresh(!0)},initUI:function(n){n.on("headerclick",this.onHeaderClick,this)},initEvents:Ext.emptyFn,onHeaderClick:function(n,t){!this.headersDisabled&&this.cm.isSortable(t)&&(n.stopEditing(!0),n.store.sort(this.cm.getDataIndex(t)))},onRowOver:function(n,t){var i=this.findRowIndex(t);i!==!1&&this.addRowClass(i,this.rowOverCls)},onRowOut:function(n,t){var i=this.findRowIndex(t);i===!1||n.within(this.getRow(i),!0)||this.removeRowClass(i,this.rowOverCls)},onRowSelect:function(n){this.addRowClass(n,this.selectedRowClass)},onRowDeselect:function(n){this.removeRowClass(n,this.selectedRowClass)},onCellSelect:function(n,t){var i=this.getCell(n,t);i&&this.fly(i).addClass("x-grid3-cell-selected")},onCellDeselect:function(n,t){var i=this.getCell(n,t);i&&this.fly(i).removeClass("x-grid3-cell-selected")},handleWheel:function(n){n.stopPropagation()},onColumnSplitterMoved:function(n,t){this.userResized=!0;this.grid.colModel.setColumnWidth(n,t,!0);this.forceFit?(this.fitColumns(!0,!1,n),this.updateAllColumnWidths()):(this.updateColumnWidth(n,t),this.syncHeaderScroll());this.grid.fireEvent("columnresize",n,t)},beforeColMenuShow:function(){var t=this.cm,r=t.getColumnCount(),i=this.colMenu,n;for(i.removeAll(),n=0;n<r;n++)t.config[n].hideable!==!1&&i.add(new Ext.menu.CheckItem({text:t.getColumnHeader(n),itemId:"col-"+t.getColumnId(n),checked:!t.isHidden(n),disabled:t.config[n].hideable===!1,hideOnClick:!1}))},handleHdMenuClick:function(n){var t=this.ds,i=this.cm.getDataIndex(this.hdCtxIndex);switch(n.getItemId()){case"asc":t.sort(i,"ASC");break;case"desc":t.sort(i,"DESC");break;default:this.handleHdMenuClickDefault(n)}return!0},handleHdMenuClickDefault:function(n){var t=this.cm,r=n.getItemId(),i=t.getIndexById(r.substr(4));if(i!=-1){if(n.checked&&t.getColumnsBy(this.isHideableColumn,this).length<=1){this.onDenyColumnHide();return}t.setHidden(i,n.checked)}},handleHdDown:function(n,t){if(Ext.fly(t).hasClass("x-grid3-hd-btn")){n.stopEvent();var h=this.cm,u=this.findHeaderCell(t),o=this.getCellIndex(u),i=h.isSortable(o),f=this.hmenu,r=f.items,s=this.headerMenuOpenCls,e;this.hdCtxIndex=o;Ext.fly(u).addClass(s);this.hideSortIcons?(r.get("asc").setVisible(i),r.get("desc").setVisible(i),e=r.get("sortSep"),e&&e.setVisible(i)):(r.get("asc").setDisabled(!i),r.get("desc").setDisabled(!i));f.on("hide",function(){Ext.fly(u).removeClass(s)},this,{single:!0});f.show(t,"tl-bl?")}},handleHdMove:function(n){var i=this.findHeaderCell(this.activeHdRef);if(i&&!this.headersDisabled){var r=this.splitHandleWidth||5,u=this.activeHdRegion,h=i.style,f=this.cm,t="",e=n.getPageX();if(this.grid.enableColumnResize!==!1){var o=this.activeHdIndex,s=this.getPreviousVisible(o),c=f.isResizable(o),l=s&&f.isResizable(s),a=e-u.left<=r,v=u.right-e<=(this.activeHdBtn?2:r);a&&l?t=Ext.isAir?"move":Ext.isWebKit?"e-resize":"col-resize":v&&c&&(t=Ext.isAir?"move":Ext.isWebKit?"w-resize":"col-resize")}h.cursor=t}},getPreviousVisible:function(n){while(n>0){if(!this.cm.isHidden(n-1))return n;n--}return undefined},handleHdOver:function(n,t){var r=this.findHeaderCell(t),i;r&&!this.headersDisabled&&(i=this.fly(r),this.activeHdRef=t,this.activeHdIndex=this.getCellIndex(r),this.activeHdRegion=i.getRegion(),this.isMenuDisabled(this.activeHdIndex,i)||(i.addClass("x-grid3-hd-over"),this.activeHdBtn=i.child(".x-grid3-hd-btn"),this.activeHdBtn&&(this.activeHdBtn.dom.style.height=r.firstChild.offsetHeight-1+"px")))},handleHdOut:function(n,t){var i=this.findHeaderCell(t);!i||Ext.isIE9m&&n.within(i,!0)||(this.activeHdRef=null,this.fly(i).removeClass("x-grid3-hd-over"),i.style.cursor="")},isMenuDisabled:function(n){return this.cm.isMenuDisabled(n)},hasRows:function(){var n=this.mainBody.dom.firstChild;return n&&n.nodeType==1&&n.className!="x-grid-empty"},isHideableColumn:function(n){return!n.hidden},bind:function(n,t){this.initData(n,t)}});Ext.grid.GridView.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{constructor:function(n,t){this.grid=n;this.view=n.getView();this.marker=this.view.resizeMarker;this.proxy=this.view.resizeProxy;Ext.grid.GridView.SplitDragZone.superclass.constructor.call(this,t,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:!1});this.scroll=!1;this.hw=this.view.splitHandleWidth||5},b4StartDrag:function(n,t){var i,u,r;this.dragHeadersDisabled=this.view.headersDisabled;this.view.headersDisabled=!0;i=this.view.mainWrap.getHeight();this.marker.setHeight(i);this.marker.show();this.marker.alignTo(this.view.getHeaderCell(this.cellIndex),"tl-tl",[-2,0]);this.proxy.setHeight(i);u=this.cm.getColumnWidth(this.cellIndex);r=Math.max(u-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(r,1e3);this.setYConstraint(0,0);this.minX=n-r;this.maxX=n+1e3;this.startPos=n;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,n,t)},allowHeaderDrag:function(){return!0},handleMouseDown:function(n){var i=this.view.findHeaderCell(n.getTarget()),r;if(i&&this.allowHeaderDrag(n)){var e=this.view.fly(i).getXY(),u=e[0],o=n.getXY(),f=o[0],s=i.offsetWidth,t=!1;if(f-u<=this.hw?t=-1:u+s-f<=this.hw&&(t=0),t!==!1){if(this.cm=this.grid.colModel,r=this.view.getCellIndex(i),t==-1){if(r+t<0)return;while(this.cm.isHidden(r+t))if(--t,r+t<0)return}this.cellIndex=r+t;this.split=i.dom;this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&Ext.grid.GridView.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}else this.view.columnDrag&&this.view.columnDrag.callHandleMouseDown(n)}},endDrag:function(n){this.marker.hide();var t=this.view,i=Math.max(this.minX,n.getPageX()),r=i-this.startPos,u=this.dragHeadersDisabled;t.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+r);setTimeout(function(){t.headersDisabled=u},50)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.PivotGridView=Ext.extend(Ext.grid.GridView,{colHeaderCellCls:"grid-hd-group-cell",title:"",getColumnHeaders:function(){return this.grid.topAxis.buildHeaders()},getRowHeaders:function(){return this.grid.leftAxis.buildHeaders()},renderRows:function(n,t){var h=this.grid,c=h.extractData(),l=c.length,a=this.templates,v=h.renderer,p=typeof v=="function",y=this.getCellCls,w=typeof y=="function",b=a.cell,k=a.row,o=[],i={},d="width:"+this.getGridInnerWidth()+"px;",f,e,u,s,r;for(n=n||0,t=Ext.isDefined(t)?t:l-1,u=0;u<l;u++){for(s=c[u],e=s.length,f=[],r=0;r<e;r++)i.id=u+"-"+r,i.css=r===0?"x-grid3-cell-first ":r==e-1?"x-grid3-cell-last ":"",i.attr=i.cellAttr="",i.value=s[r],Ext.isEmpty(i.value)&&(i.value="&#160;"),p&&(i.value=v(i.value)),w&&(i.css+=y(i.value)+" "),f[f.length]=b.apply(i);o[o.length]=k.apply({tstyle:d,cols:e,cells:f.join(""),alt:""})}return o.join("")},masterTpl:new Ext.Template('<div class="x-grid3 x-pivotgrid" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header">','<div class="x-grid3-header-title"><span>{title}<\/span><\/div>','<div class="x-grid3-header-inner">','<div class="x-grid3-header-offset" style="{ostyle}"><\/div>',"<\/div>",'<div class="x-clear"><\/div>',"<\/div>",'<div class="x-grid3-scroller">','<div class="x-grid3-row-headers"><\/div>','<div class="x-grid3-body" style="{bstyle}">{body}<\/div>','<a href="#" class="x-grid3-focus" tabIndex="-1"><\/a>',"<\/div>","<\/div>",'<div class="x-grid3-resize-marker">&#160;<\/div>','<div class="x-grid3-resize-proxy">&#160;<\/div>',"<\/div>"),initTemplates:function(){Ext.grid.PivotGridView.superclass.initTemplates.apply(this,arguments);var n=this.templates||{};n.gcell||(n.gcell=new Ext.XTemplate('<td class="x-grid3-hd x-grid3-gcell x-grid3-td-{id} ux-grid-hd-group-row-{row} '+this.colHeaderCellCls+'" style="{style}">','<div {tooltip} class="x-grid3-hd-inner x-grid3-hd-{id} x-unselectable" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"><\/a>':"","{value}","<\/div>","<\/td>"));this.templates=n;this.hrowRe=new RegExp("ux-grid-hd-group-row-(\\d+)","")},initElements:function(){Ext.grid.PivotGridView.superclass.initElements.apply(this,arguments);this.rowHeadersEl=new Ext.Element(this.scroller.child("div.x-grid3-row-headers"));this.headerTitleEl=new Ext.Element(this.mainHd.child("div.x-grid3-header-title"))},getGridInnerWidth:function(){var n=Ext.grid.PivotGridView.superclass.getGridInnerWidth.apply(this,arguments);return n-this.getTotalRowHeaderWidth()},getTotalRowHeaderWidth:function(){for(var t=this.getRowHeaders(),r=t.length,i=0,n=0;n<r;n++)i+=t[n].width;return i},getTotalColumnHeaderHeight:function(){return this.getColumnHeaders().length*21},getCellIndex:function(n){if(n){var t=n.className.match(this.colRe),i;if(t&&(i=t[1]))return parseInt(i.split("-")[1],10)}return!1},renderUI:function(){var n=this.templates,t=this.getGridInnerWidth();return n.master.apply({body:n.body.apply({rows:"&#160;"}),ostyle:"width:"+t+"px",bstyle:"width:"+t+"px"})},onLayout:function(n){Ext.grid.PivotGridView.superclass.onLayout.apply(this,arguments);var n=this.getGridInnerWidth();this.resizeColumnHeaders(n);this.resizeAllRows(n)},refresh:function(n){this.fireEvent("beforerefresh",this);this.grid.stopEditing(!0);var t=this.renderBody();this.mainBody.update(t).setWidth(this.getGridInnerWidth());n===!0&&(this.updateHeaders(),this.updateHeaderSortState());this.processRows(0,!0);this.layout();this.applyEmptyText();this.fireEvent("refresh",this)},renderHeaders:Ext.emptyFn,fitColumns:Ext.emptyFn,resizeColumnHeaders:function(n){var t=this.grid.topAxis;t.rendered&&t.el.setWidth(n)},resizeRowHeaders:function(){var n=this.getTotalRowHeaderWidth(),t=String.format("margin-left: {0}px;",n);this.rowHeadersEl.setWidth(n);this.mainBody.applyStyles(t);Ext.fly(this.innerHd).applyStyles(t);this.headerTitleEl.setWidth(n);this.headerTitleEl.setHeight(this.getTotalColumnHeaderHeight())},resizeAllRows:function(n){for(var i=this.getRows(),r=i.length,t=0;t<r;t++)Ext.fly(i[t]).setWidth(n),Ext.fly(i[t]).child("table").setWidth(n)},updateHeaders:function(){this.renderGroupRowHeaders();this.renderGroupColumnHeaders()},renderGroupRowHeaders:function(){var n=this.grid.leftAxis;this.resizeRowHeaders();n.rendered=!1;n.render(this.rowHeadersEl);this.setTitle(this.title)},setTitle:function(n){this.headerTitleEl.child("span").dom.innerHTML=n},renderGroupColumnHeaders:function(){var n=this.grid.topAxis;n.rendered=!1;n.render(this.innerHd.firstChild)},isMenuDisabled:function(){return!0}});Ext.grid.PivotAxis=Ext.extend(Ext.Component,{orientation:"horizontal",defaultHeaderWidth:80,paddingWidth:7,setDimensions:function(n){this.dimensions=n},onRender:function(n){var t=this.orientation=="horizontal"?this.renderHorizontalRows():this.renderVerticalRows();this.el=Ext.DomHelper.overwrite(n.dom,{tag:"table",cn:t},!0)},renderHorizontalRows:function(){for(var u=this.buildHeaders(),o=u.length,f=[],r,i,e,t,n=0;n<o;n++){for(r=[],i=u[n].items,e=i.length,t=0;t<e;t++)r.push({tag:"td",html:i[t].header,colspan:i[t].span});f[n]={tag:"tr",cn:r}}return f},renderVerticalRows:function(){for(var o=this.buildHeaders(),h=o.length,i=[],s=[],r,u,t,e,f,n=0;n<h;n++)for(u=o[n],e=u.width||80,r=u.items.length,f=0;f<r;f++)t=u.items[f],i[t.start]=i[t.start]||[],i[t.start].push({tag:"td",html:t.header,rowspan:t.span,width:Ext.isBorderBox?e:e-this.paddingWidth});for(r=i.length,n=0;n<r;n++)s[n]={tag:"tr",cn:i[n]};return s},getTuples:function(){var t=new Ext.data.Store({});t.data=this.store.data.clone();t.fields=this.store.fields;for(var o=[],r=this.dimensions,u=r.length,n=0;n<u;n++)o.push({field:r[n].dataIndex,direction:r[n].direction||"ASC"});t.sort(o);var s=t.data.items,h=[],c=[],i,f,e,l;for(u=s.length,n=0;n<u;n++){f=this.getRecordInfo(s[n]);e=f.data;i="";for(l in e)i+=e[l]+"---";h.indexOf(i)==-1&&(h.push(i),c.push(f))}return t.destroy(),c},getRecordInfo:function(n){for(var u=this.dimensions,o=u.length,i={},f,r,e,t=0;t<o;t++)f=u[t],r=f.dataIndex,i[r]=n.get(r);return e=function(n){return function(t){for(var i in n)if(t.get(i)!=n[i])return!1;return!0}},{data:i,matcher:e(i)}},buildHeaders:function(){for(var h=this.getTuples(),a=h.length,f=this.dimensions,c,p=f.length,v=[],l,e,o,r,n,u,y,s,i,t=0;t<p;t++){for(c=f[t],e=[],n=0,u=0,i=0;i<a;i++)l=h[i],y=i==a-1,o=l.data[c.dataIndex],s=r!=undefined&&r!=o,t>0&&i>0&&(s=s||l.data[f[t-1].dataIndex]!=h[i-1].data[f[t-1].dataIndex]),s&&(e.push({header:r,span:n,start:u}),u+=n,n=0),y&&(e.push({header:o,span:n+1,start:u}),u+=n,n=0),r=o,n++;v.push({items:e,width:c.width||this.defaultHeaderWidth});r=undefined}return v}});Ext.grid.HeaderDragZone=Ext.extend(Ext.dd.DragZone,{maxDragWidth:120,constructor:function(n,t,i){this.grid=n;this.view=n.getView();this.ddGroup="gridHeader"+this.grid.getGridEl().id;Ext.grid.HeaderDragZone.superclass.constructor.call(this,t);i&&(this.setHandleElId(Ext.id(t)),this.setOuterHandleElId(Ext.id(i)));this.scroll=!1},getDragData:function(n){var i=Ext.lib.Event.getTarget(n),t=this.view.findHeaderCell(i);return t?{ddel:t.firstChild,header:t}:!1},onInitDrag:function(){this.dragHeadersDisabled=this.view.headersDisabled;this.view.headersDisabled=!0;var n=this.dragData.ddel.cloneNode(!0);return n.id=Ext.id(),n.style.width=Math.min(this.dragData.header.offsetWidth,this.maxDragWidth)+"px",this.proxy.update(n),!0},afterValidDrop:function(){this.completeDrop()},afterInvalidDrop:function(){this.completeDrop()},completeDrop:function(){var n=this.view,t=this.dragHeadersDisabled;setTimeout(function(){n.headersDisabled=t},50)}});Ext.grid.HeaderDropZone=Ext.extend(Ext.dd.DropZone,{proxyOffsets:[-4,-9],fly:Ext.Element.fly,constructor:function(n){this.grid=n;this.view=n.getView();this.proxyTop=Ext.DomHelper.append(document.body,{cls:"col-move-top",html:"&#160;"},!0);this.proxyBottom=Ext.DomHelper.append(document.body,{cls:"col-move-bottom",html:"&#160;"},!0);this.proxyTop.hide=this.proxyBottom.hide=function(){this.setLeftTop(-100,-100);this.setStyle("visibility","hidden")};this.ddGroup="gridHeader"+this.grid.getGridEl().id;Ext.grid.HeaderDropZone.superclass.constructor.call(this,n.getGridEl().dom)},getTargetFromEvent:function(n){var i=Ext.lib.Event.getTarget(n),t=this.view.findCellIndex(i);if(t!==!1)return this.view.getHeaderCell(t)},nextVisible:function(n){var t=this.view,i=this.grid.colModel;for(n=n.nextSibling;n;){if(!i.isHidden(t.getCellIndex(n)))return n;n=n.nextSibling}return null},prevVisible:function(n){var t=this.view,i=this.grid.colModel;for(n=n.prevSibling;n;){if(!i.isHidden(t.getCellIndex(n)))return n;n=n.prevSibling}return null},positionIndicator:function(n,t,i){var o=Ext.lib.Event.getPageX(i),r=Ext.lib.Dom.getRegion(t.firstChild),u,f,e=r.top+this.proxyOffsets[1];return(r.right-o<=(r.right-r.left)/2?(u=r.right+this.view.borderWidth,f="after"):(u=r.left,f="before"),this.grid.colModel.isFixed(this.view.getCellIndex(t)))?!1:(u+=this.proxyOffsets[0],this.proxyTop.setLeftTop(u,e),this.proxyTop.show(),this.bottomOffset||(this.bottomOffset=this.view.mainHd.getHeight()),this.proxyBottom.setLeftTop(u,e+this.proxyTop.dom.offsetHeight+this.bottomOffset),this.proxyBottom.show(),f)},onNodeEnter:function(n,t,i,r){r.header!=n&&this.positionIndicator(r.header,n,i)},onNodeOver:function(n,t,i,r){var u=!1;return r.header!=n&&(u=this.positionIndicator(r.header,n,i)),u||(this.proxyTop.hide(),this.proxyBottom.hide()),u?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(){this.proxyTop.hide();this.proxyBottom.hide()},onNodeDrop:function(n,t,i,r){var e=r.header;if(e!=n){var s=this.grid.colModel,h=Ext.lib.Event.getPageX(i),f=Ext.lib.Dom.getRegion(n.firstChild),c=f.right-h<=(f.right-f.left)/2?"after":"before",o=this.view.getCellIndex(e),u=this.view.getCellIndex(n);return c=="after"&&u++,o<u&&u--,s.moveColumn(o,u),!0}return!1}});Ext.grid.GridView.ColumnDragZone=Ext.extend(Ext.grid.HeaderDragZone,{constructor:function(n,t){Ext.grid.GridView.ColumnDragZone.superclass.constructor.call(this,n,t,null);this.proxy.el.addClass("x-grid3-col-dd")},handleMouseDown:function(){},callHandleMouseDown:function(n){Ext.grid.GridView.ColumnDragZone.superclass.handleMouseDown.call(this,n)}});Ext.grid.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{fly:Ext.Element.fly,constructor:function(n,t,i){this.grid=n;this.view=n.getView();this.proxy=this.view.resizeProxy;Ext.grid.SplitDragZone.superclass.constructor.call(this,t,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:!1});this.setHandleElId(Ext.id(t));this.setOuterHandleElId(Ext.id(i));this.scroll=!1},b4StartDrag:function(n,t){this.view.headersDisabled=!0;this.proxy.setHeight(this.view.mainWrap.getHeight());var r=this.cm.getColumnWidth(this.cellIndex),i=Math.max(r-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(i,1e3);this.setYConstraint(0,0);this.minX=n-i;this.maxX=n+1e3;this.startPos=n;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,n,t)},handleMouseDown:function(n){var i=Ext.EventObject.setEvent(n),t=this.fly(i.getTarget());t.hasClass("x-grid-split")&&(this.cellIndex=this.view.getCellIndex(t.dom),this.split=t.dom,this.cm=this.grid.colModel,this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&Ext.grid.SplitDragZone.superclass.handleMouseDown.apply(this,arguments))},endDrag:function(n){this.view.headersDisabled=!1;var t=Math.max(this.minX,Ext.lib.Event.getPageX(n)),i=t-this.startPos;this.view.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+i)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.GridDragZone=function(n,t){this.view=n.getView();Ext.grid.GridDragZone.superclass.constructor.call(this,this.view.mainBody.dom,t);this.scroll=!1;this.grid=n;this.ddel=document.createElement("div");this.ddel.className="x-grid-dd-wrap";this.preventDefault=!0};Ext.extend(Ext.grid.GridDragZone,Ext.dd.DragZone,{ddGroup:"GridDD",getDragData:function(n){var e=Ext.lib.Event.getTarget(n),t,i=this.view.findRowIndex(e),f,r,u;return i!==!1?(t=this.grid.selModel,t.getSelectedCell?(f=this.view.findCellIndex(e),r=t.getSelectedCell(),r&&r[0]===i&&r[1]===f||t.handleMouseDown(this.grid,i,f,n),this.grid.dragCell?(u=t.getSelectedCell(),this.grid.hasOwnProperty("ddText")||(this.grid.ddText="{0} selected cell{1}")):u=[this.grid.store.getAt(i)]):((!t.isSelected(i)||n.hasModifier())&&t.handleMouseDown(this.grid,i,n),u=t.getSelections()),{grid:this.grid,ddel:this.ddel,rowIndex:i,selections:u}):!1},onInitDrag:function(){var n=this.dragData;this.ddel.innerHTML=this.grid.getDragDropText();this.proxy.update(this.ddel)},afterRepair:function(){this.dragging=!1},getRepairXY:function(){return!1},onEndDrag:function(){},onValidDrop:function(){this.hideProxy()},beforeInvalidDrop:function(){}});Ext.grid.ColumnModel=Ext.extend(Ext.util.Observable,{defaultWidth:100,defaultSortable:!1,constructor:function(n){n.columns?(Ext.apply(this,n),this.setConfig(n.columns,!0)):this.setConfig(n,!0);this.addEvents("widthchange","headerchange","hiddenchange","columnmoved","configchange");Ext.grid.ColumnModel.superclass.constructor.call(this)},getColumnId:function(n){return this.config[n].id},getColumnAt:function(n){return this.config[n]},setConfig:function(n,t){var r,i,u,f;if(!t)for(delete this.totalWidth,r=0,u=this.config.length;r<u;r++)i=this.config[r],i.setEditor&&i.setEditor(null);for(this.defaults=Ext.apply({width:this.defaultWidth,sortable:this.defaultSortable},this.defaults),this.config=n,this.lookup={},r=0,u=n.length;r<u;r++)i=Ext.applyIf(n[r],this.defaults),Ext.isEmpty(i.id)&&(i.id=r),i.isColumn||(f=Ext.grid.Column.types[i.xtype||"gridcolumn"],i=new f(i),n[r]=i),this.lookup[i.id]=i;t||this.fireEvent("configchange",this)},getColumnById:function(n){return this.lookup[n]},getIndexById:function(n){for(var t=0,i=this.config.length;t<i;t++)if(this.config[t].id==n)return t;return-1},moveColumn:function(n,t){var i=this.config,r=i[n];i.splice(n,1);i.splice(t,0,r);this.dataMap=null;this.fireEvent("columnmoved",this,n,t)},getColumnCount:function(n){var i=this.config.length,r=0,t;if(n===!0){for(t=0;t<i;t++)this.isHidden(t)||r++;return r}return i},getColumnsBy:function(n,t){for(var f=this.config,e=f.length,r=[],u,i=0;i<e;i++)u=f[i],n.call(t||this,u,i)===!0&&(r[r.length]=u);return r},isSortable:function(n){return!!this.config[n].sortable},isMenuDisabled:function(n){return!!this.config[n].menuDisabled},getRenderer:function(n){return this.config[n].renderer||Ext.grid.ColumnModel.defaultRenderer},getRendererScope:function(n){return this.config[n].scope},setRenderer:function(n,t){this.config[n].renderer=t},getColumnWidth:function(n){var t=this.config[n].width;return typeof t!="number"&&(t=this.defaultWidth),t},setColumnWidth:function(n,t,i){this.config[n].width=t;this.totalWidth=null;i||this.fireEvent("widthchange",this,n,t)},getTotalWidth:function(n){if(!this.totalWidth){this.totalWidth=0;for(var t=0,i=this.config.length;t<i;t++)(n||!this.isHidden(t))&&(this.totalWidth+=this.getColumnWidth(t))}return this.totalWidth},getColumnHeader:function(n){return this.config[n].header},setColumnHeader:function(n,t){this.config[n].header=t;this.fireEvent("headerchange",this,n,t)},getColumnTooltip:function(n){return this.config[n].tooltip},setColumnTooltip:function(n,t){this.config[n].tooltip=t},getDataIndex:function(n){return this.config[n].dataIndex},setDataIndex:function(n,t){this.config[n].dataIndex=t},findColumnIndex:function(n){for(var i=this.config,t=0,r=i.length;t<r;t++)if(i[t].dataIndex==n)return t;return-1},isCellEditable:function(n){var t=this.config[n],i=t.editable;return!!(i||!Ext.isDefined(i)&&t.editor)},getCellEditor:function(n,t){return this.config[n].getCellEditor(t)},setEditable:function(n,t){this.config[n].editable=t},isHidden:function(n){return!!this.config[n].hidden},isFixed:function(n){return!!this.config[n].fixed},isResizable:function(n){return n>=0&&this.config[n].resizable!==!1&&this.config[n].fixed!==!0},setHidden:function(n,t){var i=this.config[n];i.hidden!==t&&(i.hidden=t,this.totalWidth=null,this.fireEvent("hiddenchange",this,n,t))},setEditor:function(n,t){this.config[n].setEditor(t)},destroy:function(){for(var t=this.config.length,n=0;n<t;n++)this.config[n].destroy();delete this.config;delete this.lookup;this.purgeListeners()},setState:function(n,t){t=Ext.applyIf(t,this.defaults);Ext.apply(this.config[n],t)}});Ext.grid.ColumnModel.defaultRenderer=function(n){return typeof n=="string"&&n.length<1?"&#160;":n};Ext.grid.AbstractSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(){this.locked=!1;Ext.grid.AbstractSelectionModel.superclass.constructor.call(this)},init:function(n){this.grid=n;this.lockOnInit&&(delete this.lockOnInit,this.locked=!1,this.lock());this.initEvents()},lock:function(){if(!this.locked){this.locked=!0;var n=this.grid;if(n)n.getView().on({scope:this,beforerefresh:this.sortUnLock,refresh:this.sortLock});else this.lockOnInit=!0}},sortLock:function(){this.locked=!0},sortUnLock:function(){this.locked=!1},unlock:function(){if(this.locked){this.locked=!1;var t=this.grid,n;t?(n=t.getView(),n.un("beforerefresh",this.sortUnLock,this),n.un("refresh",this.sortLock,this)):delete this.lockOnInit}},isLocked:function(){return this.locked},destroy:function(){this.unlock();this.purgeListeners()}});Ext.grid.RowSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{singleSelect:!1,constructor:function(n){Ext.apply(this,n);this.selections=new Ext.util.MixedCollection(!1,function(n){return n.id});this.last=!1;this.lastActive=!1;this.addEvents("selectionchange","beforerowselect","rowselect","rowdeselect");Ext.grid.RowSelectionModel.superclass.constructor.call(this)},initEvents:function(){if(!this.grid.enableDragDrop&&!this.grid.enableDrag)this.grid.on("rowmousedown",this.handleMouseDown,this);this.rowNav=new Ext.KeyNav(this.grid.getGridEl(),{up:this.onKeyPress,down:this.onKeyPress,scope:this});this.grid.getView().on({scope:this,refresh:this.onRefresh,rowupdated:this.onRowUpdated,rowremoved:this.onRemove})},onKeyPress:function(n,t){var r=t=="up",u=r?"selectPrevious":"selectNext",f=r?-1:1,i;!n.shiftKey||this.singleSelect?this[u](!1):this.last!==!1&&this.lastActive!==!1?(i=this.last,this.selectRange(this.last,this.lastActive+f),this.grid.getView().focusRow(this.lastActive),i!==!1&&(this.last=i)):this.selectFirstRow()},onRefresh:function(){var u=this.grid.store,n=this.getSelections(),t=0,f=n.length,i,r;for(this.silent=!0,this.clearSelections(!0);t<f;t++)r=n[t],(i=u.indexOfId(r.id))!=-1&&this.selectRow(i,!0);n.length!=this.selections.getCount()&&this.fireEvent("selectionchange",this);this.silent=!1},onRemove:function(n,t,i){this.selections.remove(i)!==!1&&this.fireEvent("selectionchange",this)},onRowUpdated:function(n,t,i){if(this.isSelected(i))n.onRowSelect(t)},selectRecords:function(n,t){t||this.clearSelections();for(var r=this.grid.store,i=0,u=n.length;i<u;i++)this.selectRow(r.indexOf(n[i]),!0)},getCount:function(){return this.selections.length},selectFirstRow:function(){this.selectRow(0)},selectLastRow:function(n){this.selectRow(this.grid.store.getCount()-1,n)},selectNext:function(n){return this.hasNext()?(this.selectRow(this.last+1,n),this.grid.getView().focusRow(this.last),!0):!1},selectPrevious:function(n){return this.hasPrevious()?(this.selectRow(this.last-1,n),this.grid.getView().focusRow(this.last),!0):!1},hasNext:function(){return this.last!==!1&&this.last+1<this.grid.store.getCount()},hasPrevious:function(){return!!this.last},getSelections:function(){return[].concat(this.selections.items)},getSelected:function(){return this.selections.itemAt(0)},each:function(n,t){for(var r=this.getSelections(),i=0,u=r.length;i<u;i++)if(n.call(t||this,r[i],i)===!1)return!1;return!0},clearSelections:function(n){if(!this.isLocked()){if(n!==!0){var i=this.grid.store,t=this.selections;t.each(function(n){this.deselectRow(i.indexOfId(n.id))},this);t.clear()}else this.selections.clear();this.last=!1}},selectAll:function(){if(!this.isLocked()){this.selections.clear();for(var n=0,t=this.grid.store.getCount();n<t;n++)this.selectRow(n,!0)}},hasSelection:function(){return this.selections.length>0},isSelected:function(n){var t=Ext.isNumber(n)?this.grid.store.getAt(n):n;return t&&this.selections.key(t.id)?!0:!1},isIdSelected:function(n){return this.selections.key(n)?!0:!1},handleMouseDown:function(n,t,i){var r,u,f;i.button!==0||this.isLocked()||(r=this.grid.getView(),i.shiftKey&&!this.singleSelect&&this.last!==!1?(u=this.last,this.selectRange(u,t,i.ctrlKey),this.last=u,r.focusRow(t)):(f=this.isSelected(t),i.ctrlKey&&f?this.deselectRow(t):(!f||this.getCount()>1)&&(this.selectRow(t,i.ctrlKey||i.shiftKey),r.focusRow(t))))},selectRows:function(n,t){t||this.clearSelections();for(var i=0,r=n.length;i<r;i++)this.selectRow(n[i],!0)},selectRange:function(n,t,i){var r;if(!this.isLocked())if(i||this.clearSelections(),n<=t)for(r=n;r<=t;r++)this.selectRow(r,!0);else for(r=n;r>=t;r--)this.selectRow(r,!0)},deselectRange:function(n,t,i){if(!this.isLocked())for(var r=n;r<=t;r++)this.deselectRow(r,i)},selectRow:function(n,t,i){if(!this.isLocked()&&!(n<0)&&!(n>=this.grid.store.getCount())&&(!t||!this.isSelected(n))){var r=this.grid.store.getAt(n);if(r&&this.fireEvent("beforerowselect",this,n,t,r)!==!1){if((!t||this.singleSelect)&&this.clearSelections(),this.selections.add(r),this.last=this.lastActive=n,!i)this.grid.getView().onRowSelect(n);this.silent||(this.fireEvent("rowselect",this,n,r),this.fireEvent("selectionchange",this))}}},deselectRow:function(n,t){if(!this.isLocked()){this.last==n&&(this.last=!1);this.lastActive==n&&(this.lastActive=!1);var i=this.grid.store.getAt(n);if(i){if(this.selections.remove(i),!t)this.grid.getView().onRowDeselect(n);this.fireEvent("rowdeselect",this,n,i);this.fireEvent("selectionchange",this)}}},acceptsNav:function(n,t,i){return!i.isHidden(t)&&i.isCellEditable(t,n)},onEditorKey:function(n,t){var s=t.getKey(),r,i=this.grid,u=i.lastEdit,f=i.activeEditor,h=t.shiftKey,e,o,c;if(s==t.TAB?(t.stopEvent(),f.completeEdit(),r=h?i.walkCells(f.row,f.col-1,-1,this.acceptsNav,this):i.walkCells(f.row,f.col+1,1,this.acceptsNav,this)):s==t.ENTER&&this.moveEditorOnEnter!==!1&&(r=h?i.walkCells(u.row-1,u.col,-1,this.acceptsNav,this):i.walkCells(u.row+1,u.col,1,this.acceptsNav,this)),r){o=r[0];c=r[1];this.onEditorSelect(o,u.row);i.isEditor&&i.editing&&(e=i.activeEditor,e&&e.field.triggerBlur&&e.field.triggerBlur());i.startEditing(o,c)}},onEditorSelect:function(n,t){t!=n&&this.selectRow(n)},destroy:function(){Ext.destroy(this.rowNav);this.rowNav=null;Ext.grid.RowSelectionModel.superclass.destroy.call(this)}});Ext.grid.Column=Ext.extend(Ext.util.Observable,{isColumn:!0,constructor:function(n){Ext.apply(this,n);Ext.isString(this.renderer)?this.renderer=Ext.util.Format[this.renderer]:Ext.isObject(this.renderer)&&(this.scope=this.renderer.scope,this.renderer=this.renderer.fn);this.scope||(this.scope=this);var t=this.editor;delete this.editor;this.setEditor(t);this.addEvents("click","contextmenu","dblclick","mousedown");Ext.grid.Column.superclass.constructor.call(this)},processEvent:function(n,t,i,r){return this.fireEvent(n,this,i,r,t)},destroy:function(){this.setEditor&&this.setEditor(null);this.purgeListeners()},renderer:function(n){return n},getEditor:function(){return this.editable!==!1?this.editor:null},setEditor:function(n){var t=this.editor;t&&(t.gridEditor?(t.gridEditor.destroy(),delete t.gridEditor):t.destroy());this.editor=null;n&&(n.isXType||(n=Ext.create(n,"textfield")),this.editor=n)},getCellEditor:function(n){var t=this.getEditor(n);return t&&(t.startEdit||(t.gridEditor||(t.gridEditor=new Ext.grid.GridEditor(t)),t=t.gridEditor)),t}});Ext.grid.BooleanColumn=Ext.extend(Ext.grid.Column,{trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(n){Ext.grid.BooleanColumn.superclass.constructor.call(this,n);var t=this.trueText,i=this.falseText,r=this.undefinedText;this.renderer=function(n){return n===undefined?r:!n||n==="false"?i:t}}});Ext.grid.NumberColumn=Ext.extend(Ext.grid.Column,{format:"0,000.00",constructor:function(n){Ext.grid.NumberColumn.superclass.constructor.call(this,n);this.renderer=Ext.util.Format.numberRenderer(this.format)}});Ext.grid.DateColumn=Ext.extend(Ext.grid.Column,{format:"m/d/Y",constructor:function(n){Ext.grid.DateColumn.superclass.constructor.call(this,n);this.renderer=Ext.util.Format.dateRenderer(this.format)}});Ext.grid.TemplateColumn=Ext.extend(Ext.grid.Column,{constructor:function(n){Ext.grid.TemplateColumn.superclass.constructor.call(this,n);var t=!Ext.isPrimitive(this.tpl)&&this.tpl.compile?this.tpl:new Ext.XTemplate(this.tpl);this.renderer=function(n,i,r){return t.apply(r.data)};this.tpl=t}});Ext.grid.ActionColumn=Ext.extend(Ext.grid.Column,{header:"&#160;",actionIdRe:/x-action-col-(\d+)/,altText:"",constructor:function(n){var i=this,u=n.items||(i.items=[i]),f=u.length,r,t;Ext.grid.ActionColumn.superclass.constructor.call(i,n);i.renderer=function(e,o){for(e=Ext.isFunction(n.renderer)?n.renderer.apply(this,arguments)||"":"",o.css+=" x-action-col-cell",r=0;r<f;r++)t=u[r],e+='<img alt="'+(t.altText||i.altText)+'" src="'+(t.icon||Ext.BLANK_IMAGE_URL)+'" class="x-action-col-icon x-action-col-'+String(r)+" "+(t.iconCls||"")+" "+(Ext.isFunction(t.getClass)?t.getClass.apply(t.scope||this.scope||this,arguments):"")+'"'+(t.tooltip?' ext:qtip="'+t.tooltip+'"':"")+" />";return e}},destroy:function(){return delete this.items,delete this.renderer,Ext.grid.ActionColumn.superclass.destroy.apply(this,arguments)},processEvent:function(n,t,i,r,u){var e=t.getTarget().className.match(this.actionIdRe),f,o;if(e&&(f=this.items[parseInt(e[1],10)]))if(n=="click")(o=f.handler||this.handler)&&o.call(f.scope||this.scope||this,i,r,u,f,t);else if(n=="mousedown"&&f.stopSelection!==!1)return!1;return Ext.grid.ActionColumn.superclass.processEvent.apply(this,arguments)}});Ext.grid.Column.types={gridcolumn:Ext.grid.Column,booleancolumn:Ext.grid.BooleanColumn,numbercolumn:Ext.grid.NumberColumn,datecolumn:Ext.grid.DateColumn,templatecolumn:Ext.grid.TemplateColumn,actioncolumn:Ext.grid.ActionColumn};Ext.grid.RowNumberer=Ext.extend(Object,{header:"",width:23,sortable:!1,constructor:function(n){Ext.apply(this,n);this.rowspan&&(this.renderer=this.renderer.createDelegate(this))},fixed:!0,hideable:!1,menuDisabled:!0,dataIndex:"",id:"numberer",rowspan:undefined,renderer:function(n,t,i,r){return this.rowspan&&(t.cellAttr='rowspan="'+this.rowspan+'"'),r+1}});Ext.grid.CheckboxSelectionModel=Ext.extend(Ext.grid.RowSelectionModel,{header:'<div class="x-grid3-hd-checker">&#160;<\/div>',width:20,sortable:!1,menuDisabled:!0,fixed:!0,hideable:!1,dataIndex:"",id:"checker",isColumn:!0,constructor:function(){Ext.grid.CheckboxSelectionModel.superclass.constructor.apply(this,arguments);this.checkOnly&&(this.handleMouseDown=Ext.emptyFn)},initEvents:function(){Ext.grid.CheckboxSelectionModel.superclass.initEvents.call(this);this.grid.on("render",function(){Ext.fly(this.grid.getView().innerHd).on("mousedown",this.onHdMouseDown,this)},this)},processEvent:function(n,t){if(n=="mousedown"){this.onMouseDown(t,t.getTarget());return!1}return Ext.grid.Column.prototype.processEvent.apply(this,arguments)},onMouseDown:function(n,t){var r,i;n.button===0&&t.className=="x-grid3-row-checker"&&(n.stopEvent(),r=n.getTarget(".x-grid3-row"),r&&(i=r.rowIndex,this.isSelected(i)?this.deselectRow(i):(this.selectRow(i,!0),this.grid.getView().focusRow(i))))},onHdMouseDown:function(n,t){if(t.className=="x-grid3-hd-checker"){n.stopEvent();var i=Ext.fly(t.parentNode),r=i.hasClass("x-grid3-hd-checker-on");r?(i.removeClass("x-grid3-hd-checker-on"),this.clearSelections()):(i.addClass("x-grid3-hd-checker-on"),this.selectAll())}},renderer:function(){return'<div class="x-grid3-row-checker">&#160;<\/div>'},onEditorSelect:function(n,t){t==n||this.checkOnly||this.selectRow(n)}});Ext.grid.CellSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{constructor:function(n){Ext.apply(this,n);this.selection=null;this.addEvents("beforecellselect","cellselect","selectionchange");Ext.grid.CellSelectionModel.superclass.constructor.call(this)},initEvents:function(){this.grid.on("cellmousedown",this.handleMouseDown,this);this.grid.on(Ext.EventManager.getKeyEvent(),this.handleKeyDown,this);this.grid.getView().on({scope:this,refresh:this.onViewChange,rowupdated:this.onRowUpdated,beforerowremoved:this.clearSelections,beforerowsinserted:this.clearSelections});if(this.grid.isEditor)this.grid.on("beforeedit",this.beforeEdit,this)},beforeEdit:function(n){this.select(n.row,n.column,!1,!0,n.record)},onRowUpdated:function(n,t,i){if(this.selection&&this.selection.record==i)n.onCellSelect(t,this.selection.cell[1])},onViewChange:function(){this.clearSelections(!0)},getSelectedCell:function(){return this.selection?this.selection.cell:null},clearSelections:function(n){var t=this.selection;if(t){if(n!==!0)this.grid.view.onCellDeselect(t.cell[0],t.cell[1]);this.selection=null;this.fireEvent("selectionchange",this,null)}},hasSelection:function(){return this.selection?!0:!1},handleMouseDown:function(n,t,i,r){r.button!==0||this.isLocked()||this.select(t,i)},select:function(n,t,i,r,u){if(this.fireEvent("beforecellselect",this,n,t)!==!1){if(this.clearSelections(),u=u||this.grid.store.getAt(n),this.selection={record:u,cell:[n,t]},!i){var f=this.grid.getView();f.onCellSelect(n,t);r!==!0&&f.focusCell(n,t)}this.fireEvent("cellselect",this,n,t);this.fireEvent("selectionchange",this,this.selection)}},isSelectable:function(n,t,i){return!i.isHidden(t)},onEditorKey:function(n,t){t.getKey()==t.TAB&&this.handleKeyDown(t)},handleKeyDown:function(n){if(n.isNavKeyPress()){var h=n.getKey(),r=this.grid,c=this.selection,s=this,f=function(n,t,i){return r.walkCells(n,t,i,r.isEditor&&r.editing?s.acceptsNav:s.isSelectable,s)},e,u,t,i,o;switch(h){case n.ESC:case n.PAGE_UP:case n.PAGE_DOWN:break;default:n.stopEvent()}if(!c){e=f(0,0,1);e&&this.select(e[0],e[1]);return}e=c.cell;t=e[0];i=e[1];switch(h){case n.TAB:u=n.shiftKey?f(t,i-1,-1):f(t,i+1,1);break;case n.DOWN:u=f(t+1,i,1);break;case n.UP:u=f(t-1,i,-1);break;case n.RIGHT:u=f(t,i+1,1);break;case n.LEFT:u=f(t,i-1,-1);break;case n.ENTER:if(r.isEditor&&!r.editing){r.startEditing(t,i);return}}u&&(t=u[0],i=u[1],this.select(t,i),r.isEditor&&r.editing&&(o=r.activeEditor,o&&o.field.triggerBlur&&o.field.triggerBlur(),r.startEditing(t,i)))}},acceptsNav:function(n,t,i){return!i.isHidden(t)&&i.isCellEditable(t,n)}});Ext.grid.EditorGridPanel=Ext.extend(Ext.grid.GridPanel,{clicksToEdit:2,forceValidation:!1,isEditor:!0,detectEdit:!1,autoEncode:!1,trackMouseOver:!1,initComponent:function(){Ext.grid.EditorGridPanel.superclass.initComponent.call(this);this.selModel||(this.selModel=new Ext.grid.CellSelectionModel);this.activeEditor=null;this.addEvents("beforeedit","afteredit","validateedit")},initEvents:function(){Ext.grid.EditorGridPanel.superclass.initEvents.call(this);this.getGridEl().on("mousewheel",this.stopEditing.createDelegate(this,[!0]),this);this.on("columnresize",this.stopEditing,this,[!0]);if(this.clicksToEdit==1)this.on("cellclick",this.onCellDblClick,this);else{var n=this.getView();if(this.clicksToEdit=="auto"&&n.mainBody)n.mainBody.on("mousedown",this.onAutoEditClick,this);this.on("celldblclick",this.onCellDblClick,this)}},onResize:function(){Ext.grid.EditorGridPanel.superclass.onResize.apply(this,arguments);var n=this.activeEditor;this.editing&&n&&n.realign(!0)},onCellDblClick:function(n,t,i){this.startEditing(t,i)},onAutoEditClick:function(n,t){var i,r,u;n.button===0&&(i=this.view.findRowIndex(t),r=this.view.findCellIndex(t),i!==!1&&r!==!1&&(this.stopEditing(),this.selModel.getSelectedCell?(u=this.selModel.getSelectedCell(),u&&u[0]===i&&u[1]===r&&this.startEditing(i,r)):this.selModel.isSelected(i)&&this.startEditing(i,r)))},onEditComplete:function(n,t,i){var u,f,r;this.editing=!1;this.lastActiveEditor=this.activeEditor;this.activeEditor=null;u=n.record;f=this.colModel.getDataIndex(n.col);t=this.postEditValue(t,i,u,f);(this.forceValidation===!0||String(t)!==String(i))&&(r={grid:this,record:u,field:f,originalValue:i,value:t,row:n.row,column:n.col,cancel:!1},this.fireEvent("validateedit",r)===!1||r.cancel||String(t)===String(i)||(u.set(f,r.value),delete r.cancel,this.fireEvent("afteredit",r)));this.view.focusCell(n.row,n.col)},startEditing:function(n,t){var i,f;if(this.stopEditing(),this.colModel.isCellEditable(t,n)){this.view.ensureVisible(n,t,!0);var r=this.store.getAt(n),u=this.colModel.getDataIndex(t),e={grid:this,record:r,field:u,value:r.data[u],row:n,column:t,cancel:!1};if(this.fireEvent("beforeedit",e)!==!1&&!e.cancel){if(this.editing=!0,i=this.colModel.getCellEditor(t,n),!i)return;if(!i.rendered){i.parentEl=this.view.getEditorParent(i);i.on({scope:this,render:{fn:function(n){n.field.focus(!1,!0)},single:!0,scope:this},specialkey:function(n,t){this.getSelectionModel().onEditorKey(n,t)},complete:this.onEditComplete,canceledit:this.stopEditing.createDelegate(this,[!0])})}Ext.apply(i,{row:n,col:t,record:r});this.lastEdit={row:n,col:t};this.activeEditor=i;i.field.isXType("checkbox")&&(i.allowBlur=!1,this.setupCheckbox(i.field));i.selectSameEditor=this.activeEditor==this.lastActiveEditor;f=this.preEditValue(r,u);i.startEdit(this.view.getCell(n,t).firstChild,Ext.isDefined(f)?f:""),function(){delete i.selectSameEditor}.defer(50)}}},setupCheckbox:function(n){var t=this,i=function(){n.el.on("click",t.onCheckClick,t,{single:!0})};if(n.rendered)i();else n.on("render",i,null,{single:!0})},onCheckClick:function(){var n=this.activeEditor;n.allowBlur=!0;n.field.focus(!1,10)},preEditValue:function(n,t){var i=n.data[t];return this.autoEncode&&Ext.isString(i)?Ext.util.Format.htmlDecode(i):i},postEditValue:function(n){return this.autoEncode&&Ext.isString(n)?Ext.util.Format.htmlEncode(n):n},stopEditing:function(n){if(this.editing){var t=this.lastActiveEditor=this.activeEditor;t&&(t[n===!0?"cancelEdit":"completeEdit"](),this.view.focusCell(t.row,t.col));this.activeEditor=null}this.editing=!1}});Ext.reg("editorgrid",Ext.grid.EditorGridPanel);Ext.grid.GridEditor=function(n,t){Ext.grid.GridEditor.superclass.constructor.call(this,n,t);n.monitorTab=!1};Ext.extend(Ext.grid.GridEditor,Ext.Editor,{alignment:"tl-tl",autoSize:"width",hideEl:!1,cls:"x-small-editor x-grid-editor",shim:!1,shadow:!1});Ext.grid.PropertyRecord=Ext.data.Record.create([{name:"name",type:"string"},"value"]);Ext.grid.PropertyStore=Ext.extend(Ext.util.Observable,{constructor:function(n,t){this.grid=n;this.store=new Ext.data.Store({recordType:Ext.grid.PropertyRecord});this.store.on("update",this.onUpdate,this);t&&this.setSource(t);Ext.grid.PropertyStore.superclass.constructor.call(this)},setSource:function(n){var i,t;this.source=n;this.store.removeAll();i=[];for(t in n)this.isEditableValue(n[t])&&i.push(new Ext.grid.PropertyRecord({name:t,value:n[t]},t));this.store.loadRecords({records:i},{},!0)},onUpdate:function(n,t,i){if(i==Ext.data.Record.EDIT){var r=t.data.value,u=t.modified.value;this.grid.fireEvent("beforepropertychange",this.source,t.id,r,u)!==!1?(this.source[t.id]=r,t.commit(),this.grid.fireEvent("propertychange",this.source,t.id,r,u)):t.reject()}},getProperty:function(n){return this.store.getAt(n)},isEditableValue:function(n){return Ext.isPrimitive(n)||Ext.isDate(n)},setValue:function(n,t,i){var r=this.getRec(n);r?(r.set("value",t),this.source[n]=t):i&&(this.source[n]=t,r=new Ext.grid.PropertyRecord({name:n,value:t},n),this.store.add(r))},remove:function(n){var t=this.getRec(n);t&&(this.store.remove(t),delete this.source[n])},getRec:function(n){return this.store.getById(n)},getSource:function(){return this.source}});Ext.grid.PropertyColumnModel=Ext.extend(Ext.grid.ColumnModel,{nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",trueText:"true",falseText:"false",constructor:function(n,t){var i=Ext.grid,r=Ext.form,u;this.grid=n;i.PropertyColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:!0,dataIndex:"name",id:"name",menuDisabled:!0},{header:this.valueText,width:50,resizable:!1,dataIndex:"value",id:"value",menuDisabled:!0}]);this.store=t;u=new r.Field({autoCreate:{tag:"select",children:[{tag:"option",value:"true",html:this.trueText},{tag:"option",value:"false",html:this.falseText}]},getValue:function(){return this.el.dom.value=="true"}});this.editors={date:new i.GridEditor(new r.DateField({selectOnFocus:!0})),string:new i.GridEditor(new r.TextField({selectOnFocus:!0})),number:new i.GridEditor(new r.NumberField({selectOnFocus:!0,style:"text-align:left;"})),boolean:new i.GridEditor(u,{autoSize:"both"})};this.renderCellDelegate=this.renderCell.createDelegate(this);this.renderPropDelegate=this.renderProp.createDelegate(this)},renderDate:function(n){return n.dateFormat(this.dateFormat)},renderBool:function(n){return this[n?"trueText":"falseText"]},isCellEditable:function(n){return n==1},getRenderer:function(n){return n==1?this.renderCellDelegate:this.renderPropDelegate},renderProp:function(n){return this.getPropertyName(n)},renderCell:function(n,t,i){var u=this.grid.customRenderers[i.get("name")],r;return u?u.apply(this,arguments):(r=n,Ext.isDate(n)?r=this.renderDate(n):typeof n=="boolean"&&(r=this.renderBool(n)),Ext.util.Format.htmlEncode(r))},getPropertyName:function(n){var t=this.grid.propertyNames;return t&&t[n]?t[n]:n},getCellEditor:function(n,t){var r=this.store.getProperty(t),u=r.data.name,i=r.data.value;return this.grid.customEditors[u]?this.grid.customEditors[u]:Ext.isDate(i)?this.editors.date:typeof i=="number"?this.editors.number:typeof i=="boolean"?this.editors.boolean:this.editors.string},destroy:function(){Ext.grid.PropertyColumnModel.superclass.destroy.call(this);this.destroyEditors(this.editors);this.destroyEditors(this.grid.customEditors)},destroyEditors:function(n){for(var t in n)Ext.destroy(n[t])}});Ext.grid.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:!1,stripeRows:!1,trackMouseOver:!1,clicksToEdit:1,enableHdMenu:!1,viewConfig:{forceFit:!0},initComponent:function(){var n,t;this.customRenderers=this.customRenderers||{};this.customEditors=this.customEditors||{};this.lastEditRow=null;n=new Ext.grid.PropertyStore(this);this.propStore=n;t=new Ext.grid.PropertyColumnModel(this,n);n.store.sort("name","ASC");this.addEvents("beforepropertychange","propertychange");this.cm=t;this.ds=n.store;Ext.grid.PropertyGrid.superclass.initComponent.call(this);this.mon(this.selModel,"beforecellselect",function(n,t,i){if(i===0)return this.startEditing.defer(200,this,[t,1]),!1},this)},onRender:function(){Ext.grid.PropertyGrid.superclass.onRender.apply(this,arguments);this.getGridEl().addClass("x-props-grid")},afterRender:function(){Ext.grid.PropertyGrid.superclass.afterRender.apply(this,arguments);this.source&&this.setSource(this.source)},setSource:function(n){this.propStore.setSource(n)},getSource:function(){return this.propStore.getSource()},setProperty:function(n,t,i){this.propStore.setValue(n,t,i)},removeProperty:function(n){this.propStore.remove(n)}});Ext.reg("propertygrid",Ext.grid.PropertyGrid);Ext.grid.GroupingView=Ext.extend(Ext.grid.GridView,{groupByText:"Group By This Field",showGroupsText:"Show in Groups",hideGroupedColumn:!1,showGroupName:!0,startCollapsed:!1,enableGrouping:!0,enableGroupingMenu:!0,enableNoGroups:!0,emptyGroupText:"(None)",ignoreAdd:!1,groupTextTpl:"{text}",groupMode:"value",cancelEditOnToggle:!0,initTemplates:function(){Ext.grid.GroupingView.superclass.initTemplates.call(this);this.state={};var n=this.grid.getSelectionModel();n.on(n.selectRow?"beforerowselect":"beforecellselect",this.onBeforeRowSelect,this);this.startGroup||(this.startGroup=new Ext.XTemplate('<div id="{groupId}" class="x-grid-group {cls}">','<div id="{groupId}-hd" class="x-grid-group-hd" style="{style}"><div class="x-grid-group-title">',this.groupTextTpl,"<\/div><\/div>",'<div id="{groupId}-bd" class="x-grid-group-body">'));this.startGroup.compile();this.endGroup||(this.endGroup="<\/div><\/div>")},findGroup:function(n){return Ext.fly(n).up(".x-grid-group",this.mainBody.dom)},getGroups:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},onAdd:function(n,t,i){if(this.canGroup()&&!this.ignoreAdd){var r=this.getScrollState();this.fireEvent("beforerowsinserted",n,i,i+(t.length-1));this.refresh();this.restoreScroll(r);this.fireEvent("rowsinserted",n,i,i+(t.length-1))}else this.canGroup()||Ext.grid.GroupingView.superclass.onAdd.apply(this,arguments)},onRemove:function(n,t){Ext.grid.GroupingView.superclass.onRemove.apply(this,arguments);var i=document.getElementById(t._groupId);i&&i.childNodes[1].childNodes.length<1&&Ext.removeNode(i);this.applyEmptyText()},refreshRow:function(){this.ds.getCount()==1?this.refresh():(this.isUpdating=!0,Ext.grid.GroupingView.superclass.refreshRow.apply(this,arguments),this.isUpdating=!1)},beforeMenuShow:function(){var n,t=this.hmenu.items,i=this.cm.config[this.hdCtxIndex].groupable===!1;(n=t.get("groupBy"))&&n.setDisabled(i);(n=t.get("showGroups"))&&(n.setDisabled(i),n.setChecked(this.canGroup(),!0))},renderUI:function(){var n=Ext.grid.GroupingView.superclass.renderUI.call(this);if(this.enableGroupingMenu&&this.hmenu){this.hmenu.add("-",{itemId:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"});this.enableNoGroups&&this.hmenu.add({itemId:"showGroups",text:this.showGroupsText,checked:!0,checkHandler:this.onShowGroupsClick,scope:this});this.hmenu.on("beforeshow",this.beforeMenuShow,this)}return n},processEvent:function(n,t){var i;if(Ext.grid.GroupingView.superclass.processEvent.call(this,n,t),i=t.getTarget(".x-grid-group-hd",this.mainBody),i){var u=this.getGroupField(),f=this.getPrefix(u),r=i.id.substring(f.length),e=new RegExp("gp-"+Ext.escapeRe(u)+"--hd");r=r.substr(0,r.length-3);(r||e.test(i.id))&&this.grid.fireEvent("group"+n,this.grid,u,r,t);n=="mousedown"&&t.button==0&&this.toggleGroup(i.parentNode)}},onGroupByClick:function(){var n=this.grid;this.enableGrouping=!0;n.store.groupBy(this.cm.getDataIndex(this.hdCtxIndex));n.fireEvent("groupchange",n,n.store.getGroupState());this.beforeMenuShow();this.refresh()},onShowGroupsClick:function(n,t){this.enableGrouping=t;t?this.onGroupByClick():(this.grid.store.clearGrouping(),this.grid.fireEvent("groupchange",this,null))},toggleRowIndex:function(n,t){if(this.canGroup()){var i=this.getRow(n);i&&this.toggleGroup(this.findGroup(i),t)}},toggleGroup:function(n,t){var i=Ext.get(n),r=Ext.util.Format.htmlEncode(i.id);t=Ext.isDefined(t)?t:i.hasClass("x-grid-group-collapsed");this.state[r]!==t&&(this.cancelEditOnToggle!==!1&&this.grid.stopEditing(!0),this.state[r]=t,i[t?"removeClass":"addClass"]("x-grid-group-collapsed"))},toggleAllGroups:function(n){for(var i=this.getGroups(),t=0,r=i.length;t<r;t++)this.toggleGroup(i[t],n)},expandAllGroups:function(){this.toggleAllGroups(!0)},collapseAllGroups:function(){this.toggleAllGroups(!1)},getGroup:function(n,t,i,r,u,f){var o=this.cm.config[u],e=i?i.call(o.scope,n,{},t,r,u,f):String(n);return(e===""||e==="&#160;")&&(e=o.emptyGroupText||this.emptyGroupText),e},getGroupField:function(){return this.grid.store.getGroupState()},afterRender:function(){this.ds&&this.cm&&(Ext.grid.GroupingView.superclass.afterRender.call(this),this.grid.deferRowRender&&this.updateGroupWidths())},afterRenderUI:function(){if(Ext.grid.GroupingView.superclass.afterRenderUI.call(this),this.enableGroupingMenu&&this.hmenu){this.hmenu.add("-",{itemId:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"});this.enableNoGroups&&this.hmenu.add({itemId:"showGroups",text:this.showGroupsText,checked:!0,checkHandler:this.onShowGroupsClick,scope:this});this.hmenu.on("beforeshow",this.beforeMenuShow,this)}},renderRows:function(){var n=this.getGroupField(),i=!!n,r,t,u;return this.hideGroupedColumn&&(r=this.cm.findColumnIndex(n),t=Ext.isDefined(this.lastGroupField),!i&&t?(this.mainBody.update(""),this.cm.setHidden(this.cm.findColumnIndex(this.lastGroupField),!1),delete this.lastGroupField):i&&!t?(this.lastGroupField=n,this.cm.setHidden(r,!0)):i&&t&&n!==this.lastGroupField&&(this.mainBody.update(""),u=this.cm.findColumnIndex(this.lastGroupField),this.cm.setHidden(u,!1),this.lastGroupField=n,this.cm.setHidden(r,!0))),Ext.grid.GroupingView.superclass.renderRows.apply(this,arguments)},doRender:function(n,t,i,r,u,f){var h;if(t.length<1)return"";if(!this.canGroup()||this.isUpdating)return Ext.grid.GroupingView.superclass.doRender.apply(this,arguments);for(var y=this.getGroupField(),p=this.cm.findColumnIndex(y),e,d="width:"+this.getTotalWidth()+";",a=this.cm.config[p],g=a.groupRenderer||a.renderer,nt=this.showGroupName?(a.groupName||a.header)+": ":"",w=[],c,s,o=0,v=t.length;o<v;o++){var k=r+o,l=t[o],b=l.data[y];e=this.getGroup(b,l,g,k,p,i);c&&c.group==e?c.rs.push(l):(s=this.constructId(b,y,p),this.state[s]=!(Ext.isDefined(this.state[s])?!this.state[s]:this.startCollapsed),c={group:e,gvalue:b,text:nt+e,groupId:s,startRow:k,rs:[l],cls:this.state[s]?"":"x-grid-group-collapsed",style:d},w.push(c));l._groupId=s}for(h=[],o=0,v=w.length;o<v;o++)e=w[o],this.doGroupStart(h,e,n,i,u),h[h.length]=Ext.grid.GroupingView.superclass.doRender.call(this,n,e.rs,i,e.startRow,u,f),this.doGroupEnd(h,e,n,i,u);return h.join("")},getGroupId:function(n){var t=this.getGroupField();return this.constructId(n,t,this.cm.findColumnIndex(t))},constructId:function(n,t,i){var r=this.cm.config[i],u=r.groupRenderer||r.renderer,f=this.groupMode=="value"?n:this.getGroup(n,{data:{}},u,0,i,this.ds);return this.getPrefix(t)+Ext.util.Format.htmlEncode(f)},canGroup:function(){return this.enableGrouping&&!!this.getGroupField()},getPrefix:function(n){return this.grid.getGridEl().id+"-gp-"+n+"-"},doGroupStart:function(n,t){n[n.length]=this.startGroup.apply(t)},doGroupEnd:function(n){n[n.length]=this.endGroup},getRows:function(){if(!this.canGroup())return Ext.grid.GroupingView.superclass.getRows.call(this);for(var i=[],u=this.getGroups(),n,r=0,e=u.length,t,f;r<e;++r)if(n=u[r].childNodes[1],n)for(n=n.childNodes,t=0,f=n.length;t<f;++t)i[i.length]=n[t];return i},updateGroupWidths:function(){var i,t,n,r;if(this.canGroup()&&this.hasRows())for(i=Math.max(this.cm.getTotalWidth(),this.el.dom.offsetWidth-this.getScrollOffset())+"px",t=this.getGroups(),n=0,r=t.length;n<r;n++)t[n].firstChild.style.width=i},onColumnWidthUpdated:function(n,t,i){Ext.grid.GroupingView.superclass.onColumnWidthUpdated.call(this,n,t,i);this.updateGroupWidths()},onAllColumnWidthsUpdated:function(n,t){Ext.grid.GroupingView.superclass.onAllColumnWidthsUpdated.call(this,n,t);this.updateGroupWidths()},onColumnHiddenUpdated:function(n,t,i){Ext.grid.GroupingView.superclass.onColumnHiddenUpdated.call(this,n,t,i);this.updateGroupWidths()},onLayout:function(){this.updateGroupWidths()},onBeforeRowSelect:function(n,t){this.toggleRowIndex(t,!0)}});Ext.grid.GroupingView.GROUP_ID=1e3;Ext.ns("Ext.ux.layout");Ext.ux.layout.RowLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"row",allowContainerRemove:!1,isValidParent:function(n){return this.innerCt&&n.getPositionEl().dom.parentNode==this.innerCt.dom},getLayoutTargetSize:function(){var t=this.container.getLayoutTarget(),n;return t&&(n=t.getViewSize(),Ext.isIE&&Ext.isStrict&&n.height==0&&(n=t.getStyleSize()),n.width-=t.getPadding("lr"),n.height-=t.getPadding("tb")),n},renderAll:function(n,t){this.innerCt||(this.innerCt=t.createChild({cls:"x-column-inner"}),this.innerCt.createChild({cls:"x-clear"}));Ext.layout.ColumnLayout.superclass.renderAll.call(this,n,this.innerCt)},onLayout:function(n,t){var o=n.items.items,h=o.length,r,f,i,c=[],e,s,u,l;if(this.renderAll(n,t),e=this.getLayoutTargetSize(),!(e.width<1)||!(e.height<1)){for(s=e.height,u=s,this.innerCt.setSize({height:s}),i=0;i<h;i++)r=o[i],f=r.getPositionEl().getMargins("tb"),c[i]=f,r.rowHeight||(u-=r.getHeight()+f);for(u=u<0?0:u,i=0;i<h;i++)r=o[i],f=c[i],r.rowHeight&&r.setSize({height:Math.floor(r.rowHeight*u)-f});if(Ext.isIE&&(i=t.getStyle("overflow")&&i!="hidden"&&!this.adjustmentPass)&&(l=this.getLayoutTargetSize(),l.width!=e.width)){this.adjustmentPass=!0;this.onLayout(n,t)}delete this.adjustmentPass}}});Ext.Container.LAYOUTS["ux.row"]=Ext.ux.layout.RowLayout;Ext.ux.TabCloseMenu=Ext.extend(Object,{closeTabText:"Close Tab",closeOtherTabsText:"Close Other Tabs",showCloseAll:!0,closeAllTabsText:"Close All Tabs",constructor:function(n){Ext.apply(this,n||{})},init:function(n){this.tabs=n;n.on({scope:this,contextmenu:this.onContextMenu,destroy:this.destroy})},destroy:function(){Ext.destroy(this.menu);delete this.menu;delete this.tabs;delete this.active},onContextMenu:function(n,t,i){this.active=t;var r=this.createMenu(),u=!0,f=!0,e=r.getComponent("closeall");r.getComponent("close").setDisabled(!t.closable);n.items.each(function(){if(this.closable&&(u=!1,this!=t))return f=!1,!1});r.getComponent("closeothers").setDisabled(f);e&&e.setDisabled(u);i.stopEvent();r.showAt(i.getPoint())},createMenu:function(){if(!this.menu){var n=[{itemId:"close",text:this.closeTabText,scope:this,handler:this.onClose}];this.showCloseAll&&n.push("-");n.push({itemId:"closeothers",text:this.closeOtherTabsText,scope:this,handler:this.onCloseOthers});this.showCloseAll&&n.push({itemId:"closeall",text:this.closeAllTabsText,scope:this,handler:this.onCloseAll});this.menu=new Ext.menu.Menu({items:n})}return this.menu},onClose:function(){this.tabs.remove(this.active)},onCloseOthers:function(){this.doClose(!0)},onCloseAll:function(){this.doClose(!1)},doClose:function(n){var t=[];this.tabs.items.each(function(i){i.closable&&(n&&i==this.active||t.push(i))},this);Ext.each(t,function(n){this.tabs.remove(n)},this)}});Ext.preg("tabclosemenu",Ext.ux.TabCloseMenu);Ext.ns("Ext.ux.form");Ext.ux.form.FileUploadField=Ext.extend(Ext.form.TextField,{buttonText:"Browse...",buttonOnly:!1,buttonOffset:3,readOnly:!0,autoSize:Ext.emptyFn,initComponent:function(){Ext.ux.form.FileUploadField.superclass.initComponent.call(this);this.addEvents("fileselected")},onRender:function(n,t){Ext.ux.form.FileUploadField.superclass.onRender.call(this,n,t);this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-file-wrap"});this.el.addClass("x-form-file-text");this.el.dom.removeAttribute("name");this.createFileInput();var i=Ext.applyIf(this.buttonCfg||{},{text:this.buttonText});this.button=new Ext.Button(Ext.apply(i,{renderTo:this.wrap,cls:"x-form-file-btn"+(i.iconCls?" x-btn-icon":"")}));this.buttonOnly&&(this.el.hide(),this.wrap.setWidth(this.button.getEl().getWidth()));this.bindListeners();this.resizeEl=this.positionEl=this.wrap},bindListeners:function(){this.fileInput.on({scope:this,mouseenter:function(){this.button.addClass(["x-btn-over","x-btn-focus"])},mouseleave:function(){this.button.removeClass(["x-btn-over","x-btn-focus","x-btn-click"])},mousedown:function(){this.button.addClass("x-btn-click")},mouseup:function(){this.button.removeClass(["x-btn-over","x-btn-focus","x-btn-click"])},change:function(){var n=this.fileInput.dom.value;this.setValue(n);this.fireEvent("fileselected",this,n)}})},createFileInput:function(){this.fileInput=this.wrap.createChild({id:this.getFileInputId(),name:this.name||this.getId(),cls:"x-form-file",tag:"input",type:"file",size:1})},reset:function(){this.rendered&&(this.fileInput.remove(),this.createFileInput(),this.bindListeners());Ext.ux.form.FileUploadField.superclass.reset.call(this)},getFileInputId:function(){return this.id+"-file"},onResize:function(n,t){if(Ext.ux.form.FileUploadField.superclass.onResize.call(this,n,t),this.wrap.setWidth(n),!this.buttonOnly){var n=this.wrap.getWidth()-this.button.getEl().getWidth()-this.buttonOffset;this.el.setWidth(n)}},onDestroy:function(){Ext.ux.form.FileUploadField.superclass.onDestroy.call(this);Ext.destroy(this.fileInput,this.button,this.wrap)},onDisable:function(){Ext.ux.form.FileUploadField.superclass.onDisable.call(this);this.doDisable(!0)},onEnable:function(){Ext.ux.form.FileUploadField.superclass.onEnable.call(this);this.doDisable(!1)},doDisable:function(n){this.fileInput.dom.disabled=n;this.button.setDisabled(n)},preFocus:Ext.emptyFn,alignErrorIcon:function(){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])}});Ext.reg("fileuploadfield",Ext.ux.form.FileUploadField);Ext.form.FileUploadField=Ext.ux.form.FileUploadField;Ext.ns("Ext.ux.grid");Ext.ux.grid.RowExpander=Ext.extend(Ext.util.Observable,{expandOnEnter:!0,expandOnDblClick:!0,header:"",width:20,sortable:!1,fixed:!0,hideable:!1,menuDisabled:!0,dataIndex:"",id:"expander",lazyRender:!0,enableCaching:!0,constructor:function(n){Ext.apply(this,n);this.addEvents({beforeexpand:!0,expand:!0,beforecollapse:!0,collapse:!0});Ext.ux.grid.RowExpander.superclass.constructor.call(this);this.tpl&&(typeof this.tpl=="string"&&(this.tpl=new Ext.Template(this.tpl)),this.tpl.compile());this.state={};this.bodyContent={}},getRowClass:function(n,t,i){i.cols=i.cols-1;var r=this.bodyContent[n.id];return r||this.lazyRender||(r=this.getBodyContent(n,t)),r&&(i.body=r),this.state[n.id]?"x-grid3-row-expanded":"x-grid3-row-collapsed"},init:function(n){this.grid=n;var t=n.getView();t.getRowClass=this.getRowClass.createDelegate(this);t.enableRowBody=!0;n.on("render",this.onRender,this);n.on("destroy",this.onDestroy,this)},onRender:function(){var n=this.grid,t=n.getView().mainBody;t.on("mousedown",this.onMouseDown,this,{delegate:".x-grid3-row-expander"});if(this.expandOnEnter&&(this.keyNav=new Ext.KeyNav(this.grid.getGridEl(),{enter:this.onEnter,scope:this})),this.expandOnDblClick)n.on("rowdblclick",this.onRowDblClick,this)},onDestroy:function(){this.keyNav&&(this.keyNav.disable(),delete this.keyNav);var n=this.grid.getView().mainBody;n&&n.un("mousedown",this.onMouseDown,this)},onRowDblClick:function(n,t){this.toggleRow(t)},onEnter:function(){for(var t=this.grid,f=t.getSelectionModel(),i=f.getSelections(),u,n=0,r=i.length;n<r;n++)u=t.getStore().indexOf(i[n]),this.toggleRow(u)},getBodyContent:function(n){if(!this.enableCaching)return this.tpl.apply(n.data);var t=this.bodyContent[n.id];return t||(t=this.tpl.apply(n.data),this.bodyContent[n.id]=t),t},onMouseDown:function(n){n.stopEvent();var t=n.getTarget(".x-grid3-row");this.toggleRow(t)},renderer:function(n,t){return t.cellAttr='rowspan="2"','<div class="x-grid3-row-expander">&#160;<\/div>'},beforeExpand:function(n,t,i){return this.fireEvent("beforeexpand",this,n,t,i)!==!1?(this.tpl&&this.lazyRender&&(t.innerHTML=this.getBodyContent(n,i)),!0):!1},toggleRow:function(n){typeof n=="number"&&(n=this.grid.view.getRow(n));this[Ext.fly(n).hasClass("x-grid3-row-collapsed")?"expandRow":"collapseRow"](n)},expandRow:function(n){typeof n=="number"&&(n=this.grid.view.getRow(n));var t=this.grid.store.getAt(n.rowIndex),i=Ext.DomQuery.selectNode("tr:nth(2) div.x-grid3-row-body",n);this.beforeExpand(t,i,n.rowIndex)&&(this.state[t.id]=!0,Ext.fly(n).replaceClass("x-grid3-row-collapsed","x-grid3-row-expanded"),this.fireEvent("expand",this,t,i,n.rowIndex))},collapseRow:function(n){typeof n=="number"&&(n=this.grid.view.getRow(n));var t=this.grid.store.getAt(n.rowIndex),i=Ext.fly(n).child("tr:nth(1) div.x-grid3-row-body",!0);this.fireEvent("beforecollapse",this,t,i,n.rowIndex)!==!1&&(this.state[t.id]=!1,Ext.fly(n).replaceClass("x-grid3-row-expanded","x-grid3-row-collapsed"),this.fireEvent("collapse",this,t,i,n.rowIndex))}});Ext.preg("rowexpander",Ext.ux.grid.RowExpander);Ext.grid.RowExpander=Ext.ux.grid.RowExpander;Ext.ns("Ext.ux.grid");Ext.ux.grid.RowEditor=Ext.extend(Ext.Panel,{floating:!0,shadow:!1,layout:"hbox",cls:"x-small-editor",buttonAlign:"center",baseCls:"x-row-editor",elements:"header,footer,body",frameWidth:5,buttonPad:3,clicksToEdit:"auto",monitorValid:!0,focusDelay:250,errorSummary:!0,saveText:"Save",cancelText:"Cancel",commitChangesText:"You need to commit or cancel your changes",errorText:"Errors",defaults:{normalWidth:!0},initComponent:function(){Ext.ux.grid.RowEditor.superclass.initComponent.call(this);this.addEvents("beforeedit","canceledit","validateedit","afteredit")},init:function(n){if(this.grid=n,this.ownerCt=n,this.clicksToEdit===2)n.on("rowdblclick",this.onRowDblClick,this);else{n.on("rowclick",this.onRowClick,this);if(Ext.isIE)n.on("rowdblclick",this.onRowDblClick,this)}n.getStore().on("remove",function(){this.stopEditing(!1)},this);n.on({scope:this,keydown:this.onGridKey,columnresize:this.verifyLayout,columnmove:this.refreshFields,reconfigure:this.refreshFields,beforedestroy:this.beforedestroy,destroy:this.destroy,bodyscroll:{buffer:250,fn:this.positionButtons}});n.getColumnModel().on("hiddenchange",this.verifyLayout,this,{delay:1});n.getView().on("refresh",this.stopEditing.createDelegate(this,[]))},beforedestroy:function(){this.stopMonitoring();this.grid.getStore().un("remove",this.onStoreRemove,this);this.stopEditing(!1);Ext.destroy(this.btns,this.tooltip)},refreshFields:function(){this.initFields();this.verifyLayout()},isDirty:function(){var n;return this.items.each(function(t){if(String(this.values[t.id])!==String(t.getValue()))return n=!0,!1},this),n},startEditing:function(n,t){var c,e,l,o,r,i,a;if(this.editing&&this.isDirty()){this.showTooltip(this.commitChangesText);return}if(Ext.isObject(n)&&(n=this.grid.getStore().indexOf(n)),this.fireEvent("beforeedit",this,n)!==!1){this.editing=!0;var u=this.grid,s=u.getView(),f=s.getRow(n),h=u.store.getAt(n);for(this.record=h,this.rowIndex=n,this.values={},this.rendered||this.render(s.getEditorParent()),c=Ext.fly(f).getWidth(),this.setSize(c),this.initialized||this.initFields(),e=u.getColumnModel(),l=this.items.items,i=0,a=e.getColumnCount();i<a;i++)r=this.preEditValue(h,e.getDataIndex(i)),o=l[i],o.setValue(r),this.values[o.id]=Ext.isEmpty(r)?"":r;this.verifyLayout(!0);this.isVisible()?this.el.setXY(Ext.fly(f).getXY(),{duration:.15}):this.setPagePosition(Ext.fly(f).getXY());this.isVisible()||this.show().doLayout();t!==!1&&this.doFocus.defer(this.focusDelay,this)}},stopEditing:function(n){var i,h,r,e,o;if(this.editing=!1,this.isVisible()){if(n===!1||!this.isValid()){this.hide();this.fireEvent("canceledit",this,n===!1);return}var u={},t=this.record,s=!1,f=this.grid.colModel,c=this.items.items;for(i=0,h=f.getColumnCount();i<h;i++)f.isHidden(i)||(r=f.getDataIndex(i),Ext.isEmpty(r)||(e=t.data[r],o=this.postEditValue(c[i].getValue(),e,t,r),String(e)!==String(o)&&(u[r]=o,s=!0)));s&&this.fireEvent("validateedit",this,u,t,this.rowIndex)!==!1?(t.beginEdit(),Ext.iterate(u,function(n,i){t.set(n,i)}),t.endEdit(),this.fireEvent("afteredit",this,u,t,this.rowIndex)):this.fireEvent("canceledit",this,!1);this.hide()}},verifyLayout:function(n){var u,i,r,t,f,e;if(this.el&&(this.isVisible()||n===!0)){for(u=this.grid.getView().getRow(this.rowIndex),this.setSize(Ext.fly(u).getWidth(),Ext.isIE?Ext.fly(u).getHeight()+9:undefined),i=this.grid.colModel,r=this.items.items,t=0,f=i.getColumnCount();t<f;t++)i.isHidden(t)?r[t].hide():(e=0,e+=t===f-1?3:1,r[t].show(),r[t].setWidth(i.getColumnWidth(t)-e));this.doLayout();this.positionButtons()}},slideHide:function(){this.hide()},initFields:function(){var u=this.grid.getColumnModel(),i=Ext.layout.ContainerLayout.prototype.parseMargins,t,f,r,n;for(this.removeAll(!1),t=0,f=u.getColumnCount();t<f;t++){if(r=u.getColumnAt(t),n=r.getEditor(),n||(n=r.displayEditor||new Ext.form.DisplayField),n.margins=t==0?i("0 1 2 1"):t==f-1?i("0 0 2 1"):Ext.isIE?i("0 0 2 0"):i("0 1 2 0"),n.setWidth(u.getColumnWidth(t)),n.column=r,n.ownerCt!==this){n.on("focus",this.ensureVisible,this);n.on("specialkey",this.onKey,this)}this.insert(t,n)}this.initialized=!0},onKey:function(n,t){t.getKey()===t.ENTER&&(this.stopEditing(!0),t.stopPropagation())},onGridKey:function(n){var t,i;n.getKey()!==n.ENTER||this.isVisible()||(t=this.grid.getSelectionModel().getSelected(),t&&(i=this.grid.store.indexOf(t),this.startEditing(i),n.stopPropagation()))},ensureVisible:function(n){this.isVisible()&&this.grid.getView().ensureVisible(this.rowIndex,this.grid.colModel.getIndexById(n.column.id),!0)},onRowClick:function(n,t,i){if(this.clicksToEdit=="auto"){var r=this.lastClickIndex;if(this.lastClickIndex=t,r!=t&&!this.isVisible())return}this.startEditing(t,!1);this.doFocus.defer(this.focusDelay,this,[i.getPoint()])},onRowDblClick:function(n,t,i){this.startEditing(t,!1);this.doFocus.defer(this.focusDelay,this,[i.getPoint()])},onRender:function(){Ext.ux.grid.RowEditor.superclass.onRender.apply(this,arguments);this.el.swallowEvent(["keydown","keyup","keypress"]);this.btns=new Ext.Panel({baseCls:"x-plain",cls:"x-btns",elements:"body",layout:"table",width:this.minButtonWidth*2+this.frameWidth*2+this.buttonPad*4,items:[{ref:"saveBtn",itemId:"saveBtn",xtype:"button",text:this.saveText,width:this.minButtonWidth,handler:this.stopEditing.createDelegate(this,[!0])},{xtype:"button",text:this.cancelText,width:this.minButtonWidth,handler:this.stopEditing.createDelegate(this,[!1])}]});this.btns.render(this.bwrap)},afterRender:function(){Ext.ux.grid.RowEditor.superclass.afterRender.apply(this,arguments);this.positionButtons();this.monitorValid&&this.startMonitoring()},onShow:function(){this.monitorValid&&this.startMonitoring();Ext.ux.grid.RowEditor.superclass.onShow.apply(this,arguments)},onHide:function(){Ext.ux.grid.RowEditor.superclass.onHide.apply(this,arguments);this.stopMonitoring();this.grid.getView().focusRow(this.rowIndex)},positionButtons:function(){if(this.btns){var n=this.grid,t=this.el.dom.clientHeight,i=n.getView(),r=i.scroller.dom.scrollLeft,u=this.btns.getWidth(),f=Math.min(n.getWidth(),n.getColumnModel().getTotalWidth());this.btns.el.shift({left:f/2-u/2+r,top:t-2,stopFx:!0,duration:.2})}},preEditValue:function(n,t){var i=n.data[t];return this.autoEncode&&typeof i=="string"?Ext.util.Format.htmlDecode(i):i},postEditValue:function(n){return this.autoEncode&&typeof n=="string"?Ext.util.Format.htmlEncode(n):n},doFocus:function(n){var r,u,t,i,f;if(this.isVisible())for(r=0,u=this.grid.getColumnModel(),n&&(r=this.getTargetColumnIndex(n)),i=r||0,f=u.getColumnCount();i<f;i++)if(t=u.getColumnAt(i),!t.hidden&&t.getEditor()){t.getEditor().focus();break}},getTargetColumnIndex:function(n){for(var i=this.grid,e=i.view,o=n.left,r=i.colModel.config,t=0,u=!1,f,s=r.length;f=r[t];t++)if(!f.hidden&&Ext.fly(e.getHeaderCell(t)).getRegion().right>=o){u=t;break}return u},startMonitoring:function(){!this.bound&&this.monitorValid&&(this.bound=!0,Ext.TaskMgr.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this}))},stopMonitoring:function(){this.bound=!1;this.tooltip&&this.tooltip.hide()},isValid:function(){var n=!0;return this.items.each(function(t){if(!t.isValid(!0))return n=!1,!1}),n},bindHandler:function(){if(!this.bound)return!1;var n=this.isValid();!n&&this.errorSummary&&this.showTooltip(this.getErrorText().join(""));this.btns.saveBtn.setDisabled(!n);this.fireEvent("validation",this,n)},lastVisibleColumn:function(){for(var n=this.items.getCount()-1,t;n>=0;n--)if(t=this.items.items[n],!t.hidden)return t},showTooltip:function(n){var t=this.tooltip;t||(t=this.tooltip=new Ext.ToolTip({maxWidth:600,cls:"errorTip",width:300,title:this.errorText,autoHide:!1,anchor:"left",anchorToTarget:!0,mouseOffset:[40,0]}));var i=this.grid.getView(),r=parseInt(this.el.dom.style.top,10),u=i.scroller.dom.scrollTop,f=this.el.getHeight();r+f>=u?(t.initTarget(this.lastVisibleColumn().getEl()),t.rendered||(t.show(),t.hide()),t.body.update(n),t.doAutoWidth(20),t.show()):t.rendered&&t.hide()},getErrorText:function(){var n=["<ul>"];return this.items.each(function(t){t.isValid(!0)||n.push("<li>",t.getActiveError(),"<\/li>")}),n.push("<\/ul>"),n}});Ext.preg("roweditor",Ext.ux.grid.RowEditor);Ext.ns("Ext.ux.grid");Ext.ux.grid.ColumnHeaderGroup=Ext.extend(Ext.util.Observable,{constructor:function(n){this.config=n},init:function(n){Ext.applyIf(n.colModel,this.config);Ext.apply(n.getView(),this.viewConfig)},viewConfig:{initTemplates:function(){this.constructor.prototype.initTemplates.apply(this,arguments);var n=this.templates||{};n.gcell||(n.gcell=new Ext.XTemplate('<td class="x-grid3-hd x-grid3-gcell x-grid3-td-{id} ux-grid-hd-group-row-{row} {cls}" style="{style}">','<div {tooltip} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"><\/a>':"","{value}<\/div><\/td>"));this.templates=n;this.hrowRe=new RegExp("ux-grid-hd-group-row-(\\d+)","")},renderHeaders:function(){for(var s=this.templates,r=[],h=this.cm,c=h.rows,v="width:"+this.getTotalWidth()+";",u,f,n,a,o,t=0,l=c.length;t<l;t++){u=c[t];f=[];for(var i=0,e=0,y=u.length;i<y;i++)n=u[i],n.colspan=n.colspan||1,a=this.getColumnId(n.dataIndex?h.findColumnIndex(n.dataIndex):e),o=Ext.ux.grid.ColumnHeaderGroup.prototype.getGroupStyle.call(this,n,e),f[i]=s.gcell.apply({cls:"ux-grid-hd-group-cell",id:a,row:t,style:"width:"+o.width+";"+(o.hidden?"display:none;":"")+(n.align?"text-align:"+n.align+";":""),tooltip:n.tooltip?(Ext.QuickTips.isEnabled()?"ext:qtip":"title")+'="'+n.tooltip+'"':"",istyle:n.align=="right"?"padding-right:16px":"",btn:this.grid.enableHdMenu&&n.header,value:n.header||"&nbsp;"}),e+=n.colspan;r[t]=s.header.apply({tstyle:v,cells:f.join("")})}return r.push(this.constructor.prototype.renderHeaders.apply(this,arguments)),r.join("")},onColumnWidthUpdated:function(){this.constructor.prototype.onColumnWidthUpdated.apply(this,arguments);Ext.ux.grid.ColumnHeaderGroup.prototype.updateGroupStyles.call(this)},onAllColumnWidthsUpdated:function(){this.constructor.prototype.onAllColumnWidthsUpdated.apply(this,arguments);Ext.ux.grid.ColumnHeaderGroup.prototype.updateGroupStyles.call(this)},onColumnHiddenUpdated:function(){this.constructor.prototype.onColumnHiddenUpdated.apply(this,arguments);Ext.ux.grid.ColumnHeaderGroup.prototype.updateGroupStyles.call(this)},getHeaderCell:function(n){return this.mainHd.query(this.cellSelector)[n]},findHeaderCell:function(n){return n?this.fly(n).findParent("td.x-grid3-hd",this.cellSelectorDepth):!1},findHeaderIndex:function(n){var t=this.findHeaderCell(n);return t?this.getCellIndex(t):!1},updateSortIcon:function(n,t){var i=this.sortClasses,r=this.mainHd.select(this.cellSelector).removeClass(i);r.item(n).addClass(i[t=="DESC"?1:0])},handleHdDown:function(n,t){var e=Ext.get(t),i,r,u,f;if(e.hasClass("x-grid3-hd-btn")){n.stopEvent();i=this.findHeaderCell(t);Ext.fly(i).addClass("x-grid3-hd-menu-open");r=this.getCellIndex(i);this.hdCtxIndex=r;u=this.hmenu.items;f=this.cm;u.get("asc").setDisabled(!f.isSortable(r));u.get("desc").setDisabled(!f.isSortable(r));this.hmenu.on("hide",function(){Ext.fly(i).removeClass("x-grid3-hd-menu-open")},this,{single:!0});this.hmenu.show(t,"tl-bl?")}else(e.hasClass("ux-grid-hd-group-cell")||Ext.fly(t).up(".ux-grid-hd-group-cell"))&&n.stopEvent()},handleHdMove:function(n){var t=this.findHeaderCell(this.activeHdRef);if(t&&!this.headersDisabled&&!Ext.fly(t).hasClass("ux-grid-hd-group-cell")){var r=this.splitHandleWidth||5,u=this.activeHdRegion,f=n.getPageX(),e=t.style,i="";this.grid.enableColumnResize!==!1&&(f-u.left<=r&&this.cm.isResizable(this.activeHdIndex-1)?i=Ext.isAir?"move":Ext.isWebKit?"e-resize":"col-resize":u.right-f<=(this.activeHdBtn?2:r)&&this.cm.isResizable(this.activeHdIndex)&&(i=Ext.isAir?"move":Ext.isWebKit?"w-resize":"col-resize"));e.cursor=i}},handleHdOver:function(n,t){var r=this.findHeaderCell(t),i;r&&!this.headersDisabled&&(this.activeHdRef=t,this.activeHdIndex=this.getCellIndex(r),i=this.fly(r),this.activeHdRegion=i.getRegion(),this.cm.isMenuDisabled(this.activeHdIndex)||i.hasClass("ux-grid-hd-group-cell")||(i.addClass("x-grid3-hd-over"),this.activeHdBtn=i.child(".x-grid3-hd-btn"),this.activeHdBtn&&(this.activeHdBtn.dom.style.height=r.firstChild.offsetHeight-1+"px")))},handleHdOut:function(n,t){var i=this.findHeaderCell(t);!i||Ext.isIE&&n.within(i,!0)||(this.activeHdRef=null,this.fly(i).removeClass("x-grid3-hd-over"),i.style.cursor="")},handleHdMenuClick:function(n){var o=this.hdCtxIndex,i=this.cm,a=this.ds,u=n.getItemId(),h,t,r,c,e,l,p;switch(u){case"asc":a.sort(i.getDataIndex(o),"ASC");break;case"desc":a.sort(i.getDataIndex(o),"DESC");break;default:if(u.substr(0,6)=="group-"){var t=u.split("-"),w=parseInt(t[1],10),v=parseInt(t[2],10),y=this.cm.rows[w],s,f=0;for(t=0,r=y.length;t<r;t++){if(s=y[t],v>=f&&v<f+s.colspan)break;f+=s.colspan}if(n.checked){for(h=i.getColumnsBy(this.isHideableColumn,this).length,t=f,r=f+s.colspan;t<r;t++)i.isHidden(t)||h--;if(h<1)return this.onDenyColumnHide(),!1}for(t=f,r=f+s.colspan;t<r;t++)i.config[t].fixed!==!0&&i.config[t].hideable!==!1&&i.setHidden(t,n.checked)}else if(u.substr(0,4)=="col-"&&(o=i.getIndexById(u.substr(4)),o!=-1)){if(n.checked&&i.getColumnsBy(this.isHideableColumn,this).length<=1)return this.onDenyColumnHide(),!1;i.setHidden(o,n.checked)}if(u.substr(0,6)=="group-"||u.substr(0,4)=="col-"){for(n.checked=!n.checked,n.menu&&(c=function(t){t.items.each(function(t){t.disabled||(t.setChecked(n.checked,!1),t.menu&&c(t.menu))})},c(n.menu)),e=n;e=e.parentMenu;){if(!e.parentMenu||!(l=e.parentMenu.items.get(e.getItemId()))||!l.setChecked)break;p=e.items.findIndexBy(function(n){return n.checked})>=0;l.setChecked(p,!0)}n.checked=!n.checked}}return!0},beforeColMenuShow:function(){var t=this.cm,y=this.cm.rows,n,p,f,w,c,i,r,s,b,a,v,o,d;for(this.colMenu.removeAll(),n=0,p=t.getColumnCount();n<p;n++){var u=this.colMenu,g=t.getColumnHeader(n),h=[];if(t.config[n].fixed!==!0&&t.config[n].hideable!==!1){for(f=0,w=y.length;f<w;f++){for(c=y[f],r=0,s=0,b=c.length;s<b;s++){if(i=c[s],n>=r&&n<r+i.colspan)break;r+=i.colspan}if(i&&i.header)if(t.hierarchicalColMenu){var l="group-"+f+"-"+r,k=u.items?u.getComponent(l):null,e=k?k.menu:null;if(!e){e=new Ext.menu.Menu({itemId:l});e.on("itemclick",this.handleHdMenuClick,this);for(a=!1,v=!0,o=r,d=r+i.colspan;o<d;o++)t.isHidden(o)||(a=!0),t.config[o].hideable!==!1&&(v=!1);u.add({itemId:l,text:i.header,menu:e,hideOnClick:!1,checked:a,disabled:v})}u=e}else h.push(i.header)}h.push(g);u.add(new Ext.menu.CheckItem({itemId:"col-"+t.getColumnId(n),text:h.join(" "),checked:!t.isHidden(n),hideOnClick:!1,disabled:t.config[n].hideable===!1}))}}},afterRenderUI:function(){this.constructor.prototype.afterRenderUI.apply(this,arguments);Ext.apply(this.columnDrop,Ext.ux.grid.ColumnHeaderGroup.prototype.columnDropConfig);Ext.apply(this.splitZone,Ext.ux.grid.ColumnHeaderGroup.prototype.splitZoneConfig)}},splitZoneConfig:{allowHeaderDrag:function(n){return!n.getTarget(null,null,!0).hasClass("ux-grid-hd-group-cell")}},columnDropConfig:{getTargetFromEvent:function(n){var t=Ext.lib.Event.getTarget(n);return this.view.findHeaderCell(t)},positionIndicator:function(n,t,i){var r=Ext.ux.grid.ColumnHeaderGroup.prototype.getDragDropData.call(this,n,t,i),u;return r===!1?!1:(u=r.px+this.proxyOffsets[0],this.proxyTop.setLeftTop(u,r.r.top+this.proxyOffsets[1]),this.proxyTop.show(),this.proxyBottom.setLeftTop(u,r.r.bottom),this.proxyBottom.show(),r.pt)},onNodeDrop:function(n,t,i,r){var b=r.header,u,o,d,e,f,h,tt,c,p,w;if(b!=n){if(u=Ext.ux.grid.ColumnHeaderGroup.prototype.getDragDropData.call(this,b,n,i),u===!1)return!1;var k=this.grid.colModel,l=u.oldIndex<u.newIndex,a=k.rows;for(o=u.row,d=a.length;o<d;o++){var s=a[o],g=s.length,v=0,y=1,nt=g;for(e=0,f=0;e<g;e++)h=s[e],u.oldIndex>=f&&u.oldIndex<f+h.colspan&&(v=e),u.oldIndex+u.colspan-1>=f&&u.oldIndex+u.colspan-1<f+h.colspan&&(y=e-v+1),u.newIndex>=f&&u.newIndex<f+h.colspan&&(nt=e),f+=h.colspan;tt=s.splice(v,y);a[o]=s.splice(0,nt-(l?y:0)).concat(tt).concat(s)}for(c=0;c<u.colspan;c++)p=u.oldIndex+(l?0:c),w=u.newIndex+(l?-1:c),k.moveColumn(p,w),this.grid.fireEvent("columnmove",p,w);return!0}return!1}},getGroupStyle:function(n,t){for(var r=0,f=!0,u,i=t,e=t+n.colspan;i<e;i++)this.cm.isHidden(i)||(u=this.cm.getColumnWidth(i),typeof u=="number"&&(r+=u),f=!1);return{width:(Ext.isBorderBox||Ext.isWebKit&&!Ext.isSafari2?r:Math.max(r-this.borderWidth,0))+"px",hidden:f}},updateGroupStyles:function(n){for(var e=this.mainHd.query(".x-grid3-header-offset > table"),h=this.getTotalWidth(),s=this.cm.rows,u,i,r,f,o,t=0;t<e.length;t++)if(e[t].style.width=h,t<s.length)for(u=e[t].firstChild.firstChild.childNodes,i=0,r=0;i<u.length;i++)f=s[t][i],(typeof n!="number"||n>=r&&n<r+f.colspan)&&(o=Ext.ux.grid.ColumnHeaderGroup.prototype.getGroupStyle.call(this,f,r),u[i].style.width=o.width,u[i].style.display=o.hidden?"none":""),r+=f.colspan},getGroupRowIndex:function(n){if(n){var t=n.className.match(this.hrowRe);if(t&&t[1])return parseInt(t[1],10)}return this.cm.rows.length},getGroupSpan:function(n,t){var r,u;if(n<0)return{col:0,colspan:this.cm.getColumnCount()};if(r=this.cm.rows[n],r){for(var f=0,i=0,e=r.length;f<e;f++){if(u=r[f],t>=i&&t<i+u.colspan)return{col:i,colspan:u.colspan};i+=u.colspan}return{col:i,colspan:0}}return{col:t,colspan:1}},getDragDropData:function(n,t,i){var f,r,h;if(n.parentNode!=t.parentNode)return!1;var a=this.grid.colModel,v=Ext.lib.Event.getPageX(i),u=Ext.lib.Dom.getRegion(t.firstChild),c,o;if(u.right-v<=(u.right-u.left)/2?(c=u.right+this.view.borderWidth,o="after"):(c=u.left,o="before"),f=this.view.getCellIndex(n),r=this.view.getCellIndex(t),a.isFixed(r))return!1;var s=Ext.ux.grid.ColumnHeaderGroup.prototype.getGroupRowIndex.call(this.view,n),e=Ext.ux.grid.ColumnHeaderGroup.prototype.getGroupSpan.call(this.view,s,f),l=Ext.ux.grid.ColumnHeaderGroup.prototype.getGroupSpan.call(this.view,s,r),f=e.col;return(r=l.col+(o=="after"?l.colspan:0),r>=e.col&&r<=e.col+e.colspan)?!1:(h=Ext.ux.grid.ColumnHeaderGroup.prototype.getGroupSpan.call(this.view,s-1,f),r<h.col||r>h.col+h.colspan)?!1:{r:u,px:c,pt:o,row:s,oldIndex:f,newIndex:r,colspan:e.colspan}}});Ext.ns("Ext.ux.grid");Ext.ux.grid.CheckColumn=Ext.extend(Ext.grid.Column,{processEvent:function(n,t,i,r,u){var f,e,o;return n=="mousedown"?(f=i.store.getAt(r),e=f.data[this.dataIndex],f.set(this.dataIndex,!e),o={grid:i,record:f,field:this.dataIndex,value:!e,originalValue:e,row:r,column:u},i.fireEvent("afteredit",o),!1):Ext.grid.ActionColumn.superclass.processEvent.apply(this,arguments)},renderer:function(n,t){return t.css+=" x-grid3-check-col-td",String.format('<div class="x-grid3-check-col{0}">&#160;<\/div>',n?"-on":"")},init:Ext.emptyFn});Ext.preg("checkcolumn",Ext.ux.grid.CheckColumn);Ext.grid.CheckColumn=Ext.ux.grid.CheckColumn;Ext.grid.Column.types.checkcolumn=Ext.ux.grid.CheckColumn;Ext.namespace("Ext.ux");Ext.ux.FormViewport=Ext.extend(Ext.Container,{initComponent:function(){Ext.ux.FormViewport.superclass.initComponent.call(this);document.getElementsByTagName("html")[0].className+=" x-viewport";this.el=this.renderTo!=""?Ext.get(this.renderTo):Ext.get(document.forms[0]);this.el.addClass("formviewport");this.el.setHeight=Ext.emptyFn;this.el.setWidth=Ext.emptyFn;this.el.setSize=Ext.emptyFn;this.el.dom.scroll="no";this.allowDomMove=!1;this.autoWidth=!0;this.autoHeight=!0;Ext.EventManager.onWindowResize(this.fireResize,this);this.renderTo=this.el},fireResize:function(n,t){this.fireEvent("resize",this,n,t,n,t)}});Ext.reg("formviewport",Ext.ux.FormViewport),function(){var n=Ext.Toolbar;Ext.ux.SimplePagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,pageIndex:0,recordCount:0,pageCount:0,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",initComponent:function(){var t=[this.first=new n.Button({tooltip:this.firstText,overflowText:this.firstText,iconCls:"x-tbar-page-first",disabled:!0,handler:this.onClick,scope:this}),this.prev=new n.Button({tooltip:this.prevText,overflowText:this.prevText,iconCls:"x-tbar-page-prev",disabled:!0,handler:this.onClick,scope:this}),"-",this.beforePageText,this.inputItem=new Ext.form.NumberField({cls:"x-tbar-page-number",allowDecimals:!1,allowNegative:!1,enableKeyEvents:!0,selectOnFocus:!0,submitValue:!1,listeners:{scope:this,keydown:this.onPagingKeyDown,blur:this.onPagingBlur}}),this.afterTextItem=new n.TextItem({text:String.format(this.afterPageText,1)}),"-",this.next=new n.Button({tooltip:this.nextText,iconCls:"x-tbar-page-next",disabled:!0,handler:this.onClick,scope:this}),this.last=new n.Button({tooltip:this.lastText,iconCls:"x-tbar-page-last",disabled:!0,handler:this.onClick,scope:this})],i=this.items||this.buttons||[];this.items=this.prependButtons?i.concat(t):t.concat(i);delete this.buttons;this.displayInfo&&(this.items.push("->"),this.items.push(this.displayItem=new n.TextItem({})));Ext.ux.SimplePagingToolbar.superclass.initComponent.call(this);this.on("afterlayout",this.onFirstLayout,this,{single:!0})},load:function(n){Ext.apply(this,n);this.onLoad()},onFirstLayout:function(){this.onLoad()},onLoad:function(){var t=this.getPageData(),n=t.activePage,i=t.pages;this.afterTextItem.setText(String.format(this.afterPageText,t.pages));this.inputItem.setValue(n);this.first.setDisabled(n==1);this.prev.setDisabled(n==1);this.next.setDisabled(n==i);this.last.setDisabled(n==i);this.updateInfo()},updateInfo:function(){var t,n;this.displayItem&&(t="",this.recordCount==0?t=this.emptyMsg:(n=(this.pageIndex+1)*this.pageSize,n=n<this.recordCount?n:this.recordCount,t=String.format(this.displayMsg,this.pageIndex*this.pageSize+1,n,this.recordCount)),this.displayItem.setText(t))},getPageData:function(){return{total:this.recordCount,activePage:this.pageIndex+1,pages:this.pageCount<=0?1:this.pageCount}},readPage:function(n){var t=this.inputItem.getValue(),i;return!t||isNaN(i=parseInt(t,10))?(this.inputItem.setValue(n.activePage),!1):i},onPagingFocus:function(){this.inputItem.select()},onPagingBlur:function(){this.inputItem.setValue(this.getPageData().activePage)},onPagingKeyDown:function(n,t){var r=t.getKey(),u=this.getPageData(),i,f;if(r==t.RETURN){if(t.stopEvent(),i=this.readPage(u),i!==!1){i=Math.min(Math.max(1,i),u.pages)-1;this.onLoadPage(i)}}else r==t.HOME||r==t.END?(t.stopEvent(),i=r==t.HOME?1:u.pages,n.setValue(i)):(r==t.UP||r==t.PAGEUP||r==t.DOWN||r==t.PAGEDOWN)&&(t.stopEvent(),(i=this.readPage(u))&&(f=t.shiftKey?10:1,(r==t.DOWN||r==t.PAGEDOWN)&&(f*=-1),i+=f,i>=1&i<=u.pages&&n.setValue(i)))},onClick:function(n){var t;switch(n){case this.first:this.onLoadPage(0);break;case this.prev:t=this.pageIndex-1;t=t<0?0:t;this.onLoadPage(t);break;case this.next:t=this.pageIndex+1;t=t>=this.pageCount?this.pageCount-1:t;this.onLoadPage(t);break;case this.last:this.onLoadPage(this.pageCount-1)}},onLoadPage:function(){},onDestroy:function(){Ext.ux.SimplePagingToolbar.superclass.onDestroy.call(this)}})}();Ext.reg("ux-simplepaging",Ext.ux.SimplePagingToolbar);JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function o(n){return e.lastIndex=0,e.test(n)?'"'+n.replace(e,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function u(i,f){var s,l,h,a,v=n,c,e=f[i];e&&typeof e=="object"&&typeof e.toJSON=="function"&&(e=e.toJSON(i));typeof t=="function"&&(e=t.call(f,i,e));switch(typeof e){case"string":return o(e);case"number":return isFinite(e)?String(e):"null";case"boolean":case"null":return String(e);case"object":if(!e)return"null";if(n+=r,c=[],Object.prototype.toString.apply(e)==="[object Array]"){for(a=e.length,s=0;s<a;s+=1)c[s]=u(s,e)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=u(l,e),h&&c.push(o(l)+(n?": ":":")+h));else for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&(h=u(l,e),h&&c.push(o(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,r,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",r="",typeof e=="number")for(o=0;o<e;o+=1)r+=" ";else typeof e=="string"&&(r=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return u("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(n,t){var r,u,i=n[t];if(i&&typeof i=="object")for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(u=walk(i,r),u!==undefined?i[r]=u:delete i[r]);return reviver.call(n,t,i)}var j;if(text=String(text),f.lastIndex=0,f.test(text)&&(text=text.replace(f,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse");})}();Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(n){var f="",e,t,i,s,h,o,r,u=0;for(n=Base64._utf8_encode(n);u<n.length;)e=n.charCodeAt(u++),t=n.charCodeAt(u++),i=n.charCodeAt(u++),s=e>>2,h=(e&3)<<4|t>>4,o=(t&15)<<2|i>>6,r=i&63,isNaN(t)?o=r=64:isNaN(i)&&(r=64),f=f+this._keyStr.charAt(s)+this._keyStr.charAt(h)+this._keyStr.charAt(o)+this._keyStr.charAt(r);return f},decode:function(n){var t="",e,o,s,h,u,r,f,i=0;for(n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<n.length;)h=this._keyStr.indexOf(n.charAt(i++)),u=this._keyStr.indexOf(n.charAt(i++)),r=this._keyStr.indexOf(n.charAt(i++)),f=this._keyStr.indexOf(n.charAt(i++)),e=h<<2|u>>4,o=(u&15)<<4|r>>2,s=(r&3)<<6|f,t=t+String.fromCharCode(e),r!=64&&(t=t+String.fromCharCode(o)),f!=64&&(t=t+String.fromCharCode(s));return Base64._utf8_decode(t)},_utf8_encode:function(n){var i,r,t;for(n=n.replace(/\r\n/g,"\n"),i="",r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i+=String.fromCharCode(t):t>127&&t<2048?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(t&63|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(t&63|128));return i},_utf8_decode:function(n){for(var r="",t=0,i=c1=c2=0;t<n.length;)i=n.charCodeAt(t),i<128?(r+=String.fromCharCode(i),t++):i>191&&i<224?(c2=n.charCodeAt(t+1),r+=String.fromCharCode((i&31)<<6|c2&63),t+=2):(c2=n.charCodeAt(t+1),c3=n.charCodeAt(t+2),r+=String.fromCharCode((i&15)<<12|(c2&63)<<6|c3&63),t+=3);return r}};X=function(n){return Ext.getCmp(n)};X.state=function(n,t){X.util.setXState(n,t)};X.enable=function(n){X.util.enableSubmitControl(n)};X.disable=function(n){X.util.disableSubmitControl(n)};X.target=function(n){return X.util.getTargetWindow(n)};X.alert=function(){X.util.alert.apply(window,arguments)};X.init=function(){typeof onInit=="function"&&onInit()};X.ready=function(){typeof onReady=="function"&&onReady()};X.ajaxReady=function(){typeof onAjaxReady=="function"&&onAjaxReady()};X.stop=function(){var n=arguments.callee.caller.arguments[0]||window.event;X.util.stopEventPropagation(n)};X.confirm=function(){X.util.confirm.apply(null,arguments)};X.toggle=function(n,t){Ext.get(n).toggleClass(t)},function(){X.util={alertTitle:"Alert Dialog",confirmTitle:"Confirm Dialog",formAlertMsg:"Please provide valid value for {0}!",formAlertTitle:"Form Invalid",loading:"Loading...",ddlTPL:'<tpl for="."><div class="x-combo-list-item <tpl if="!enabled">x-combo-list-item-disable<\/tpl>">{prefix}{text}<\/div><\/tpl>',init:function(n,t,i,r,u,f,e,o){if(Ext.QuickTips.init(!1),X.ajax.hookPostBack(),X.global_enable_ajax=o,X.global_enable_ajax_loading=f,X.global_ajax_loading_type=e,X.ajaxLoadingDefault=Ext.get(X.util.appendLoadingNode()),X.ajaxLoadingMask=new Ext.LoadMask(Ext.getBody(),{msg:X.util.loading}),X.form_upload_file=!1,X.global_disable_ajax=!1,X.window_default_group=new Ext.WindowGroup,X.window_default_group.zseed=6e3,X.util.setHiddenFieldValue("X_CHANGED","false"),document.forms[0].autocomplete="off",Ext.form.Field){var s=Ext.form.Field.prototype;s.msgTarget=n;s.labelWidth=t;s.labelSeparator=i;s.autoFitErrors=!1}r&&Ext.getBody().addClass("bigfont");(Ext.isIE6||Ext.isIE7)&&(Ext.BLANK_IMAGE_URL=u)},setXState:function(n,t){if(n&&n.x_state){var i,u,r;typeof t.CssClass!="undefined"&&(u=t.CssClass,i=n.x_state.CssClass,i||(i=n.initialConfig.cls),r=n.el,r.removeClass(i),r.addClass(u));typeof t.FormItemClass!="undefined"&&(u=t.FormItemClass,i=n.x_state.FormItemClass,i||(i=n.initialConfig.itemCls),r=n.el.findParent(".x-form-item",10,!0),r.removeClass(i),r.addClass(u));Ext.apply(n.x_state,t)}},stopEventPropagation:function(n){n=n||window.event;typeof n.cancelBubble=="boolean"?n.cancelBubble=!0:n.stopPropagation()},bind:function(n,t){return function(){return n.apply(t,arguments)}},replace:function(n,t){var r=Ext.get(n),i;r&&(i=r.wrap().update(t),i.first().insertBefore(i),i.remove())},removePageLoading:function(n){n?(Ext.get("loading").remove(),Ext.get("loading-mask").fadeOut({remove:!0})):(Ext.get("loading").remove(),Ext.get("loading-mask").remove())},stripHtmlTags:function(n){return n.replace(/<[^>]*>/g,"")},alert:function(n,t,i,r){t=t||X.util.alertTitle;i=i||Ext.MessageBox.INFO;Ext.MessageBox.show({title:t,msg:n,buttons:Ext.MessageBox.OK,icon:i,fn:function(n){n==="ok"&&typeof r=="function"&&r.call(window)}})},appendLoadingNode:function(){return X.util.appendFormNode({tag:"div",cls:"x-ajax-loading",html:X.util.loading})},appendFormNode:function(n){return Ext.DomHelper.append(document.forms[0],n)},setHiddenFieldValue:function(n,t){var i=Ext.get(n);i?i.dom.value=t:(X.util.appendFormNode({tag:"input",type:"hidden",id:n,name:n}),Ext.get(n).dom.value=t)},removeHiddenField:function(n){var t=Ext.get(n);t&&t.remove()},getHiddenFieldValue:function(n){var t=Ext.get(n);return t?t.getValue():null},disableSubmitControl:function(n){X(n).disable();X.util.setHiddenFieldValue("X_TARGET",n)},enableSubmitControl:function(n){X(n).enable();X.util.setHiddenFieldValue("X_TARGET","")},updateViewState:function(n,t,i){var u,r;typeof t=="boolean"&&(i=t,t=-1);u="__VIEWSTATE";i&&(u="__VIEWSTATE_GZ");r=X.util.getHiddenFieldValue(u);Ext.type(t)=="number"&&t>0?t<r.length&&(r=r.substr(0,t)):r="";X.util.setHiddenFieldValue(u,r+n)},updateEventValidation:function(n){X.util.setHiddenFieldValue("__EVENTVALIDATION",n)},setPageStateChanged:function(){var n=Ext.get("X_CHANGED");n&&n.getValue()=="false"&&(n.dom.value="true")},isPageStateChanged:function(){var n=Ext.get("X_CHANGED");return n&&n.getValue()=="true"?!0:!1},validForms:function(n,t,i){for(var s=X.util.getTargetWindow(t),e=!0,u=null,f,o,r=0;r<n.length;r++)f=X(n[r]).x_isValid(),f[0]||(e=!1,u==null&&(u=f[1]));return e?!0:(i&&(o=String.format(X.util.formAlertMsg,u.fieldLabel),s.X.util.alert(o,X.util.formAlertTitle,Ext.MessageBox.INFO)),!1)},isHiddenFieldContains:function(n,t){var i,r;return t+="",i=Ext.get(n).dom.value,i===""?!1:(r=i.split(","),r.indexOf(t)>=0?!0:!1)},addValueToHiddenField:function(n,t){var r,i;t+="";r=Ext.get(n).dom.value;r==""?Ext.get(n).dom.value=t+"":(i=r.split(","),i.indexOf(t)<0&&(i.push(t),Ext.get(n).dom.value=i.join(",")))},removeValueFromHiddenField:function(n,t){var r,i;t+="";r=Ext.get(n).dom.value;r!=""&&(i=r.split(","),i.indexOf(t)>=0&&(i=i.remove(t),Ext.get(n).dom.value=i.join(",")))},getHiddenFieldValue:function(n){var t=Ext.get(n);return t?t.dom.value:""},getFormFieldValue:function(n){return n.getXType()=="datefield"?n.value:n.getValue()},getTargetWindow:function(n){var t=window;return n==="_self"?t=window:n==="_parent"?t=parent:n==="_top"&&(t=top),t},preloadImages:function(n){for(var i=[],t=0;t<n.length;t++)i[t]=new Image,i[t].src=n[t]},hasCSS:function(n){return!!Ext.get(n)},addCSS:function(n,t){var r=Ext.get(n),i,u,f;r&&Ext.removeNode(r.dom);i=document.createElement("style");i.setAttribute("type","text/css");i.setAttribute("id",n);i.styleSheet?i.styleSheet.cssText=t:(u=document.createTextNode(t),i.appendChild(u));f=document.getElementsByTagName("head")[0];f.appendChild(i)},isObjectEmpty:function(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0},arrayToObject:function(n){var t={};return Ext.each(n,function(n){t[n]=!0}),t},hideScrollbar:function(){Ext.isIE?window.document.body.scroll="no":window.document.body.style.overflow="hidden"},addMainTab:function(n,t,i,r,u,f,e){var s,o,c,h,l,a;typeof t!="string"&&(e=r,f=i,i=t.attributes.href,u=t.attributes.icon,r=t.text,t=t.id);u&&(s=u.replace(/\W/ig,"_"),X.util.hasCSS(s)||(o=[],o.push("."),o.push(s),o.push('{background-image:url("'),o.push(u),o.push('")}'),X.util.addCSS(s,o.join(""))));c=n.getTab(t);c?(n.setActiveTab(c),e&&(a=c.body.query("iframe")[0],a&&a.contentWindow.location.reload())):(h={id:t,url:i,title:r,closable:!0,bodyStyle:"padding:0px;"},u&&(h.iconCls=s),f&&(l=f.apply(window,[h]),l&&(h.tbar=l)),n.addTab(h))},initTreeTabStrip:function(n,t,i,r,u,f){function s(n){n.on("click",function(n,f){if(n.isLeaf()){f.stopEvent();var e=n.attributes.href;r&&(window.location.hash="#"+e);X.util.addMainTab(t,n,i,u)}})}var o,e;n.getXType()==="panel"?n.items.each(function(n){var t=n.items.itemAt(0);t&&t.getXType()==="treepanel"&&s(t)}):n.getXType()==="treepanel"&&s(n);t.on("tabchange",function(n,t){var u="#"+(t.url||""),i,e;u!==window.location.hash&&(r&&(window.location.hash=u),f&&(i=t.body.query("iframe")[0],i&&(e=i.contentWindow.location.href,/^http(s?):\/\//.test(e)&&i.contentWindow.location.reload())))});if(o=window.location.hash.substr(1),o){e=!1;function h(n,r){var f,u,s,r,h;if(!e&&r.hasChildNodes())for(s=r.childNodes,f=0;f<s.length;f++)if(u=s[f],u.isLeaf()){if(u.attributes.href===o){h=u.getPath();n.expandPath(h);n.selectPath(h);X.util.addMainTab(t,u,i);e=!0;return}}else arguments.callee(n,u)}n.getXType()==="panel"?n.items.each(function(n){var t=n.items.itemAt(0);if(t&&t.getXType()==="treepanel"&&(h(t,t.getRootNode()),e))return n.expand(),!1}):n.getXType()==="treepanel"&&h(n,n.getRootNode())}},resolveCheckBoxGroup:function(n,t,i){var o=[],r,l,s,f,u,h,a,e,c;if(u=t.X_Items,h=t.SelectedValueArray,a=t.SelectedValue,u&&u.length>0)for(r=0,l=u.length;r<l;r++)s=u[r],f=s[1],e=!1,i?(e=a===f?!0:!1,c=n):(h&&(e=h.indexOf(f)>=0?!0:!1),c=n+"_"+r),o.push({inputValue:f,boxLabel:s[0],name:c,checked:e});else o.push({inputValue:"tobedeleted",boxLabel:"&nbsp;",name:"tobedeleted"});return o},checkGroupLastTime:function(n){var t=n+"_lastupdatetime",i=X.util[t];return X.util[t]=new Date,typeof i=="undefined"?!0:new Date-i<100?!1:!0},getMessageBoxIcon:function(n){var t=Ext.MessageBox.WARNING;return n==="info"?t=Ext.MessageBox.INFO:n==="warning"?t=Ext.MessageBox.WARNING:n==="question"?t=Ext.MessageBox.QUESTION:n==="error"&&(t=Ext.MessageBox.ERROR),t},confirm:function(n,t,i,r,u,f){var e=X.util.getTargetWindow(n),o=X.util.getMessageBoxIcon(f);e.Ext.MessageBox.show({title:t||X.util.confirmTitle,msg:i,buttons:Ext.MessageBox.OKCANCEL,icon:o,fn:function(n){if(n=="cancel")if(u)new Function(u)();else return!1;else if(r)new Function(r)();else return!1}})}}}(),function(){function e(){return typeof X.control_enable_ajax=="undefined"?X.global_enable_ajax:X.control_enable_ajax}function t(){return typeof X.control_enable_ajax_loading=="undefined"?X.global_enable_ajax_loading:X.control_enable_ajax_loading}function i(){return typeof X.control_ajax_loading_type=="undefined"?X.global_ajax_loading_type:X.control_ajax_loading_type}function o(){var n,t,i;typeof X.util.beforeAjaxPostBackScript=="function"&&X.util.beforeAjaxPostBackScript();n=Ext.encode(u());Ext.isIE6||Ext.isIE7?(X.util.setHiddenFieldValue("X_STATE_URI","true"),n=encodeURIComponent(n)):n=Base64.encode(n);X.util.setHiddenFieldValue("X_STATE",n);e()?(X.control_enable_ajax=undefined,X.util.setHiddenFieldValue("X_AJAX","true"),t=document.location.href,i=t.indexOf("#"),i>=0&&(t=t.substring(0,i)),Ext.Ajax.request({form:theForm.id,url:t,isUpload:X.form_upload_file,success:function(n){var t=n.responseText,i;t&&(i=t.substr(0,4),i.toLowerCase()==="<pre"&&(t=t.replace(/<\/?pre[^>]*>/ig,""),t=decodeURIComponent(t)),new Function(t)());X.ajaxReady()},failure:function(n){var t=X.util.getHiddenFieldValue("X_TARGET");t&&X.enable(t);c(n)},callback:function(){X.util.setHiddenFieldValue("X_AJAX","false")}})):(X.control_enable_ajax=undefined,X.util.setHiddenFieldValue("X_AJAX","false"),theForm.submit())}function s(n,t){window.setTimeout(function(){theForm.onsubmit&&theForm.onsubmit()==!1||(theForm.__EVENTTARGET.value=n,theForm.__EVENTARGUMENT.value=t,o())},100)}function h(n,t){if(n){var i=n.contentWindow.document;i&&(i.open(),i.write(t),i.close())}}function c(n){if(n.isTimeout){X.util.alert(X.ajax.timeoutErrorMsg);return}if(!n.responseText){X.util.alert(String.format(X.ajax.errorMsg,n.statusText,n.status));return}X.ajax.errorWindow||(X.ajax.errorWindow=new Ext.Window({id:"FINEUI_ERROR",renderTo:window.body,width:550,height:350,border:!0,animCollapse:!0,collapsible:!1,collapsed:!1,closeAction:"hide",plain:!1,modal:!0,draggable:!0,minimizable:!1,minHeight:100,minWidth:200,resizable:!0,maximizable:!0,closable:!0}));X.ajax.errorWindow.show();X.ajax.errorWindow.body.dom.innerHTML=X.wnd.createIFrameHtml("about:blank","FINEUI_ERROR");X.ajax.errorWindow.setTitle(String.format(X.ajax.errorMsg,n.statusText,n.status));h(X.ajax.errorWindow.body.query("iframe")[0],n.responseText)}function u(){var n={};return Ext.ComponentMgr.all.each(function(t){var i,r;t.isXType&&(i=t.x_state,i&&Ext.isObject(i)&&(r=l(t,i),X.util.isObjectEmpty(r)||(n[t.id]=r)))}),n}function l(n,t){function i(t,i){X.util.setHiddenFieldValue(n.id+"_"+t,i)}function u(t){X.util.removeHiddenField(n.id+"_"+t)}function f(n){var t=n+"_GZ";r[t]?delete r[n]:delete r[t]}var r={},e,o,s,h,c;return Ext.apply(r,t),n.isXType("menucheckitem")&&i("Checked",n.checked),n.isXType("panel")&&i("Collapsed",n.collapsed),n.isXType("datepicker")&&i("SelectedDate",n.getValue().format(n.initialConfig.format)),n.isXType("button")&&n.initialConfig.enableToggle&&i("Pressed",n.pressed),n.isXType("grid")&&(n.isXType("editorgrid")?(i("SelectedCell",n.x_getSelectedCell().join(",")),e=n.x_getNewAddedRows(),e.length>0?i("NewAddedRows",e.join(",")):u("NewAddedRows"),o=n.x_getModifiedData(),o.length>0?i("ModifiedData",Ext.encode(o)):u("ModifiedData")):i("SelectedRowIndexArray",n.x_getSelectedRows().join(",")),s=n.x_getDeletedRows(),s.length>0?i("DeletedRows",s.join(",")):u("DeletedRows"),h=n.x_getHiddenColumns(),h.length>0?i("HiddenColumnIndexArray",h.join(",")):u("HiddenColumnIndexArray"),c=n.x_getStates(),c.length>0?i("States",Ext.encode(c)):u("States"),f("X_Rows")),(n.isXType("combo")||n.isXType("checkboxgroup")||n.isXType("radiogroup"))&&f("X_Items"),n.isXType("field")&&f("Text"),n.isXType("treepanel")&&(i("ExpandedNodes",n.x_getExpandedNodes(n.getRootNode().childNodes).join(",")),i("CheckedNodes",n.x_getCheckedNodes().join(",")),i("SelectedNodeIDArray",n.x_getSelectedNodes().join(",")),f("X_Nodes")),n.isXType("tabpanel")&&i("ActiveTabIndex",n.x_getActiveTabIndex()),n.x_type&&n.x_type==="tab"&&i("Hidden",n.tabEl.style.display==="none"),r}function a(t){n>0&&(t==="default"?(X.ajaxLoadingDefault.setStyle("left",(Ext.getBody().getWidth()-X.ajaxLoadingDefault.getWidth())/2+"px"),X.ajaxLoadingDefault.show()):X.ajaxLoadingMask.show())}function f(t){n<=0&&(n=0,t==="default"?X.ajaxLoadingDefault.hide():X.ajaxLoadingMask.hide())}var r,n;X.ajax={timeoutErrorMsg:"Request timeout, please refresh the page and try again!",errorMsg:"Error! {0} ({1})",errorWindow:null,hookPostBack:function(){typeof __doPostBack!="undefined"&&(__doPostBack=s)}};r=Ext.lib.Ajax.serializeForm;Ext.lib.Ajax.serializeForm=function(n){for(var i,t=r(n),f,u=0;u<n.elements.length;u++)i=n.elements[u],i.type==="submit"&&(f=encodeURIComponent(i.name)+"="+encodeURIComponent(i.value),t=t.indexOf(f)==0?t.replace(f,""):t.replace("&"+f,""));return t};X.ajax.getXState=u;n=0;Ext.Ajax.on("beforerequest",function(){n++;t()&&Ext.defer(a,100,window,[i()])});Ext.Ajax.on("requestcomplete",function(){n--;t()&&Ext.defer(f,100,window,[i()]);X.control_enable_ajax_loading=undefined;X.control_ajax_loading_type=undefined});Ext.Ajax.on("requestexception",function(){n--;t()&&Ext.defer(f,100,window,[i()]);X.control_enable_ajax_loading=undefined;X.control_ajax_loading_type=undefined})}(),function(){function t(n,t){var r=n.height-n.height/1.618-t.height/2,i;return r<0&&(r=0),i=(n.width-t.width)/2,i<0&&(i=0),{left:i,top:r}}function i(n,t){var r=(n.height-t.height)/2,i;return r<0&&(r=0),i=(n.width-t.width)/2,i<0&&(i=0),{left:i,top:r}}function n(n,t){return'<iframe frameborder="0" style="overflow:auto;height:100%;width:100%;" name="'+t+'" src="'+n+'"><\/iframe>'}X.wnd={closeButtonTooltip:"Close this window",formModifiedConfirmTitle:"Close Confrim",formModifiedConfirmMsg:"Current form has been modified.<br/><br/>Abandon changes?",createIFrameHtml:function(t,i){return n(t,i)},show:function(n,r,u,f,e,o,s){var h=X.util.getTargetWindow(n.x_property_target),c=n.x_property_guid,l,p,a,v,y;if(window.frameElement&&h!==window&&(h.X[c]||(l=c+"_wrapper",h.Ext.get(l)?h.Ext.get(l).dom.innerHTML="":h.X.util.appendFormNode('<div class="x-window-wrapper" id="'+l+'"><\/div>'),p=Ext.apply({},{renderTo:l,manager:h.X.window_default_group,id:c,x_property_window:window,x_property_ext_window:n},n.initialConfig),h.X[c]=new h.Ext.Window(p)),n=h.X[c]),r!==""&&X.wnd.updateIFrameNode(n,r),u!=""&&n.setTitle(u),a=h.window.Ext.getBody().getViewSize(),Ext.get(s).dom.value="false",n.show(),f!==""&&e!==""?n.setPosition(parseInt(f,10),parseInt(e,10)):(v=n.getSize(),y=o?t(a,v):i(a,v),n.setPosition(y.left,y.top)),n.maximizable){X.wnd.fixMaximize(n);h.Ext.EventManager.onWindowResize(function(){X.wnd.fixMaximize(n)})}},getRealWindow:function(n,t,i){var r=X.util.getTargetWindow(t);return window.frameElement&&r!==window&&(n=r.X[i]),n},hide:function(n,t,i,r,u){var f=X.wnd.getRealWindow(n,t,u);Ext.get(r).dom.value="true";i&&(f.body.first().dom.src="about:blank",f.x_iframe_url="about:blank");f.hide()},maximize:function(n,t,i){var r=X.wnd.getRealWindow(n,t,i);r.maximize()},minimize:function(n,t,i){var r=X.wnd.getRealWindow(n,t,i);r.minimize()},restore:function(n,t,i){var r=X.wnd.getRealWindow(n,t,i);r.restore()},fixMaximize:function(n){if(n.maximized){var i=X.util.getTargetWindow(n.x_property_target),t=i.window.Ext.getBody().getViewSize();n.setSize(t.width,t.height);n.setPosition(0,0)}},updateIFrameNode:function(t,i){var r=!1;t&&t.x_iframe&&(i&&t.x_iframe_url!==i&&(t.x_iframe_url=i,r=!0),t.x_iframe_loaded?r&&(t.body.first().dom.src=t.x_iframe_url):window.setTimeout(function(){t.body&&(t.x_iframe_loaded=!0,t.body.dom.innerHTML=n(t.x_iframe_url,t.x_iframe_name))},0))},confirmFormModified:function(n){X.util.isPageStateChanged()?Ext.MessageBox.show({title:X.wnd.formModifiedConfirmTitle,msg:X.wnd.formModifiedConfirmMsg,buttons:Ext.MessageBox.OKCANCEL,icon:"ext-mb-warning",fn:function(t){if(t=="cancel")return!1;n.apply(window,arguments)}}):n.apply(window,arguments)},extWindowIFrameFormModifiedConfirm:function(n,t){var i=X.wnd.getIFrameWindowObject(n);i.X?i.X.wnd.confirmFormModified(t):n.x_hide()},getIFrameWindowObject:function(n){window.frameElement&&n.x_property_show_in_parent&&(n=parent.X[n.x_property_guid]);var t=Ext.query("iframe",n.body.dom);return t.length===0?window:t[0].contentWindow},getActiveWindow:function(){var t=parent.window,n=parent.X.window_default_group.getActive();return n.x_property_window&&(t=n.x_property_window,n=n.x_property_ext_window),[n,t]},writeBackValue:function(){for(var t=X.wnd.getActiveWindow(),i=t[0].x_property_save_state_control_client_ids,r=Math.min(i.length,arguments.length),n=0;n<r;n++)t[1].Ext.getCmp(i[n]).setValue(arguments[n])}}}();Ext.override(Ext.Component,{x_setDisabled:function(){this.setDisabled(!this.x_state.Enabled)},x_setVisible:function(){this.setVisible(!this.x_state.Hidden)}});Ext.override(Ext.Panel,{x_isValid:function(){var t=!0,n=null;return this.hidden||this.items.each(function(i){if(!i.hidden)if(i.isXType("field"))i.validate()||(t=!1,n==null&&(n=i));else if(i.items){var r=i.x_isValid();r[0]||(t=!1,n==null&&(n=r[1]))}}),[t,n]},x_reset:function(){this.items.each(function(n){n.isXType("field")?n.reset():n.items&&(validResult=this.x_reset())})},x_setCollapse:function(){var n=this.x_state.Collapsed;n?this.collapse(!0):this.expand(!0)},x_setTitle:function(){this.setTitle(this.x_state.Title)}});Ext.form.Field&&Ext.override(Ext.form.Field,{initComponent:Ext.form.Field.prototype.initComponent.createSequence(function(){this.enableBubble("change")}),x_setValue:function(n){n=n||this.x_state.Text;this.setValue(n)},x_setLabel:function(n){this.label&&this.label.update&&this.label.update(n||this.x_state.Label)}});Ext.menu.CheckItem&&Ext.override(Ext.menu.CheckItem,{x_setChecked:function(){this.setChecked(this.x_state.Checked,!0)}});Ext.form.Checkbox&&Ext.override(Ext.form.Checkbox,{x_setValue:function(){this.setValue(this.x_state.Checked)}});Ext.form.Radio&&Ext.override(Ext.form.Radio,{x_setValue:function(){this.setValue(this.x_state.Checked)}});Ext.form.RadioGroup&&Ext.override(Ext.form.RadioGroup,{x_setValue:function(n){typeof n=="undefined"&&(n=this.x_state.SelectedValue);this.setValue(n)}});Ext.form.CheckboxGroup&&Ext.override(Ext.form.CheckboxGroup,{x_reloadData:function(n,t){var i=this.ownerCt,r=Ext.apply(this.initialConfig,{x_state:this.x_state,items:X.util.resolveCheckBoxGroup(n,this.x_state,t)}),u;i?(u=i.items.indexOf(this),i.remove(this,!0),t?i.insert(u,new Ext.form.RadioGroup(r)):i.insert(u,new Ext.form.CheckboxGroup(r)),i.doLayout()):(this.destroy(),t?new Ext.form.RadioGroup(r):new Ext.form.CheckboxGroup(r))},x_toBeDeleted:function(){var n=this.items.items[0];n&&n.inputValue==="tobedeleted"&&(n.destroy(),this.items.remove(n))},x_setValue:function(n){var i=n||this.x_state.SelectedValueArray,t=[];this.eachItem(function(n){i.indexOf(n.getRawValue())===-1?t.push(!1):t.push(!0)});this.setValue(t)}});Ext.form.ComboBox&&Ext.override(Ext.form.ComboBox,{displayField:"text",valueField:"value",x_setValue:function(n){typeof n=="undefined"&&(n=this.x_state.SelectedValue);this.setValue(n)},x_loadData:function(n){n=n||this.x_state.X_Items;n&&this.store.loadData(X.simulateTree.transform(n))},x_getTextByValue:function(n,t){var i,u,r;for(t=t||this.x_state.X_Items,n+="",i=0,u=t.length;i<u;i++)if(r=t[i],r[0]===n)return r[1];return""}});Ext.Button&&Ext.override(Ext.Button,{x_setTooltip:function(){this.setTooltip(this.x_state.ToolTip)},x_toggle:function(){this.toggle(this.x_state.Pressed)},x_setText:function(){this.setText(this.x_state.Text)}});Ext.grid.RowNumberer&&(X.originalRowNumbererRenderer=Ext.grid.RowNumberer.prototype.renderer,Ext.override(Ext.grid.RowNumberer,{renderer:function(n,t,i,r){var u=X.originalRowNumbererRenderer.call(this,n,t,i,r);return this.x_paging_enabled&&this.x_paging&&(u+=this.x_paging.pageIndex*this.x_paging.pageSize),u}}));Ext.data.Store&&Ext.override(Ext.data.Store,{pruneModifiedRecords:!0});Ext.grid.GridPanel&&Ext.override(Ext.grid.GridPanel,{x_getData:function(){var f=this,e=this.x_state.X_Rows.Values,t=this.x_tpls,i,r,u,n;return typeof t=="undefined"&&(t=this.x_getTpls()),i={},r=document.createElement("div"),r.innerHTML=t,Ext.each(r.childNodes,function(n){i[n.id]=n.outerHTML.replace(/\r?\n\s*/ig,"")}),u=[],Ext.each(e,function(t){n=[];Ext.each(t,function(t){if(t.substr(0,7)==="#@TPL@#"){var r=f.id+"_"+t.substr(7);n.push('<div id="'+r+'_container">'+i[r]+"<\/div>")}else n.push(t)});u.push(n)}),u},x_getTpls:function(){var n,t=Ext.get(this.id+"_tpls");return t?(n=t.dom.innerHTML,t.remove(),this["data-last-tpls"]=n):n=this["data-last-tpls"],n},x_updateTpls:function(n){typeof n=="undefined"&&(n=this.x_getTpls());var t=document.createElement("div");t.innerHTML=n;Ext.each(t.childNodes,function(n){var t=n.id;Ext.get(t+"_container").dom.innerHTML=n.outerHTML})},x_loadData:function(){var n=this.x_getData(),t=this.getBottomToolbar(),i,r,u;if(t){if(i=[],t.x_databasePaging)i=n;else for(r=t.x_startRowIndex;r<=t.x_endRowIndex;r++)i.push(n[r]);n=i}u=this.getStore();u.loadData(n);this.x_initRecordIDs()},x_initRecordIDs:function(){var n=this;this.x_recordIDs=[];this.getStore().each(function(t){n.x_recordIDs.push(t.id)})},x_expandAllRows:function(){if(this.plugins&&this.plugins[0]&&this.plugins[0].id==="expander")for(var n=0,t=this.store.getCount();n<t;n++)this.plugins[0].expandRow(n)},x_collapseAllRows:function(){if(this.plugins&&this.plugins[0]&&this.plugins[0].id==="expander")for(var n=0,t=this.store.getCount();n<t;n++)this.plugins[0].collapseRow(n)},x_enableTextSelection:function(){for(var t=Ext.DomQuery.select("div[unselectable=on]",this.el.dom),n=0,i=t.length;n<i;n++)Ext.get(t[n]).set({unselectable:"off"}).removeClass("x-unselectable")},x_getSelectedCount:function(){var t=0,n=this.getSelectionModel();return n.hasSelection()&&(t=n.getCount?n.getCount():1),t},x_selectRows:function(n){n=n||this.x_state.SelectedRowIndexArray||[];var t=this.getSelectionModel();t.selectRows&&t.selectRows(n)},x_getSelectedRows:function(){var n=[],t=this.getSelectionModel(),i,r;return t.getSelections&&(i=t.getSelections(),r=this.getStore(),Ext.each(i,function(t){n.push(r.indexOfId(t.id))})),n},x_selectCell:function(n){n=n||this.x_state.SelectedCell||[];var t=this.getSelectionModel();t.select&&(n.length===2?t.select(n[0],n[1]):t.clearSelections())},x_getSelectedCell:function(){var n=[],t=this.getSelectionModel();return t.getSelectedCell&&(n=t.getSelectedCell(),n||(n=[])),n},x_getHiddenColumns:function(){var n=[],t=this.getColumnModel(),i=t.config;return Ext.each(i,function(i,r){t.isHidden(r)&&n.push(r)}),n},x_updateColumnsHiddenStatus:function(n){n=n||this.x_state.HiddenColumnIndexArray||[];var t=this.getColumnModel(),i=t.config;Ext.each(i,function(i,r){n.indexOf(r)!==-1?t.setHidden(r,!0):t.setHidden(r,!1)})},x_setSortIcon:function(n,t){function r(n){return typeof n=="number"?u.select(".x-grid3-hd-row .x-grid3-cell.x-grid3-td-"+i[n].id):u.select(".x-grid3-hd-row .x-grid3-cell.x-grid3-hd")}var u=Ext.get(this.id),i=this.x_getColumns();r().removeClass(["sort-asc","sort-desc"]);Ext.each(i,function(n,t){n.sortable&&r(t).addClass("cursor-pointer")});n>=0&&n<i.length&&r(n).addClass("sort-"+t.toLowerCase())},x_getColumns:function(){var n=[],t=this.getColumnModel().config;return Ext.each(t,function(t){t.id!=="numberer"&&t.id!=="checker"&&n.push(t)}),n},x_getStates:function(){function o(n){var i=e.select(".x-grid3-row .x-grid3-td-"+u[n].id+" .box-grid-checkbox"),t=[];return i.each(function(n){n.hasClass("unchecked")?t.push(!1):t.push(!0)}),t}var e=Ext.get(this.id),u=this.x_getColumns(),n=[],t,i,r,f;if(Ext.each(u,function(t,i){t.x_persistState&&t.x_persistStateType==="checkbox"&&n.push(o(i))}),i=[],n.length>0)for(f=n[0].length,t=0;t<f;t++)r=[],Ext.each(n,function(n){r.push(n[t])}),i.push(r);return i},x_commitChanges:function(){this.getStore().commitChanges();this.x_initRecordIDs()},x_deleteSelected:function(){var u=this,t=this.getStore(),n=this.getSelectionModel(),i,r;n.getSelections?(i=n.getSelections(),Ext.each(i,function(n){t.remove(n)})):n.getSelectedCell&&(r=n.getSelectedCell(),t.removeAt(r[0]))},x_addNewRecord:function(n,t){var i=this.getStore(),u=i.recordType,r=new u(n);this.stopEditing();t?i.add(r):i.insert(0,r);this.startEditing(0,0)},x_getNewAddedRows:function(){var t=this,n=[];return this.getStore().each(function(i,r){t.x_recordIDs.indexOf(i.id)<0&&n.push(r)}),n},x_getDeletedRows:function(){var n=[],t=[];return(this.getStore().each(function(t){n.push(t.id)}),n.join("")===this.x_recordIDs.join(""))?t:(Ext.each(this.x_recordIDs,function(i,r){n.indexOf(i)<0&&t.push(r)}),t)},x_getModifiedData:function(){function c(n){var t=h[n];return t.editor||t.xtype==="checkcolumn"?!0:!1}var r,s,p=this.x_getColumns(),h={},o,n;Ext.each(p,function(n){h[n.id]=n});var f=[],l=this.getStore(),a=l.getModifiedRecords(),u,t,v,i,y,e;for(r=0,s=a.length;r<s;r++)if(i=a[r],y=i.id,u=l.indexOf(i),t=i.data,!(u<0))if(e=this.x_recordIDs.indexOf(y),e<0){for(n in t)c(n)||delete t[n];f.push([u,-1,t])}else{o={};for(n in i.modified)c(n)&&(v=t[n],o[n]=v);f.push([u,e,o])}return f.sort(function(n,t){return n[0]-t[0]})}});Ext.tree.TreePanel&&Ext.override(Ext.tree.TreePanel,{x_loadData:function(){var t=this.x_state.X_Nodes,i=this.x_tranformData(t),n=this.getRootNode();n&&n.removeAll();this.setRootNode(new Ext.tree.AsyncTreeNode({id:this.id+"_root",children:i}))},x_tranformData:function(n){for(var f=this,u=0,e=[],t,i,r,u=0;u<n.length;u++)t=n[u],i={},i.text=t[0],i.leaf=!!t[1],i.id=t[2],i.disabled=!t[3],!t[4]||(i.checked=!!t[5]),t[1]||(i.expanded=!!t[6]),t[9]&&(i.href=t[9],i.hrefTarget=t[8]),t[12]&&(i.icon=t[12]),i.qtip=t[13],i.singleClickExpand=!!t[14],i.listeners={},t[3]||(i.listeners.beforeclick=function(){return!1}),!t[4]||!t[17]||(i.listeners.checkchange=function(n,t){var i="Check$"+n.id+"$"+t;__doPostBack(f.name,i)}),r="",t[15]&&(r+=t[15]+";"),!t[16]||(r+="__doPostBack('"+f.name+"', 'Command$"+i.id+"$"+t[18]+"$"+t[19]+"');"),r&&(i.listeners.click=new Function("node",r)),t[20]&&t[20].length>0&&(i.children=f.x_tranformData(t[20])),e.push(i);return e},x_getExpandedNodes:function(n){for(var r=0,u=this,i=[],t;r<n.length;r++)t=n[r],t.isExpanded()&&i.push(t.id),t.hasChildNodes()&&(i=i.concat(u.x_getExpandedNodes(t.childNodes)));return i},x_getCheckedNodes:function(){return this.getChecked("id")},x_getSelectedNodes:function(){var n=this.getSelectionModel(),t=[],i;return n.constructor===Ext.tree.MultiSelectionModel?Ext.each(n.getSelectedNodes(),function(n){t.push(n.id)}):(i=n.getSelectedNode(),i&&t.push(i.id)),t},x_selectNodes:function(){for(var t=this.x_state.SelectedNodeIDArray||[],i=this.getSelectionModel(),n=0,n=0;n<t.length;n++)i.select(this.getNodeById(t[n]),null,!0)}});Ext.PagingToolbar&&Ext.override(Ext.PagingToolbar,{x_hideRefresh:function(){var n=this.items.indexOf(this.refresh);this.items.get(n-1).hide();this.refresh.hide()}});Ext.TabPanel&&Ext.override(Ext.TabPanel,{x_autoPostBackTabsContains:function(n){var t=this.x_state.X_AutoPostBackTabs;return t.indexOf(n)!==-1},x_setActiveTab:function(){var n=this.x_state.ActiveTabIndex;this.setActiveTab(n)},x_getActiveTabIndex:function(){return this.items.indexOf(this.getActiveTab())},activateNextTab:function(n){if(n==this.activeTab){var t=this.stack.next();t&&this.setActiveTab(t);(t=this.items.find(function(n){return n.tabEl.style.display!=="none"}))?this.setActiveTab(t):this.setActiveTab(null)}},hideTab:function(n){n=this.getComponent(n);this.hideTabStripItem(n);n.hide();this.activateNextTab(n)},showTab:function(n){n=this.getComponent(n);this.unhideTabStripItem(n)},addTab:function(n,t,i,r){var u={},f;return typeof n=="string"?Ext.apply(u,{id:n,title:i,closable:r,url:t}):Ext.apply(u,n),Ext.apply(u,{x_dynamic_added_tab:!0,html:'<iframe id="'+u.id+'" name="'+u.id+'" src="'+u.url+'" frameborder="0" style="height:100%;width:100%;overflow:auto;"><\/iframe>'}),f=this.add(u),this.activate(f),f},getTab:function(n){return this.getItem(n)},removeTab:function(n){this.remove(n)}});Ext.Window&&Ext.override(Ext.Window,{box_hide:function(){this.x_hide()},box_hide_refresh:function(){this.x_hide_refresh()},box_hide_postback:function(n){this.x_hide_postback(n)},box_show:function(n,t){this.x_show(n,t)},x_hide:function(){X.wnd.hide(this,this.x_property_target,this.x_iframe,this.id+"_Hidden",this.x_property_guid)},x_hide_refresh:function(){this.x_hide();window.location.reload()},x_hide_postback:function(n){n=n||"";this.x_hide();__doPostBack(this.name,n)},x_show:function(n,t){X.wnd.show(this,n,t,this.x_property_left,this.x_property_top,this.x_property_position,this.id+"_Hidden")},x_maximize:function(){X.wnd.maximize(this,this.x_property_target,this.x_property_guid)},x_minimize:function(){X.wnd.minimize(this,this.x_property_target,this.x_property_guid)},x_restore:function(){X.wnd.restore(this,this.x_property_target,this.x_property_guid)}});Ext.dd.DragDrop&&(X.originalIsValidHandleChild=Ext.dd.DragDrop.prototype.isValidHandleChild,Ext.dd.DragDrop.prototype.isValidHandleChild=function(n){return!n||!n.nodeName?!1:X.originalIsValidHandleChild.apply(this,[n])});Ext.grid.GridPanel&&(Ext.grid.GridView.prototype.focusCell=function(n,t,i){this.syncFocusEl(this.ensureVisible(n,t,i));var r=this.focusEl;r.focus()});Ext.ux.grid&&Ext.ux.grid.ColumnHeaderGroup&&(Ext.ux.grid.ColumnHeaderGroup.prototype.getGroupStyle=function(n,t){for(var r=0,f=!0,u,i=t,e=t+n.colspan;i<e;i++)this.cm.isHidden(i)||(u=this.cm.getColumnWidth(i),typeof u=="number"&&(r+=u),f=!1);return{width:(Ext.isBorderBox||Ext.isWebKit&&!Ext.isSafari2&&!Ext.isChrome?r:Math.max(r-this.borderWidth,0))+"px",hidden:f}}),function(){function n(n,t,i){if(t>0)for(var r=i-1;r>=0;r--)if(n[r]==t-1)return r;return-1}function t(n,t,i){if(i<n.length-1)for(var r=i+1;r<n.length;r++){if(n[r]==t)return!0;if(n[r]<t)return!1}return!1}function i(n,t,i){for(var r=0;r<i-1;r++)t=n[t.parentIndex];return t}function r(n,t,r){if(r===1)return t.littleBrother?'<div class="x-elbow"><\/div>':'<div class="x-elbow-end"><\/div>';var u=i(n,t,r);return u.littleBrother?'<div class="x-elbow-line"><\/div>':'<div class="x-elbow-empty"><\/div>'}function u(n,t){for(var u=n[t],e=u.level,f=[],i=e;i>0;i--)f.push(r(n,u,i));return f.join("")}X.simulateTree={transform:function(i){var r,f,e;return!i.length||i[0].length<4?i:(r=[],Ext.each(i,function(n){r.push(n[3])}),f=[],Ext.each(r,function(i,u){f.push({level:i,parentIndex:n(r,i,u),littleBrother:t(r,i,u)})}),e=[],Ext.each(i,function(n,t){e.push([n[0],n[1],n[2],u(f,t)])}),e)}}}(),function(){var n=Ext.util.Format;X.format={capitalize:n.capitalize,date:n.dateRenderer,ellipsis:function(t){return function(i){return n.ellipsis(i,t,!1)}},fileSize:n.fileSize,htmlEncode:n.htmlEncode,htmlDecode:n.htmlDecode,lowercase:n.lowercase,uppercase:n.uppercase,nl2br:n.nl2br,number:n.numberRenderer,stripScripts:n.stripScripts,stripTags:n.stripTags,trim:n.trim,usMoney:n.usMoney}}()